function ED(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function oS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ey={exports:{}},pu={},ty={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function xD(){if(Dx)return qe;Dx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=_&&$[_]||$["@@iterator"],typeof $=="function"?$:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function b($,Z,ge){this.props=$,this.context=Z,this.refs=S,this.updater=ge||T}b.prototype.isReactComponent={},b.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},b.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function j(){}j.prototype=b.prototype;function U($,Z,ge){this.props=$,this.context=Z,this.refs=S,this.updater=ge||T}var B=U.prototype=new j;B.constructor=U,A(B,b.prototype),B.isPureReactComponent=!0;var G=Array.isArray,X=Object.prototype.hasOwnProperty,ne={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R($,Z,ge){var _e,Ne={},Pe=null,he=null;if(Z!=null)for(_e in Z.ref!==void 0&&(he=Z.ref),Z.key!==void 0&&(Pe=""+Z.key),Z)X.call(Z,_e)&&!P.hasOwnProperty(_e)&&(Ne[_e]=Z[_e]);var Ue=arguments.length-2;if(Ue===1)Ne.children=ge;else if(1<Ue){for(var Ye=Array(Ue),xt=0;xt<Ue;xt++)Ye[xt]=arguments[xt+2];Ne.children=Ye}if($&&$.defaultProps)for(_e in Ue=$.defaultProps,Ue)Ne[_e]===void 0&&(Ne[_e]=Ue[_e]);return{$$typeof:n,type:$,key:Pe,ref:he,props:Ne,_owner:ne.current}}function N($,Z){return{$$typeof:n,type:$.type,key:Z,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function O($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ge){return Z[ge]})}var F=/\/+/g;function D($,Z){return typeof $=="object"&&$!==null&&$.key!=null?O(""+$.key):Z.toString(36)}function Ie($,Z,ge,_e,Ne){var Pe=typeof $;(Pe==="undefined"||Pe==="boolean")&&($=null);var he=!1;if($===null)he=!0;else switch(Pe){case"string":case"number":he=!0;break;case"object":switch($.$$typeof){case n:case e:he=!0}}if(he)return he=$,Ne=Ne(he),$=_e===""?"."+D(he,0):_e,G(Ne)?(ge="",$!=null&&(ge=$.replace(F,"$&/")+"/"),Ie(Ne,Z,ge,"",function(xt){return xt})):Ne!=null&&(L(Ne)&&(Ne=N(Ne,ge+(!Ne.key||he&&he.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+$)),Z.push(Ne)),1;if(he=0,_e=_e===""?".":_e+":",G($))for(var Ue=0;Ue<$.length;Ue++){Pe=$[Ue];var Ye=_e+D(Pe,Ue);he+=Ie(Pe,Z,ge,Ye,Ne)}else if(Ye=v($),typeof Ye=="function")for($=Ye.call($),Ue=0;!(Pe=$.next()).done;)Pe=Pe.value,Ye=_e+D(Pe,Ue++),he+=Ie(Pe,Z,ge,Ye,Ne);else if(Pe==="object")throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return he}function je($,Z,ge){if($==null)return $;var _e=[],Ne=0;return Ie($,_e,"","",function(Pe){return Z.call(ge,Pe,Ne++)}),_e}function Ce($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(ge){($._status===0||$._status===-1)&&($._status=1,$._result=ge)},function(ge){($._status===0||$._status===-1)&&($._status=2,$._result=ge)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var Se={current:null},W={transition:null},J={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:W,ReactCurrentOwner:ne};function oe(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:je,forEach:function($,Z,ge){je($,function(){Z.apply(this,arguments)},ge)},count:function($){var Z=0;return je($,function(){Z++}),Z},toArray:function($){return je($,function(Z){return Z})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},qe.Component=b,qe.Fragment=t,qe.Profiler=s,qe.PureComponent=U,qe.StrictMode=r,qe.Suspense=d,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,qe.act=oe,qe.cloneElement=function($,Z,ge){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var _e=A({},$.props),Ne=$.key,Pe=$.ref,he=$._owner;if(Z!=null){if(Z.ref!==void 0&&(Pe=Z.ref,he=ne.current),Z.key!==void 0&&(Ne=""+Z.key),$.type&&$.type.defaultProps)var Ue=$.type.defaultProps;for(Ye in Z)X.call(Z,Ye)&&!P.hasOwnProperty(Ye)&&(_e[Ye]=Z[Ye]===void 0&&Ue!==void 0?Ue[Ye]:Z[Ye])}var Ye=arguments.length-2;if(Ye===1)_e.children=ge;else if(1<Ye){Ue=Array(Ye);for(var xt=0;xt<Ye;xt++)Ue[xt]=arguments[xt+2];_e.children=Ue}return{$$typeof:n,type:$.type,key:Ne,ref:Pe,props:_e,_owner:he}},qe.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},qe.createElement=R,qe.createFactory=function($){var Z=R.bind(null,$);return Z.type=$,Z},qe.createRef=function(){return{current:null}},qe.forwardRef=function($){return{$$typeof:u,render:$}},qe.isValidElement=L,qe.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:Ce}},qe.memo=function($,Z){return{$$typeof:p,type:$,compare:Z===void 0?null:Z}},qe.startTransition=function($){var Z=W.transition;W.transition={};try{$()}finally{W.transition=Z}},qe.unstable_act=oe,qe.useCallback=function($,Z){return Se.current.useCallback($,Z)},qe.useContext=function($){return Se.current.useContext($)},qe.useDebugValue=function(){},qe.useDeferredValue=function($){return Se.current.useDeferredValue($)},qe.useEffect=function($,Z){return Se.current.useEffect($,Z)},qe.useId=function(){return Se.current.useId()},qe.useImperativeHandle=function($,Z,ge){return Se.current.useImperativeHandle($,Z,ge)},qe.useInsertionEffect=function($,Z){return Se.current.useInsertionEffect($,Z)},qe.useLayoutEffect=function($,Z){return Se.current.useLayoutEffect($,Z)},qe.useMemo=function($,Z){return Se.current.useMemo($,Z)},qe.useReducer=function($,Z,ge){return Se.current.useReducer($,Z,ge)},qe.useRef=function($){return Se.current.useRef($)},qe.useState=function($){return Se.current.useState($)},qe.useSyncExternalStore=function($,Z,ge){return Se.current.useSyncExternalStore($,Z,ge)},qe.useTransition=function(){return Se.current.useTransition()},qe.version="18.3.1",qe}var Ox;function bp(){return Ox||(Ox=1,ty.exports=xD()),ty.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function TD(){if(Mx)return pu;Mx=1;var n=bp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var g,_={},v=null,T=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(T=d.ref);for(g in d)r.call(d,g)&&!o.hasOwnProperty(g)&&(_[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)_[g]===void 0&&(_[g]=d[g]);return{$$typeof:e,type:u,key:v,ref:T,props:_,_owner:s.current}}return pu.Fragment=t,pu.jsx=l,pu.jsxs=l,pu}var Lx;function ID(){return Lx||(Lx=1,ey.exports=TD()),ey.exports}var m=ID(),Yh={},ny={exports:{}},jn={},ry={exports:{}},sy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function CD(){return jx||(jx=1,(function(n){function e(W,J){var oe=W.length;W.push(J);e:for(;0<oe;){var $=oe-1>>>1,Z=W[$];if(0<s(Z,J))W[$]=J,W[oe]=Z,oe=$;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],oe=W.pop();if(oe!==J){W[0]=oe;e:for(var $=0,Z=W.length,ge=Z>>>1;$<ge;){var _e=2*($+1)-1,Ne=W[_e],Pe=_e+1,he=W[Pe];if(0>s(Ne,oe))Pe<Z&&0>s(he,Ne)?(W[$]=he,W[Pe]=oe,$=Pe):(W[$]=Ne,W[_e]=oe,$=_e);else if(Pe<Z&&0>s(he,oe))W[$]=he,W[Pe]=oe,$=Pe;else break e}}return J}function s(W,J){var oe=W.sortIndex-J.sortIndex;return oe!==0?oe:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,_=null,v=3,T=!1,A=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(W){for(var J=t(p);J!==null;){if(J.callback===null)r(p);else if(J.startTime<=W)r(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function G(W){if(S=!1,B(W),!A)if(t(d)!==null)A=!0,Ce(X);else{var J=t(p);J!==null&&Se(G,J.startTime-W)}}function X(W,J){A=!1,S&&(S=!1,j(R),R=-1),T=!0;var oe=v;try{for(B(J),_=t(d);_!==null&&(!(_.expirationTime>J)||W&&!O());){var $=_.callback;if(typeof $=="function"){_.callback=null,v=_.priorityLevel;var Z=$(_.expirationTime<=J);J=n.unstable_now(),typeof Z=="function"?_.callback=Z:_===t(d)&&r(d),B(J)}else r(d);_=t(d)}if(_!==null)var ge=!0;else{var _e=t(p);_e!==null&&Se(G,_e.startTime-J),ge=!1}return ge}finally{_=null,v=oe,T=!1}}var ne=!1,P=null,R=-1,N=5,L=-1;function O(){return!(n.unstable_now()-L<N)}function F(){if(P!==null){var W=n.unstable_now();L=W;var J=!0;try{J=P(!0,W)}finally{J?D():(ne=!1,P=null)}}else ne=!1}var D;if(typeof U=="function")D=function(){U(F)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,je=Ie.port2;Ie.port1.onmessage=F,D=function(){je.postMessage(null)}}else D=function(){b(F,0)};function Ce(W){P=W,ne||(ne=!0,D())}function Se(W,J){R=b(function(){W(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){A||T||(A=!0,Ce(X))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(W){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var oe=v;v=J;try{return W()}finally{v=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var oe=v;v=W;try{return J()}finally{v=oe}},n.unstable_scheduleCallback=function(W,J,oe){var $=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?$+oe:$):oe=$,W){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=oe+Z,W={id:g++,callback:J,priorityLevel:W,startTime:oe,expirationTime:Z,sortIndex:-1},oe>$?(W.sortIndex=oe,e(p,W),t(d)===null&&W===t(p)&&(S?(j(R),R=-1):S=!0,Se(G,oe-$))):(W.sortIndex=Z,e(d,W),A||T||(A=!0,Ce(X))),W},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(W){var J=v;return function(){var oe=v;v=J;try{return W.apply(this,arguments)}finally{v=oe}}}})(sy)),sy}var Vx;function SD(){return Vx||(Vx=1,ry.exports=CD()),ry.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function bD(){if(Fx)return jn;Fx=1;var n=bp(),e=SD();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function v(i){return d.call(_,i)?!0:d.call(g,i)?!1:p.test(i)?_[i]=!0:(g[i]=!0,!1)}function T(i,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,a,c,f){if(a===null||typeof a>"u"||T(i,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(i,a,c,f,y,w,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=w,this.removeEmptyString=C}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];b[a]=new S(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(j,U);b[a]=new S(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(j,U);b[a]=new S(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(j,U);b[a]=new S(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,a,c,f){var y=b.hasOwnProperty(a)?b[a]:null;(y!==null?y.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,c,y,f)&&(c=null),f||y===null?v(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):y.mustUseProperty?i[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,f=y.attributeNamespace,c===null?i.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,f?i.setAttributeNS(f,a,c):i.setAttribute(a,c))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),ne=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Object.assign,$;function Z(i){if($===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var ge=!1;function _e(i,a){if(!i||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var f=Q}Reflect.construct(i,[],a)}else{try{a.call()}catch(Q){f=Q}i.call(a.prototype)}else{try{throw Error()}catch(Q){f=Q}i()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),w=f.stack.split(`
`),C=y.length-1,M=w.length-1;1<=C&&0<=M&&y[C]!==w[M];)M--;for(;1<=C&&0<=M;C--,M--)if(y[C]!==w[M]){if(C!==1||M!==1)do if(C--,M--,0>M||y[C]!==w[M]){var V=`
`+y[C].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=C&&0<=M);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?Z(i):""}function Ne(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=_e(i.type,!1),i;case 11:return i=_e(i.type.render,!1),i;case 1:return i=_e(i.type,!0),i;default:return""}}function Pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case ne:return"Portal";case N:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case Ie:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case je:return a=i.displayName||null,a!==null?a:Pe(i.type)||"Memo";case Ce:a=i._payload,i=i._init;try{return Pe(i(a))}catch{}}return null}function he(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ye(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xt(i){var a=Ye(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){f=""+C,w.call(this,C)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(C){f=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function kn(i){i._valueTracker||(i._valueTracker=xt(i))}function Nn(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=Ye(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function In(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function mi(i,a){var c=a.checked;return oe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function La(i,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=Ue(a.value!=null?a.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function gi(i,a){a=a.checked,a!=null&&B(i,"checked",a,!1)}function pe(i,a){gi(i,a);var c=Ue(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Ve(i,a.type,c):a.hasOwnProperty("defaultValue")&&Ve(i,a.type,Ue(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function be(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Ve(i,a,c){(a!=="number"||In(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var it=Array.isArray;function Kt(i,a,c,f){if(i=i.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=a.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Ue(c),a=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function xc(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Tc(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(it(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:Ue(c)}}function Ld(i,a){var c=Ue(a.value),f=Ue(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function yi(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ic(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ic(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var _i,jd=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,y){MSApp.execUnsafeLocalFunction(function(){return i(a,c,f,y)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(_i=_i||document.createElement("div"),_i.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=_i.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ao(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vd=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(i){Vd.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),vi[a]=vi[i]})});function wi(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||vi.hasOwnProperty(i)&&vi[i]?(""+a).trim():a+"px"}function Va(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,y=wi(c,a[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,y):i[c]=y}}var Cc=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cr(i,a){if(a){if(Cc[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Fa(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ei=null;function Ua(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Rs=null,As=null,bt=null;function Sc(i){if(i=Zc(i)){if(typeof Rs!="function")throw Error(t(280));var a=i.stateNode;a&&(a=dh(a),Rs(i.stateNode,i.type,a))}}function xi(i){As?bt?bt.push(i):bt=[i]:As=i}function Ti(){if(As){var i=As,a=bt;if(bt=As=null,Sc(i),a)for(i=0;i<a.length;i++)Sc(a[i])}}function Fd(i,a){return i(a)}function Ud(){}var Hr=!1;function zd(i,a,c){if(Hr)return i(a,c);Hr=!0;try{return Fd(i,a,c)}finally{Hr=!1,(As!==null||bt!==null)&&(Ud(),Ti())}}function ko(i,a){var c=i.stateNode;if(c===null)return null;var f=dh(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Ii=!1;if(u)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{Ii=!1}function Bd(i,a,c,f,y,w,C,M,V){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(c,Q)}catch(se){this.onError(se)}}var ks=!1,qr=null,za=!1,ur=null,$d={onError:function(i){ks=!0,qr=i}};function Wd(i,a,c,f,y,w,C,M,V){ks=!1,qr=null,Bd.apply($d,arguments)}function bc(i,a,c,f,y,w,C,M,V){if(Wd.apply(this,arguments),ks){if(ks){var Q=qr;ks=!1,qr=null}else throw Error(t(198));za||(za=!0,ur=Q)}}function Sr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function Rc(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Hd(i){if(Sr(i)!==i)throw Error(t(188))}function qd(i){var a=i.alternate;if(!a){if(a=Sr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,f=a;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return Hd(y),i;if(w===f)return Hd(y),a;w=w.sibling}throw Error(t(188))}if(c.return!==f.return)c=y,f=w;else{for(var C=!1,M=y.child;M;){if(M===c){C=!0,c=y,f=w;break}if(M===f){C=!0,f=y,c=w;break}M=M.sibling}if(!C){for(M=w.child;M;){if(M===c){C=!0,c=w,f=y;break}if(M===f){C=!0,f=w,c=y;break}M=M.sibling}if(!C)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Gd(i){return i=qd(i),i!==null?No(i):null}function No(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=No(i);if(a!==null)return a;i=i.sibling}return null}var Ac=e.unstable_scheduleCallback,Ba=e.unstable_cancelCallback,Po=e.unstable_shouldYield,Ns=e.unstable_requestPaint,gt=e.unstable_now,Nm=e.unstable_getCurrentPriorityLevel,$a=e.unstable_ImmediatePriority,kc=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,Nc=e.unstable_LowPriority,Wa=e.unstable_IdlePriority,Oo=null,Wn=null;function Kd(i){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Oo,i,void 0,(i.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Mo,Gr=Math.log,dr=Math.LN2;function Mo(i){return i>>>=0,i===0?32:31-(Gr(i)/dr|0)|0}var Kr=64,Si=4194304;function ot(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ps(i,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,y=i.suspendedLanes,w=i.pingedLanes,C=c&268435455;if(C!==0){var M=C&~y;M!==0?f=ot(M):(w&=C,w!==0&&(f=ot(w)))}else C=c&~y,C!==0?f=ot(C):w!==0&&(f=ot(w));if(f===0)return 0;if(a!==0&&a!==f&&(a&y)===0&&(y=f&-f,w=a&-a,y>=w||y===16&&(w&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)c=31-Hn(a),y=1<<c,f|=i[c],a&=~y;return f}function Lo(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jo(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,w=i.pendingLanes;0<w;){var C=31-Hn(w),M=1<<C,V=y[C];V===-1?((M&c)===0||(M&f)!==0)&&(y[C]=Lo(M,a)):V<=a&&(i.expiredLanes|=M),w&=~M}}function Pc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Dc(){var i=Kr;return Kr<<=1,(Kr&4194240)===0&&(Kr=64),i}function Oc(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Vo(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-Hn(a),i[a]=c}function Pm(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var y=31-Hn(c),w=1<<y;a[y]=0,f[y]=-1,i[y]=-1,c&=~w}}function Mc(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Hn(c),y=1<<f;y&a|i[f]&a&&(i[f]|=a),c&=~y}}var Ze=0;function Qr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Lc,Ha,jc,Vc,Fc,Yr=!1,qa=[],Xr=null,Jr=null,nn=null,Fo=new Map,Ds=new Map,qn=[],Qd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bi(i,a){switch(i){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Fo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(a.pointerId)}}function br(i,a,c,f,y,w){return i===null||i.nativeEvent!==w?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[y]},a!==null&&(a=Zc(a),a!==null&&Ha(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function Yd(i,a,c,f,y){switch(a){case"focusin":return Xr=br(Xr,i,a,c,f,y),!0;case"dragenter":return Jr=br(Jr,i,a,c,f,y),!0;case"mouseover":return nn=br(nn,i,a,c,f,y),!0;case"pointerover":var w=y.pointerId;return Fo.set(w,br(Fo.get(w)||null,i,a,c,f,y)),!0;case"gotpointercapture":return w=y.pointerId,Ds.set(w,br(Ds.get(w)||null,i,a,c,f,y)),!0}return!1}function Ga(i){var a=$o(i.target);if(a!==null){var c=Sr(a);if(c!==null){if(a=c.tag,a===13){if(a=Rc(c),a!==null){i.blockedOn=a,Fc(i.priority,function(){jc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ht(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Ka(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Ei=f,c.target.dispatchEvent(f),Ei=null}else return a=Zc(c),a!==null&&Ha(a),i.blockedOn=c,!1;a.shift()}return!0}function Xd(i,a,c){ht(i)&&c.delete(a)}function Dm(){Yr=!1,Xr!==null&&ht(Xr)&&(Xr=null),Jr!==null&&ht(Jr)&&(Jr=null),nn!==null&&ht(nn)&&(nn=null),Fo.forEach(Xd),Ds.forEach(Xd)}function Ri(i,a){i.blockedOn===a&&(i.blockedOn=null,Yr||(Yr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Dm)))}function Ai(i){function a(y){return Ri(y,i)}if(0<qa.length){Ri(qa[0],i);for(var c=1;c<qa.length;c++){var f=qa[c];f.blockedOn===i&&(f.blockedOn=null)}}for(Xr!==null&&Ri(Xr,i),Jr!==null&&Ri(Jr,i),nn!==null&&Ri(nn,i),Fo.forEach(a),Ds.forEach(a),c=0;c<qn.length;c++)f=qn[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<qn.length&&(c=qn[0],c.blockedOn===null);)Ga(c),c.blockedOn===null&&qn.shift()}var Os=G.ReactCurrentBatchConfig,Ms=!0;function Zr(i,a,c,f){var y=Ze,w=Os.transition;Os.transition=null;try{Ze=1,Uc(i,a,c,f)}finally{Ze=y,Os.transition=w}}function Jd(i,a,c,f){var y=Ze,w=Os.transition;Os.transition=null;try{Ze=4,Uc(i,a,c,f)}finally{Ze=y,Os.transition=w}}function Uc(i,a,c,f){if(Ms){var y=Ka(i,a,c,f);if(y===null)Wm(i,a,f,es,c),bi(i,f);else if(Yd(y,i,a,c,f))f.stopPropagation();else if(bi(i,f),a&4&&-1<Qd.indexOf(i)){for(;y!==null;){var w=Zc(y);if(w!==null&&Lc(w),w=Ka(i,a,c,f),w===null&&Wm(i,a,f,es,c),w===y)break;y=w}y!==null&&f.stopPropagation()}else Wm(i,a,f,null,c)}}var es=null;function Ka(i,a,c,f){if(es=null,i=Ua(f),i=$o(i),i!==null)if(a=Sr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=Rc(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return es=i,null}function Qa(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nm()){case $a:return 1;case kc:return 4;case Do:case Nc:return 16;case Wa:return 536870912;default:return 16}default:return 16}}var Gn=null,Ya=null,Ls=null;function Zd(){if(Ls)return Ls;var i,a=Ya,c=a.length,f,y="value"in Gn?Gn.value:Gn.textContent,w=y.length;for(i=0;i<c&&a[i]===y[i];i++);var C=c-i;for(f=1;f<=C&&a[c-f]===y[w-f];f++);return Ls=y.slice(i,1<f?1-f:void 0)}function Uo(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function ts(){return!0}function zc(){return!1}function fn(i){function a(c,f,y,w,C){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(c=i[M],this[M]=c?c(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ts:zc,this.isPropagationStopped=zc,this}return oe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),a}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=fn(ns),ki=oe({},ns,{view:0,detail:0}),Xa=fn(ki),Ja,Za,Kn,Bo=oe({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Kn&&(Kn&&i.type==="mousemove"?(Ja=i.screenX-Kn.screenX,Za=i.screenY-Kn.screenY):Za=Ja=0,Kn=i),Ja)},movementY:function(i){return"movementY"in i?i.movementY:Za}}),Bc=fn(Bo),eh=oe({},Bo,{dataTransfer:0}),th=fn(eh),el=oe({},ki,{relatedTarget:0}),rn=fn(el),nh=oe({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),rh=fn(nh),Ni=oe({},ns,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),h=fn(Ni),E=oe({},ns,{data:0}),x=fn(E),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Y[i])?!!a[i]:!1}function Be(){return ce}var Pt=oe({},ki,{key:function(i){if(i.key){var a=k[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Uo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?q[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(i){return i.type==="keypress"?Uo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Uo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ut=fn(Pt),jt=oe({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qn=fn(jt),js=oe({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),rs=fn(js),ss=oe({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),tl=fn(ss),$c=oe({},Bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mP=fn($c),gP=[9,13,27,32],Om=u&&"CompositionEvent"in window,Wc=null;u&&"documentMode"in document&&(Wc=document.documentMode);var yP=u&&"TextEvent"in window&&!Wc,C0=u&&(!Om||Wc&&8<Wc&&11>=Wc),S0=" ",b0=!1;function R0(i,a){switch(i){case"keyup":return gP.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function _P(i,a){switch(i){case"compositionend":return A0(a);case"keypress":return a.which!==32?null:(b0=!0,S0);case"textInput":return i=a.data,i===S0&&b0?null:i;default:return null}}function vP(i,a){if(nl)return i==="compositionend"||!Om&&R0(i,a)?(i=Zd(),Ls=Ya=Gn=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return C0&&a.locale!=="ko"?null:a.data;default:return null}}var wP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!wP[i.type]:a==="textarea"}function N0(i,a,c,f){xi(f),a=lh(a,"onChange"),0<a.length&&(c=new zo("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Hc=null,qc=null;function EP(i){Q0(i,0)}function sh(i){var a=al(i);if(Nn(a))return i}function xP(i,a){if(i==="change")return a}var P0=!1;if(u){var Mm;if(u){var Lm="oninput"in document;if(!Lm){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Lm=typeof D0.oninput=="function"}Mm=Lm}else Mm=!1;P0=Mm&&(!document.documentMode||9<document.documentMode)}function O0(){Hc&&(Hc.detachEvent("onpropertychange",M0),qc=Hc=null)}function M0(i){if(i.propertyName==="value"&&sh(qc)){var a=[];N0(a,qc,i,Ua(i)),zd(EP,a)}}function TP(i,a,c){i==="focusin"?(O0(),Hc=a,qc=c,Hc.attachEvent("onpropertychange",M0)):i==="focusout"&&O0()}function IP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return sh(qc)}function CP(i,a){if(i==="click")return sh(a)}function SP(i,a){if(i==="input"||i==="change")return sh(a)}function bP(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Rr=typeof Object.is=="function"?Object.is:bP;function Gc(i,a){if(Rr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!d.call(a,y)||!Rr(i[y],a[y]))return!1}return!0}function L0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function j0(i,a){var c=L0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=L0(c)}}function V0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?V0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function F0(){for(var i=window,a=In();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=In(i.document)}return a}function jm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function RP(i){var a=F0(),c=i.focusedElem,f=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&V0(c.ownerDocument.documentElement,c)){if(f!==null&&jm(c)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=c.textContent.length,w=Math.min(f.start,y);f=f.end===void 0?w:Math.min(f.end,y),!i.extend&&w>f&&(y=f,f=w,w=y),y=j0(c,w);var C=j0(c,f);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),w>f?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var AP=u&&"documentMode"in document&&11>=document.documentMode,rl=null,Vm=null,Kc=null,Fm=!1;function U0(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Fm||rl==null||rl!==In(f)||(f=rl,"selectionStart"in f&&jm(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Kc&&Gc(Kc,f)||(Kc=f,f=lh(Vm,"onSelect"),0<f.length&&(a=new zo("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=rl)))}function ih(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var sl={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},Um={},z0={};u&&(z0=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function oh(i){if(Um[i])return Um[i];if(!sl[i])return i;var a=sl[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in z0)return Um[i]=a[c];return i}var B0=oh("animationend"),$0=oh("animationiteration"),W0=oh("animationstart"),H0=oh("transitionend"),q0=new Map,G0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(i,a){q0.set(i,a),o(a,[i])}for(var zm=0;zm<G0.length;zm++){var Bm=G0[zm],kP=Bm.toLowerCase(),NP=Bm[0].toUpperCase()+Bm.slice(1);Pi(kP,"on"+NP)}Pi(B0,"onAnimationEnd"),Pi($0,"onAnimationIteration"),Pi(W0,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(H0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function K0(i,a,c){var f=i.type||"unknown-event";i.currentTarget=c,bc(f,a,void 0,i),i.currentTarget=null}function Q0(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],y=f.event;f=f.listeners;e:{var w=void 0;if(a)for(var C=f.length-1;0<=C;C--){var M=f[C],V=M.instance,Q=M.currentTarget;if(M=M.listener,V!==w&&y.isPropagationStopped())break e;K0(y,M,Q),w=V}else for(C=0;C<f.length;C++){if(M=f[C],V=M.instance,Q=M.currentTarget,M=M.listener,V!==w&&y.isPropagationStopped())break e;K0(y,M,Q),w=V}}}if(za)throw i=ur,za=!1,ur=null,i}function yt(i,a){var c=a[Ym];c===void 0&&(c=a[Ym]=new Set);var f=i+"__bubble";c.has(f)||(Y0(a,i,2,!1),c.add(f))}function $m(i,a,c){var f=0;a&&(f|=4),Y0(c,i,f,a)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Yc(i){if(!i[ah]){i[ah]=!0,r.forEach(function(c){c!=="selectionchange"&&(PP.has(c)||$m(c,!1,i),$m(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ah]||(a[ah]=!0,$m("selectionchange",!1,a))}}function Y0(i,a,c,f){switch(Qa(a)){case 1:var y=Zr;break;case 4:y=Jd;break;default:y=Uc}c=y.bind(null,a,c,i),y=void 0,!Ii||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(a,c,{capture:!0,passive:y}):i.addEventListener(a,c,!0):y!==void 0?i.addEventListener(a,c,{passive:y}):i.addEventListener(a,c,!1)}function Wm(i,a,c,f,y){var w=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var M=f.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(C===4)for(C=f.return;C!==null;){var V=C.tag;if((V===3||V===4)&&(V=C.stateNode.containerInfo,V===y||V.nodeType===8&&V.parentNode===y))return;C=C.return}for(;M!==null;){if(C=$o(M),C===null)return;if(V=C.tag,V===5||V===6){f=w=C;continue e}M=M.parentNode}}f=f.return}zd(function(){var Q=w,se=Ua(c),ie=[];e:{var re=q0.get(i);if(re!==void 0){var fe=zo,ve=i;switch(i){case"keypress":if(Uo(c)===0)break e;case"keydown":case"keyup":fe=ut;break;case"focusin":ve="focus",fe=rn;break;case"focusout":ve="blur",fe=rn;break;case"beforeblur":case"afterblur":fe=rn;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=rs;break;case B0:case $0:case W0:fe=rh;break;case H0:fe=tl;break;case"scroll":fe=Xa;break;case"wheel":fe=mP;break;case"copy":case"cut":case"paste":fe=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Qn}var xe=(a&4)!==0,Dt=!xe&&i==="scroll",H=xe?re!==null?re+"Capture":null:re;xe=[];for(var z=Q,K;z!==null;){K=z;var ae=K.stateNode;if(K.tag===5&&ae!==null&&(K=ae,H!==null&&(ae=ko(z,H),ae!=null&&xe.push(Xc(z,ae,K)))),Dt)break;z=z.return}0<xe.length&&(re=new fe(re,ve,null,c,se),ie.push({event:re,listeners:xe}))}}if((a&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",re&&c!==Ei&&(ve=c.relatedTarget||c.fromElement)&&($o(ve)||ve[Vs]))break e;if((fe||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,fe?(ve=c.relatedTarget||c.toElement,fe=Q,ve=ve?$o(ve):null,ve!==null&&(Dt=Sr(ve),ve!==Dt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(fe=null,ve=Q),fe!==ve)){if(xe=Bc,ae="onMouseLeave",H="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Qn,ae="onPointerLeave",H="onPointerEnter",z="pointer"),Dt=fe==null?re:al(fe),K=ve==null?re:al(ve),re=new xe(ae,z+"leave",fe,c,se),re.target=Dt,re.relatedTarget=K,ae=null,$o(se)===Q&&(xe=new xe(H,z+"enter",ve,c,se),xe.target=K,xe.relatedTarget=Dt,ae=xe),Dt=ae,fe&&ve)t:{for(xe=fe,H=ve,z=0,K=xe;K;K=il(K))z++;for(K=0,ae=H;ae;ae=il(ae))K++;for(;0<z-K;)xe=il(xe),z--;for(;0<K-z;)H=il(H),K--;for(;z--;){if(xe===H||H!==null&&xe===H.alternate)break t;xe=il(xe),H=il(H)}xe=null}else xe=null;fe!==null&&X0(ie,re,fe,xe,!1),ve!==null&&Dt!==null&&X0(ie,Dt,ve,xe,!0)}}e:{if(re=Q?al(Q):window,fe=re.nodeName&&re.nodeName.toLowerCase(),fe==="select"||fe==="input"&&re.type==="file")var Te=xP;else if(k0(re))if(P0)Te=SP;else{Te=IP;var Ae=TP}else(fe=re.nodeName)&&fe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Te=CP);if(Te&&(Te=Te(i,Q))){N0(ie,Te,c,se);break e}Ae&&Ae(i,re,Q),i==="focusout"&&(Ae=re._wrapperState)&&Ae.controlled&&re.type==="number"&&Ve(re,"number",re.value)}switch(Ae=Q?al(Q):window,i){case"focusin":(k0(Ae)||Ae.contentEditable==="true")&&(rl=Ae,Vm=Q,Kc=null);break;case"focusout":Kc=Vm=rl=null;break;case"mousedown":Fm=!0;break;case"contextmenu":case"mouseup":case"dragend":Fm=!1,U0(ie,c,se);break;case"selectionchange":if(AP)break;case"keydown":case"keyup":U0(ie,c,se)}var ke;if(Om)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else nl?R0(i,c)&&(Fe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Fe="onCompositionStart");Fe&&(C0&&c.locale!=="ko"&&(nl||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&nl&&(ke=Zd()):(Gn=se,Ya="value"in Gn?Gn.value:Gn.textContent,nl=!0)),Ae=lh(Q,Fe),0<Ae.length&&(Fe=new x(Fe,i,null,c,se),ie.push({event:Fe,listeners:Ae}),ke?Fe.data=ke:(ke=A0(c),ke!==null&&(Fe.data=ke)))),(ke=yP?_P(i,c):vP(i,c))&&(Q=lh(Q,"onBeforeInput"),0<Q.length&&(se=new x("onBeforeInput","beforeinput",null,c,se),ie.push({event:se,listeners:Q}),se.data=ke))}Q0(ie,a)})}function Xc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function lh(i,a){for(var c=a+"Capture",f=[];i!==null;){var y=i,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=ko(i,c),w!=null&&f.unshift(Xc(i,w,y)),w=ko(i,a),w!=null&&f.push(Xc(i,w,y))),i=i.return}return f}function il(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function X0(i,a,c,f,y){for(var w=a._reactName,C=[];c!==null&&c!==f;){var M=c,V=M.alternate,Q=M.stateNode;if(V!==null&&V===f)break;M.tag===5&&Q!==null&&(M=Q,y?(V=ko(c,w),V!=null&&C.unshift(Xc(c,V,M))):y||(V=ko(c,w),V!=null&&C.push(Xc(c,V,M)))),c=c.return}C.length!==0&&i.push({event:a,listeners:C})}var DP=/\r\n?/g,OP=/\u0000|\uFFFD/g;function J0(i){return(typeof i=="string"?i:""+i).replace(DP,`
`).replace(OP,"")}function ch(i,a,c){if(a=J0(a),J0(i)!==a&&c)throw Error(t(425))}function uh(){}var Hm=null,qm=null;function Gm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,MP=typeof clearTimeout=="function"?clearTimeout:void 0,Z0=typeof Promise=="function"?Promise:void 0,LP=typeof queueMicrotask=="function"?queueMicrotask:typeof Z0<"u"?function(i){return Z0.resolve(null).then(i).catch(jP)}:Km;function jP(i){setTimeout(function(){throw i})}function Qm(i,a){var c=a,f=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(f===0){i.removeChild(y),Ai(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=y}while(c);Ai(a)}function Di(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function eE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ol=Math.random().toString(36).slice(2),is="__reactFiber$"+ol,Jc="__reactProps$"+ol,Vs="__reactContainer$"+ol,Ym="__reactEvents$"+ol,VP="__reactListeners$"+ol,FP="__reactHandles$"+ol;function $o(i){var a=i[is];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Vs]||c[is]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=eE(i);i!==null;){if(c=i[is])return c;i=eE(i)}return a}i=c,c=i.parentNode}return null}function Zc(i){return i=i[is]||i[Vs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function al(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function dh(i){return i[Jc]||null}var Xm=[],ll=-1;function Oi(i){return{current:i}}function _t(i){0>ll||(i.current=Xm[ll],Xm[ll]=null,ll--)}function pt(i,a){ll++,Xm[ll]=i.current,i.current=a}var Mi={},pn=Oi(Mi),Pn=Oi(!1),Wo=Mi;function cl(i,a){var c=i.type.contextTypes;if(!c)return Mi;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=a[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Dn(i){return i=i.childContextTypes,i!=null}function hh(){_t(Pn),_t(pn)}function tE(i,a,c){if(pn.current!==Mi)throw Error(t(168));pt(pn,a),pt(Pn,c)}function nE(i,a,c){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var y in f)if(!(y in a))throw Error(t(108,he(i)||"Unknown",y));return oe({},c,f)}function fh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mi,Wo=pn.current,pt(pn,i),pt(Pn,Pn.current),!0}function rE(i,a,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=nE(i,a,Wo),f.__reactInternalMemoizedMergedChildContext=i,_t(Pn),_t(pn),pt(pn,i)):_t(Pn),pt(Pn,c)}var Fs=null,ph=!1,Jm=!1;function sE(i){Fs===null?Fs=[i]:Fs.push(i)}function UP(i){ph=!0,sE(i)}function Li(){if(!Jm&&Fs!==null){Jm=!0;var i=0,a=Ze;try{var c=Fs;for(Ze=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}Fs=null,ph=!1}catch(y){throw Fs!==null&&(Fs=Fs.slice(i+1)),Ac($a,Li),y}finally{Ze=a,Jm=!1}}return null}var ul=[],dl=0,mh=null,gh=0,hr=[],fr=0,Ho=null,Us=1,zs="";function qo(i,a){ul[dl++]=gh,ul[dl++]=mh,mh=i,gh=a}function iE(i,a,c){hr[fr++]=Us,hr[fr++]=zs,hr[fr++]=Ho,Ho=i;var f=Us;i=zs;var y=32-Hn(f)-1;f&=~(1<<y),c+=1;var w=32-Hn(a)+y;if(30<w){var C=y-y%5;w=(f&(1<<C)-1).toString(32),f>>=C,y-=C,Us=1<<32-Hn(a)+y|c<<y|f,zs=w+i}else Us=1<<w|c<<y|f,zs=i}function Zm(i){i.return!==null&&(qo(i,1),iE(i,1,0))}function eg(i){for(;i===mh;)mh=ul[--dl],ul[dl]=null,gh=ul[--dl],ul[dl]=null;for(;i===Ho;)Ho=hr[--fr],hr[fr]=null,zs=hr[--fr],hr[fr]=null,Us=hr[--fr],hr[fr]=null}var Yn=null,Xn=null,Tt=!1,Ar=null;function oE(i,a){var c=yr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function aE(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Yn=i,Xn=Di(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Yn=i,Xn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=Ho!==null?{id:Us,overflow:zs}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=yr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,Yn=i,Xn=null,!0):!1;default:return!1}}function tg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ng(i){if(Tt){var a=Xn;if(a){var c=a;if(!aE(i,a)){if(tg(i))throw Error(t(418));a=Di(c.nextSibling);var f=Yn;a&&aE(i,a)?oE(f,c):(i.flags=i.flags&-4097|2,Tt=!1,Yn=i)}}else{if(tg(i))throw Error(t(418));i.flags=i.flags&-4097|2,Tt=!1,Yn=i}}}function lE(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Yn=i}function yh(i){if(i!==Yn)return!1;if(!Tt)return lE(i),Tt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Gm(i.type,i.memoizedProps)),a&&(a=Xn)){if(tg(i))throw cE(),Error(t(418));for(;a;)oE(i,a),a=Di(a.nextSibling)}if(lE(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Xn=Di(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Xn=null}}else Xn=Yn?Di(i.stateNode.nextSibling):null;return!0}function cE(){for(var i=Xn;i;)i=Di(i.nextSibling)}function hl(){Xn=Yn=null,Tt=!1}function rg(i){Ar===null?Ar=[i]:Ar.push(i)}var zP=G.ReactCurrentBatchConfig;function eu(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var y=f,w=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(C){var M=y.refs;C===null?delete M[w]:M[w]=C},a._stringRef=w,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function _h(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function uE(i){var a=i._init;return a(i._payload)}function dE(i){function a(H,z){if(i){var K=H.deletions;K===null?(H.deletions=[z],H.flags|=16):K.push(z)}}function c(H,z){if(!i)return null;for(;z!==null;)a(H,z),z=z.sibling;return null}function f(H,z){for(H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function y(H,z){return H=Wi(H,z),H.index=0,H.sibling=null,H}function w(H,z,K){return H.index=K,i?(K=H.alternate,K!==null?(K=K.index,K<z?(H.flags|=2,z):K):(H.flags|=2,z)):(H.flags|=1048576,z)}function C(H){return i&&H.alternate===null&&(H.flags|=2),H}function M(H,z,K,ae){return z===null||z.tag!==6?(z=Kg(K,H.mode,ae),z.return=H,z):(z=y(z,K),z.return=H,z)}function V(H,z,K,ae){var Te=K.type;return Te===P?se(H,z,K.props.children,ae,K.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ce&&uE(Te)===z.type)?(ae=y(z,K.props),ae.ref=eu(H,z,K),ae.return=H,ae):(ae=Bh(K.type,K.key,K.props,null,H.mode,ae),ae.ref=eu(H,z,K),ae.return=H,ae)}function Q(H,z,K,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=Qg(K,H.mode,ae),z.return=H,z):(z=y(z,K.children||[]),z.return=H,z)}function se(H,z,K,ae,Te){return z===null||z.tag!==7?(z=ea(K,H.mode,ae,Te),z.return=H,z):(z=y(z,K),z.return=H,z)}function ie(H,z,K){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Kg(""+z,H.mode,K),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return K=Bh(z.type,z.key,z.props,null,H.mode,K),K.ref=eu(H,null,z),K.return=H,K;case ne:return z=Qg(z,H.mode,K),z.return=H,z;case Ce:var ae=z._init;return ie(H,ae(z._payload),K)}if(it(z)||J(z))return z=ea(z,H.mode,K,null),z.return=H,z;_h(H,z)}return null}function re(H,z,K,ae){var Te=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Te!==null?null:M(H,z,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===Te?V(H,z,K,ae):null;case ne:return K.key===Te?Q(H,z,K,ae):null;case Ce:return Te=K._init,re(H,z,Te(K._payload),ae)}if(it(K)||J(K))return Te!==null?null:se(H,z,K,ae,null);_h(H,K)}return null}function fe(H,z,K,ae,Te){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(K)||null,M(z,H,""+ae,Te);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case X:return H=H.get(ae.key===null?K:ae.key)||null,V(z,H,ae,Te);case ne:return H=H.get(ae.key===null?K:ae.key)||null,Q(z,H,ae,Te);case Ce:var Ae=ae._init;return fe(H,z,K,Ae(ae._payload),Te)}if(it(ae)||J(ae))return H=H.get(K)||null,se(z,H,ae,Te,null);_h(z,ae)}return null}function ve(H,z,K,ae){for(var Te=null,Ae=null,ke=z,Fe=z=0,Xt=null;ke!==null&&Fe<K.length;Fe++){ke.index>Fe?(Xt=ke,ke=null):Xt=ke.sibling;var st=re(H,ke,K[Fe],ae);if(st===null){ke===null&&(ke=Xt);break}i&&ke&&st.alternate===null&&a(H,ke),z=w(st,z,Fe),Ae===null?Te=st:Ae.sibling=st,Ae=st,ke=Xt}if(Fe===K.length)return c(H,ke),Tt&&qo(H,Fe),Te;if(ke===null){for(;Fe<K.length;Fe++)ke=ie(H,K[Fe],ae),ke!==null&&(z=w(ke,z,Fe),Ae===null?Te=ke:Ae.sibling=ke,Ae=ke);return Tt&&qo(H,Fe),Te}for(ke=f(H,ke);Fe<K.length;Fe++)Xt=fe(ke,H,Fe,K[Fe],ae),Xt!==null&&(i&&Xt.alternate!==null&&ke.delete(Xt.key===null?Fe:Xt.key),z=w(Xt,z,Fe),Ae===null?Te=Xt:Ae.sibling=Xt,Ae=Xt);return i&&ke.forEach(function(Hi){return a(H,Hi)}),Tt&&qo(H,Fe),Te}function xe(H,z,K,ae){var Te=J(K);if(typeof Te!="function")throw Error(t(150));if(K=Te.call(K),K==null)throw Error(t(151));for(var Ae=Te=null,ke=z,Fe=z=0,Xt=null,st=K.next();ke!==null&&!st.done;Fe++,st=K.next()){ke.index>Fe?(Xt=ke,ke=null):Xt=ke.sibling;var Hi=re(H,ke,st.value,ae);if(Hi===null){ke===null&&(ke=Xt);break}i&&ke&&Hi.alternate===null&&a(H,ke),z=w(Hi,z,Fe),Ae===null?Te=Hi:Ae.sibling=Hi,Ae=Hi,ke=Xt}if(st.done)return c(H,ke),Tt&&qo(H,Fe),Te;if(ke===null){for(;!st.done;Fe++,st=K.next())st=ie(H,st.value,ae),st!==null&&(z=w(st,z,Fe),Ae===null?Te=st:Ae.sibling=st,Ae=st);return Tt&&qo(H,Fe),Te}for(ke=f(H,ke);!st.done;Fe++,st=K.next())st=fe(ke,H,Fe,st.value,ae),st!==null&&(i&&st.alternate!==null&&ke.delete(st.key===null?Fe:st.key),z=w(st,z,Fe),Ae===null?Te=st:Ae.sibling=st,Ae=st);return i&&ke.forEach(function(wD){return a(H,wD)}),Tt&&qo(H,Fe),Te}function Dt(H,z,K,ae){if(typeof K=="object"&&K!==null&&K.type===P&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var Te=K.key,Ae=z;Ae!==null;){if(Ae.key===Te){if(Te=K.type,Te===P){if(Ae.tag===7){c(H,Ae.sibling),z=y(Ae,K.props.children),z.return=H,H=z;break e}}else if(Ae.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ce&&uE(Te)===Ae.type){c(H,Ae.sibling),z=y(Ae,K.props),z.ref=eu(H,Ae,K),z.return=H,H=z;break e}c(H,Ae);break}else a(H,Ae);Ae=Ae.sibling}K.type===P?(z=ea(K.props.children,H.mode,ae,K.key),z.return=H,H=z):(ae=Bh(K.type,K.key,K.props,null,H.mode,ae),ae.ref=eu(H,z,K),ae.return=H,H=ae)}return C(H);case ne:e:{for(Ae=K.key;z!==null;){if(z.key===Ae)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){c(H,z.sibling),z=y(z,K.children||[]),z.return=H,H=z;break e}else{c(H,z);break}else a(H,z);z=z.sibling}z=Qg(K,H.mode,ae),z.return=H,H=z}return C(H);case Ce:return Ae=K._init,Dt(H,z,Ae(K._payload),ae)}if(it(K))return ve(H,z,K,ae);if(J(K))return xe(H,z,K,ae);_h(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,z!==null&&z.tag===6?(c(H,z.sibling),z=y(z,K),z.return=H,H=z):(c(H,z),z=Kg(K,H.mode,ae),z.return=H,H=z),C(H)):c(H,z)}return Dt}var fl=dE(!0),hE=dE(!1),vh=Oi(null),wh=null,pl=null,sg=null;function ig(){sg=pl=wh=null}function og(i){var a=vh.current;_t(vh),i._currentValue=a}function ag(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function ml(i,a){wh=i,sg=pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(On=!0),i.firstContext=null)}function pr(i){var a=i._currentValue;if(sg!==i)if(i={context:i,memoizedValue:a,next:null},pl===null){if(wh===null)throw Error(t(308));pl=i,wh.dependencies={lanes:0,firstContext:i}}else pl=pl.next=i;return a}var Go=null;function lg(i){Go===null?Go=[i]:Go.push(i)}function fE(i,a,c,f){var y=a.interleaved;return y===null?(c.next=c,lg(a)):(c.next=y.next,y.next=c),a.interleaved=c,Bs(i,f)}function Bs(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var ji=!1;function cg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pE(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function $s(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Vi(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(nt&2)!==0){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,Bs(i,c)}return y=f.interleaved,y===null?(a.next=a,lg(f)):(a.next=y.next,y.next=a),f.interleaved=a,Bs(i,c)}function Eh(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Mc(i,c)}}function mE(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var C={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=C:w=w.next=C,c=c.next}while(c!==null);w===null?y=w=a:w=w.next=a}else y=w=a;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function xh(i,a,c,f){var y=i.updateQueue;ji=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var V=M,Q=V.next;V.next=null,C===null?w=Q:C.next=Q,C=V;var se=i.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==C&&(M===null?se.firstBaseUpdate=Q:M.next=Q,se.lastBaseUpdate=V))}if(w!==null){var ie=y.baseState;C=0,se=Q=V=null,M=w;do{var re=M.lane,fe=M.eventTime;if((f&re)===re){se!==null&&(se=se.next={eventTime:fe,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ve=i,xe=M;switch(re=a,fe=c,xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){ie=ve.call(fe,ie,re);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,re=typeof ve=="function"?ve.call(fe,ie,re):ve,re==null)break e;ie=oe({},ie,re);break e;case 2:ji=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,re=y.effects,re===null?y.effects=[M]:re.push(M))}else fe={eventTime:fe,lane:re,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Q=se=fe,V=ie):se=se.next=fe,C|=re;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;re=M,M=re.next,re.next=null,y.lastBaseUpdate=re,y.shared.pending=null}}while(!0);if(se===null&&(V=ie),y.baseState=V,y.firstBaseUpdate=Q,y.lastBaseUpdate=se,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else w===null&&(y.shared.lanes=0);Yo|=C,i.lanes=C,i.memoizedState=ie}}function gE(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],y=f.callback;if(y!==null){if(f.callback=null,f=c,typeof y!="function")throw Error(t(191,y));y.call(f)}}}var tu={},os=Oi(tu),nu=Oi(tu),ru=Oi(tu);function Ko(i){if(i===tu)throw Error(t(174));return i}function ug(i,a){switch(pt(ru,a),pt(nu,i),pt(os,tu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ja(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=ja(a,i)}_t(os),pt(os,a)}function gl(){_t(os),_t(nu),_t(ru)}function yE(i){Ko(ru.current);var a=Ko(os.current),c=ja(a,i.type);a!==c&&(pt(nu,i),pt(os,c))}function dg(i){nu.current===i&&(_t(os),_t(nu))}var It=Oi(0);function Th(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var hg=[];function fg(){for(var i=0;i<hg.length;i++)hg[i]._workInProgressVersionPrimary=null;hg.length=0}var Ih=G.ReactCurrentDispatcher,pg=G.ReactCurrentBatchConfig,Qo=0,Ct=null,Wt=null,Qt=null,Ch=!1,su=!1,iu=0,BP=0;function mn(){throw Error(t(321))}function mg(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!Rr(i[c],a[c]))return!1;return!0}function gg(i,a,c,f,y,w){if(Qo=w,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ih.current=i===null||i.memoizedState===null?qP:GP,i=c(f,y),su){w=0;do{if(su=!1,iu=0,25<=w)throw Error(t(301));w+=1,Qt=Wt=null,a.updateQueue=null,Ih.current=KP,i=c(f,y)}while(su)}if(Ih.current=Rh,a=Wt!==null&&Wt.next!==null,Qo=0,Qt=Wt=Ct=null,Ch=!1,a)throw Error(t(300));return i}function yg(){var i=iu!==0;return iu=0,i}function as(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ct.memoizedState=Qt=i:Qt=Qt.next=i,Qt}function mr(){if(Wt===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var a=Qt===null?Ct.memoizedState:Qt.next;if(a!==null)Qt=a,Wt=i;else{if(i===null)throw Error(t(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Qt===null?Ct.memoizedState=Qt=i:Qt=Qt.next=i}return Qt}function ou(i,a){return typeof a=="function"?a(i):a}function _g(i){var a=mr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=Wt,y=f.baseQueue,w=c.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}f.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,f=f.baseState;var M=C=null,V=null,Q=w;do{var se=Q.lane;if((Qo&se)===se)V!==null&&(V=V.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:i(f,Q.action);else{var ie={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};V===null?(M=V=ie,C=f):V=V.next=ie,Ct.lanes|=se,Yo|=se}Q=Q.next}while(Q!==null&&Q!==w);V===null?C=f:V.next=M,Rr(f,a.memoizedState)||(On=!0),a.memoizedState=f,a.baseState=C,a.baseQueue=V,c.lastRenderedState=f}if(i=c.interleaved,i!==null){y=i;do w=y.lane,Ct.lanes|=w,Yo|=w,y=y.next;while(y!==i)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function vg(i){var a=mr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,y=c.pending,w=a.memoizedState;if(y!==null){c.pending=null;var C=y=y.next;do w=i(w,C.action),C=C.next;while(C!==y);Rr(w,a.memoizedState)||(On=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,f]}function _E(){}function vE(i,a){var c=Ct,f=mr(),y=a(),w=!Rr(f.memoizedState,y);if(w&&(f.memoizedState=y,On=!0),f=f.queue,wg(xE.bind(null,c,f,i),[i]),f.getSnapshot!==a||w||Qt!==null&&Qt.memoizedState.tag&1){if(c.flags|=2048,au(9,EE.bind(null,c,f,y,a),void 0,null),Yt===null)throw Error(t(349));(Qo&30)!==0||wE(c,a,y)}return y}function wE(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function EE(i,a,c,f){a.value=c,a.getSnapshot=f,TE(a)&&IE(i)}function xE(i,a,c){return c(function(){TE(a)&&IE(i)})}function TE(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!Rr(i,c)}catch{return!0}}function IE(i){var a=Bs(i,1);a!==null&&Dr(a,i,1,-1)}function CE(i){var a=as();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:i},a.queue=i,i=i.dispatch=HP.bind(null,Ct,i),[a.memoizedState,i]}function au(i,a,c,f){return i={tag:i,create:a,destroy:c,deps:f,next:null},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i)),i}function SE(){return mr().memoizedState}function Sh(i,a,c,f){var y=as();Ct.flags|=i,y.memoizedState=au(1|a,c,void 0,f===void 0?null:f)}function bh(i,a,c,f){var y=mr();f=f===void 0?null:f;var w=void 0;if(Wt!==null){var C=Wt.memoizedState;if(w=C.destroy,f!==null&&mg(f,C.deps)){y.memoizedState=au(a,c,w,f);return}}Ct.flags|=i,y.memoizedState=au(1|a,c,w,f)}function bE(i,a){return Sh(8390656,8,i,a)}function wg(i,a){return bh(2048,8,i,a)}function RE(i,a){return bh(4,2,i,a)}function AE(i,a){return bh(4,4,i,a)}function kE(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function NE(i,a,c){return c=c!=null?c.concat([i]):null,bh(4,4,kE.bind(null,a,i),c)}function Eg(){}function PE(i,a){var c=mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&mg(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function DE(i,a){var c=mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&mg(a,f[1])?f[0]:(i=i(),c.memoizedState=[i,a],i)}function OE(i,a,c){return(Qo&21)===0?(i.baseState&&(i.baseState=!1,On=!0),i.memoizedState=c):(Rr(c,a)||(c=Dc(),Ct.lanes|=c,Yo|=c,i.baseState=!0),a)}function $P(i,a){var c=Ze;Ze=c!==0&&4>c?c:4,i(!0);var f=pg.transition;pg.transition={};try{i(!1),a()}finally{Ze=c,pg.transition=f}}function ME(){return mr().memoizedState}function WP(i,a,c){var f=Bi(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},LE(i))jE(a,c);else if(c=fE(i,a,c,f),c!==null){var y=Sn();Dr(c,i,f,y),VE(c,a,f)}}function HP(i,a,c){var f=Bi(i),y={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(LE(i))jE(a,y);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var C=a.lastRenderedState,M=w(C,c);if(y.hasEagerState=!0,y.eagerState=M,Rr(M,C)){var V=a.interleaved;V===null?(y.next=y,lg(a)):(y.next=V.next,V.next=y),a.interleaved=y;return}}catch{}finally{}c=fE(i,a,y,f),c!==null&&(y=Sn(),Dr(c,i,f,y),VE(c,a,f))}}function LE(i){var a=i.alternate;return i===Ct||a!==null&&a===Ct}function jE(i,a){su=Ch=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function VE(i,a,c){if((c&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Mc(i,c)}}var Rh={readContext:pr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},qP={readContext:pr,useCallback:function(i,a){return as().memoizedState=[i,a===void 0?null:a],i},useContext:pr,useEffect:bE,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Sh(4194308,4,kE.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Sh(4194308,4,i,a)},useInsertionEffect:function(i,a){return Sh(4,2,i,a)},useMemo:function(i,a){var c=as();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var f=as();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=WP.bind(null,Ct,i),[f.memoizedState,i]},useRef:function(i){var a=as();return i={current:i},a.memoizedState=i},useState:CE,useDebugValue:Eg,useDeferredValue:function(i){return as().memoizedState=i},useTransition:function(){var i=CE(!1),a=i[0];return i=$P.bind(null,i[1]),as().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var f=Ct,y=as();if(Tt){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Yt===null)throw Error(t(349));(Qo&30)!==0||wE(f,a,c)}y.memoizedState=c;var w={value:c,getSnapshot:a};return y.queue=w,bE(xE.bind(null,f,w,i),[i]),f.flags|=2048,au(9,EE.bind(null,f,w,c,a),void 0,null),c},useId:function(){var i=as(),a=Yt.identifierPrefix;if(Tt){var c=zs,f=Us;c=(f&~(1<<32-Hn(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=iu++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=BP++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},GP={readContext:pr,useCallback:PE,useContext:pr,useEffect:wg,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:AE,useMemo:DE,useReducer:_g,useRef:SE,useState:function(){return _g(ou)},useDebugValue:Eg,useDeferredValue:function(i){var a=mr();return OE(a,Wt.memoizedState,i)},useTransition:function(){var i=_g(ou)[0],a=mr().memoizedState;return[i,a]},useMutableSource:_E,useSyncExternalStore:vE,useId:ME,unstable_isNewReconciler:!1},KP={readContext:pr,useCallback:PE,useContext:pr,useEffect:wg,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:AE,useMemo:DE,useReducer:vg,useRef:SE,useState:function(){return vg(ou)},useDebugValue:Eg,useDeferredValue:function(i){var a=mr();return Wt===null?a.memoizedState=i:OE(a,Wt.memoizedState,i)},useTransition:function(){var i=vg(ou)[0],a=mr().memoizedState;return[i,a]},useMutableSource:_E,useSyncExternalStore:vE,useId:ME,unstable_isNewReconciler:!1};function kr(i,a){if(i&&i.defaultProps){a=oe({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function xg(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:oe({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ah={isMounted:function(i){return(i=i._reactInternals)?Sr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Sn(),y=Bi(i),w=$s(f,y);w.payload=a,c!=null&&(w.callback=c),a=Vi(i,w,y),a!==null&&(Dr(a,i,y,f),Eh(a,i,y))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Sn(),y=Bi(i),w=$s(f,y);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=Vi(i,w,y),a!==null&&(Dr(a,i,y,f),Eh(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Sn(),f=Bi(i),y=$s(c,f);y.tag=2,a!=null&&(y.callback=a),a=Vi(i,y,f),a!==null&&(Dr(a,i,f,c),Eh(a,i,f))}};function FE(i,a,c,f,y,w,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,C):a.prototype&&a.prototype.isPureReactComponent?!Gc(c,f)||!Gc(y,w):!0}function UE(i,a,c){var f=!1,y=Mi,w=a.contextType;return typeof w=="object"&&w!==null?w=pr(w):(y=Dn(a)?Wo:pn.current,f=a.contextTypes,w=(f=f!=null)?cl(i,y):Mi),a=new a(c,w),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ah,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=w),a}function zE(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Ah.enqueueReplaceState(a,a.state,null)}function Tg(i,a,c,f){var y=i.stateNode;y.props=c,y.state=i.memoizedState,y.refs={},cg(i);var w=a.contextType;typeof w=="object"&&w!==null?y.context=pr(w):(w=Dn(a)?Wo:pn.current,y.context=cl(i,w)),y.state=i.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(xg(i,a,w,c),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ah.enqueueReplaceState(y,y.state,null),xh(i,c,y,f),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function yl(i,a){try{var c="",f=a;do c+=Ne(f),f=f.return;while(f);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:a,stack:y,digest:null}}function Ig(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Cg(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function BE(i,a,c){c=$s(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){Lh||(Lh=!0,Ug=f),Cg(i,a)},c}function $E(i,a,c){c=$s(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var y=a.value;c.payload=function(){return f(y)},c.callback=function(){Cg(i,a)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Cg(i,a),typeof f!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),c}function WE(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new QP;var y=new Set;f.set(a,y)}else y=f.get(a),y===void 0&&(y=new Set,f.set(a,y));y.has(c)||(y.add(c),i=cD.bind(null,i,a,c),a.then(i,i))}function HE(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function qE(i,a,c,f,y){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=$s(-1,1),a.tag=2,Vi(c,a,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=y,i)}var YP=G.ReactCurrentOwner,On=!1;function Cn(i,a,c,f){a.child=i===null?hE(a,null,c,f):fl(a,i.child,c,f)}function GE(i,a,c,f,y){c=c.render;var w=a.ref;return ml(a,y),f=gg(i,a,c,f,w,y),c=yg(),i!==null&&!On?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ws(i,a,y)):(Tt&&c&&Zm(a),a.flags|=1,Cn(i,a,f,y),a.child)}function KE(i,a,c,f,y){if(i===null){var w=c.type;return typeof w=="function"&&!Gg(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,QE(i,a,w,f,y)):(i=Bh(c.type,null,f,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(w=i.child,(i.lanes&y)===0){var C=w.memoizedProps;if(c=c.compare,c=c!==null?c:Gc,c(C,f)&&i.ref===a.ref)return Ws(i,a,y)}return a.flags|=1,i=Wi(w,f),i.ref=a.ref,i.return=a,a.child=i}function QE(i,a,c,f,y){if(i!==null){var w=i.memoizedProps;if(Gc(w,f)&&i.ref===a.ref)if(On=!1,a.pendingProps=f=w,(i.lanes&y)!==0)(i.flags&131072)!==0&&(On=!0);else return a.lanes=i.lanes,Ws(i,a,y)}return Sg(i,a,c,f,y)}function YE(i,a,c){var f=a.pendingProps,y=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(vl,Jn),Jn|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,pt(vl,Jn),Jn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,pt(vl,Jn),Jn|=f}else w!==null?(f=w.baseLanes|c,a.memoizedState=null):f=c,pt(vl,Jn),Jn|=f;return Cn(i,a,y,c),a.child}function XE(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Sg(i,a,c,f,y){var w=Dn(c)?Wo:pn.current;return w=cl(a,w),ml(a,y),c=gg(i,a,c,f,w,y),f=yg(),i!==null&&!On?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Ws(i,a,y)):(Tt&&f&&Zm(a),a.flags|=1,Cn(i,a,c,y),a.child)}function JE(i,a,c,f,y){if(Dn(c)){var w=!0;fh(a)}else w=!1;if(ml(a,y),a.stateNode===null)Nh(i,a),UE(a,c,f),Tg(a,c,f,y),f=!0;else if(i===null){var C=a.stateNode,M=a.memoizedProps;C.props=M;var V=C.context,Q=c.contextType;typeof Q=="object"&&Q!==null?Q=pr(Q):(Q=Dn(c)?Wo:pn.current,Q=cl(a,Q));var se=c.getDerivedStateFromProps,ie=typeof se=="function"||typeof C.getSnapshotBeforeUpdate=="function";ie||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==f||V!==Q)&&zE(a,C,f,Q),ji=!1;var re=a.memoizedState;C.state=re,xh(a,f,C,y),V=a.memoizedState,M!==f||re!==V||Pn.current||ji?(typeof se=="function"&&(xg(a,c,se,f),V=a.memoizedState),(M=ji||FE(a,c,M,f,re,V,Q))?(ie||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=V),C.props=f,C.state=V,C.context=Q,f=M):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{C=a.stateNode,pE(i,a),M=a.memoizedProps,Q=a.type===a.elementType?M:kr(a.type,M),C.props=Q,ie=a.pendingProps,re=C.context,V=c.contextType,typeof V=="object"&&V!==null?V=pr(V):(V=Dn(c)?Wo:pn.current,V=cl(a,V));var fe=c.getDerivedStateFromProps;(se=typeof fe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==ie||re!==V)&&zE(a,C,f,V),ji=!1,re=a.memoizedState,C.state=re,xh(a,f,C,y);var ve=a.memoizedState;M!==ie||re!==ve||Pn.current||ji?(typeof fe=="function"&&(xg(a,c,fe,f),ve=a.memoizedState),(Q=ji||FE(a,c,Q,f,re,ve,V)||!1)?(se||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(f,ve,V),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(f,ve,V)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=ve),C.props=f,C.state=ve,C.context=V,f=Q):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=1024),f=!1)}return bg(i,a,c,f,w,y)}function bg(i,a,c,f,y,w){XE(i,a);var C=(a.flags&128)!==0;if(!f&&!C)return y&&rE(a,c,!1),Ws(i,a,w);f=a.stateNode,YP.current=a;var M=C&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&C?(a.child=fl(a,i.child,null,w),a.child=fl(a,null,M,w)):Cn(i,a,M,w),a.memoizedState=f.state,y&&rE(a,c,!0),a.child}function ZE(i){var a=i.stateNode;a.pendingContext?tE(i,a.pendingContext,a.pendingContext!==a.context):a.context&&tE(i,a.context,!1),ug(i,a.containerInfo)}function ex(i,a,c,f,y){return hl(),rg(y),a.flags|=256,Cn(i,a,c,f),a.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function Ag(i){return{baseLanes:i,cachePool:null,transitions:null}}function tx(i,a,c){var f=a.pendingProps,y=It.current,w=!1,C=(a.flags&128)!==0,M;if((M=C)||(M=i!==null&&i.memoizedState===null?!1:(y&2)!==0),M?(w=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),pt(It,y&1),i===null)return ng(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=f.children,i=f.fallback,w?(f=a.mode,w=a.child,C={mode:"hidden",children:C},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=C):w=$h(C,f,0,null),i=ea(i,f,c,null),w.return=a,i.return=a,w.sibling=i,a.child=w,a.child.memoizedState=Ag(c),a.memoizedState=Rg,i):kg(a,C));if(y=i.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return XP(i,a,C,f,M,y,c);if(w){w=f.fallback,C=a.mode,y=i.child,M=y.sibling;var V={mode:"hidden",children:f.children};return(C&1)===0&&a.child!==y?(f=a.child,f.childLanes=0,f.pendingProps=V,a.deletions=null):(f=Wi(y,V),f.subtreeFlags=y.subtreeFlags&14680064),M!==null?w=Wi(M,w):(w=ea(w,C,c,null),w.flags|=2),w.return=a,f.return=a,f.sibling=w,a.child=f,f=w,w=a.child,C=i.child.memoizedState,C=C===null?Ag(c):{baseLanes:C.baseLanes|c,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=i.childLanes&~c,a.memoizedState=Rg,f}return w=i.child,i=w.sibling,f=Wi(w,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=f,a.memoizedState=null,f}function kg(i,a){return a=$h({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function kh(i,a,c,f){return f!==null&&rg(f),fl(a,i.child,null,c),i=kg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function XP(i,a,c,f,y,w,C){if(c)return a.flags&256?(a.flags&=-257,f=Ig(Error(t(422))),kh(i,a,C,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(w=f.fallback,y=a.mode,f=$h({mode:"visible",children:f.children},y,0,null),w=ea(w,y,C,null),w.flags|=2,f.return=a,w.return=a,f.sibling=w,a.child=f,(a.mode&1)!==0&&fl(a,i.child,null,C),a.child.memoizedState=Ag(C),a.memoizedState=Rg,w);if((a.mode&1)===0)return kh(i,a,C,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var M=f.dgst;return f=M,w=Error(t(419)),f=Ig(w,f,void 0),kh(i,a,C,f)}if(M=(C&i.childLanes)!==0,On||M){if(f=Yt,f!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|C))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Bs(i,y),Dr(f,i,y,-1))}return qg(),f=Ig(Error(t(421))),kh(i,a,C,f)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=uD.bind(null,i),y._reactRetry=a,null):(i=w.treeContext,Xn=Di(y.nextSibling),Yn=a,Tt=!0,Ar=null,i!==null&&(hr[fr++]=Us,hr[fr++]=zs,hr[fr++]=Ho,Us=i.id,zs=i.overflow,Ho=a),a=kg(a,f.children),a.flags|=4096,a)}function nx(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),ag(i.return,a,c)}function Ng(i,a,c,f,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=y)}function rx(i,a,c){var f=a.pendingProps,y=f.revealOrder,w=f.tail;if(Cn(i,a,f.children,c),f=It.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nx(i,c,a);else if(i.tag===19)nx(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(pt(It,f),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)i=c.alternate,i!==null&&Th(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),Ng(a,!1,y,c,w);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Th(i)===null){a.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Ng(a,!0,c,null,w);break;case"together":Ng(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Nh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Ws(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Yo|=a.lanes,(c&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=Wi(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Wi(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function JP(i,a,c){switch(a.tag){case 3:ZE(a),hl();break;case 5:yE(a);break;case 1:Dn(a.type)&&fh(a);break;case 4:ug(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,y=a.memoizedProps.value;pt(vh,f._currentValue),f._currentValue=y;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(pt(It,It.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?tx(i,a,c):(pt(It,It.current&1),i=Ws(i,a,c),i!==null?i.sibling:null);pt(It,It.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(i.flags&128)!==0){if(f)return rx(i,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pt(It,It.current),f)break;return null;case 22:case 23:return a.lanes=0,YE(i,a,c)}return Ws(i,a,c)}var sx,Pg,ix,ox;sx=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pg=function(){},ix=function(i,a,c,f){var y=i.memoizedProps;if(y!==f){i=a.stateNode,Ko(os.current);var w=null;switch(c){case"input":y=mi(i,y),f=mi(i,f),w=[];break;case"select":y=oe({},y,{value:void 0}),f=oe({},f,{value:void 0}),w=[];break;case"textarea":y=xc(i,y),f=xc(i,f),w=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=uh)}Cr(c,f);var C;c=null;for(Q in y)if(!f.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var M=y[Q];for(C in M)M.hasOwnProperty(C)&&(c||(c={}),c[C]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?w||(w=[]):(w=w||[]).push(Q,null));for(Q in f){var V=f[Q];if(M=y?.[Q],f.hasOwnProperty(Q)&&V!==M&&(V!=null||M!=null))if(Q==="style")if(M){for(C in M)!M.hasOwnProperty(C)||V&&V.hasOwnProperty(C)||(c||(c={}),c[C]="");for(C in V)V.hasOwnProperty(C)&&M[C]!==V[C]&&(c||(c={}),c[C]=V[C])}else c||(w||(w=[]),w.push(Q,c)),c=V;else Q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,M=M?M.__html:void 0,V!=null&&M!==V&&(w=w||[]).push(Q,V)):Q==="children"?typeof V!="string"&&typeof V!="number"||(w=w||[]).push(Q,""+V):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?(V!=null&&Q==="onScroll"&&yt("scroll",i),w||M===V||(w=[])):(w=w||[]).push(Q,V))}c&&(w=w||[]).push("style",c);var Q=w;(a.updateQueue=Q)&&(a.flags|=4)}},ox=function(i,a,c,f){c!==f&&(a.flags|=4)};function lu(i,a){if(!Tt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function gn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function ZP(i,a,c){var f=a.pendingProps;switch(eg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(a),null;case 1:return Dn(a.type)&&hh(),gn(a),null;case 3:return f=a.stateNode,gl(),_t(Pn),_t(pn),fg(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(yh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ar!==null&&($g(Ar),Ar=null))),Pg(i,a),gn(a),null;case 5:dg(a);var y=Ko(ru.current);if(c=a.type,i!==null&&a.stateNode!=null)ix(i,a,c,f,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return gn(a),null}if(i=Ko(os.current),yh(a)){f=a.stateNode,c=a.type;var w=a.memoizedProps;switch(f[is]=a,f[Jc]=w,i=(a.mode&1)!==0,c){case"dialog":yt("cancel",f),yt("close",f);break;case"iframe":case"object":case"embed":yt("load",f);break;case"video":case"audio":for(y=0;y<Qc.length;y++)yt(Qc[y],f);break;case"source":yt("error",f);break;case"img":case"image":case"link":yt("error",f),yt("load",f);break;case"details":yt("toggle",f);break;case"input":La(f,w),yt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},yt("invalid",f);break;case"textarea":Tc(f,w),yt("invalid",f)}Cr(c,w),y=null;for(var C in w)if(w.hasOwnProperty(C)){var M=w[C];C==="children"?typeof M=="string"?f.textContent!==M&&(w.suppressHydrationWarning!==!0&&ch(f.textContent,M,i),y=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(w.suppressHydrationWarning!==!0&&ch(f.textContent,M,i),y=["children",""+M]):s.hasOwnProperty(C)&&M!=null&&C==="onScroll"&&yt("scroll",f)}switch(c){case"input":kn(f),be(f,w,!0);break;case"textarea":kn(f),yi(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=uh)}f=y,a.updateQueue=f,f!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ic(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=C.createElement(c,{is:f.is}):(i=C.createElement(c),c==="select"&&(C=i,f.multiple?C.multiple=!0:f.size&&(C.size=f.size))):i=C.createElementNS(i,c),i[is]=a,i[Jc]=f,sx(i,a,!1,!1),a.stateNode=i;e:{switch(C=Fa(c,f),c){case"dialog":yt("cancel",i),yt("close",i),y=f;break;case"iframe":case"object":case"embed":yt("load",i),y=f;break;case"video":case"audio":for(y=0;y<Qc.length;y++)yt(Qc[y],i);y=f;break;case"source":yt("error",i),y=f;break;case"img":case"image":case"link":yt("error",i),yt("load",i),y=f;break;case"details":yt("toggle",i),y=f;break;case"input":La(i,f),y=mi(i,f),yt("invalid",i);break;case"option":y=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},y=oe({},f,{value:void 0}),yt("invalid",i);break;case"textarea":Tc(i,f),y=xc(i,f),yt("invalid",i);break;default:y=f}Cr(c,y),M=y;for(w in M)if(M.hasOwnProperty(w)){var V=M[w];w==="style"?Va(i,V):w==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&jd(i,V)):w==="children"?typeof V=="string"?(c!=="textarea"||V!=="")&&Ao(i,V):typeof V=="number"&&Ao(i,""+V):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?V!=null&&w==="onScroll"&&yt("scroll",i):V!=null&&B(i,w,V,C))}switch(c){case"input":kn(i),be(i,f,!1);break;case"textarea":kn(i),yi(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Ue(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?Kt(i,!!f.multiple,w,!1):f.defaultValue!=null&&Kt(i,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=uh)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return gn(a),null;case 6:if(i&&a.stateNode!=null)ox(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(c=Ko(ru.current),Ko(os.current),yh(a)){if(f=a.stateNode,c=a.memoizedProps,f[is]=a,(w=f.nodeValue!==c)&&(i=Yn,i!==null))switch(i.tag){case 3:ch(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ch(f.nodeValue,c,(i.mode&1)!==0)}w&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[is]=a,a.stateNode=f}return gn(a),null;case 13:if(_t(It),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Tt&&Xn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)cE(),hl(),a.flags|=98560,w=!1;else if(w=yh(a),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[is]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;gn(a),w=!1}else Ar!==null&&($g(Ar),Ar=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(It.current&1)!==0?Ht===0&&(Ht=3):qg())),a.updateQueue!==null&&(a.flags|=4),gn(a),null);case 4:return gl(),Pg(i,a),i===null&&Yc(a.stateNode.containerInfo),gn(a),null;case 10:return og(a.type._context),gn(a),null;case 17:return Dn(a.type)&&hh(),gn(a),null;case 19:if(_t(It),w=a.memoizedState,w===null)return gn(a),null;if(f=(a.flags&128)!==0,C=w.rendering,C===null)if(f)lu(w,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(C=Th(i),C!==null){for(a.flags|=128,lu(w,!1),f=C.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)w=c,i=f,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,i=C.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return pt(It,It.current&1|2),a.child}i=i.sibling}w.tail!==null&&gt()>wl&&(a.flags|=128,f=!0,lu(w,!1),a.lanes=4194304)}else{if(!f)if(i=Th(C),i!==null){if(a.flags|=128,f=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),lu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Tt)return gn(a),null}else 2*gt()-w.renderingStartTime>wl&&c!==1073741824&&(a.flags|=128,f=!0,lu(w,!1),a.lanes=4194304);w.isBackwards?(C.sibling=a.child,a.child=C):(c=w.last,c!==null?c.sibling=C:a.child=C,w.last=C)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=gt(),a.sibling=null,c=It.current,pt(It,f?c&1|2:c&1),a):(gn(a),null);case 22:case 23:return Hg(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Jn&1073741824)!==0&&(gn(a),a.subtreeFlags&6&&(a.flags|=8192)):gn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function eD(i,a){switch(eg(a),a.tag){case 1:return Dn(a.type)&&hh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return gl(),_t(Pn),_t(pn),fg(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return dg(a),null;case 13:if(_t(It),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));hl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return _t(It),null;case 4:return gl(),null;case 10:return og(a.type._context),null;case 22:case 23:return Hg(),null;case 24:return null;default:return null}}var Ph=!1,yn=!1,tD=typeof WeakSet=="function"?WeakSet:Set,ye=null;function _l(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Rt(i,a,f)}else c.current=null}function Dg(i,a,c){try{c()}catch(f){Rt(i,a,f)}}var ax=!1;function nD(i,a){if(Hm=Ms,i=F0(),jm(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var C=0,M=-1,V=-1,Q=0,se=0,ie=i,re=null;t:for(;;){for(var fe;ie!==c||y!==0&&ie.nodeType!==3||(M=C+y),ie!==w||f!==0&&ie.nodeType!==3||(V=C+f),ie.nodeType===3&&(C+=ie.nodeValue.length),(fe=ie.firstChild)!==null;)re=ie,ie=fe;for(;;){if(ie===i)break t;if(re===c&&++Q===y&&(M=C),re===w&&++se===f&&(V=C),(fe=ie.nextSibling)!==null)break;ie=re,re=ie.parentNode}ie=fe}c=M===-1||V===-1?null:{start:M,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(qm={focusedElem:i,selectionRange:c},Ms=!1,ye=a;ye!==null;)if(a=ye,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ye=i;else for(;ye!==null;){a=ye;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var xe=ve.memoizedProps,Dt=ve.memoizedState,H=a.stateNode,z=H.getSnapshotBeforeUpdate(a.elementType===a.type?xe:kr(a.type,xe),Dt);H.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var K=a.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){Rt(a,a.return,ae)}if(i=a.sibling,i!==null){i.return=a.return,ye=i;break}ye=a.return}return ve=ax,ax=!1,ve}function cu(i,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&i)===i){var w=y.destroy;y.destroy=void 0,w!==void 0&&Dg(a,c,w)}y=y.next}while(y!==f)}}function Dh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function Og(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function lx(i){var a=i.alternate;a!==null&&(i.alternate=null,lx(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[is],delete a[Jc],delete a[Ym],delete a[VP],delete a[FP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function cx(i){return i.tag===5||i.tag===3||i.tag===4}function ux(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||cx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=uh));else if(f!==4&&(i=i.child,i!==null))for(Mg(i,a,c),i=i.sibling;i!==null;)Mg(i,a,c),i=i.sibling}function Lg(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Lg(i,a,c),i=i.sibling;i!==null;)Lg(i,a,c),i=i.sibling}var sn=null,Nr=!1;function Fi(i,a,c){for(c=c.child;c!==null;)dx(i,a,c),c=c.sibling}function dx(i,a,c){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Oo,c)}catch{}switch(c.tag){case 5:yn||_l(c,a);case 6:var f=sn,y=Nr;sn=null,Fi(i,a,c),sn=f,Nr=y,sn!==null&&(Nr?(i=sn,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):sn.removeChild(c.stateNode));break;case 18:sn!==null&&(Nr?(i=sn,c=c.stateNode,i.nodeType===8?Qm(i.parentNode,c):i.nodeType===1&&Qm(i,c),Ai(i)):Qm(sn,c.stateNode));break;case 4:f=sn,y=Nr,sn=c.stateNode.containerInfo,Nr=!0,Fi(i,a,c),sn=f,Nr=y;break;case 0:case 11:case 14:case 15:if(!yn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var w=y,C=w.destroy;w=w.tag,C!==void 0&&((w&2)!==0||(w&4)!==0)&&Dg(c,a,C),y=y.next}while(y!==f)}Fi(i,a,c);break;case 1:if(!yn&&(_l(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(M){Rt(c,a,M)}Fi(i,a,c);break;case 21:Fi(i,a,c);break;case 22:c.mode&1?(yn=(f=yn)||c.memoizedState!==null,Fi(i,a,c),yn=f):Fi(i,a,c);break;default:Fi(i,a,c)}}function hx(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new tD),a.forEach(function(f){var y=dD.bind(null,i,f);c.has(f)||(c.add(f),f.then(y,y))})}}function Pr(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];try{var w=i,C=a,M=C;e:for(;M!==null;){switch(M.tag){case 5:sn=M.stateNode,Nr=!1;break e;case 3:sn=M.stateNode.containerInfo,Nr=!0;break e;case 4:sn=M.stateNode.containerInfo,Nr=!0;break e}M=M.return}if(sn===null)throw Error(t(160));dx(w,C,y),sn=null,Nr=!1;var V=y.alternate;V!==null&&(V.return=null),y.return=null}catch(Q){Rt(y,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)fx(a,i),a=a.sibling}function fx(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Pr(a,i),ls(i),f&4){try{cu(3,i,i.return),Dh(3,i)}catch(xe){Rt(i,i.return,xe)}try{cu(5,i,i.return)}catch(xe){Rt(i,i.return,xe)}}break;case 1:Pr(a,i),ls(i),f&512&&c!==null&&_l(c,c.return);break;case 5:if(Pr(a,i),ls(i),f&512&&c!==null&&_l(c,c.return),i.flags&32){var y=i.stateNode;try{Ao(y,"")}catch(xe){Rt(i,i.return,xe)}}if(f&4&&(y=i.stateNode,y!=null)){var w=i.memoizedProps,C=c!==null?c.memoizedProps:w,M=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{M==="input"&&w.type==="radio"&&w.name!=null&&gi(y,w),Fa(M,C);var Q=Fa(M,w);for(C=0;C<V.length;C+=2){var se=V[C],ie=V[C+1];se==="style"?Va(y,ie):se==="dangerouslySetInnerHTML"?jd(y,ie):se==="children"?Ao(y,ie):B(y,se,ie,Q)}switch(M){case"input":pe(y,w);break;case"textarea":Ld(y,w);break;case"select":var re=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var fe=w.value;fe!=null?Kt(y,!!w.multiple,fe,!1):re!==!!w.multiple&&(w.defaultValue!=null?Kt(y,!!w.multiple,w.defaultValue,!0):Kt(y,!!w.multiple,w.multiple?[]:"",!1))}y[Jc]=w}catch(xe){Rt(i,i.return,xe)}}break;case 6:if(Pr(a,i),ls(i),f&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,w=i.memoizedProps;try{y.nodeValue=w}catch(xe){Rt(i,i.return,xe)}}break;case 3:if(Pr(a,i),ls(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ai(a.containerInfo)}catch(xe){Rt(i,i.return,xe)}break;case 4:Pr(a,i),ls(i);break;case 13:Pr(a,i),ls(i),y=i.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Fg=gt())),f&4&&hx(i);break;case 22:if(se=c!==null&&c.memoizedState!==null,i.mode&1?(yn=(Q=yn)||se,Pr(a,i),yn=Q):Pr(a,i),ls(i),f&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!se&&(i.mode&1)!==0)for(ye=i,se=i.child;se!==null;){for(ie=ye=se;ye!==null;){switch(re=ye,fe=re.child,re.tag){case 0:case 11:case 14:case 15:cu(4,re,re.return);break;case 1:_l(re,re.return);var ve=re.stateNode;if(typeof ve.componentWillUnmount=="function"){f=re,c=re.return;try{a=f,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(xe){Rt(f,c,xe)}}break;case 5:_l(re,re.return);break;case 22:if(re.memoizedState!==null){gx(ie);continue}}fe!==null?(fe.return=re,ye=fe):gx(ie)}se=se.sibling}e:for(se=null,ie=i;;){if(ie.tag===5){if(se===null){se=ie;try{y=ie.stateNode,Q?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(M=ie.stateNode,V=ie.memoizedProps.style,C=V!=null&&V.hasOwnProperty("display")?V.display:null,M.style.display=wi("display",C))}catch(xe){Rt(i,i.return,xe)}}}else if(ie.tag===6){if(se===null)try{ie.stateNode.nodeValue=Q?"":ie.memoizedProps}catch(xe){Rt(i,i.return,xe)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;se===ie&&(se=null),ie=ie.return}se===ie&&(se=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Pr(a,i),ls(i),f&4&&hx(i);break;case 21:break;default:Pr(a,i),ls(i)}}function ls(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(cx(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Ao(y,""),f.flags&=-33);var w=ux(i);Lg(i,w,y);break;case 3:case 4:var C=f.stateNode.containerInfo,M=ux(i);Mg(i,M,C);break;default:throw Error(t(161))}}catch(V){Rt(i,i.return,V)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rD(i,a,c){ye=i,px(i)}function px(i,a,c){for(var f=(i.mode&1)!==0;ye!==null;){var y=ye,w=y.child;if(y.tag===22&&f){var C=y.memoizedState!==null||Ph;if(!C){var M=y.alternate,V=M!==null&&M.memoizedState!==null||yn;M=Ph;var Q=yn;if(Ph=C,(yn=V)&&!Q)for(ye=y;ye!==null;)C=ye,V=C.child,C.tag===22&&C.memoizedState!==null?yx(y):V!==null?(V.return=C,ye=V):yx(y);for(;w!==null;)ye=w,px(w),w=w.sibling;ye=y,Ph=M,yn=Q}mx(i)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,ye=w):mx(i)}}function mx(i){for(;ye!==null;){var a=ye;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:yn||Dh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!yn)if(c===null)f.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:kr(a.type,c.memoizedProps);f.componentDidUpdate(y,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&gE(a,w,f);break;case 3:var C=a.updateQueue;if(C!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}gE(a,C,c)}break;case 5:var M=a.stateNode;if(c===null&&a.flags&4){c=M;var V=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&c.focus();break;case"img":V.src&&(c.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ie=se.dehydrated;ie!==null&&Ai(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yn||a.flags&512&&Og(a)}catch(re){Rt(a,a.return,re)}}if(a===i){ye=null;break}if(c=a.sibling,c!==null){c.return=a.return,ye=c;break}ye=a.return}}function gx(i){for(;ye!==null;){var a=ye;if(a===i){ye=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ye=c;break}ye=a.return}}function yx(i){for(;ye!==null;){var a=ye;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Dh(4,a)}catch(V){Rt(a,c,V)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var y=a.return;try{f.componentDidMount()}catch(V){Rt(a,y,V)}}var w=a.return;try{Og(a)}catch(V){Rt(a,w,V)}break;case 5:var C=a.return;try{Og(a)}catch(V){Rt(a,C,V)}}}catch(V){Rt(a,a.return,V)}if(a===i){ye=null;break}var M=a.sibling;if(M!==null){M.return=a.return,ye=M;break}ye=a.return}}var sD=Math.ceil,Oh=G.ReactCurrentDispatcher,jg=G.ReactCurrentOwner,gr=G.ReactCurrentBatchConfig,nt=0,Yt=null,Vt=null,on=0,Jn=0,vl=Oi(0),Ht=0,uu=null,Yo=0,Mh=0,Vg=0,du=null,Mn=null,Fg=0,wl=1/0,Hs=null,Lh=!1,Ug=null,Ui=null,jh=!1,zi=null,Vh=0,hu=0,zg=null,Fh=-1,Uh=0;function Sn(){return(nt&6)!==0?gt():Fh!==-1?Fh:Fh=gt()}function Bi(i){return(i.mode&1)===0?1:(nt&2)!==0&&on!==0?on&-on:zP.transition!==null?(Uh===0&&(Uh=Dc()),Uh):(i=Ze,i!==0||(i=window.event,i=i===void 0?16:Qa(i.type)),i)}function Dr(i,a,c,f){if(50<hu)throw hu=0,zg=null,Error(t(185));Vo(i,c,f),((nt&2)===0||i!==Yt)&&(i===Yt&&((nt&2)===0&&(Mh|=c),Ht===4&&$i(i,on)),Ln(i,f),c===1&&nt===0&&(a.mode&1)===0&&(wl=gt()+500,ph&&Li()))}function Ln(i,a){var c=i.callbackNode;jo(i,a);var f=Ps(i,i===Yt?on:0);if(f===0)c!==null&&Ba(c),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(c!=null&&Ba(c),a===1)i.tag===0?UP(vx.bind(null,i)):sE(vx.bind(null,i)),LP(function(){(nt&6)===0&&Li()}),c=null;else{switch(Qr(f)){case 1:c=$a;break;case 4:c=kc;break;case 16:c=Do;break;case 536870912:c=Wa;break;default:c=Do}c=bx(c,_x.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function _x(i,a){if(Fh=-1,Uh=0,(nt&6)!==0)throw Error(t(327));var c=i.callbackNode;if(El()&&i.callbackNode!==c)return null;var f=Ps(i,i===Yt?on:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=zh(i,f);else{a=f;var y=nt;nt|=2;var w=Ex();(Yt!==i||on!==a)&&(Hs=null,wl=gt()+500,Jo(i,a));do try{aD();break}catch(M){wx(i,M)}while(!0);ig(),Oh.current=w,nt=y,Vt!==null?a=0:(Yt=null,on=0,a=Ht)}if(a!==0){if(a===2&&(y=Pc(i),y!==0&&(f=y,a=Bg(i,y))),a===1)throw c=uu,Jo(i,0),$i(i,f),Ln(i,gt()),c;if(a===6)$i(i,f);else{if(y=i.current.alternate,(f&30)===0&&!iD(y)&&(a=zh(i,f),a===2&&(w=Pc(i),w!==0&&(f=w,a=Bg(i,w))),a===1))throw c=uu,Jo(i,0),$i(i,f),Ln(i,gt()),c;switch(i.finishedWork=y,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Zo(i,Mn,Hs);break;case 3:if($i(i,f),(f&130023424)===f&&(a=Fg+500-gt(),10<a)){if(Ps(i,0)!==0)break;if(y=i.suspendedLanes,(y&f)!==f){Sn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Km(Zo.bind(null,i,Mn,Hs),a);break}Zo(i,Mn,Hs);break;case 4:if($i(i,f),(f&4194240)===f)break;for(a=i.eventTimes,y=-1;0<f;){var C=31-Hn(f);w=1<<C,C=a[C],C>y&&(y=C),f&=~w}if(f=y,f=gt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*sD(f/1960))-f,10<f){i.timeoutHandle=Km(Zo.bind(null,i,Mn,Hs),f);break}Zo(i,Mn,Hs);break;case 5:Zo(i,Mn,Hs);break;default:throw Error(t(329))}}}return Ln(i,gt()),i.callbackNode===c?_x.bind(null,i):null}function Bg(i,a){var c=du;return i.current.memoizedState.isDehydrated&&(Jo(i,a).flags|=256),i=zh(i,a),i!==2&&(a=Mn,Mn=c,a!==null&&$g(a)),i}function $g(i){Mn===null?Mn=i:Mn.push.apply(Mn,i)}function iD(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var y=c[f],w=y.getSnapshot;y=y.value;try{if(!Rr(w(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $i(i,a){for(a&=~Vg,a&=~Mh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-Hn(a),f=1<<c;i[c]=-1,a&=~f}}function vx(i){if((nt&6)!==0)throw Error(t(327));El();var a=Ps(i,0);if((a&1)===0)return Ln(i,gt()),null;var c=zh(i,a);if(i.tag!==0&&c===2){var f=Pc(i);f!==0&&(a=f,c=Bg(i,f))}if(c===1)throw c=uu,Jo(i,0),$i(i,a),Ln(i,gt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Zo(i,Mn,Hs),Ln(i,gt()),null}function Wg(i,a){var c=nt;nt|=1;try{return i(a)}finally{nt=c,nt===0&&(wl=gt()+500,ph&&Li())}}function Xo(i){zi!==null&&zi.tag===0&&(nt&6)===0&&El();var a=nt;nt|=1;var c=gr.transition,f=Ze;try{if(gr.transition=null,Ze=1,i)return i()}finally{Ze=f,gr.transition=c,nt=a,(nt&6)===0&&Li()}}function Hg(){Jn=vl.current,_t(vl)}function Jo(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,MP(c)),Vt!==null)for(c=Vt.return;c!==null;){var f=c;switch(eg(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&hh();break;case 3:gl(),_t(Pn),_t(pn),fg();break;case 5:dg(f);break;case 4:gl();break;case 13:_t(It);break;case 19:_t(It);break;case 10:og(f.type._context);break;case 22:case 23:Hg()}c=c.return}if(Yt=i,Vt=i=Wi(i.current,null),on=Jn=a,Ht=0,uu=null,Vg=Mh=Yo=0,Mn=du=null,Go!==null){for(a=0;a<Go.length;a++)if(c=Go[a],f=c.interleaved,f!==null){c.interleaved=null;var y=f.next,w=c.pending;if(w!==null){var C=w.next;w.next=y,f.next=C}c.pending=f}Go=null}return i}function wx(i,a){do{var c=Vt;try{if(ig(),Ih.current=Rh,Ch){for(var f=Ct.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}Ch=!1}if(Qo=0,Qt=Wt=Ct=null,su=!1,iu=0,jg.current=null,c===null||c.return===null){Ht=1,uu=a,Vt=null;break}e:{var w=i,C=c.return,M=c,V=a;if(a=on,M.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Q=V,se=M,ie=se.tag;if((se.mode&1)===0&&(ie===0||ie===11||ie===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var fe=HE(C);if(fe!==null){fe.flags&=-257,qE(fe,C,M,w,a),fe.mode&1&&WE(w,Q,a),a=fe,V=Q;var ve=a.updateQueue;if(ve===null){var xe=new Set;xe.add(V),a.updateQueue=xe}else ve.add(V);break e}else{if((a&1)===0){WE(w,Q,a),qg();break e}V=Error(t(426))}}else if(Tt&&M.mode&1){var Dt=HE(C);if(Dt!==null){(Dt.flags&65536)===0&&(Dt.flags|=256),qE(Dt,C,M,w,a),rg(yl(V,M));break e}}w=V=yl(V,M),Ht!==4&&(Ht=2),du===null?du=[w]:du.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var H=BE(w,V,a);mE(w,H);break e;case 1:M=V;var z=w.type,K=w.stateNode;if((w.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Ui===null||!Ui.has(K)))){w.flags|=65536,a&=-a,w.lanes|=a;var ae=$E(w,M,a);mE(w,ae);break e}}w=w.return}while(w!==null)}Tx(c)}catch(Te){a=Te,Vt===c&&c!==null&&(Vt=c=c.return);continue}break}while(!0)}function Ex(){var i=Oh.current;return Oh.current=Rh,i===null?Rh:i}function qg(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Yt===null||(Yo&268435455)===0&&(Mh&268435455)===0||$i(Yt,on)}function zh(i,a){var c=nt;nt|=2;var f=Ex();(Yt!==i||on!==a)&&(Hs=null,Jo(i,a));do try{oD();break}catch(y){wx(i,y)}while(!0);if(ig(),nt=c,Oh.current=f,Vt!==null)throw Error(t(261));return Yt=null,on=0,Ht}function oD(){for(;Vt!==null;)xx(Vt)}function aD(){for(;Vt!==null&&!Po();)xx(Vt)}function xx(i){var a=Sx(i.alternate,i,Jn);i.memoizedProps=i.pendingProps,a===null?Tx(i):Vt=a,jg.current=null}function Tx(i){var a=i;do{var c=a.alternate;if(i=a.return,(a.flags&32768)===0){if(c=ZP(c,a,Jn),c!==null){Vt=c;return}}else{if(c=eD(c,a),c!==null){c.flags&=32767,Vt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ht=6,Vt=null;return}}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=i}while(a!==null);Ht===0&&(Ht=5)}function Zo(i,a,c){var f=Ze,y=gr.transition;try{gr.transition=null,Ze=1,lD(i,a,c,f)}finally{gr.transition=y,Ze=f}return null}function lD(i,a,c,f){do El();while(zi!==null);if((nt&6)!==0)throw Error(t(327));c=i.finishedWork;var y=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(Pm(i,w),i===Yt&&(Vt=Yt=null,on=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||jh||(jh=!0,bx(Do,function(){return El(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=gr.transition,gr.transition=null;var C=Ze;Ze=1;var M=nt;nt|=4,jg.current=null,nD(i,c),fx(c,i),RP(qm),Ms=!!Hm,qm=Hm=null,i.current=c,rD(c),Ns(),nt=M,Ze=C,gr.transition=w}else i.current=c;if(jh&&(jh=!1,zi=i,Vh=y),w=i.pendingLanes,w===0&&(Ui=null),Kd(c.stateNode),Ln(i,gt()),a!==null)for(f=i.onRecoverableError,c=0;c<a.length;c++)y=a[c],f(y.value,{componentStack:y.stack,digest:y.digest});if(Lh)throw Lh=!1,i=Ug,Ug=null,i;return(Vh&1)!==0&&i.tag!==0&&El(),w=i.pendingLanes,(w&1)!==0?i===zg?hu++:(hu=0,zg=i):hu=0,Li(),null}function El(){if(zi!==null){var i=Qr(Vh),a=gr.transition,c=Ze;try{if(gr.transition=null,Ze=16>i?16:i,zi===null)var f=!1;else{if(i=zi,zi=null,Vh=0,(nt&6)!==0)throw Error(t(331));var y=nt;for(nt|=4,ye=i.current;ye!==null;){var w=ye,C=w.child;if((ye.flags&16)!==0){var M=w.deletions;if(M!==null){for(var V=0;V<M.length;V++){var Q=M[V];for(ye=Q;ye!==null;){var se=ye;switch(se.tag){case 0:case 11:case 15:cu(8,se,w)}var ie=se.child;if(ie!==null)ie.return=se,ye=ie;else for(;ye!==null;){se=ye;var re=se.sibling,fe=se.return;if(lx(se),se===Q){ye=null;break}if(re!==null){re.return=fe,ye=re;break}ye=fe}}}var ve=w.alternate;if(ve!==null){var xe=ve.child;if(xe!==null){ve.child=null;do{var Dt=xe.sibling;xe.sibling=null,xe=Dt}while(xe!==null)}}ye=w}}if((w.subtreeFlags&2064)!==0&&C!==null)C.return=w,ye=C;else e:for(;ye!==null;){if(w=ye,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:cu(9,w,w.return)}var H=w.sibling;if(H!==null){H.return=w.return,ye=H;break e}ye=w.return}}var z=i.current;for(ye=z;ye!==null;){C=ye;var K=C.child;if((C.subtreeFlags&2064)!==0&&K!==null)K.return=C,ye=K;else e:for(C=z;ye!==null;){if(M=ye,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Dh(9,M)}}catch(Te){Rt(M,M.return,Te)}if(M===C){ye=null;break e}var ae=M.sibling;if(ae!==null){ae.return=M.return,ye=ae;break e}ye=M.return}}if(nt=y,Li(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Oo,i)}catch{}f=!0}return f}finally{Ze=c,gr.transition=a}}return!1}function Ix(i,a,c){a=yl(c,a),a=BE(i,a,1),i=Vi(i,a,1),a=Sn(),i!==null&&(Vo(i,1,a),Ln(i,a))}function Rt(i,a,c){if(i.tag===3)Ix(i,i,c);else for(;a!==null;){if(a.tag===3){Ix(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ui===null||!Ui.has(f))){i=yl(c,i),i=$E(a,i,1),a=Vi(a,i,1),i=Sn(),a!==null&&(Vo(a,1,i),Ln(a,i));break}}a=a.return}}function cD(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),a=Sn(),i.pingedLanes|=i.suspendedLanes&c,Yt===i&&(on&c)===c&&(Ht===4||Ht===3&&(on&130023424)===on&&500>gt()-Fg?Jo(i,0):Vg|=c),Ln(i,a)}function Cx(i,a){a===0&&((i.mode&1)===0?a=1:(a=Si,Si<<=1,(Si&130023424)===0&&(Si=4194304)));var c=Sn();i=Bs(i,a),i!==null&&(Vo(i,a,c),Ln(i,c))}function uD(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),Cx(i,c)}function dD(i,a){var c=0;switch(i.tag){case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Cx(i,c)}var Sx;Sx=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||Pn.current)On=!0;else{if((i.lanes&c)===0&&(a.flags&128)===0)return On=!1,JP(i,a,c);On=(i.flags&131072)!==0}else On=!1,Tt&&(a.flags&1048576)!==0&&iE(a,gh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Nh(i,a),i=a.pendingProps;var y=cl(a,pn.current);ml(a,c),y=gg(null,a,f,i,y,c);var w=yg();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Dn(f)?(w=!0,fh(a)):w=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,cg(a),y.updater=Ah,a.stateNode=y,y._reactInternals=a,Tg(a,f,i,c),a=bg(null,a,f,!0,w,c)):(a.tag=0,Tt&&w&&Zm(a),Cn(null,a,y,c),a=a.child),a;case 16:f=a.elementType;e:{switch(Nh(i,a),i=a.pendingProps,y=f._init,f=y(f._payload),a.type=f,y=a.tag=fD(f),i=kr(f,i),y){case 0:a=Sg(null,a,f,i,c);break e;case 1:a=JE(null,a,f,i,c);break e;case 11:a=GE(null,a,f,i,c);break e;case 14:a=KE(null,a,f,kr(f.type,i),c);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:kr(f,y),Sg(i,a,f,y,c);case 1:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:kr(f,y),JE(i,a,f,y,c);case 3:e:{if(ZE(a),i===null)throw Error(t(387));f=a.pendingProps,w=a.memoizedState,y=w.element,pE(i,a),xh(a,f,null,c);var C=a.memoizedState;if(f=C.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){y=yl(Error(t(423)),a),a=ex(i,a,f,c,y);break e}else if(f!==y){y=yl(Error(t(424)),a),a=ex(i,a,f,c,y);break e}else for(Xn=Di(a.stateNode.containerInfo.firstChild),Yn=a,Tt=!0,Ar=null,c=hE(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hl(),f===y){a=Ws(i,a,c);break e}Cn(i,a,f,c)}a=a.child}return a;case 5:return yE(a),i===null&&ng(a),f=a.type,y=a.pendingProps,w=i!==null?i.memoizedProps:null,C=y.children,Gm(f,y)?C=null:w!==null&&Gm(f,w)&&(a.flags|=32),XE(i,a),Cn(i,a,C,c),a.child;case 6:return i===null&&ng(a),null;case 13:return tx(i,a,c);case 4:return ug(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=fl(a,null,f,c):Cn(i,a,f,c),a.child;case 11:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:kr(f,y),GE(i,a,f,y,c);case 7:return Cn(i,a,a.pendingProps,c),a.child;case 8:return Cn(i,a,a.pendingProps.children,c),a.child;case 12:return Cn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,y=a.pendingProps,w=a.memoizedProps,C=y.value,pt(vh,f._currentValue),f._currentValue=C,w!==null)if(Rr(w.value,C)){if(w.children===y.children&&!Pn.current){a=Ws(i,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var M=w.dependencies;if(M!==null){C=w.child;for(var V=M.firstContext;V!==null;){if(V.context===f){if(w.tag===1){V=$s(-1,c&-c),V.tag=2;var Q=w.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?V.next=V:(V.next=se.next,se.next=V),Q.pending=V}}w.lanes|=c,V=w.alternate,V!==null&&(V.lanes|=c),ag(w.return,c,a),M.lanes|=c;break}V=V.next}}else if(w.tag===10)C=w.type===a.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=c,M=C.alternate,M!==null&&(M.lanes|=c),ag(C,c,a),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===a){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}Cn(i,a,y.children,c),a=a.child}return a;case 9:return y=a.type,f=a.pendingProps.children,ml(a,c),y=pr(y),f=f(y),a.flags|=1,Cn(i,a,f,c),a.child;case 14:return f=a.type,y=kr(f,a.pendingProps),y=kr(f.type,y),KE(i,a,f,y,c);case 15:return QE(i,a,a.type,a.pendingProps,c);case 17:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:kr(f,y),Nh(i,a),a.tag=1,Dn(f)?(i=!0,fh(a)):i=!1,ml(a,c),UE(a,f,y),Tg(a,f,y,c),bg(null,a,f,!0,i,c);case 19:return rx(i,a,c);case 22:return YE(i,a,c)}throw Error(t(156,a.tag))};function bx(i,a){return Ac(i,a)}function hD(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(i,a,c,f){return new hD(i,a,c,f)}function Gg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function fD(i){if(typeof i=="function")return Gg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===je)return 14}return 2}function Wi(i,a){var c=i.alternate;return c===null?(c=yr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Bh(i,a,c,f,y,w){var C=2;if(f=i,typeof i=="function")Gg(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case P:return ea(c.children,y,w,a);case R:C=8,y|=8;break;case N:return i=yr(12,c,a,y|2),i.elementType=N,i.lanes=w,i;case D:return i=yr(13,c,a,y),i.elementType=D,i.lanes=w,i;case Ie:return i=yr(19,c,a,y),i.elementType=Ie,i.lanes=w,i;case Se:return $h(c,y,w,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:C=10;break e;case O:C=9;break e;case F:C=11;break e;case je:C=14;break e;case Ce:C=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=yr(C,c,a,y),a.elementType=i,a.type=f,a.lanes=w,a}function ea(i,a,c,f){return i=yr(7,i,f,a),i.lanes=c,i}function $h(i,a,c,f){return i=yr(22,i,f,a),i.elementType=Se,i.lanes=c,i.stateNode={isHidden:!1},i}function Kg(i,a,c){return i=yr(6,i,null,a),i.lanes=c,i}function Qg(i,a,c){return a=yr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function pD(i,a,c,f,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oc(0),this.expirationTimes=Oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oc(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Yg(i,a,c,f,y,w,C,M,V){return i=new pD(i,a,c,M,V),a===1?(a=1,w===!0&&(a|=8)):a=0,w=yr(3,null,null,a),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},cg(w),i}function mD(i,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:f==null?null:""+f,children:i,containerInfo:a,implementation:c}}function Rx(i){if(!i)return Mi;i=i._reactInternals;e:{if(Sr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Dn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Dn(c))return nE(i,c,a)}return a}function Ax(i,a,c,f,y,w,C,M,V){return i=Yg(c,f,!0,i,y,w,C,M,V),i.context=Rx(null),c=i.current,f=Sn(),y=Bi(c),w=$s(f,y),w.callback=a??null,Vi(c,w,y),i.current.lanes=y,Vo(i,y,f),Ln(i,f),i}function Wh(i,a,c,f){var y=a.current,w=Sn(),C=Bi(y);return c=Rx(c),a.context===null?a.context=c:a.pendingContext=c,a=$s(w,C),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=Vi(y,a,C),i!==null&&(Dr(i,y,C,w),Eh(i,y,C)),C}function Hh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function kx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Xg(i,a){kx(i,a),(i=i.alternate)&&kx(i,a)}function gD(){return null}var Nx=typeof reportError=="function"?reportError:function(i){console.error(i)};function Jg(i){this._internalRoot=i}qh.prototype.render=Jg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Wh(i,a,null,null)},qh.prototype.unmount=Jg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Xo(function(){Wh(null,i,null,null)}),a[Vs]=null}};function qh(i){this._internalRoot=i}qh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Vc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<qn.length&&a!==0&&a<qn[c].priority;c++);qn.splice(c,0,i),c===0&&Ga(i)}};function Zg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Gh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Px(){}function yD(i,a,c,f,y){if(y){if(typeof f=="function"){var w=f;f=function(){var Q=Hh(C);w.call(Q)}}var C=Ax(a,f,i,0,null,!1,!1,"",Px);return i._reactRootContainer=C,i[Vs]=C.current,Yc(i.nodeType===8?i.parentNode:i),Xo(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof f=="function"){var M=f;f=function(){var Q=Hh(V);M.call(Q)}}var V=Yg(i,0,!1,null,null,!1,!1,"",Px);return i._reactRootContainer=V,i[Vs]=V.current,Yc(i.nodeType===8?i.parentNode:i),Xo(function(){Wh(a,V,c,f)}),V}function Kh(i,a,c,f,y){var w=c._reactRootContainer;if(w){var C=w;if(typeof y=="function"){var M=y;y=function(){var V=Hh(C);M.call(V)}}Wh(a,C,i,y)}else C=yD(c,a,i,y,f);return Hh(C)}Lc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=ot(a.pendingLanes);c!==0&&(Mc(a,c|1),Ln(a,gt()),(nt&6)===0&&(wl=gt()+500,Li()))}break;case 13:Xo(function(){var f=Bs(i,1);if(f!==null){var y=Sn();Dr(f,i,1,y)}}),Xg(i,1)}},Ha=function(i){if(i.tag===13){var a=Bs(i,134217728);if(a!==null){var c=Sn();Dr(a,i,134217728,c)}Xg(i,134217728)}},jc=function(i){if(i.tag===13){var a=Bi(i),c=Bs(i,a);if(c!==null){var f=Sn();Dr(c,i,a,f)}Xg(i,a)}},Vc=function(){return Ze},Fc=function(i,a){var c=Ze;try{return Ze=i,a()}finally{Ze=c}},Rs=function(i,a,c){switch(a){case"input":if(pe(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var y=dh(f);if(!y)throw Error(t(90));Nn(f),pe(f,y)}}}break;case"textarea":Ld(i,c);break;case"select":a=c.value,a!=null&&Kt(i,!!c.multiple,a,!1)}},Fd=Wg,Ud=Xo;var _D={usingClientEntryPoint:!1,Events:[Zc,al,dh,xi,Ti,Wg]},fu={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vD={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Gd(i),i===null?null:i.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||gD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{Oo=Qh.inject(vD),Wn=Qh}catch{}}return jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_D,jn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(a))throw Error(t(200));return mD(i,a,null,c)},jn.createRoot=function(i,a){if(!Zg(i))throw Error(t(299));var c=!1,f="",y=Nx;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Yg(i,1,!1,null,null,c,!1,f,y),i[Vs]=a.current,Yc(i.nodeType===8?i.parentNode:i),new Jg(a)},jn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Gd(a),i=i===null?null:i.stateNode,i},jn.flushSync=function(i){return Xo(i)},jn.hydrate=function(i,a,c){if(!Gh(a))throw Error(t(200));return Kh(null,i,a,!0,c)},jn.hydrateRoot=function(i,a,c){if(!Zg(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,y=!1,w="",C=Nx;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),a=Ax(a,null,i,1,c??null,y,!1,w,C),i[Vs]=a.current,Yc(i),f)for(i=0;i<f.length;i++)c=f[i],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new qh(a)},jn.render=function(i,a,c){if(!Gh(a))throw Error(t(200));return Kh(null,i,a,!1,c)},jn.unmountComponentAtNode=function(i){if(!Gh(i))throw Error(t(40));return i._reactRootContainer?(Xo(function(){Kh(null,null,i,!1,function(){i._reactRootContainer=null,i[Vs]=null})}),!0):!1},jn.unstable_batchedUpdates=Wg,jn.unstable_renderSubtreeIntoContainer=function(i,a,c,f){if(!Gh(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Kh(i,a,c,!1,f)},jn.version="18.3.1-next-f1338f8080-20240426",jn}var Ux;function aS(){if(Ux)return ny.exports;Ux=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ny.exports=bD(),ny.exports}var zx;function RD(){if(zx)return Yh;zx=1;var n=aS();return Yh.createRoot=n.createRoot,Yh.hydrateRoot=n.hydrateRoot,Yh}var AD=RD(),I=bp();const Ki=oS(I),lS=ED({__proto__:null,default:Ki},[I]),kD=()=>{};var Bx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(n,e){if(!n)throw oc(e)},oc=function(n){return new Error("Firebase Database ("+cS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ND=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},G_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,g=o>>2,_=(o&3)<<4|u>>4;let v=(u&15)<<2|p>>6,T=p&63;d||(T=64,l||(v=64)),r.push(t[g],t[_],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ND(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||_==null)throw new PD;const v=o<<2|u>>4;if(r.push(v),p!==64){const T=u<<4&240|p>>2;if(r.push(T),_!==64){const A=p<<6&192|_;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dS=function(n){const e=uS(n);return G_.encodeByteArray(e,!0)},Nf=function(n){return dS(n).replace(/\./g,"")},Pf=function(n){try{return G_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){return hS(void 0,n)}function hS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!OD(t)||(n[t]=hS(n[t],e[t]));return n}function OD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=()=>MD().__FIREBASE_DEFAULTS__,jD=()=>{if(typeof process>"u"||typeof Bx>"u")return;const n=Bx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Pf(n[1]);return e&&JSON.parse(e)},Rp=()=>{try{return kD()||LD()||jD()||VD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fS=n=>Rp()?.emulatorHosts?.[n],K_=n=>{const e=fS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pS=()=>Rp()?.config,mS=n=>Rp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ap(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nf(JSON.stringify(t)),Nf(JSON.stringify(l)),""].join(".")}const Au={};function FD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?n.emulator.push(e):n.prod.push(e);return n}function UD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $x=!1;function kp(n,e){if(typeof window>"u"||typeof document>"u"||!Is(window.location.host)||Au[n]===e||Au[n]||$x)return;Au[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=FD().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{$x=!0,l()},v}function g(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=UD(r),T=t("text"),A=document.getElementById(T)||document.createElement("span"),S=t("learnmore"),b=document.getElementById(S)||document.createElement("a"),j=t("preprendIcon"),U=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const B=v.element;u(B),g(b,S);const G=p();d(U,j),B.append(U,A,b,G),document.body.appendChild(B)}o?(A.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function zD(){const n=Rp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $D(){const n=xn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function WD(){return cS.NODE_ADMIN===!0}function HD(){return!zD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}function qD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="FirebaseError";class Tr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GD,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?KD(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new Tr(s,u,r)}}function KD(n,e){return n.replace(QD,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const QD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n){return JSON.parse(n)}function tn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=$u(Pf(o[0])||""),t=$u(Pf(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},YD=function(n){const e=wS(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},XD=function(n){const e=wS(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function $l(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Df(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Of(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function ti(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(Wx(o)&&Wx(l)){if(!ti(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Wx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function xu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)r[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)r[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const v=r[_-3]^r[_-8]^r[_-14]^r[_-16];r[_]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],l=this.chain_[2],u=this.chain_[3],d=this.chain_[4],p,g;for(let _=0;_<80;_++){_<40?_<20?(p=u^o&(l^u),g=1518500249):(p=o^l^u,g=1859775393):_<60?(p=o&l|u&(o|l),g=2400959708):(p=o^l^u,g=3395469782);const v=(s<<5|s>>>27)+p+d+g+r[_]&4294967295;d=u,u=l,l=(o<<30|o>>>2)&4294967295,o=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}else for(;s<t;)if(o[l]=e[s],++l,++s,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function ZD(n,e){const t=new e2(n,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=iy),s.error===void 0&&(s.error=iy),s.complete===void 0&&(s.complete=iy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function iy(){}function Wl(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,le(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(o<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Np=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1e3,s2=2,i2=14400*1e3,o2=.5;function Hx(n,e=r2,t=s2){const r=e*Math.pow(t,n),s=Math.round(o2*r*(Math.random()-.5)*2);return Math.min(i2,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n){return n&&n._delegate?n._delegate:n}class ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Qs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c2(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function l2(n){return n===na?void 0:n}function c2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const d2={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},h2=Qe.INFO,f2={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},p2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=f2[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fd{constructor(e){this.name=e,this._logLevel=h2,this._logHandler=p2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const m2=(n,e)=>e.some(t=>n instanceof t);let qx,Gx;function g2(){return qx||(qx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y2(){return Gx||(Gx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ES=new WeakMap,$y=new WeakMap,xS=new WeakMap,oy=new WeakMap,X_=new WeakMap;function _2(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(no(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&ES.set(t,n)}).catch(()=>{}),X_.set(e,n),e}function v2(n){if($y.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});$y.set(n,e)}let Wy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $y.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return no(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function w2(n){Wy=n(Wy)}function E2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ay(this),e,...t);return xS.set(r,e.sort?e.sort():[e]),no(r)}:y2().includes(n)?function(...e){return n.apply(ay(this),e),no(ES.get(this))}:function(...e){return no(n.apply(ay(this),e))}}function x2(n){return typeof n=="function"?E2(n):(n instanceof IDBTransaction&&v2(n),m2(n,g2())?new Proxy(n,Wy):n)}function no(n){if(n instanceof IDBRequest)return _2(n);if(oy.has(n))return oy.get(n);const e=x2(n);return e!==n&&(oy.set(n,e),X_.set(e,n)),e}const ay=n=>X_.get(n);function TS(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=no(l);return r&&l.addEventListener("upgradeneeded",d=>{r(no(l.result),d.oldVersion,d.newVersion,no(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const T2=["get","getKey","getAll","getAllKeys","count"],I2=["put","add","delete","clear"],ly=new Map;function Kx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=I2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T2.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return ly.set(e,o),o}w2(n=>({...n,get:(e,t,r)=>Kx(e,t)||n.get(e,t,r),has:(e,t)=>!!Kx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function S2(n){return n.getComponent()?.type==="VERSION"}const Hy="@firebase/app",Qx="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new fd("@firebase/app"),b2="@firebase/app-compat",R2="@firebase/analytics-compat",A2="@firebase/analytics",k2="@firebase/app-check-compat",N2="@firebase/app-check",P2="@firebase/auth",D2="@firebase/auth-compat",O2="@firebase/database",M2="@firebase/data-connect",L2="@firebase/database-compat",j2="@firebase/functions",V2="@firebase/functions-compat",F2="@firebase/installations",U2="@firebase/installations-compat",z2="@firebase/messaging",B2="@firebase/messaging-compat",$2="@firebase/performance",W2="@firebase/performance-compat",H2="@firebase/remote-config",q2="@firebase/remote-config-compat",G2="@firebase/storage",K2="@firebase/storage-compat",Q2="@firebase/firestore",Y2="@firebase/ai",X2="@firebase/firestore-compat",J2="firebase",Z2="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="[DEFAULT]",eO={[Hy]:"fire-core",[b2]:"fire-core-compat",[A2]:"fire-analytics",[R2]:"fire-analytics-compat",[N2]:"fire-app-check",[k2]:"fire-app-check-compat",[P2]:"fire-auth",[D2]:"fire-auth-compat",[O2]:"fire-rtdb",[M2]:"fire-data-connect",[L2]:"fire-rtdb-compat",[j2]:"fire-fn",[V2]:"fire-fn-compat",[F2]:"fire-iid",[U2]:"fire-iid-compat",[z2]:"fire-fcm",[B2]:"fire-fcm-compat",[$2]:"fire-perf",[W2]:"fire-perf-compat",[H2]:"fire-rc",[q2]:"fire-rc-compat",[G2]:"fire-gcs",[K2]:"fire-gcs-compat",[Q2]:"fire-fst",[X2]:"fire-fst-compat",[Y2]:"fire-vertex","fire-js":"fire-js",[J2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new Map,tO=new Map,Gy=new Map;function Yx(n,e){try{n.container.addComponent(e)}catch(t){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Er(n){const e=n.name;if(Gy.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Gy.set(e,n);for(const t of Mf.values())Yx(t,n);for(const t of tO.values())Yx(t,n);return!0}function di(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new Ia("app","Firebase",nO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=Z2;function IS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:qy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ro.create("bad-app-name",{appName:String(s)});if(t||(t=pS()),!t)throw ro.create("no-options");const o=Mf.get(s);if(o){if(ti(t,o.options)&&ti(r,o.config))return o;throw ro.create("duplicate-app",{appName:s})}const l=new u2(s);for(const d of Gy.values())l.addComponent(d);const u=new rO(t,r,l);return Mf.set(s,u),u}function pd(n=qy){const e=Mf.get(n);if(!e&&n===qy&&pS())return IS();if(!e)throw ro.create("no-app",{appName:n});return e}function En(n,e,t){let r=eO[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(l.join(" "));return}Er(new ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="firebase-heartbeat-database",iO=1,Wu="firebase-heartbeat-store";let cy=null;function CS(){return cy||(cy=TS(sO,iO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ro.create("idb-open",{originalErrorMessage:n.message})})),cy}async function oO(n){try{const t=(await CS()).transaction(Wu),r=await t.objectStore(Wu).get(SS(n));return await t.done,r}catch(e){if(e instanceof Tr)ni.warn(e.message);else{const t=ro.create("idb-get",{originalErrorMessage:e?.message});ni.warn(t.message)}}}async function Xx(n,e){try{const r=(await CS()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,SS(n)),await r.done}catch(t){if(t instanceof Tr)ni.warn(t.message);else{const r=ro.create("idb-set",{originalErrorMessage:t?.message});ni.warn(r.message)}}}function SS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=1024,lO=30;class cO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>lO){const s=hO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ni.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jx(),{heartbeatsToSend:t,unsentEntries:r}=uO(this._heartbeatsCache.heartbeats),s=Nf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return ni.warn(e),""}}}function Jx(){return new Date().toISOString().substring(0,10)}function uO(n,e=aO){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Zx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Zx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class dO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?vS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zx(n){return Nf(JSON.stringify({version:2,heartbeats:n})).length}function hO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(n){Er(new ir("platform-logger",e=>new C2(e),"PRIVATE")),Er(new ir("heartbeat",e=>new cO(e),"PRIVATE")),En(Hy,Qx,n),En(Hy,Qx,"esm2020"),En("fire-js","")}fO("");var pO="firebase",mO="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En(pO,mO,"app");const bS="@firebase/installations",J_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1e4,AS=`w:${J_}`,kS="FIS_v2",gO="https://firebaseinstallations.googleapis.com/v1",yO=3600*1e3,_O="installations",vO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new Ia(_O,vO,wO);function NS(n){return n instanceof Tr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS({projectId:n}){return`${gO}/projects/${n}/installations`}function DS(n){return{token:n.token,requestStatus:2,expiresIn:xO(n.expiresIn),creationTime:Date.now()}}async function OS(n,e){const r=(await e.json()).error;return da.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function MS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function EO(n,{refreshToken:e}){const t=MS(n);return t.append("Authorization",TO(e)),t}async function LS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function xO(n){return Number(n.replace("s","000"))}function TO(n){return`${kS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=PS(n),s=MS(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:kS,appId:n.appId,sdkVersion:AS},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await LS(()=>fetch(r,u));if(d.ok){const p=await d.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:DS(p.authToken)}}else throw await OS("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=/^[cdef][\w-]{21}$/,Ky="";function bO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=RO(n);return SO.test(t)?t:Ky}catch{return Ky}}function RO(n){return CO(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Map;function FS(n,e){const t=Pp(n);US(t,e),AO(t,e)}function US(n,e){const t=VS.get(n);if(t)for(const r of t)r(e)}function AO(n,e){const t=kO();t&&t.postMessage({key:n,fid:e}),NO()}let sa=null;function kO(){return!sa&&"BroadcastChannel"in self&&(sa=new BroadcastChannel("[Firebase] FID Change"),sa.onmessage=n=>{US(n.data.key,n.data.fid)}),sa}function NO(){VS.size===0&&sa&&(sa.close(),sa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="firebase-installations-database",DO=1,ha="firebase-installations-store";let uy=null;function Z_(){return uy||(uy=TS(PO,DO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ha)}}})),uy}async function Lf(n,e){const t=Pp(n),s=(await Z_()).transaction(ha,"readwrite"),o=s.objectStore(ha),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&FS(n,e.fid),e}async function zS(n){const e=Pp(n),r=(await Z_()).transaction(ha,"readwrite");await r.objectStore(ha).delete(e),await r.done}async function Dp(n,e){const t=Pp(n),s=(await Z_()).transaction(ha,"readwrite"),o=s.objectStore(ha),l=await o.get(t),u=e(l);return u===void 0?await o.delete(t):await o.put(u,t),await s.done,u&&(!l||l.fid!==u.fid)&&FS(n,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ev(n){let e;const t=await Dp(n.appConfig,r=>{const s=OO(r),o=MO(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===Ky?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function OO(n){const e=n||{fid:bO(),registrationStatus:0};return BS(e)}function MO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(da.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=LO(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jO(n)}:{installationEntry:e}}async function LO(n,e){try{const t=await IO(n,e);return Lf(n.appConfig,t)}catch(t){throw NS(t)&&t.customData.serverCode===409?await zS(n.appConfig):await Lf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function jO(n){let e=await eT(n.appConfig);for(;e.registrationStatus===1;)await jS(100),e=await eT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await ev(n);return r||t}return e}function eT(n){return Dp(n,e=>{if(!e)throw da.create("installation-not-found");return BS(e)})}function BS(n){return VO(n)?{fid:n.fid,registrationStatus:0}:n}function VO(n){return n.registrationStatus===1&&n.registrationTime+RS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO({appConfig:n,heartbeatServiceProvider:e},t){const r=UO(n,t),s=EO(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:AS,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},d=await LS(()=>fetch(r,u));if(d.ok){const p=await d.json();return DS(p)}else throw await OS("Generate Auth Token",d)}function UO(n,{fid:e}){return`${PS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(n,e=!1){let t;const r=await Dp(n.appConfig,o=>{if(!$S(o))throw da.create("not-registered");const l=o.authToken;if(!e&&$O(l))return o;if(l.requestStatus===1)return t=zO(n,e),o;{if(!navigator.onLine)throw da.create("app-offline");const u=HO(o);return t=BO(n,u),u}});return t?await t:r.authToken}async function zO(n,e){let t=await tT(n.appConfig);for(;t.authToken.requestStatus===1;)await jS(100),t=await tT(n.appConfig);const r=t.authToken;return r.requestStatus===0?tv(n,e):r}function tT(n){return Dp(n,e=>{if(!$S(e))throw da.create("not-registered");const t=e.authToken;return qO(t)?{...e,authToken:{requestStatus:0}}:e})}async function BO(n,e){try{const t=await FO(n,e),r={...e,authToken:t};return await Lf(n.appConfig,r),t}catch(t){if(NS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await zS(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Lf(n.appConfig,r)}throw t}}function $S(n){return n!==void 0&&n.registrationStatus===2}function $O(n){return n.requestStatus===2&&!WO(n)}function WO(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+yO}function HO(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function qO(n){return n.requestStatus===1&&n.requestTime+RS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GO(n){const e=n,{installationEntry:t,registrationPromise:r}=await ev(e);return r?r.catch(console.error):tv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(n,e=!1){const t=n;return await QO(t),(await tv(t,e)).token}async function QO(n){const{registrationPromise:e}=await ev(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(n){if(!n||!n.options)throw dy("App Configuration");if(!n.name)throw dy("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw dy(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function dy(n){return da.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="installations",XO="installations-internal",JO=n=>{const e=n.getProvider("app").getImmediate(),t=YO(e),r=di(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ZO=n=>{const e=n.getProvider("app").getImmediate(),t=di(e,WS).getImmediate();return{getId:()=>GO(t),getToken:s=>KO(t,s)}};function eM(){Er(new ir(WS,JO,"PUBLIC")),Er(new ir(XO,ZO,"PRIVATE"))}eM();En(bS,J_);En(bS,J_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="analytics",tM="firebase_id",nM="origin",rM=60*1e3,sM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new fd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nr=new Ia("analytics","Analytics",iM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){if(!n.startsWith(nv)){const e=nr.create("invalid-gtag-resource",{gtagURL:n});return Bn.warn(e.message),""}return n}function HS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function aM(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function lM(n,e){const t=aM("firebase-js-sdk-policy",{createScriptURL:oM}),r=document.createElement("script"),s=`${nv}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function cM(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function uM(n,e,t,r,s,o){const l=r[s];try{if(l)await e[l];else{const d=(await HS(t)).find(p=>p.measurementId===s);d&&await e[d.appId]}}catch(u){Bn.error(u)}n("config",s,o)}async function dM(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const u=await HS(t);for(const d of l){const p=u.find(_=>_.measurementId===d),g=p&&e[p.appId];if(g)o.push(g);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){Bn.error(o)}}function hM(n,e,t,r){async function s(o,...l){try{if(o==="event"){const[u,d]=l;await dM(n,e,t,u,d)}else if(o==="config"){const[u,d]=l;await uM(n,e,t,r,u,d)}else if(o==="consent"){const[u,d]=l;n("consent",u,d)}else if(o==="get"){const[u,d,p]=l;n("get",u,d,p)}else if(o==="set"){const[u]=l;n("set",u)}else n(o,...l)}catch(u){Bn.error(u)}}return s}function fM(n,e,t,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=hM(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function pM(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(nv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=30,gM=1e3;class yM{constructor(e={},t=gM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qS=new yM;function _M(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function vM(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:_M(t)},s=sM.replace("{app-id}",e),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();u.error?.message&&(l=u.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function wM(n,e=qS,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw nr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw nr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new TM;return setTimeout(async()=>{u.abort()},rM),GS({appId:r,apiKey:s,measurementId:o},l,u,e)}async function GS(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=qS){const{appId:o,measurementId:l}=n;try{await EM(r,e)}catch(u){if(l)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:l};throw u}try{const u=await vM(n);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!xM(d)){if(s.deleteThrottleMetadata(o),l)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:o,measurementId:l};throw u}const p=Number(d?.customData?.httpStatus)===503?Hx(t,s.intervalMillis,mM):Hx(t,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return s.setThrottleMetadata(o,g),Bn.debug(`Calling attemptFetch again in ${p} millis`),GS(n,g,r,s)}}function EM(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r(nr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xM(n){if(!(n instanceof Tr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class TM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function IM(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,l={...r,send_to:o};n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(){if(_S())try{await vS()}catch(n){return Bn.warn(nr.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Bn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function SM(n,e,t,r,s,o,l){const u=wM(n);u.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Bn.error(v)),e.push(u);const d=CM().then(v=>{if(v)return r.getId()}),[p,g]=await Promise.all([u,d]);pM(o)||lM(o,p.measurementId),s("js",new Date);const _=l?.config??{};return _[nM]="firebase",_.update=!0,g!=null&&(_[tM]=g),s("config",p.measurementId,_),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.app=e}_delete(){return delete ku[this.app.options.appId],Promise.resolve()}}let ku={},nT=[];const rT={};let hy="dataLayer",RM="gtag",sT,KS,iT=!1;function AM(){const n=[];if(gS()&&n.push("This is a browser extension environment."),qD()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=nr.create("invalid-analytics-context",{errorInfo:e});Bn.warn(t.message)}}function kM(n,e,t){AM();const r=n.options.appId;if(!r)throw nr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nr.create("no-api-key");if(ku[r]!=null)throw nr.create("already-exists",{id:r});if(!iT){cM(hy);const{wrappedGtag:o,gtagCore:l}=fM(ku,nT,rT,hy,RM);KS=o,sT=l,iT=!0}return ku[r]=SM(n,nT,rT,e,sT,hy,t),new bM(n)}function NM(n=pd()){n=lt(n);const e=di(n,jf);return e.isInitialized()?e.getImmediate():PM(n)}function PM(n,e={}){const t=di(n,jf);if(t.isInitialized()){const s=t.getImmediate();if(ti(e,t.getOptions()))return s;throw nr.create("already-initialized")}return t.initialize({options:e})}function DM(n,e,t,r){n=lt(n),IM(KS,ku[n.app.options.appId],e,t,r).catch(s=>Bn.error(s))}const oT="@firebase/analytics",aT="0.10.18";function OM(){Er(new ir(jf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kM(r,s,t)},"PUBLIC")),Er(new ir("analytics-internal",n,"PRIVATE")),En(oT,aT),En(oT,aT,"esm2020");function n(e){try{const t=e.getProvider(jf).getImmediate();return{logEvent:(r,s,o)=>DM(t,r,s,o)}}catch(t){throw nr.create("interop-component-reg-failed",{reason:t})}}}OM();function QS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MM=QS,YS=new Ia("auth","Firebase",QS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new fd("@firebase/auth");function LM(n,...e){Vf.logLevel<=Qe.WARN&&Vf.warn(`Auth (${xo}): ${n}`,...e)}function gf(n,...e){Vf.logLevel<=Qe.ERROR&&Vf.error(`Auth (${xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n,...e){throw rv(n,...e)}function fs(n,...e){return rv(n,...e)}function XS(n,e,t){const r={...MM(),[e]:t};return new Ia("auth","Firebase",r).create(e,{appName:n.name})}function ps(n){return XS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YS.create(n,...e)}function De(n,e,...t){if(!n)throw rv(e,...t)}function Ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gf(e),new Error(e)}function ri(n,e){n||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){return typeof self<"u"&&self.location?.href||""}function jM(){return lT()==="http:"||lT()==="https:"}function lT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jM()||gS()||"connection"in navigator)?navigator.onLine:!0}function FM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile=Y_()||yS()}get(){return VM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BM=new md(3e4,6e4);function To(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Io(n,e,t,r,s={}){return ZS(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=ac({key:n.config.apiKey,...l}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...o};return BD()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Is(n.emulatorConfig.host)&&(p.credentials="include"),JS.fetch()(await eb(n,n.config.apiHost,t,u),p)})}async function ZS(n,e,t){n._canInitEmulator=!1;const r={...UM,...e};try{const s=new WM(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Xh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Xh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Xh(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw XS(n,g,p);Ur(n,g)}}catch(s){if(s instanceof Tr)throw s;Ur(n,"network-request-failed",{message:String(s)})}}async function gd(n,e,t,r,s={}){const o=await Io(n,e,t,r,s);return"mfaPendingCredential"in o&&Ur(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function eb(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?sv(n.config,s):`${n.config.apiScheme}://${s}`;return zM.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function $M(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fs(this.auth,"network-request-failed")),BM.get())})}}function Xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=fs(n,e,r);return s.customData._tokenResponse=t,s}function cT(n){return n!==void 0&&n.enterprise!==void 0}class HM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $M(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qM(n,e){return Io(n,"GET","/v2/recaptchaConfig",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(n,e){return Io(n,"POST","/v1/accounts:delete",e)}async function Ff(n,e){return Io(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KM(n,e=!1){const t=lt(n),r=await t.getIdToken(e),s=iv(r);De(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:Nu(fy(s.auth_time)),issuedAtTime:Nu(fy(s.iat)),expirationTime:Nu(fy(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function fy(n){return Number(n)*1e3}function iv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gf("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pf(t);return s?JSON.parse(s):(gf("Failed to decode base64 JWT payload"),null)}catch(s){return gf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function uT(n){const e=iv(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Tr&&QM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function QM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(n){const e=n.auth,t=await n.getIdToken(),r=await Hu(n,Ff(e,{idToken:t}));De(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?tb(s.providerUserInfo):[],l=JM(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!l?.length,p=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Yy(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function XM(n){const e=lt(n);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(n,e){const t=await ZS(n,{},async()=>{const r=ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await eb(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Is(n.emulatorConfig.host)&&(d.credentials="include"),JS.fetch()(l,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eL(n,e){return Io(n,"POST","/v2/accounts:revokeToken",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=uT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await ZM(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Dl;return r&&(De(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mr{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new YM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KM(this,e)}reload(){return XM(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Hu(this,GM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:_,emailVerified:v,isAnonymous:T,providerData:A,stsTokenManager:S}=t;De(_&&S,e,"internal-error");const b=Dl.fromJSON(this.name,S);De(typeof _=="string",e,"internal-error"),qi(r,e.name),qi(s,e.name),De(typeof v=="boolean",e,"internal-error"),De(typeof T=="boolean",e,"internal-error"),qi(o,e.name),qi(l,e.name),qi(u,e.name),qi(d,e.name),qi(p,e.name),qi(g,e.name);const j=new Mr({uid:_,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:b,createdAt:p,lastLoginAt:g});return A&&Array.isArray(A)&&(j.providerData=A.map(U=>({...U}))),d&&(j._redirectEventId=d),j}static async _fromIdTokenResponse(e,t,r=!1){const s=new Dl;s.updateFromServerResponse(t);const o=new Mr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Uf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?tb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,u=new Dl;u.updateFromIdToken(r);const d=new Mr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;function Xs(n){ri(n instanceof Function,"Expected a class definition");let e=dT.get(n);return e?(ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nb.type="NONE";const hT=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ol{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=yf(this.userKey,s.apiKey,o),this.fullPersistenceKey=yf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ff(this.auth,{idToken:e}).catch(()=>{});return t?Mr._fromGetAccountInfoResponse(this.auth,t,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ol(Xs(hT),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Xs(hT);const l=yf(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const g=await p._get(l);if(g){let _;if(typeof g=="string"){const v=await Ff(e,{idToken:g}).catch(()=>{});if(!v)break;_=await Mr._fromGetAccountInfoResponse(e,v,g)}else _=Mr._fromJSON(e,g);p!==o&&(u=_),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Ol(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ol(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ob(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lb(e))return"Blackberry";if(cb(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ib(e))&&!e.includes("edge/"))return"Chrome";if(ab(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function rb(n=xn()){return/firefox\//i.test(n)}function sb(n=xn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ib(n=xn()){return/crios\//i.test(n)}function ob(n=xn()){return/iemobile/i.test(n)}function ab(n=xn()){return/android/i.test(n)}function lb(n=xn()){return/blackberry/i.test(n)}function cb(n=xn()){return/webos/i.test(n)}function ov(n=xn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tL(n=xn()){return ov(n)&&!!window.navigator?.standalone}function nL(){return $D()&&document.documentMode===10}function ub(n=xn()){return ov(n)||ab(n)||cb(n)||lb(n)||/windows phone/i.test(n)||ob(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n,e=[]){let t;switch(n){case"Browser":t=fT(xn());break;case"Worker":t=`${fT(xn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(n,e={}){return Io(n,"GET","/v2/passwordPolicy",To(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=6;class oL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pT(this),this.idTokenSubscription=new pT(this),this.beforeStateQueue=new rL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ff(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(ps(this));const t=e?lt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sL(this),t=new oL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await eL(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LM(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Co(n){return lt(n)}class pT{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZD(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lL(n){Op=n}function hb(n){return Op.loadJS(n)}function cL(){return Op.recaptchaEnterpriseScript}function uL(){return Op.gapiScript}function dL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class hL{constructor(){this.enterprise=new fL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pL="recaptcha-enterprise",fb="NO_RECAPTCHA";class mL{constructor(e){this.type=pL,this.auth=Co(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{qM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new HM(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;cT(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(fb)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hL().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&cT(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=cL();d.length!==0&&(d+=u),hb(d).then(()=>{s(u,o,l)}).catch(p=>{l(p)})}}).catch(u=>{l(u)})})}}async function mT(n,e,t,r=!1,s=!1){const o=new mL(n);let l;if(s)l=fb;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Xy(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await mT(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n,e){const t=di(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(ti(o,e??{}))return s;Ur(s,"already-initialized")}return t.initialize({options:e})}function yL(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Xs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function _L(n,e,t){const r=Co(n);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=pb(e),{host:l,port:u}=vL(e),d=u===null?"":`:${u}`,p={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(ti(p,r.config.emulator)&&ti(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Is(l)?(Ap(`${o}//${l}${d}`),kp("Auth",!0)):wL()}function pb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vL(n){const e=pb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:gT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:gT(l)}}}function gT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}async function EL(n,e){return Io(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(n,e){return gd(n,"POST","/v1/accounts:signInWithPassword",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(n,e){return gd(n,"POST","/v1/accounts:signInWithEmailLink",To(n,e))}async function IL(n,e){return gd(n,"POST","/v1/accounts:signInWithEmailLink",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends av{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new qu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new qu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,t,"signInWithPassword",xL);case"emailLink":return TL(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,r,"signUpPassword",EL);case"emailLink":return IL(e,{idToken:t,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return gd(n,"POST","/v1/accounts:signInWithIdp",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="http://localhost";class fa extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new fa(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ml(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ml(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ml(e,t)}buildRequest(){const e={requestUri:CL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bL(n){const e=Eu(xu(n)).link,t=e?Eu(xu(e)).deep_link_id:null,r=Eu(xu(n)).deep_link_id;return(r?Eu(xu(r)).link:null)||r||t||e||n}class lv{constructor(e){const t=Eu(xu(e)),r=t.apiKey??null,s=t.oobCode??null,o=SL(t.mode??null);De(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=bL(e);try{return new lv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.providerId=lc.PROVIDER_ID}static credential(e,t){return qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lv.parseLink(t);return De(r,"argument-error"),qu._fromEmailAndCode(e,r.code,r.tenantId)}}lc.PROVIDER_ID="password";lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends mb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends yd{constructor(){super("facebook.com")}static credential(e){return fa._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends yd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fa._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xi.credential(t,r)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends yd{constructor(){super("github.com")}static credential(e){return fa._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends yd{constructor(){super("twitter.com")}static credential(e,t){return fa._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Zi.credential(t,r)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n,e){return gd(n,"POST","/v1/accounts:signUp",To(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Mr._fromIdTokenResponse(e,r,s),l=yT(r);return new si({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=yT(r);return new si({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function yT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(n){if(Rn(n.app))return Promise.reject(ps(n));const e=Co(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new si({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await gb(e,{returnSecureToken:!0}),r=await si._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Tr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new zf(e,t,r,s)}}function yb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(n,o,e,r):o})}async function AL(n,e,t=!1){const r=await Hu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return si._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(n,e,t=!1){const{auth:r}=n;if(Rn(r.app))return Promise.reject(ps(r));const s="reauthenticate";try{const o=await Hu(n,yb(r,s,e,n),t);De(o.idToken,r,"internal-error");const l=iv(o.idToken);De(l,r,"internal-error");const{sub:u}=l;return De(n.uid===u,r,"user-mismatch"),si._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ur(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(n,e,t=!1){if(Rn(n.app))return Promise.reject(ps(n));const r="signIn",s=await yb(n,r,e),o=await si._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function NL(n,e){return _b(Co(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(n){const e=Co(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PL(n,e,t){if(Rn(n.app))return Promise.reject(ps(n));const r=Co(n),l=await Xy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gb).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&vb(n),d}),u=await si._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function DL(n,e,t){return Rn(n.app)?Promise.reject(ps(n)):NL(lt(n),lc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vb(n),r})}function OL(n,e,t,r){return lt(n).onIdTokenChanged(e,t,r)}function ML(n,e,t){return lt(n).beforeAuthStateChanged(e,t)}function LL(n,e,t,r){return lt(n).onAuthStateChanged(e,t,r)}function jL(n){return lt(n).signOut()}const Bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=1e3,FL=10;class Eb extends wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);nL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FL):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},VL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eb.type="LOCAL";const UL=Eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xb.type="SESSION";const Tb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Mp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async p=>p(t.origin,o)),d=await zL(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const p=cv("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const v=_;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function $L(n){ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function WL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HL(){return navigator?.serviceWorker?.controller||null}function qL(){return Ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="firebaseLocalStorageDb",GL=1,$f="firebaseLocalStorage",Sb="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lp(n,e){return n.transaction([$f],e?"readwrite":"readonly").objectStore($f)}function KL(){const n=indexedDB.deleteDatabase(Cb);return new _d(n).toPromise()}function Jy(){const n=indexedDB.open(Cb,GL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore($f,{keyPath:Sb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains($f)?e(r):(r.close(),await KL(),e(await Jy()))})})}async function _T(n,e,t){const r=Lp(n,!0).put({[Sb]:e,value:t});return new _d(r).toPromise()}async function QL(n,e){const t=Lp(n,!1).get(e),r=await new _d(t).toPromise();return r===void 0?null:r.value}function vT(n,e){const t=Lp(n,!0).delete(e);return new _d(t).toPromise()}const YL=800,XL=3;class bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>XL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mp._getInstance(qL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WL(),!this.activeServiceWorker)return;this.sender=new BL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jy();return await _T(e,Bf,"1"),await vT(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_T(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>QL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Lp(s,!1).getAll();return new _d(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bb.type="LOCAL";const JL=bb;new md(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(n,e){return e?Xs(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e4(n){return _b(n.auth,new uv(n),n.bypassAuthState)}function t4(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),kL(t,new uv(n),n.bypassAuthState)}async function n4(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),AL(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:Ur(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new md(2e3,1e4);class Nl extends Rb{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Nl.currentPopupAction&&Nl.currentPopupAction.cancel(),Nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r4.get())};e()}}Nl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="pendingRedirect",_f=new Map;class i4 extends Rb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_f.get(this.auth._key());if(!e){try{const r=await o4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_f.set(this.auth._key(),e)}return this.bypassAuthState||_f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o4(n,e){const t=c4(e),r=l4(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function a4(n,e){_f.set(n._key(),e)}function l4(n){return Xs(n._redirectPersistence)}function c4(n){return yf(s4,n.config.apiKey,n.name)}async function u4(n,e,t=!1){if(Rn(n.app))return Promise.reject(ps(n));const r=Co(n),s=ZL(r,e),l=await new i4(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=600*1e3;class h4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ab(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d4&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ab({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function f4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ab(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(n,e={}){return Io(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g4=/^https?/;async function y4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await p4(n);for(const t of e)try{if(_4(t))return}catch{}Ur(n,"unauthorized-domain")}function _4(n){const e=Qy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!g4.test(t))return!1;if(m4.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new md(3e4,6e4);function ET(){const n=ms().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function w4(n){return new Promise((e,t)=>{function r(){ET(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ET(),t(fs(n,"network-request-failed"))},timeout:v4.get()})}if(ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ms().gapi?.load)r();else{const s=dL("iframefcb");return ms()[s]=()=>{gapi.load?r():t(fs(n,"network-request-failed"))},hb(`${uL()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw vf=null,e})}let vf=null;function E4(n){return vf=vf||w4(n),vf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new md(5e3,15e3),T4="__/auth/iframe",I4="emulator/auth/iframe",C4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b4(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sv(e,I4):`https://${n.config.authDomain}/${T4}`,r={apiKey:e.apiKey,appName:n.name,v:xo},s=S4.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ac(r).slice(1)}`}async function R4(n){const e=await E4(n),t=ms().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:b4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C4,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=fs(n,"network-request-failed"),u=ms().setTimeout(()=>{o(l)},x4.get());function d(){ms().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k4=500,N4=600,P4="_blank",D4="http://localhost";class xT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O4(n,e,t,r=k4,s=N4){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...A4,width:r.toString(),height:s.toString(),top:o,left:l},p=xn().toLowerCase();t&&(u=ib(p)?P4:t),rb(p)&&(e=e||D4,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[T,A])=>`${v}${T}=${A},`,"");if(tL(p)&&u!=="_self")return M4(e||"",u),new xT(null);const _=window.open(e||"",u,g);De(_,n,"popup-blocked");try{_.focus()}catch{}return new xT(_)}function M4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="__/auth/handler",j4="emulator/auth/handler",V4=encodeURIComponent("fac");async function TT(n,e,t,r,s,o){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xo,eventId:s};if(e instanceof mb){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Df(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))l[g]=_}if(e instanceof yd){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),p=d?`#${V4}=${encodeURIComponent(d)}`:"";return`${F4(n)}?${ac(u).slice(1)}${p}`}function F4({config:n}){return n.emulator?sv(n,j4):`https://${n.authDomain}/${L4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="webStorageSupport";class U4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tb,this._completeRedirectFn=u4,this._overrideRedirectResult=a4}async _openPopup(e,t,r,s){ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await TT(e,t,r,Qy(),s);return O4(e,o,cv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await TT(e,t,r,Qy(),s);return $L(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ri(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await R4(e),r=new h4(e);return t.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(py,{type:py},s=>{const o=s?.[0]?.[py];o!==void 0&&t(!!o),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ub()||sb()||ov()}}const z4=U4;var IT="@firebase/auth",CT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W4(n){Er(new ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:db(n)},p=new aL(r,s,o,d);return yL(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Er(new ir("auth-internal",e=>{const t=Co(e.getProvider("auth").getImmediate());return(r=>new B4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),En(IT,CT,$4(n)),En(IT,CT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=300,q4=mS("authIdTokenMaxAge")||H4;let ST=null;const G4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>q4)return;const s=t?.token;ST!==s&&(ST=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K4(n=pd()){const e=di(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gL(n,{popupRedirectResolver:z4,persistence:[JL,UL,Tb]}),r=mS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=G4(o.toString());ML(t,l,()=>l(t.currentUser)),OL(t,u=>l(u))}}const s=fS("auth");return s&&_L(t,`http://${s}`),t}function Q4(){return document.getElementsByTagName("head")?.[0]??document}lL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=fs("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",Q4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W4("Browser");var bT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var so,kb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function N(){}N.prototype=R.prototype,P.F=R.prototype,P.prototype=new N,P.prototype.constructor=P,P.D=function(L,O,F){for(var D=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)D[Ie-2]=arguments[Ie];return R.prototype[O].apply(L,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,N){N||(N=0);const L=Array(16);if(typeof R=="string")for(var O=0;O<16;++O)L[O]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(O=0;O<16;++O)L[O]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=P.g[0],N=P.g[1],O=P.g[2];let F=P.g[3],D;D=R+(F^N&(O^F))+L[0]+3614090360&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(O^R&(N^O))+L[1]+3905402710&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(N^F&(R^N))+L[2]+606105819&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(R^O&(F^R))+L[3]+3250441966&4294967295,N=O+(D<<22&4294967295|D>>>10),D=R+(F^N&(O^F))+L[4]+4118548399&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(O^R&(N^O))+L[5]+1200080426&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(N^F&(R^N))+L[6]+2821735955&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(R^O&(F^R))+L[7]+4249261313&4294967295,N=O+(D<<22&4294967295|D>>>10),D=R+(F^N&(O^F))+L[8]+1770035416&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(O^R&(N^O))+L[9]+2336552879&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(N^F&(R^N))+L[10]+4294925233&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(R^O&(F^R))+L[11]+2304563134&4294967295,N=O+(D<<22&4294967295|D>>>10),D=R+(F^N&(O^F))+L[12]+1804603682&4294967295,R=N+(D<<7&4294967295|D>>>25),D=F+(O^R&(N^O))+L[13]+4254626195&4294967295,F=R+(D<<12&4294967295|D>>>20),D=O+(N^F&(R^N))+L[14]+2792965006&4294967295,O=F+(D<<17&4294967295|D>>>15),D=N+(R^O&(F^R))+L[15]+1236535329&4294967295,N=O+(D<<22&4294967295|D>>>10),D=R+(O^F&(N^O))+L[1]+4129170786&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(R^N))+L[6]+3225465664&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^N&(F^R))+L[11]+643717713&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(O^F))+L[0]+3921069994&4294967295,N=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(N^O))+L[5]+3593408605&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(R^N))+L[10]+38016083&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^N&(F^R))+L[15]+3634488961&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(O^F))+L[4]+3889429448&4294967295,N=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(N^O))+L[9]+568446438&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(R^N))+L[14]+3275163606&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^N&(F^R))+L[3]+4107603335&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(O^F))+L[8]+1163531501&4294967295,N=O+(D<<20&4294967295|D>>>12),D=R+(O^F&(N^O))+L[13]+2850285829&4294967295,R=N+(D<<5&4294967295|D>>>27),D=F+(N^O&(R^N))+L[2]+4243563512&4294967295,F=R+(D<<9&4294967295|D>>>23),D=O+(R^N&(F^R))+L[7]+1735328473&4294967295,O=F+(D<<14&4294967295|D>>>18),D=N+(F^R&(O^F))+L[12]+2368359562&4294967295,N=O+(D<<20&4294967295|D>>>12),D=R+(N^O^F)+L[5]+4294588738&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^O)+L[8]+2272392833&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^N)+L[11]+1839030562&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^R)+L[14]+4259657740&4294967295,N=O+(D<<23&4294967295|D>>>9),D=R+(N^O^F)+L[1]+2763975236&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^O)+L[4]+1272893353&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^N)+L[7]+4139469664&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^R)+L[10]+3200236656&4294967295,N=O+(D<<23&4294967295|D>>>9),D=R+(N^O^F)+L[13]+681279174&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^O)+L[0]+3936430074&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^N)+L[3]+3572445317&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^R)+L[6]+76029189&4294967295,N=O+(D<<23&4294967295|D>>>9),D=R+(N^O^F)+L[9]+3654602809&4294967295,R=N+(D<<4&4294967295|D>>>28),D=F+(R^N^O)+L[12]+3873151461&4294967295,F=R+(D<<11&4294967295|D>>>21),D=O+(F^R^N)+L[15]+530742520&4294967295,O=F+(D<<16&4294967295|D>>>16),D=N+(O^F^R)+L[2]+3299628645&4294967295,N=O+(D<<23&4294967295|D>>>9),D=R+(O^(N|~F))+L[0]+4096336452&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~O))+L[7]+1126891415&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~N))+L[14]+2878612391&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~R))+L[5]+4237533241&4294967295,N=O+(D<<21&4294967295|D>>>11),D=R+(O^(N|~F))+L[12]+1700485571&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~O))+L[3]+2399980690&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~N))+L[10]+4293915773&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~R))+L[1]+2240044497&4294967295,N=O+(D<<21&4294967295|D>>>11),D=R+(O^(N|~F))+L[8]+1873313359&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~O))+L[15]+4264355552&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~N))+L[6]+2734768916&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~R))+L[13]+1309151649&4294967295,N=O+(D<<21&4294967295|D>>>11),D=R+(O^(N|~F))+L[4]+4149444226&4294967295,R=N+(D<<6&4294967295|D>>>26),D=F+(N^(R|~O))+L[11]+3174756917&4294967295,F=R+(D<<10&4294967295|D>>>22),D=O+(R^(F|~N))+L[2]+718787259&4294967295,O=F+(D<<15&4294967295|D>>>17),D=N+(F^(O|~R))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.v=function(P,R){R===void 0&&(R=P.length);const N=R-this.blockSize,L=this.C;let O=this.h,F=0;for(;F<R;){if(O==0)for(;F<=N;)s(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<R;)if(L[O++]=P.charCodeAt(F++),O==this.blockSize){s(this,L),O=0;break}}else for(;F<R;)if(L[O++]=P[F++],O==this.blockSize){s(this,L),O=0;break}}this.h=O,this.o+=R},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;R=this.o*8;for(var N=P.length-8;N<P.length;++N)P[N]=R&255,R/=256;for(this.v(P),P=Array(16),R=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)P[R++]=this.g[N]>>>L&255;return P};function o(P,R){var N=u;return Object.prototype.hasOwnProperty.call(N,P)?N[P]:N[P]=R(P)}function l(P,R){this.h=R;const N=[];let L=!0;for(let O=P.length-1;O>=0;O--){const F=P[O]|0;L&&F==R||(N[O]=F,L=!1)}this.g=N}var u={};function d(P){return-128<=P&&P<128?o(P,function(R){return new l([R|0],R<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return _;if(P<0)return b(p(-P));const R=[];let N=1;for(let L=0;P>=N;L++)R[L]=P/N|0,N*=4294967296;return new l(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return b(g(P.substring(1),R));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(R,8));let L=_;for(let F=0;F<P.length;F+=8){var O=Math.min(8,P.length-F);const D=parseInt(P.substring(F,F+O),R);O<8?(O=p(Math.pow(R,O)),L=L.j(O).add(p(D))):(L=L.j(N),L=L.add(p(D)))}return L}var _=d(0),v=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(S(this))return-b(this).m();let P=0,R=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);P+=(L>=0?L:4294967296+L)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(A(this))return"0";if(S(this))return"-"+b(this).toString(P);const R=p(Math.pow(P,6));var N=this;let L="";for(;;){const O=G(N,R).g;N=j(N,O.j(R));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(P);if(N=O,A(N))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function A(P){if(P.h!=0)return!1;for(let R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function S(P){return P.h==-1}n.l=function(P){return P=j(this,P),S(P)?-1:A(P)?0:1};function b(P){const R=P.g.length,N=[];for(let L=0;L<R;L++)N[L]=~P.g[L];return new l(N,~P.h).add(v)}n.abs=function(){return S(this)?b(this):this},n.add=function(P){const R=Math.max(this.g.length,P.g.length),N=[];let L=0;for(let O=0;O<=R;O++){let F=L+(this.i(O)&65535)+(P.i(O)&65535),D=(F>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);L=D>>>16,F&=65535,D&=65535,N[O]=D<<16|F}return new l(N,N[N.length-1]&-2147483648?-1:0)};function j(P,R){return P.add(b(R))}n.j=function(P){if(A(this)||A(P))return _;if(S(this))return S(P)?b(this).j(b(P)):b(b(this).j(P));if(S(P))return b(this.j(b(P)));if(this.l(T)<0&&P.l(T)<0)return p(this.m()*P.m());const R=this.g.length+P.g.length,N=[];for(var L=0;L<2*R;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<P.g.length;O++){const F=this.i(L)>>>16,D=this.i(L)&65535,Ie=P.i(O)>>>16,je=P.i(O)&65535;N[2*L+2*O]+=D*je,U(N,2*L+2*O),N[2*L+2*O+1]+=F*je,U(N,2*L+2*O+1),N[2*L+2*O+1]+=D*Ie,U(N,2*L+2*O+1),N[2*L+2*O+2]+=F*Ie,U(N,2*L+2*O+2)}for(P=0;P<R;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=R;P<2*R;P++)N[P]=0;return new l(N,0)};function U(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function B(P,R){this.g=P,this.h=R}function G(P,R){if(A(R))throw Error("division by zero");if(A(P))return new B(_,_);if(S(P))return R=G(b(P),R),new B(b(R.g),b(R.h));if(S(R))return R=G(P,b(R)),new B(b(R.g),R.h);if(P.g.length>30){if(S(P)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var N=v,L=R;L.l(P)<=0;)N=X(N),L=X(L);var O=ne(N,1),F=ne(L,1);for(L=ne(L,2),N=ne(N,2);!A(L);){var D=F.add(L);D.l(P)<=0&&(O=O.add(N),F=D),L=ne(L,1),N=ne(N,1)}return R=j(P,O.j(R)),new B(O,R)}for(O=_;P.l(R)>=0;){for(N=Math.max(1,Math.floor(P.m()/R.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=p(N),D=F.j(R);S(D)||D.l(P)>0;)N-=L,F=p(N),D=F.j(R);A(F)&&(F=v),O=O.add(F),P=j(P,D)}return new B(O,P)}n.B=function(P){return G(this,P).h},n.and=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let L=0;L<R;L++)N[L]=this.i(L)&P.i(L);return new l(N,this.h&P.h)},n.or=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let L=0;L<R;L++)N[L]=this.i(L)|P.i(L);return new l(N,this.h|P.h)},n.xor=function(P){const R=Math.max(this.g.length,P.g.length),N=[];for(let L=0;L<R;L++)N[L]=this.i(L)^P.i(L);return new l(N,this.h^P.h)};function X(P){const R=P.g.length+1,N=[];for(let L=0;L<R;L++)N[L]=P.i(L)<<1|P.i(L-1)>>>31;return new l(N,P.h)}function ne(P,R){const N=R>>5;R%=32;const L=P.g.length-N,O=[];for(let F=0;F<L;F++)O[F]=R>0?P.i(F+N)>>>R|P.i(F+N+1)<<32-R:P.i(F+N);return new l(O,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kb=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,so=l}).apply(typeof bT<"u"?bT:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nb,Tu,Pb,wf,Zy,Db,Ob,Mb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var E=0;E<h.length;++E){var x=h[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function s(h,E){if(E)e:{var x=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var q=h[k];if(!(q in x))break e;x=x[q]}h=h[h.length-1],k=x[h],E=E(k),E!=k&&E!=null&&e(x,h,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(E){var x=[],k;for(k in E)Object.prototype.hasOwnProperty.call(E,k)&&x.push([k,E[k]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,x){return h.call.apply(h.bind,arguments)}function p(h,E,x){return p=d,p.apply(null,arguments)}function g(h,E){var x=Array.prototype.slice.call(arguments,1);return function(){var k=x.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function _(h,E){function x(){}x.prototype=E.prototype,h.Z=E.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(k,q,Y){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return E.prototype[q].apply(k,ce)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const E=h.length;if(E>0){const x=Array(E);for(let k=0;k<E;k++)x[k]=h[k];return x}return[]}function A(h,E){for(let k=1;k<arguments.length;k++){const q=arguments[k];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=h.length||0;const Y=q.length||0;h.length=x+Y;for(let ce=0;ce<Y;ce++)h[x+ce]=q[ce]}else h.push(q)}}class S{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function b(h){l.setTimeout(()=>{throw h},0)}function j(){var h=P;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class U{constructor(){this.h=this.g=null}add(E,x){const k=B.get();k.set(E,x),this.h?this.h.next=k:this.g=k,this.h=k}}var B=new S(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ne=!1,P=new U,R=()=>{const h=Promise.resolve(void 0);X=()=>{h.then(N)}};function N(){for(var h;h=j();){try{h.h.call(h.g)}catch(x){b(x)}var E=B;E.j(h),E.h<100&&(E.h++,h.next=E.g,E.g=h)}ne=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};l.addEventListener("test",x,E),l.removeEventListener("test",x,E)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Ie(h,E){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,E)}_(Ie,O),Ie.prototype.init=function(h,E){const x=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget,E||(x=="mouseover"?E=h.fromElement:x=="mouseout"&&(E=h.toElement)),this.relatedTarget=E,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function Se(h,E,x,k,q){this.listener=h,this.proxy=null,this.src=E,this.type=x,this.capture=!!k,this.ha=q,this.key=++Ce,this.da=this.fa=!1}function W(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function J(h,E,x){for(const k in h)E.call(x,h[k],k,h)}function oe(h,E){for(const x in h)E.call(void 0,h[x],x,h)}function $(h){const E={};for(const x in h)E[x]=h[x];return E}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,E){let x,k;for(let q=1;q<arguments.length;q++){k=arguments[q];for(x in k)h[x]=k[x];for(let Y=0;Y<Z.length;Y++)x=Z[Y],Object.prototype.hasOwnProperty.call(k,x)&&(h[x]=k[x])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,E,x,k,q){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ce=Pe(h,E,k,q);return ce>-1?(E=h[ce],x||(E.fa=!1)):(E=new Se(E,this.src,Y,!!k,q),E.fa=x,h.push(E)),E};function Ne(h,E){const x=E.type;if(x in h.g){var k=h.g[x],q=Array.prototype.indexOf.call(k,E,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(k,q,1),Y&&(W(E),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Pe(h,E,x,k){for(let q=0;q<h.length;++q){const Y=h[q];if(!Y.da&&Y.listener==E&&Y.capture==!!x&&Y.ha==k)return q}return-1}var he="closure_lm_"+(Math.random()*1e6|0),Ue={};function Ye(h,E,x,k,q){if(Array.isArray(E)){for(let Y=0;Y<E.length;Y++)Ye(h,E[Y],x,k,q);return null}return x=be(x),h&&h[je]?h.J(E,x,u(k)?!!k.capture:!1,q):xt(h,E,x,!1,k,q)}function xt(h,E,x,k,q,Y){if(!E)throw Error("Invalid event type");const ce=u(q)?!!q.capture:!!q;let Be=gi(h);if(Be||(h[he]=Be=new _e(h)),x=Be.add(E,x,k,ce,Y),x.proxy)return x;if(k=kn(),x.proxy=k,k.src=h,k.listener=x,h.addEventListener)F||(q=ce),q===void 0&&(q=!1),h.addEventListener(E.toString(),k,q);else if(h.attachEvent)h.attachEvent(mi(E.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return x}function kn(){function h(x){return E.call(h.src,h.listener,x)}const E=La;return h}function Nn(h,E,x,k,q){if(Array.isArray(E))for(var Y=0;Y<E.length;Y++)Nn(h,E[Y],x,k,q);else k=u(k)?!!k.capture:!!k,x=be(x),h&&h[je]?(h=h.i,Y=String(E).toString(),Y in h.g&&(E=h.g[Y],x=Pe(E,x,k,q),x>-1&&(W(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete h.g[Y],h.h--)))):h&&(h=gi(h))&&(E=h.g[E.toString()],h=-1,E&&(h=Pe(E,x,k,q)),(x=h>-1?E[h]:null)&&In(x))}function In(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[je])Ne(E.i,h);else{var x=h.type,k=h.proxy;E.removeEventListener?E.removeEventListener(x,k,h.capture):E.detachEvent?E.detachEvent(mi(x),k):E.addListener&&E.removeListener&&E.removeListener(k),(x=gi(E))?(Ne(x,h),x.h==0&&(x.src=null,E[he]=null)):W(h)}}}function mi(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function La(h,E){if(h.da)h=!0;else{E=new Ie(E,this);const x=h.listener,k=h.ha||h.src;h.fa&&In(h),h=x.call(k,E)}return h}function gi(h){return h=h[he],h instanceof _e?h:null}var pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function be(h){return typeof h=="function"?h:(h[pe]||(h[pe]=function(E){return h.handleEvent(E)}),h[pe])}function Ve(){L.call(this),this.i=new _e(this),this.M=this,this.G=null}_(Ve,L),Ve.prototype[je]=!0,Ve.prototype.removeEventListener=function(h,E,x,k){Nn(this,h,E,x,k)};function it(h,E){var x,k=h.G;if(k)for(x=[];k;k=k.G)x.push(k);if(h=h.M,k=E.type||E,typeof E=="string")E=new O(E,h);else if(E instanceof O)E.target=E.target||h;else{var q=E;E=new O(k,h),ge(E,q)}q=!0;let Y,ce;if(x)for(ce=x.length-1;ce>=0;ce--)Y=E.g=x[ce],q=Kt(Y,k,!0,E)&&q;if(Y=E.g=h,q=Kt(Y,k,!0,E)&&q,q=Kt(Y,k,!1,E)&&q,x)for(ce=0;ce<x.length;ce++)Y=E.g=x[ce],q=Kt(Y,k,!1,E)&&q}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var h=this.i;for(const E in h.g){const x=h.g[E];for(let k=0;k<x.length;k++)W(x[k]);delete h.g[E],h.h--}}this.G=null},Ve.prototype.J=function(h,E,x,k){return this.i.add(String(h),E,!1,x,k)},Ve.prototype.K=function(h,E,x,k){return this.i.add(String(h),E,!0,x,k)};function Kt(h,E,x,k){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();let q=!0;for(let Y=0;Y<E.length;++Y){const ce=E[Y];if(ce&&!ce.da&&ce.capture==x){const Be=ce.listener,Pt=ce.ha||ce.src;ce.fa&&Ne(h.i,ce),q=Be.call(Pt,k)!==!1&&q}}return q&&!k.defaultPrevented}function xc(h,E){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(h,E||0)}function Tc(h){h.g=xc(()=>{h.g=null,h.i&&(h.i=!1,Tc(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Ld extends L{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Tc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yi(h){L.call(this),this.h=h,this.g={}}_(yi,L);var Ic=[];function ja(h){J(h.g,function(E,x){this.g.hasOwnProperty(x)&&In(E)},h),h.g={}}yi.prototype.N=function(){yi.Z.N.call(this),ja(this)},yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _i=l.JSON.stringify,jd=l.JSON.parse,Ao=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function vi(){}function Vd(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Va(){O.call(this,"d")}_(Va,O);function Cc(){O.call(this,"c")}_(Cc,O);var Cr={},Fa=null;function Ei(){return Fa=Fa||new Ve}Cr.Ia="serverreachability";function Ua(h){O.call(this,Cr.Ia,h)}_(Ua,O);function Rs(h){const E=Ei();it(E,new Ua(E))}Cr.STAT_EVENT="statevent";function As(h,E){O.call(this,Cr.STAT_EVENT,h),this.stat=E}_(As,O);function bt(h){const E=Ei();it(E,new As(E,h))}Cr.Ja="timingevent";function Sc(h,E){O.call(this,Cr.Ja,h),this.size=E}_(Sc,O);function xi(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},E)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function Fd(h,E,x,k,q,Y){h.info(function(){if(h.g)if(Y){var ce="",Be=Y.split("&");for(let ut=0;ut<Be.length;ut++){var Pt=Be[ut].split("=");if(Pt.length>1){const jt=Pt[0];Pt=Pt[1];const Qn=jt.split("_");ce=Qn.length>=2&&Qn[1]=="type"?ce+(jt+"="+Pt+"&"):ce+(jt+"=redacted&")}}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+k+") [attempt "+q+"]: "+E+`
`+x+`
`+ce})}function Ud(h,E,x,k,q,Y,ce){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+q+"]: "+E+`
`+x+`
`+Y+" "+ce})}function Hr(h,E,x,k){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+ko(h,x)+(k?" "+k:"")})}function zd(h,E){h.info(function(){return"TIMEOUT: "+E})}Ti.prototype.info=function(){};function ko(h,E){if(!h.g)return E;if(!E)return null;try{const Y=JSON.parse(E);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var x=Y[h];if(!(x.length<2)){var k=x[1];if(Array.isArray(k)&&!(k.length<1)){var q=k[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ce=1;ce<k.length;ce++)k[ce]=""}}}}return _i(Y)}catch{return E}}var Ii={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ci={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bd;function ks(){}_(ks,vi),ks.prototype.g=function(){return new XMLHttpRequest},Bd=new ks;function qr(h){return encodeURIComponent(String(h))}function za(h){var E=1;h=h.split(":");const x=[];for(;E>0&&h.length;)x.push(h.shift()),E--;return h.length&&x.push(h.join(":")),x}function ur(h,E,x,k){this.j=h,this.i=E,this.l=x,this.S=k||1,this.V=new yi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $d}function $d(){this.i=null,this.g="",this.h=!1}var Wd={},bc={};function Sr(h,E,x){h.M=1,h.A=Ps(dr(E)),h.u=x,h.R=!0,Rc(h,null)}function Rc(h,E){h.F=Date.now(),No(h),h.B=dr(h.A);var x=h.B,k=h.S;Array.isArray(k)||(k=[String(k)]),Vc(x.i,"t",k),h.C=0,x=h.j.L,h.h=new $d,h.g=eh(h.j,x?E:null,!h.u),h.P>0&&(h.O=new Ld(p(h.Y,h,h.g),h.P)),E=h.V,x=h.g,k=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Ic[0]=q.toString()),q=Ic);for(let Y=0;Y<q.length;Y++){const ce=Ye(x,q[Y],k||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=h.J?$(h.J):{},h.u?(h.v||(h.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,E)):(h.v="GET",h.g.ea(h.B,h.v,null,E)),Rs(),Fd(h.i,h.v,h.B,h.l,h.S,h.u)}ur.prototype.ba=function(h){h=h.target;const E=this.O;E&&Zr(h)==3?E.j():this.Y(h)},ur.prototype.Y=function(h){try{if(h==this.g)e:{const Be=Zr(this.g),Pt=this.g.ya(),ut=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Jd(this.g)))){this.K||Be!=4||Pt==7||(Pt==8||ut<=0?Rs(3):Rs(2)),Ba(this);var E=this.g.ca();this.X=E;var x=Hd(this);if(this.o=E==200,Ud(this.i,this.v,this.B,this.l,this.S,Be,E),this.o){if(this.U&&!this.L){t:{if(this.g){var k,q=this.g;if((k=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(k)){var Y=k;break t}}Y=null}if(h=Y)Hr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gt(this,h);else{this.o=!1,this.m=3,bt(12),Ns(this),Po(this);break e}}if(this.R){h=!0;let jt;for(;!this.K&&this.C<x.length;)if(jt=Gd(this,x),jt==bc){Be==4&&(this.m=4,bt(14),h=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Wd){this.m=4,bt(15),Hr(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Hr(this.i,this.l,jt,null),gt(this,jt);if(qd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||x.length!=0||this.h.h||(this.m=1,bt(16),h=!1),this.o=this.o&&h,!h)Hr(this.i,this.l,x,"[Invalid Chunked Response]"),Ns(this),Po(this);else if(x.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),zo(ce),ce.P=!0,bt(11))}}else Hr(this.i,this.l,x,null),gt(this,x);Be==4&&Ns(this),this.o&&!this.K&&(Be==4?Ja(this.j,this):(this.o=!1,No(this)))}else Uc(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),Ns(this),Po(this)}}}catch{}finally{}};function Hd(h){if(!qd(h))return h.g.la();const E=Jd(h.g);if(E==="")return"";let x="";const k=E.length,q=Zr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ns(h),Po(h),"";h.h.i=new l.TextDecoder}for(let Y=0;Y<k;Y++)h.h.h=!0,x+=h.h.i.decode(E[Y],{stream:!(q&&Y==k-1)});return E.length=0,h.h.g+=x,h.C=0,h.h.g}function qd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Gd(h,E){var x=h.C,k=E.indexOf(`
`,x);return k==-1?bc:(x=Number(E.substring(x,k)),isNaN(x)?Wd:(k+=1,k+x>E.length?bc:(E=E.slice(k,k+x),h.C=k+x,E)))}ur.prototype.cancel=function(){this.K=!0,Ns(this)};function No(h){h.T=Date.now()+h.H,Ac(h,h.H)}function Ac(h,E){if(h.D!=null)throw Error("WatchDog timer not null");h.D=xi(p(h.aa,h),E)}function Ba(h){h.D&&(l.clearTimeout(h.D),h.D=null)}ur.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(zd(this.i,this.B),this.M!=2&&(Rs(),bt(17)),Ns(this),this.m=2,Po(this)):Ac(this,this.T-h)};function Po(h){h.j.I==0||h.K||Ja(h.j,h)}function Ns(h){Ba(h);var E=h.O;E&&typeof E.dispose=="function"&&E.dispose(),h.O=null,ja(h.V),h.g&&(E=h.g,h.g=null,E.abort(),E.dispose())}function gt(h,E){try{var x=h.j;if(x.I!=0&&(x.g==h||Nc(x.h,h))){if(!h.L&&Nc(x.h,h)&&x.I==3){try{var k=x.Ba.g.parse(E)}catch{k=null}if(Array.isArray(k)&&k.length==3){var q=k;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Xa(x),Gn(x);else break e;ns(x),bt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=xi(p(x.Va,x),6e3));Do(x.h)<=1&&x.ta&&(x.ta=void 0)}else Kn(x,11)}else if((h.L||x.g==h)&&Xa(x),!D(E))for(q=x.Ba.g.parse(E),E=0;E<q.length;E++){let ut=q[E];const jt=ut[0];if(!(jt<=x.K))if(x.K=jt,ut=ut[1],x.I==2)if(ut[0]=="c"){x.M=ut[1],x.ba=ut[2];const Qn=ut[3];Qn!=null&&(x.ka=Qn,x.j.info("VER="+x.ka));const js=ut[4];js!=null&&(x.za=js,x.j.info("SVER="+x.za));const rs=ut[5];rs!=null&&typeof rs=="number"&&rs>0&&(k=1.5*rs,x.O=k,x.j.info("backChannelRequestTimeoutMs_="+k)),k=x;const ss=h.g;if(ss){const tl=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var Y=k.h;Y.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Wa(Y,Y.h),Y.h=null))}if(k.G){const $c=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(k.wa=$c,ot(k.J,k.G,$c))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),k=x;var ce=h;if(k.na=Bc(k,k.L?k.ba:null,k.W),ce.L){Oo(k.h,ce);var Be=ce,Pt=k.O;Pt&&(Be.H=Pt),Be.D&&(Ba(Be),No(Be)),k.g=ce}else fn(k);x.i.length>0&&Ls(x)}else ut[0]!="stop"&&ut[0]!="close"||Kn(x,7);else x.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Kn(x,7):Qa(x):ut[0]!="noop"&&x.l&&x.l.qa(ut),x.A=0)}}Rs(4)}catch{}}var Nm=class{constructor(h,E){this.g=h,this.map=E}};function $a(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Do(h){return h.h?1:h.g?h.g.size:0}function Nc(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Wa(h,E){h.g?h.g.add(E):h.h=E}function Oo(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}$a.prototype.cancel=function(){if(this.i=Wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const x of h.g.values())E=E.concat(x.G);return E}return T(h.i)}var Kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hn(h,E){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const k=h[x].indexOf("=");let q,Y=null;k>=0?(q=h[x].substring(0,k),Y=h[x].substring(k+1)):q=h[x],E(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Gr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;h instanceof Gr?(this.l=h.l,Mo(this,h.j),this.o=h.o,this.g=h.g,Kr(this,h.u),this.h=h.h,Si(this,Fc(h.i)),this.m=h.m):h&&(E=String(h).match(Kd))?(this.l=!1,Mo(this,E[1]||"",!0),this.o=Lo(E[2]||""),this.g=Lo(E[3]||"",!0),Kr(this,E[4]),this.h=Lo(E[5]||"",!0),Si(this,E[6]||"",!0),this.m=Lo(E[7]||"")):(this.l=!1,this.i=new Ze(null,this.l))}Gr.prototype.toString=function(){const h=[];var E=this.j;E&&h.push(jo(E,Dc,!0),":");var x=this.g;return(x||E=="file")&&(h.push("//"),(E=this.o)&&h.push(jo(E,Dc,!0),"@"),h.push(qr(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(jo(x,x.charAt(0)=="/"?Vo:Oc,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",jo(x,Mc)),h.join("")},Gr.prototype.resolve=function(h){const E=dr(this);let x=!!h.j;x?Mo(E,h.j):x=!!h.o,x?E.o=h.o:x=!!h.g,x?E.g=h.g:x=h.u!=null;var k=h.h;if(x)Kr(E,h.u);else if(x=!!h.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var q=E.h.lastIndexOf("/");q!=-1&&(k=E.h.slice(0,q+1)+k)}if(q=k,q==".."||q==".")k="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){k=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let ce=0;ce<q.length;){const Be=q[ce++];Be=="."?k&&ce==q.length&&Y.push(""):Be==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),k&&ce==q.length&&Y.push("")):(Y.push(Be),k=!0)}k=Y.join("/")}else k=q}return x?E.h=k:x=h.i.toString()!=="",x?Si(E,Fc(h.i)):x=!!h.m,x&&(E.m=h.m),E};function dr(h){return new Gr(h)}function Mo(h,E,x){h.j=x?Lo(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Kr(h,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);h.u=E}else h.u=null}function Si(h,E,x){E instanceof Ze?(h.i=E,qa(h.i,h.l)):(x||(E=jo(E,Pm)),h.i=new Ze(E,h.l))}function ot(h,E,x){h.i.set(E,x)}function Ps(h){return ot(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Lo(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function jo(h,E,x){return typeof h=="string"?(h=encodeURI(h).replace(E,Pc),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Dc=/[#\/\?@]/g,Oc=/[#\?:]/g,Vo=/[#\?]/g,Pm=/[#\?@]/g,Mc=/#/g;function Ze(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Qr(h){h.g||(h.g=new Map,h.h=0,h.i&&Hn(h.i,function(E,x){h.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}n=Ze.prototype,n.add=function(h,E){Qr(this),this.i=null,h=Yr(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(E),this.h+=1,this};function Lc(h,E){Qr(h),E=Yr(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function Ha(h,E){return Qr(h),E=Yr(h,E),h.g.has(E)}n.forEach=function(h,E){Qr(this),this.g.forEach(function(x,k){x.forEach(function(q){h.call(E,q,k,this)},this)},this)};function jc(h,E){Qr(h);let x=[];if(typeof E=="string")Ha(h,E)&&(x=x.concat(h.g.get(Yr(h,E))));else for(h=Array.from(h.g.values()),E=0;E<h.length;E++)x=x.concat(h[E]);return x}n.set=function(h,E){return Qr(this),this.i=null,h=Yr(this,h),Ha(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=jc(this,h),h.length>0?String(h[0]):E):E};function Vc(h,E,x){Lc(h,E),x.length>0&&(h.i=null,h.g.set(Yr(h,E),T(x)),h.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(let k=0;k<E.length;k++){var x=E[k];const q=qr(x);x=jc(this,x);for(let Y=0;Y<x.length;Y++){let ce=q;x[Y]!==""&&(ce+="="+qr(x[Y])),h.push(ce)}}return this.i=h.join("&")};function Fc(h){const E=new Ze;return E.i=h.i,h.g&&(E.g=new Map(h.g),E.h=h.h),E}function Yr(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function qa(h,E){E&&!h.j&&(Qr(h),h.i=null,h.g.forEach(function(x,k){const q=k.toLowerCase();k!=q&&(Lc(this,k),Vc(this,q,x))},h)),h.j=E}function Xr(h,E){const x=new Ti;if(l.Image){const k=new Image;k.onload=g(nn,x,"TestLoadImage: loaded",!0,E,k),k.onerror=g(nn,x,"TestLoadImage: error",!1,E,k),k.onabort=g(nn,x,"TestLoadImage: abort",!1,E,k),k.ontimeout=g(nn,x,"TestLoadImage: timeout",!1,E,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else E(!1)}function Jr(h,E){const x=new Ti,k=new AbortController,q=setTimeout(()=>{k.abort(),nn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:k.signal}).then(Y=>{clearTimeout(q),Y.ok?nn(x,"TestPingServer: ok",!0,E):nn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(q),nn(x,"TestPingServer: error",!1,E)})}function nn(h,E,x,k,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),k(x)}catch{}}function Fo(){this.g=new Ao}function Ds(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Ds,vi),Ds.prototype.g=function(){return new qn(this.i,this.h)};function qn(h,E){Ve.call(this),this.H=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(qn,Ve),n=qn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=E,this.readyState=1,br(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(E.body=h),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qd(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qd(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?bi(this):br(this),this.readyState==3&&Qd(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,bi(this))},n.Na=function(h){this.g&&(this.response=h,bi(this))},n.ga=function(){this.g&&bi(this)};function bi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,br(h)}n.setRequestHeader=function(h,E){this.A.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=E.next();return h.join(`\r
`)};function br(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Yd(h){let E="";return J(h,function(x,k){E+=k,E+=":",E+=x,E+=`\r
`}),E}function Ga(h,E,x){e:{for(k in x){var k=!1;break e}k=!0}k||(x=Yd(x),typeof h=="string"?x!=null&&qr(x):ot(h,E,x))}function ht(h){Ve.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ht,Ve);var Xd=/^https?$/i,Dm=["POST","PUT"];n=ht.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,E,x,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bd.g(),this.g.onreadystatechange=v(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(Y){Ri(this,Y);return}if(h=x||"",x=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var q in k)x.set(q,k[q]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Y of k.keys())x.set(Y,k.get(Y));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(Array.prototype.indexOf.call(Dm,E,void 0)>=0)||k||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of x)this.g.setRequestHeader(Y,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Ri(this,Y)}};function Ri(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.o=5,Ai(h),Ms(h)}function Ai(h){h.A||(h.A=!0,it(h,"complete"),it(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,it(this,"complete"),it(this,"abort"),Ms(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Os(this):this.Xa())},n.Xa=function(){Os(this)};function Os(h){if(h.h&&typeof o<"u"){if(h.v&&Zr(h)==4)setTimeout(h.Ca.bind(h),0);else if(it(h,"readystatechange"),Zr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var k;if(k=Y===0){let ce=String(h.D).match(Kd)[1]||null;!ce&&l.self&&l.self.location&&(ce=l.self.location.protocol.slice(0,-1)),k=!Xd.test(ce?ce.toLowerCase():"")}x=k}if(x)it(h,"complete"),it(h,"success");else{h.o=6;try{var q=Zr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Ai(h)}}finally{Ms(h)}}}}function Ms(h,E){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,E||it(h,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),jd(E)}};function Jd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Uc(h){const E={};h=(h.g&&Zr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(D(h[k]))continue;var x=za(h[k]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=E[q]||[];E[q]=Y,Y.push(x)}oe(E,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(h,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||E}function Ka(h){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=es("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=es("baseRetryDelayMs",5e3,h),this.Za=es("retryDelaySeedMs",1e4,h),this.Ta=es("forwardChannelMaxRetries",2,h),this.va=es("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $a(h&&h.concurrentRequestLimit),this.Ba=new Fo,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ka.prototype,n.ka=8,n.I=1,n.connect=function(h,E,x,k){bt(0),this.W=h,this.H=E||{},x&&k!==void 0&&(this.H.OSID=x,this.H.OAID=k),this.F=this.X,this.J=Bc(this,null,this.W),Ls(this)};function Qa(h){if(Ya(h),h.I==3){var E=h.V++,x=dr(h.J);if(ot(x,"SID",h.M),ot(x,"RID",E),ot(x,"TYPE","terminate"),ts(h,x),E=new ur(h,h.j,E),E.M=2,E.A=Ps(dr(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&l.Image&&(new Image().src=E.A,x=!0),x||(E.g=eh(E.j,null),E.g.ea(E.A)),E.F=Date.now(),No(E)}Bo(h)}function Gn(h){h.g&&(zo(h),h.g.cancel(),h.g=null)}function Ya(h){Gn(h),h.v&&(l.clearTimeout(h.v),h.v=null),Xa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&l.clearTimeout(h.m),h.m=null)}function Ls(h){if(!kc(h.h)&&!h.m){h.m=!0;var E=h.Ea;X||R(),ne||(X(),ne=!0),P.add(E,h),h.D=0}}function Zd(h,E){return Do(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=E.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=xi(p(h.Ea,h,E),Za(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new ur(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=$(Y),ge(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var k=this.i[x];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(E+=k,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=zc(this,q,E),x=dr(this.J),ot(x,"RID",h),ot(x,"CVER",22),this.G&&ot(x,"X-HTTP-Session-Id",this.G),ts(this,x),Y&&(this.R?E="headers="+qr(Yd(Y))+"&"+E:this.u&&Ga(x,this.u,Y)),Wa(this.h,q),this.Ra&&ot(x,"TYPE","init"),this.S?(ot(x,"$req",E),ot(x,"SID","null"),q.U=!0,Sr(q,x,null)):Sr(q,x,E),this.I=2}}else this.I==3&&(h?Uo(this,h):this.i.length==0||kc(this.h)||Uo(this))};function Uo(h,E){var x;E?x=E.l:x=h.V++;const k=dr(h.J);ot(k,"SID",h.M),ot(k,"RID",x),ot(k,"AID",h.K),ts(h,k),h.u&&h.o&&Ga(k,h.u,h.o),x=new ur(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),E&&(h.i=E.G.concat(h.i)),E=zc(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Wa(h.h,x),Sr(x,k,E)}function ts(h,E){h.H&&J(h.H,function(x,k){ot(E,k,x)}),h.l&&J({},function(x,k){ot(E,k,x)})}function zc(h,E,x){x=Math.min(h.i.length,x);const k=h.l?p(h.l.Ka,h.l,h):null;e:{var q=h.i;let Be=-1;for(;;){const Pt=["count="+x];Be==-1?x>0?(Be=q[0].g,Pt.push("ofs="+Be)):Be=0:Pt.push("ofs="+Be);let ut=!0;for(let jt=0;jt<x;jt++){var Y=q[jt].g;const Qn=q[jt].map;if(Y-=Be,Y<0)Be=Math.max(0,q[jt].g-100),ut=!1;else try{Y="req"+Y+"_"||"";try{var ce=Qn instanceof Map?Qn:Object.entries(Qn);for(const[js,rs]of ce){let ss=rs;u(rs)&&(ss=_i(rs)),Pt.push(Y+js+"="+encodeURIComponent(ss))}}catch(js){throw Pt.push(Y+"type="+encodeURIComponent("_badmap")),js}}catch{k&&k(Qn)}}if(ut){ce=Pt.join("&");break e}}ce=void 0}return h=h.i.splice(0,x),E.G=h,ce}function fn(h){if(!h.g&&!h.v){h.Y=1;var E=h.Da;X||R(),ne||(X(),ne=!0),P.add(E,h),h.A=0}}function ns(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=xi(p(h.Da,h),Za(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ki(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=xi(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Gn(this),ki(this))};function zo(h){h.B!=null&&(l.clearTimeout(h.B),h.B=null)}function ki(h){h.g=new ur(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var E=dr(h.na);ot(E,"RID","rpc"),ot(E,"SID",h.M),ot(E,"AID",h.K),ot(E,"CI",h.F?"0":"1"),!h.F&&h.ia&&ot(E,"TO",h.ia),ot(E,"TYPE","xmlhttp"),ts(h,E),h.u&&h.o&&Ga(E,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Ps(dr(E)),x.u=null,x.R=!0,Rc(x,h)}n.Va=function(){this.C!=null&&(this.C=null,Gn(this),ns(this),bt(19))};function Xa(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Ja(h,E){var x=null;if(h.g==E){Xa(h),zo(h),h.g=null;var k=2}else if(Nc(h.h,E))x=E.G,Oo(h.h,E),k=1;else return;if(h.I!=0){if(E.o)if(k==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var q=h.D;k=Ei(),it(k,new Sc(k,x)),Ls(h)}else fn(h);else if(q=E.m,q==3||q==0&&E.X>0||!(k==1&&Zd(h,E)||k==2&&ns(h)))switch(x&&x.length>0&&(E=h.h,E.i=E.i.concat(x)),q){case 1:Kn(h,5);break;case 4:Kn(h,10);break;case 3:Kn(h,6);break;default:Kn(h,2)}}}function Za(h,E){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*E}function Kn(h,E){if(h.j.info("Error code "+E),E==2){var x=p(h.bb,h),k=h.Ua;const q=!k;k=new Gr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Mo(k,"https"),Ps(k),q?Xr(k.toString(),x):Jr(k.toString(),x)}else bt(2);h.I=0,h.l&&h.l.pa(E),Bo(h),Ya(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Bo(h){if(h.I=0,h.ja=[],h.l){const E=Wn(h.h);(E.length!=0||h.i.length!=0)&&(A(h.ja,E),A(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Bc(h,E,x){var k=x instanceof Gr?dr(x):new Gr(x);if(k.g!="")E&&(k.g=E+"."+k.g),Kr(k,k.u);else{var q=l.location;k=q.protocol,E=E?E+"."+q.hostname:q.hostname,q=+q.port;const Y=new Gr(null);k&&Mo(Y,k),E&&(Y.g=E),q&&Kr(Y,q),x&&(Y.h=x),k=Y}return x=h.G,E=h.wa,x&&E&&ot(k,x,E),ot(k,"VER",h.ka),ts(h,k),k}function eh(h,E,x){if(E&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Aa&&!h.ma?new ht(new Ds({ab:x})):new ht(h.ma),E.Fa(h.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function el(){}el.prototype.g=function(h,E){return new rn(h,E)};function rn(h,E){Ve.call(this),this.g=new Ka(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(h?h["X-WebChannel-Client-Profile"]=E.sa:h={"X-WebChannel-Client-Profile":E.sa}),this.g.U=h,(h=E&&E.Qb)&&!D(h)&&(this.g.u=h),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Ni(this)}_(rn,Ve),rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Qa(this.g)},rn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=_i(h),h=x);E.i.push(new Nm(E.Ya++,h)),E.I==3&&Ls(E)},rn.prototype.N=function(){this.g.l=null,delete this.j,Qa(this.g),delete this.g,rn.Z.N.call(this)};function nh(h){Va.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const x in E){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}_(nh,Va);function rh(){Cc.call(this),this.status=1}_(rh,Cc);function Ni(h){this.g=h}_(Ni,th),Ni.prototype.ra=function(){it(this.g,"a")},Ni.prototype.qa=function(h){it(this.g,new nh(h))},Ni.prototype.pa=function(h){it(this.g,new rh)},Ni.prototype.oa=function(){it(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,Mb=function(){return new el},Ob=function(){return Ei()},Db=Cr,Zy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,wf=Ii,Ci.COMPLETE="complete",Pb=Ci,Vd.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Tu=Vd,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,Nb=ht}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const RT="@firebase/firestore",AT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new fd("@firebase/firestore");function bl(){return pa.logLevel}function me(n,...e){if(pa.logLevel<=Qe.DEBUG){const t=e.map(dv);pa.debug(`Firestore (${cc}): ${n}`,...t)}}function ii(n,...e){if(pa.logLevel<=Qe.ERROR){const t=e.map(dv);pa.error(`Firestore (${cc}): ${n}`,...t)}}function Hl(n,...e){if(pa.logLevel<=Qe.WARN){const t=e.map(dv);pa.warn(`Firestore (${cc}): ${n}`,...t)}}function dv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Lb(n,r,t)}function Lb(n,e,t){let r=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ii(r),new Error(r)}function ct(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Lb(e,s,r)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class X4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class J4{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ct(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zs,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zs)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new jb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class Z4{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ej{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Z4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ct(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nj(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Xe(n,e){return n<e?-1:n>e?1:0}function e_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return my(s)===my(o)?Xe(s,o):my(s)?1:-1}return Xe(n.length,e.length)}const rj=55296,sj=57343;function my(n){const e=n.charCodeAt(0);return e>=rj&&e<=sj}function ql(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__name__";class cs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return cs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=cs.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Xe(e.length,t.length)}static compareSegments(e,t){const r=cs.isNumericId(e),s=cs.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?cs.extractNumericId(e).compare(cs.extractNumericId(t)):e_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return so.fromString(e.substring(4,e.length-2))}}class mt extends cs{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const ij=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends cs{construct(e,t,r){return new cn(e,t,r)}static isValidIdentifier(e){return ij.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NT}static keyField(){return new cn([NT])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(mt.fromString(e))}static fromName(e){return new Re(mt.fromString(e).popFirst(5))}static empty(){return new Re(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oj(n,e,t,r){if(e===!0&&r===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PT(n){if(!Re.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DT(n){if(Re.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function rr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function vd(n,e){if(!Fb(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=-62135596800,MT=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*MT);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OT)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MT}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vd(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Bt("string",wt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new wt(0,0))}static max(){return new ze(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=-1;function aj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new uo(s,Re.empty(),e)}function lj(n){return new uo(n.readTime,n.key,Gu)}class uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new uo(ze.min(),Re.empty(),Gu)}static max(){return new uo(ze.max(),Re.empty(),Gu)}}function cj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Re.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==uj)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let s=0,o=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++o,l&&o===s&&t()}),(d=>r(d)))})),l=!0,o===s&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((s=>s?te.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next((g=>{l[p]=g,++u,u===o&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new te(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function hj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-1;function Fp(n){return n==null}function Wf(n){return n===0&&1/n==-1/0}function fj(n){return typeof n=="number"&&Number.isInteger(n)&&!Wf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="";function pj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LT(e)),e=mj(n.get(t),e);return LT(e)}function mj(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Ub:t+="";break;default:t+=o}}return t}function LT(n){return n+Ub+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $t=class t_{constructor(e,t){this.comparator=e,this.root=t||io.EMPTY}insert(e,t){return new t_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,io.BLACK,null,null))}remove(e){return new t_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,io.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}},Zh=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},io=class Gs{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Gs.RED,this.left=s??Gs.EMPTY,this.right=o??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Gs(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Gs.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}};io.EMPTY=null,io.RED=!0,io.BLACK=!1;io.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new io(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new er([])}unionWith(e){let t=new Gt(cn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bb("Invalid base64 string: "+o):o}})(e);return new dn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const gj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(n){if(ct(!!n,39018),typeof n=="string"){let e=0;const t=gj.exec(n);if(ct(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fo(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="server_timestamp",Wb="__type__",Hb="__previous_value__",qb="__local_write_time__";function pv(n){return(n?.mapValue?.fields||{})[Wb]?.stringValue===$b}function Up(n){const e=n.mapValue.fields[Hb];return pv(e)?Up(e):e}function Ku(n){const e=ho(n.mapValue.fields[qb].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,t,r,s,o,l,u,d,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=g}}const Hf="(default)";class Qu{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new Qu("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof Qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="__type__",_j="__max__",ef={mapValue:{}},Kb="__vector__",qf="value";function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pv(n)?4:wj(n)?9007199254740991:vj(n)?10:11:Oe(28295,{value:n})}function Es(n,e){if(n===e)return!0;const t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ho(s.timestampValue),u=ho(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return fo(s.bytesValue).isEqual(fo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return Ot(s.geoPointValue.latitude)===Ot(o.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Ot(s.integerValue)===Ot(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Ot(s.doubleValue),u=Ot(o.doubleValue);return l===u?Wf(l)===Wf(u):isNaN(l)&&isNaN(u)}return!1})(n,e);case 9:return ql(n.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(jT(l)!==jT(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Es(l[d],u[d])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function Yu(n,e){return(n.values||[]).find((t=>Es(t,e)))!==void 0}function Gl(n,e){if(n===e)return 0;const t=po(n),r=po(e);if(t!==r)return Xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=Ot(o.integerValue||o.doubleValue),d=Ot(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return FT(n.timestampValue,e.timestampValue);case 4:return FT(Ku(n),Ku(e));case 5:return e_(n.stringValue,e.stringValue);case 6:return(function(o,l){const u=fo(o),d=fo(l);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),d=l.split("/");for(let p=0;p<u.length&&p<d.length;p++){const g=Xe(u[p],d[p]);if(g!==0)return g}return Xe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Xe(Ot(o.latitude),Ot(l.latitude));return u!==0?u:Xe(Ot(o.longitude),Ot(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UT(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const u=o.fields||{},d=l.fields||{},p=u[qf]?.arrayValue,g=d[qf]?.arrayValue,_=Xe(p?.values?.length||0,g?.values?.length||0);return _!==0?_:UT(p,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ef.mapValue&&l===ef.mapValue)return 0;if(o===ef.mapValue)return 1;if(l===ef.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),p=l.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let _=0;_<d.length&&_<g.length;++_){const v=e_(d[_],g[_]);if(v!==0)return v;const T=Gl(u[d[_]],p[g[_]]);if(T!==0)return T}return Xe(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function FT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=ho(n),r=ho(e),s=Xe(t.seconds,r.seconds);return s!==0?s:Xe(t.nanos,r.nanos)}function UT(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Gl(t[s],r[s]);if(o)return o}return Xe(t.length,r.length)}function Kl(n){return n_(n)}function n_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ho(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=n_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${n_(t.fields[l])}`;return s+"}"})(n.mapValue):Oe(61005,{value:n})}function Ef(n){switch(po(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Up(n);return e?16+Ef(e):16;case 5:return 2*n.stringValue.length;case 6:return fo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Ef(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return So(r.fields,((o,l)=>{s+=o.length+Ef(l)})),s})(n.mapValue);default:throw Oe(13486,{value:n})}}function zT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function r_(n){return!!n&&"integerValue"in n}function mv(n){return!!n&&"arrayValue"in n}function BT(n){return!!n&&"nullValue"in n}function $T(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xf(n){return!!n&&"mapValue"in n}function vj(n){return(n?.mapValue?.fields||{})[Gb]?.stringValue===Kb}function Pu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Pu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return{...n}}function wj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_j}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=cn.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=Pu(l):s.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];xf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){So(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Fn(Pu(this.value))}}function Qb(n){const e=[];return So(n.fields,((t,r)=>{const s=new cn([t]);if(xf(r)){const o=Qb(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new wn(e,0,ze.min(),ze.min(),ze.min(),Fn.empty(),0)}static newFoundDocument(e,t,r,s){return new wn(e,1,t,ze.min(),r,s,0)}static newNoDocument(e,t){return new wn(e,2,t,ze.min(),ze.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,ze.min(),ze.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.position=e,this.inclusive=t}}function WT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Re.comparator(Re.fromName(l.referenceValue),t.key):r=Gl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ej(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{}class zt extends Yb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Tj(e,t,r):t==="array-contains"?new Sj(e,r):t==="in"?new bj(e,r):t==="not-in"?new Rj(e,r):t==="array-contains-any"?new Aj(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ij(e,r):new Cj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gl(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends Yb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zr(e,t)}matches(e){return Xb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xb(n){return n.op==="and"}function Jb(n){return xj(n)&&Xb(n)}function xj(n){for(const e of n.filters)if(e instanceof zr)return!1;return!0}function s_(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+Kl(n.value);if(Jb(n))return n.filters.map((e=>s_(e))).join(",");{const e=n.filters.map((t=>s_(t))).join(",");return`${n.op}(${e})`}}function Zb(n,e){return n instanceof zt?(function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&Es(r.value,s.value)})(n,e):n instanceof zr?(function(r,s){return s instanceof zr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,u)=>o&&Zb(l,s.filters[u])),!0):!1})(n,e):void Oe(19439)}function eR(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Kl(t.value)}`})(n):n instanceof zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(eR).join(" ,")+"}"})(n):"Filter"}class Tj extends zt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ij extends zt{constructor(e,t){super(e,"in",t),this.keys=tR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Cj extends zt{constructor(e,t){super(e,"not-in",t),this.keys=tR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tR(n,e){return(e.arrayValue?.values||[]).map((t=>Re.fromName(t.referenceValue)))}class Sj extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mv(t)&&Yu(t.arrayValue,this.value)}}class bj extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yu(this.value.arrayValue,t)}}class Rj extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yu(this.value.arrayValue,t)}}class Aj extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Yu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function qT(n,e=null,t=[],r=[],s=null,o=null,l=null){return new kj(n,e,t,r,s,o,l)}function gv(n){const e=$e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>s_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Kl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Kl(r))).join(",")),e.Te=t}return e.Te}function yv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ej(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Zb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HT(n.startAt,e.startAt)&&HT(n.endAt,e.endAt)}function i_(n){return Re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Nj(n,e,t,r,s,o,l,u){return new hc(n,e,t,r,s,o,l,u)}function zp(n){return new hc(n)}function GT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nR(n){return n.collectionGroup!==null}function Du(n){const e=$e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Gt(cn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xu(o,r))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new Xu(cn.keyField(),r))}return e.Ie}function gs(n){const e=$e(n);return e.Ee||(e.Ee=Pj(e,Du(n))),e.Ee}function Pj(n,e){if(n.limitType==="F")return qT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Xu(s.field,o)}));const t=n.endAt?new Gf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gf(n.startAt.position,n.startAt.inclusive):null;return qT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function o_(n,e){const t=n.filters.concat([e]);return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kf(n,e,t){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return yv(gs(n),gs(e))&&n.limitType===e.limitType}function rR(n){return`${gv(gs(n))}|lt:${n.limitType}`}function Rl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>eR(s))).join(", ")}]`),Fp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Kl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Kl(s))).join(",")),`Target(${r})`})(gs(n))}; limitType=${n.limitType})`}function $p(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Du(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const p=WT(l,u,d);return l.inclusive?p<=0:p<0})(r.startAt,Du(r),s)||r.endAt&&!(function(l,u,d){const p=WT(l,u,d);return l.inclusive?p>=0:p>0})(r.endAt,Du(r),s))})(n,e)}function Dj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sR(n){return(e,t)=>{let r=!1;for(const s of Du(n)){const o=Oj(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Oj(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):(function(o,l,u){const d=l.data.field(o),p=u.data.field(o);return d!==null&&p!==null?Gl(d,p):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return zb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=new $t(Re.comparator);function oi(){return Mj}const iR=new $t(Re.comparator);function Iu(...n){let e=iR;for(const t of n)e=e.insert(t.key,t);return e}function oR(n){let e=iR;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ia(){return Ou()}function aR(){return Ou()}function Ou(){return new Ca((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Lj=new $t(Re.comparator),jj=new Gt(Re.comparator);function Je(...n){let e=jj;for(const t of n)e=e.add(t);return e}const Vj=new Gt(Xe);function Fj(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function lR(n){return{integerValue:""+n}}function Uj(n,e){return fj(e)?lR(e):_v(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this._=void 0}}function zj(n,e,t){return n instanceof Ju?(function(s,o){const l={fields:{[Wb]:{stringValue:$b},[qb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&pv(o)&&(o=Up(o)),o&&(l.fields[Hb]=o),{mapValue:l}})(t,e):n instanceof Zu?uR(n,e):n instanceof ed?dR(n,e):(function(s,o){const l=cR(s,o),u=KT(l)+KT(s.Ae);return r_(l)&&r_(s.Ae)?lR(u):_v(s.serializer,u)})(n,e)}function Bj(n,e,t){return n instanceof Zu?uR(n,e):n instanceof ed?dR(n,e):t}function cR(n,e){return n instanceof Qf?(function(r){return r_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ju extends Wp{}class Zu extends Wp{constructor(e){super(),this.elements=e}}function uR(n,e){const t=hR(e);for(const r of n.elements)t.some((s=>Es(s,r)))||t.push(r);return{arrayValue:{values:t}}}class ed extends Wp{constructor(e){super(),this.elements=e}}function dR(n,e){let t=hR(e);for(const r of n.elements)t=t.filter((s=>!Es(s,r)));return{arrayValue:{values:t}}}class Qf extends Wp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function KT(n){return Ot(n.integerValue||n.doubleValue)}function hR(n){return mv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t){this.field=e,this.transform=t}}function Wj(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Zu&&s instanceof Zu||r instanceof ed&&s instanceof ed?ql(r.elements,s.elements,Es):r instanceof Qf&&s instanceof Qf?Es(r.Ae,s.Ae):r instanceof Ju&&s instanceof Ju})(n.transform,e.transform)}class Hj{constructor(e,t){this.version=e,this.transformResults=t}}class Vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hp{}function fR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mR(n.key,Vr.none()):new wd(n.key,n.data,Vr.none());{const t=n.data,r=Fn.empty();let s=new Gt(cn.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new bo(n.key,r,new er(s.toArray()),Vr.none())}}function qj(n,e,t){n instanceof wd?(function(s,o,l){const u=s.value.clone(),d=YT(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,e,t):n instanceof bo?(function(s,o,l){if(!Tf(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=YT(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(pR(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Mu(n,e,t,r){return n instanceof wd?(function(o,l,u,d){if(!Tf(o.precondition,l))return u;const p=o.value.clone(),g=XT(o.fieldTransforms,d,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof bo?(function(o,l,u,d){if(!Tf(o.precondition,l))return u;const p=XT(o.fieldTransforms,d,l),g=l.data;return g.setAll(pR(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(o,l,u){return Tf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,e,t)}function Gj(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=cR(r.transform,s||null);o!=null&&(t===null&&(t=Fn.empty()),t.set(r.field,o))}return t||null}function QT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ql(r,s,((o,l)=>Wj(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wd extends Hp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bo extends Hp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function YT(n,e,t){const r=new Map;ct(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,Bj(l,u,t[s]))}return r}function XT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,zj(o,l,e))}return r}class mR extends Hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kj extends Hp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&qj(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aR();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=fR(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ze.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,r)=>QT(t,r)))&&ql(this.baseMutations,e.baseMutations,((t,r)=>QT(t,r)))}}class vv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Lj})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new vv(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yj=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,et;function Jj(n){switch(n){case ee.OK:return Oe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function gR(n){if(n===void 0)return ii("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Ft.OK:return ee.OK;case Ft.CANCELLED:return ee.CANCELLED;case Ft.UNKNOWN:return ee.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ee.INTERNAL;case Ft.UNAVAILABLE:return ee.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ee.NOT_FOUND;case Ft.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ft.ABORTED:return ee.ABORTED;case Ft.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ft.DATA_LOSS:return ee.DATA_LOSS;default:return Oe(39323,{code:n})}}(et=Ft||(Ft={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=new so([4294967295,4294967295],0);function JT(n){const e=Zj().encode(n),t=new kb;return t.update(e),new Uint8Array(t.digest())}function ZT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new so([t,r],0),new so([s,o],0)]}class wv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Cu(`Invalid padding: ${t}`);if(r<0)throw new Cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=so.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(so.fromNumber(r)));return s.compare(eV)===1&&(s=new so([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JT(e),[r,s]=ZT(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new wv(o,s,t);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=JT(e),[r,s]=ZT(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ed.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qp(ze.min(),s,new $t(Xe),oi(),Je())}}class Ed{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ed(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class yR{constructor(e,t){this.targetId=e,this.Ce=t}}class _R{constructor(e,t,r=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class eI{constructor(){this.ve=0,this.Fe=tI(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),r=Je();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:o})}})),new Ed(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=tI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tV{constructor(e){this.Ge=e,this.ze=new Map,this.je=oi(),this.Je=tf(),this.He=tf(),this.Ye=new $t(Xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(i_(o))if(r===0){const l=new Re(o.path);this.et(t,l,wn.newNoDocument(l,ze.min()))}else ct(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=fo(r).toUint8Array()}catch(d){if(d instanceof Bb)return Hl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new wv(l,s,o)}catch(d){return Hl(d instanceof Cu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&i_(u.target)){const d=new Re(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,wn.newNoDocument(d,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new qp(e,t,this.Ye,this.je,r);return this.je=oi(),this.Je=tf(),this.He=tf(),this.Ye=new $t(Xe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new eI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tf(){return new $t(Re.comparator)}function tI(){return new $t(Re.comparator)}const nV={asc:"ASCENDING",desc:"DESCENDING"},rV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sV={and:"AND",or:"OR"};class iV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function a_(n,e){return n.useProto3Json||Fp(e)?e:{value:e}}function Yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oV(n,e){return Yf(n,e.toTimestamp())}function ys(n){return ct(!!n,49232),ze.fromTimestamp((function(t){const r=ho(t);return new wt(r.seconds,r.nanos)})(n))}function Ev(n,e){return l_(n,e).canonicalString()}function l_(n,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wR(n){const e=mt.fromString(n);return ct(CR(e),10190,{key:e.toString()}),e}function c_(n,e){return Ev(n.databaseId,e.path)}function gy(n,e){const t=wR(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(xR(t))}function ER(n,e){return Ev(n.databaseId,e)}function aV(n){const e=wR(n);return e.length===4?mt.emptyPath():xR(e)}function u_(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xR(n){return ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nI(n,e,t){return{name:c_(n,e),fields:t.value.mapValue.fields}}function lV(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Oe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,g){return p.useProto3Json?(ct(g===void 0||typeof g=="string",58123),dn.fromBase64String(g||"")):(ct(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),dn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(p){const g=p.code===void 0?ee.UNKNOWN:gR(p.code);return new de(g,p.message||"")})(l);t=new _R(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gy(n,r.document.name),o=ys(r.document.updateTime),l=r.document.createTime?ys(r.document.createTime):ze.min(),u=new Fn({mapValue:{fields:r.document.fields}}),d=wn.newFoundDocument(s,o,l,u),p=r.targetIds||[],g=r.removedTargetIds||[];t=new If(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gy(n,r.document),o=r.readTime?ys(r.readTime):ze.min(),l=wn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new If([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gy(n,r.document),o=r.removedTargetIds||[];t=new If([],o,s,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Xj(s,o),u=r.targetId;t=new yR(u,l)}}return t}function cV(n,e){let t;if(e instanceof wd)t={update:nI(n,e.key,e.value)};else if(e instanceof mR)t={delete:c_(n,e.key)};else if(e instanceof bo)t={update:nI(n,e.key,e.data),updateMask:_V(e.fieldMask)};else{if(!(e instanceof Kj))return Oe(16599,{Vt:e.type});t={verify:c_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const u=l.transform;if(u instanceof Ju)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ed)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw Oe(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:oV(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Oe(27497)})(n,e.precondition)),t}function uV(n,e){return n&&n.length>0?(ct(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?ys(s.updateTime):ys(o);return l.isEqual(ze.min())&&(l=ys(o)),new Hj(l,s.transformResults||[])})(t,e)))):[]}function dV(n,e){return{documents:[ER(n,e.path)]}}function hV(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ER(n,s);const o=(function(p){if(p.length!==0)return IR(zr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((g=>(function(v){return{field:Al(v.field),direction:mV(v.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=a_(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function fV(n){let e=aV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ct(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(_){const v=TR(_);return v instanceof zr&&Jb(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((v=>(function(A){return new Xu(kl(A.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(_){let v;return v=typeof _=="object"?_.value:_,Fp(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(_){const v=!!_.before,T=_.values||[];return new Gf(T,v)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const v=!_.before,T=_.values||[];return new Gf(T,v)})(t.endAt)),Nj(e,s,l,o,u,"F",d,p)}function pV(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=kl(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=kl(t.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=kl(t.unaryFilter.field);return zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=kl(t.unaryFilter.field);return zt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(kl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zr.create(t.compositeFilter.filters.map((r=>TR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function mV(n){return nV[n]}function gV(n){return rV[n]}function yV(n){return sV[n]}function Al(n){return{fieldPath:n.canonicalString()}}function kl(n){return cn.fromServerFormat(n.fieldPath)}function IR(n){return n instanceof zt?(function(t){if(t.op==="=="){if($T(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NAN"}};if(BT(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($T(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NAN"}};if(BT(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(t.field),op:gV(t.op),value:t.value}}})(n):n instanceof zr?(function(t){const r=t.getFilters().map((s=>IR(s)));return r.length===1?r[0]:{compositeFilter:{op:yV(t.op),filters:r}}})(n):Oe(54877,{filter:n})}function _V(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function CR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,r,s,o=ze.min(),l=ze.min(),u=dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.yt=e}}function wV(n){const e=fV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.Cn=new xV}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(uo.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class xV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Gt(mt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SR=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(SR,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ql(0)}static cr(){return new Ql(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="LruGarbageCollector",TV=1048576;function iI([n,e],[t,r]){const s=Xe(n,t);return s===0?Xe(e,r):s}class IV{constructor(e){this.Ir=e,this.buffer=new Gt(iI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(sI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dc(t)?me(sI,"Ignoring IndexedDB error during garbage collection: ",t):await uc(t)}await this.Vr(3e5)}))}}class SV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Vp.ce);const r=new IV(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(rI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,u,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s)))).next((_=>(r=_,u=Date.now(),this.removeTargets(e,r,t)))).next((_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),bl()<=Qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_}))))}}function bV(n,e){return new SV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.changes=new Ca((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Mu(r.mutation,s,er.empty(),wt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Je()){const s=ia();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=Iu();return o.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Je())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,r,s){let o=oi();const l=Ou(),u=(function(){return Ou()})();return t.forEach(((d,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof bo)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),Mu(g.mutation,p,g.mutation.getFieldMask(),wt.now())):l.set(p.key,er.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,g)=>l.set(p,g))),t.forEach(((p,g)=>u.set(p,new AV(g,l.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Ou();let s=new $t(((l,u)=>l-u)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let g=r.get(d)||er.empty();g=u.applyToLocalView(p,g),r.set(d,g);const _=(s.get(u.batchId)||Je()).add(d);s=s.insert(u.batchId,_)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,g=d.value,_=aR();g.forEach((v=>{if(!o.has(v)){const T=fR(t.get(v),r.get(v));T!==null&&_.set(v,T),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return te.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Re.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):te.resolve(ia());let u=Gu,d=o;return l.next((p=>te.forEach(p,((g,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(g)?te.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{d=d.insert(g,v)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Je()))).next((g=>({batchId:u,changes:oR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next((r=>{let s=Iu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Iu();return this.indexManager.getCollectionParents(e,o).next((u=>te.forEach(u,(d=>{const p=(function(_,v){return new hc(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((g=>{g.forEach(((_,v)=>{l=l.insert(_,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((d,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,wn.newInvalidDocument(g)))}));let u=Iu();return l.forEach(((d,p)=>{const g=o.get(d);g!==void 0&&Mu(g.mutation,p,er.empty(),wt.now()),$p(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ys(s.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:wV(s.bundledQuery),readTime:ys(s.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.overlays=new $t(Re.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return te.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=ia(),o=t.length+1,l=new Re(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new $t(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=ia(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=ia(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,g)=>u.set(p,g))),!(u.size()>=s)););return te.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Yj(t,r));let o=this.qr.get(t);o===void 0&&(o=Je(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.Qr=new Gt(Zt.$r),this.Ur=new Gt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Zt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Re(new mt([])),r=new Zt(t,e),s=new Zt(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Re(new mt([])),r=new Zt(t,e),s=new Zt(t,e+1);let o=Je();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Zt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Re.comparator(e.key,t.key)||Xe(e.Yr,t.Yr)}static Kr(e,t){return Xe(e.Yr,t.Yr)||Re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Zt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Qj(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new Zt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?fv:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zt(t,0),s=new Zt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);o.push(u)})),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Xe);return t.forEach((s=>{const o=new Zt(s,0),l=new Zt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{r=r.add(u.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Re.isDocumentKey(o)||(o=o.child(""));const l=new Zt(new Re(o),0);let u=new Gt(Xe);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),l),te.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ct(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(t.mutations,(s=>{const o=new Zt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Zt(t,0),s=this.Zr.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.ri=e,this.docs=(function(){return new $t(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=oi();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():wn.newInvalidDocument(s))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=oi();const l=t.path,u=new Re(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||cj(lj(g),r)<=0||(s.has(g.key)||$p(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Oe(9500)}ii(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new LV(this)}getSize(e){return te.resolve(this.size)}}class LV extends RV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.persistence=e,this.si=new Ca((t=>gv(t)),yv),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new xv,this.targetCount=0,this.ai=Ql.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ql(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),te.waitFor(o).next((()=>s))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vp(0),this.li=!1,this.li=!0,this.hi=new DV,this.referenceDelegate=e(this),this.Pi=new jV(this),this.indexManager=new EV,this.remoteDocumentCache=(function(s){return new MV(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vV(t),this.Ii=new NV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OV(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const s=new VV(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class VV extends dj{constructor(e){super(),this.currentSequenceNumber=e}}class Tv{constructor(e){this.persistence=e,this.Ri=new xv,this.Vi=null}static mi(e){return new Tv(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const s=Re.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,ze.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xf{constructor(e,t){this.persistence=e,this.pi=new Ca((r=>pj(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=bV(this,t)}static mi(e,t){return new Xf(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?te.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((u=>{u||(r++,o.removeEntry(l,ze.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}br(e,t,r){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Je(),s=Je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Iv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HD()?8:hj(xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new FV;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(bl()<=Qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(bl()<=Qe.DEBUG&&me("QueryEngine","Query:",Rl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(bl()<=Qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gs(t))):te.resolve())}ys(e,t){if(GT(t))return te.resolve(null);let r=gs(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Kf(t,null,"F"),r=gs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Je(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,l,d.readTime)?this.ys(e,Kf(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,r,s){return GT(t)||s.isEqual(ze.min())?te.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?te.resolve(null):(bl()<=Qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rl(t)),this.vs(e,l,t,aj(s,Gu)).next((u=>u)))}))}Ds(e,t){let r=new Gt(sR(e));return t.forEach(((s,o)=>{$p(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return bl()<=Qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.ps.getDocumentsMatchingQuery(e,t,uo.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LocalStore",zV=3e8;class BV{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new $t(Xe),this.xs=new Ca((o=>gv(o)),yv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $V(n,e,t,r){return new BV(n,e,t,r)}async function RR(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],u=[];let d=Je();for(const p of s){l.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of o){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:u})))}))}))}function WV(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,g){const _=p.batch,v=_.keys();let T=te.resolve();return v.forEach((A=>{T=T.next((()=>g.getEntry(d,A))).next((S=>{const b=p.docVersions.get(A);ct(b!==null,48541),S.version.compareTo(b)<0&&(_.applyToRemoteDocument(S,p),S.isValidDocument()&&(S.setReadTime(p.commitVersion),g.addEntry(S)))}))})),T.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=Je();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function AR(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HV(n,e){const t=$e(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,_)=>{const v=s.get(_);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,_))));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(dn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),s=s.insert(_,T),(function(S,b,j){return S.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=zV?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,T,g)&&u.push(t.Pi.updateTargetData(o,T))}));let d=oi(),p=Je();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(qV(o,l,e.documentUpdates).next((g=>{d=g.ks,p=g.qs}))),!r.isEqual(ze.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return te.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function qV(n,e,t){let r=Je(),s=Je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=oi();return t.forEach(((u,d)=>{const p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(ze.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):me(Cv,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function GV(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function KV(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,te.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new to(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function d_(n,e,t){const r=$e(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!dc(l))throw l;me(Cv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function oI(n,e,t){const r=$e(n);let s=ze.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,p,g){const _=$e(d),v=_.xs.get(g);return v!==void 0?te.resolve(_.Ms.get(v)):_.Pi.getTargetData(p,g)})(r,l,gs(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:ze.min(),t?o:Je()))).next((u=>(QV(r,Dj(e),u),{documents:u,Qs:o})))))}function QV(n,e,t){let r=n.Os.get(e)||ze.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class aI{constructor(){this.activeTargetIds=Fj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YV{constructor(){this.Mo=new aI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="ConnectivityMonitor";class cI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(lI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(lI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=null;function h_(){return nf===null?nf=(function(){return 268435456+Math.round(2147483648*Math.random())})():nf++,"0x"+nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="RestConnection",JV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=h_(),u=this.zo(e,t.toUriEncodedString());me(yy,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:p}=new URL(u),g=Is(p);return this.Jo(e,u,d,r,g).then((_=>(me(yy,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Hl(yy,`RPC '${e}' ${l} failed with error: `,_,"url: ",u,"request:",r),_}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=JV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class tF extends ZV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=h_();return new Promise(((u,d)=>{const p=new Nb;p.setWithCredentials(!0),p.listenOnce(Pb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case wf.NO_ERROR:const _=p.getResponseJson();me(_n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case wf.TIMEOUT:me(_n,`RPC '${e}' ${l} timed out`),d(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case wf.HTTP_ERROR:const v=p.getStatus();if(me(_n,`RPC '${e}' ${l} failed with status:`,v,"response text:",p.getResponseText()),v>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const A=T?.error;if(A&&A.status&&A.message){const S=(function(j){const U=j.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(U)>=0?U:ee.UNKNOWN})(A.status);d(new de(S,A.message))}else d(new de(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(_n,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);me(_n,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=h_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Mb(),u=Ob(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=o.join("");me(_n,`Creating RPC '${e}' stream ${s}: ${g}`,d);const _=l.createWebChannel(g,d);this.I_(_);let v=!1,T=!1;const A=new eF({Yo:b=>{T?me(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(me(_n,`Opening RPC '${e}' stream ${s} transport.`),_.open(),v=!0),me(_n,`RPC '${e}' stream ${s} sending:`,b),_.send(b))},Zo:()=>_.close()}),S=(b,j,U)=>{b.listen(j,(B=>{try{U(B)}catch(G){setTimeout((()=>{throw G}),0)}}))};return S(_,Tu.EventType.OPEN,(()=>{T||(me(_n,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),S(_,Tu.EventType.CLOSE,(()=>{T||(T=!0,me(_n,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(_))})),S(_,Tu.EventType.ERROR,(b=>{T||(T=!0,Hl(_n,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),A.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),S(_,Tu.EventType.MESSAGE,(b=>{if(!T){const j=b.data[0];ct(!!j,16349);const U=j,B=U?.error||U[0]?.error;if(B){me(_n,`RPC '${e}' stream ${s} received error:`,B);const G=B.status;let X=(function(R){const N=Ft[R];if(N!==void 0)return gR(N)})(G),ne=B.message;X===void 0&&(X=ee.INTERNAL,ne="Unknown error status: "+G+" with message "+B.message),T=!0,A.a_(new de(X,ne)),_.close()}else me(_n,`RPC '${e}' stream ${s} received:`,j),A.u_(j)}})),S(u,Db.STAT_EVENT,(b=>{b.stat===Zy.PROXY?me(_n,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Zy.NOPROXY&&me(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _y(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n){return new iV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="PersistentStream";class NR{constructor(e,t,r,s,o,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new de(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(uI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(uI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nF extends NR{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lV(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ze.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ze.min():l.readTime?ys(l.readTime):ze.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=u_(this.serializer),t.addTarget=(function(o,l){let u;const d=l.target;if(u=i_(d)?{documents:dV(o,d)}:{query:hV(o,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=vR(o,l.resumeToken);const p=a_(o,l.expectedCount);p!==null&&(u.expectedCount=p)}else if(l.snapshotVersion.compareTo(ze.min())>0){u.readTime=Yf(o,l.snapshotVersion.toTimestamp());const p=a_(o,l.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=pV(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=u_(this.serializer),t.removeTarget=e,this.q_(t)}}class rF extends NR{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uV(e.writeResults,e.commitTime),r=ys(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=u_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>cV(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{}class iF extends sF{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,l_(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ee.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,l_(t,r),s,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ee.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ii(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="RemoteStore";class aF{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Sa(this)&&(me(ma,"Restarting streams for network reachability change."),await(async function(d){const p=$e(d);p.Ea.add(4),await xd(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Kp(p)})(this))}))})),this.Ra=new oF(r,s)}}async function Kp(n){if(Sa(n))for(const e of n.da)await e(!0)}async function xd(n){for(const e of n.da)await e(!1)}function PR(n,e){const t=$e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Av(t)?Rv(t):fc(t).O_()&&bv(t,e))}function Sv(n,e){const t=$e(n),r=fc(t);t.Ia.delete(e),r.O_()&&DR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Sa(t)&&t.Ra.set("Unknown"))}function bv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).Y_(e)}function DR(n,e){n.Va.Ue(e),fc(n).Z_(e)}function Rv(n){n.Va=new tV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.Ra.ua()}function Av(n){return Sa(n)&&!fc(n).x_()&&n.Ia.size>0}function Sa(n){return $e(n).Ea.size===0}function OR(n){n.Va=void 0}async function lF(n){n.Ra.set("Online")}async function cF(n){n.Ia.forEach(((e,t)=>{bv(n,e)}))}async function uF(n,e){OR(n),Av(n)?(n.Ra.ha(e),Rv(n)):n.Ra.set("Unknown")}async function dF(n,e,t){if(n.Ra.set("Online"),e instanceof _R&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const u of o.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){me(ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jf(n,r)}else if(e instanceof If?n.Va.Ze(e):e instanceof yR?n.Va.st(e):n.Va.tt(e),!t.isEqual(ze.min()))try{const r=await AR(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ia.get(p);g&&o.Ia.set(p,g.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,p)=>{const g=o.Ia.get(d);if(!g)return;o.Ia.set(d,g.withResumeToken(dn.EMPTY_BYTE_STRING,g.snapshotVersion)),DR(o,d);const _=new to(g.target,d,p,g.sequenceNumber);bv(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){me(ma,"Failed to raise snapshot:",r),await Jf(n,r)}}async function Jf(n,e,t){if(!dc(e))throw e;n.Ea.add(1),await xd(n),n.Ra.set("Offline"),t||(t=()=>AR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(ma,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kp(n)}))}function MR(n,e){return e().catch((t=>Jf(n,t,e)))}async function Qp(n){const e=$e(n),t=mo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fv;for(;hF(e);)try{const s=await GV(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,fF(e,s)}catch(s){await Jf(e,s)}LR(e)&&jR(e)}function hF(n){return Sa(n)&&n.Ta.length<10}function fF(n,e){n.Ta.push(e);const t=mo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function LR(n){return Sa(n)&&!mo(n).x_()&&n.Ta.length>0}function jR(n){mo(n).start()}async function pF(n){mo(n).ra()}async function mF(n){const e=mo(n);for(const t of n.Ta)e.ea(t.mutations)}async function gF(n,e,t){const r=n.Ta.shift(),s=vv.from(r,e,t);await MR(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Qp(n)}async function yF(n,e){e&&mo(n).X_&&await(async function(r,s){if((function(l){return Jj(l)&&l!==ee.ABORTED})(s.code)){const o=r.Ta.shift();mo(r).B_(),await MR(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Qp(r)}})(n,e),LR(n)&&jR(n)}async function dI(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),me(ma,"RemoteStore received new credentials");const r=Sa(t);t.Ea.add(3),await xd(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kp(t)}async function _F(n,e){const t=$e(n);e?(t.Ea.delete(2),await Kp(t)):e||(t.Ea.add(2),await xd(t),t.Ra.set("Unknown"))}function fc(n){return n.ma||(n.ma=(function(t,r,s){const o=$e(t);return o.sa(),new nF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:lF.bind(null,n),t_:cF.bind(null,n),r_:uF.bind(null,n),H_:dF.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Av(n)?Rv(n):n.Ra.set("Unknown")):(await n.ma.stop(),OR(n))}))),n.ma}function mo(n){return n.fa||(n.fa=(function(t,r,s){const o=$e(t);return o.sa(),new rF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pF.bind(null,n),r_:yF.bind(null,n),ta:mF.bind(null,n),na:gF.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Qp(n)):(await n.fa.stop(),n.Ta.length>0&&(me(ma,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new kv(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(n,e){if(ii("AsyncQueue",`${e}: ${n}`),dc(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{static emptySet(e){return new Ll(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=Iu(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.ga=new $t(Re.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Yl{constructor(e,t,r,s,o,l,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Yl(e,t,Ll.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wF{constructor(){this.queries=fI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=$e(t),o=s.queries;s.queries=fI(),o.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function fI(){return new Ca((n=>rR(n)),Bp)}async function Pv(n,e){const t=$e(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new vF,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Nv(l,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Ov(t)}async function Dv(n,e){const t=$e(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EF(n,e){const t=$e(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&Ov(t)}function xF(n,e,t){const r=$e(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function Ov(n){n.Ca.forEach((e=>{e.next()}))}var f_,pI;(pI=f_||(f_={})).Ma="default",pI.Cache="cache";class Mv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==f_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.key=e}}class FR{constructor(e){this.key=e}}class TF{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=sR(e),this.tu=new Ll(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new hI,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,_)=>{const v=s.get(g),T=$p(this.query,_)?_:null,A=!!v&&this.mutatedKeys.has(v.key),S=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let b=!1;v&&T?v.data.isEqual(T.data)?A!==S&&(r.track({type:3,doc:T}),b=!0):this.su(v,T)||(r.track({type:2,doc:T}),b=!0,(d&&this.eu(T,d)>0||p&&this.eu(T,p)<0)&&(u=!0)):!v&&T?(r.track({type:0,doc:T}),b=!0):v&&!T&&(r.track({type:1,doc:v}),b=!0,(d||p)&&(u=!0)),b&&(T?(l=l.add(T),o=S?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,_)=>(function(T,A){const S=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:b})}};return S(T)-S(A)})(g.type,_.type)||this.eu(g.doc,_.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,l.length!==0||p?{snapshot:new Yl(this.query,e.tu,o,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new FR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new VR(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lv="SyncEngine";class IF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CF{constructor(e){this.key=e,this.hu=!1}}class SF{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ca((u=>rR(u)),Bp),this.Iu=new Map,this.Eu=new Set,this.du=new $t(Re.comparator),this.Au=new Map,this.Ru=new xv,this.Vu={},this.mu=new Map,this.fu=Ql.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bF(n,e,t=!0){const r=HR(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await UR(r,e,t,!0),s}async function RF(n,e){const t=HR(n);await UR(t,e,!0,!1)}async function UR(n,e,t,r){const s=await KV(n.localStore,gs(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await AF(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&PR(n.remoteStore,s),u}async function AF(n,e,t,r,s){n.pu=(_,v,T)=>(async function(S,b,j,U){let B=b.view.ru(j);B.Cs&&(B=await oI(S.localStore,b.query,!1).then((({documents:P})=>b.view.ru(P,B))));const G=U&&U.targetChanges.get(b.targetId),X=U&&U.targetMismatches.get(b.targetId)!=null,ne=b.view.applyChanges(B,S.isPrimaryClient,G,X);return gI(S,b.targetId,ne.au),ne.snapshot})(n,_,v,T);const o=await oI(n.localStore,e,!0),l=new TF(e,o.Qs),u=l.ru(o.documents),d=Ed.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(u,n.isPrimaryClient,d);gI(n,t,p.au);const g=new IF(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function kF(n,e,t){const r=$e(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Bp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await d_(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Sv(r.remoteStore,s.targetId),p_(r,s.targetId)})).catch(uc)):(p_(r,s.targetId),await d_(r.localStore,s.targetId,!0))}async function NF(n,e){const t=$e(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sv(t.remoteStore,r.targetId))}async function PF(n,e,t){const r=FF(n);try{const s=await(function(l,u){const d=$e(l),p=wt.now(),g=u.reduce(((T,A)=>T.add(A.key)),Je());let _,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let A=oi(),S=Je();return d.Ns.getEntries(T,g).next((b=>{A=b,A.forEach(((j,U)=>{U.isValidDocument()||(S=S.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(T,A))).next((b=>{_=b;const j=[];for(const U of u){const B=Gj(U,_.get(U.key).overlayedDocument);B!=null&&j.push(new bo(U.key,B,Qb(B.value.mapValue),Vr.exists(!0)))}return d.mutationQueue.addMutationBatch(T,p,j,u)})).next((b=>{v=b;const j=b.applyToLocalDocumentSet(_,S);return d.documentOverlayCache.saveOverlays(T,b.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:oR(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let p=l.Vu[l.currentUser.toKey()];p||(p=new $t(Xe)),p=p.insert(u,d),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,t),await Td(r,s.changes),await Qp(r.remoteStore)}catch(s){const o=Nv(s,"Failed to persist write");t.reject(o)}}async function zR(n,e){const t=$e(n);try{const r=await HV(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ct(l.hu,14607):s.removedDocuments.size>0&&(ct(l.hu,42227),l.hu=!1))})),await Td(t,r,e)}catch(r){await uc(r)}}function mI(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=$e(l);d.onlineState=u;let p=!1;d.queries.forEach(((g,_)=>{for(const v of _.Sa)v.va(u)&&(p=!0)})),p&&Ov(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DF(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new $t(Re.comparator);l=l.insert(o,wn.newNoDocument(o,ze.min()));const u=Je().add(o),d=new qp(ze.min(),new Map,new $t(Xe),l,u);await zR(r,d),r.du=r.du.remove(o),r.Au.delete(e),jv(r)}else await d_(r.localStore,e,!1).then((()=>p_(r,e,t))).catch(uc)}async function OF(n,e){const t=$e(n),r=e.batch.batchId;try{const s=await WV(t.localStore,e);$R(t,r,null),BR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Td(t,s)}catch(s){await uc(s)}}async function MF(n,e,t){const r=$e(n);try{const s=await(function(l,u){const d=$e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return d.mutationQueue.lookupMutationBatch(p,u).next((_=>(ct(_!==null,37113),g=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>d.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);$R(r,e,t),BR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Td(r,s)}catch(s){await uc(s)}}function BR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function $R(n,e,t){const r=$e(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function p_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||WR(n,r)}))}function WR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Sv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),jv(n))}function gI(n,e,t){for(const r of t)r instanceof VR?(n.Ru.addReference(r.key,e),LF(n,r)):r instanceof FR?(me(Lv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||WR(n,r.key)):Oe(19791,{wu:r})}function LF(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(me(Lv,"New document in limbo: "+t),n.Eu.add(r),jv(n))}function jv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Re(mt.fromString(e)),r=n.fu.next();n.Au.set(r,new CF(t)),n.du=n.du.insert(t,r),PR(n.remoteStore,new to(gs(zp(t.path)),r,"TargetPurposeLimboResolution",Vp.ce))}}async function Td(n,e,t){const r=$e(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(p){s.push(p);const g=Iv.As(d.targetId,p);o.push(g)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,p){const g=$e(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>te.forEach(p,(v=>te.forEach(v.Es,(T=>g.persistence.referenceDelegate.addReference(_,v.targetId,T))).next((()=>te.forEach(v.ds,(T=>g.persistence.referenceDelegate.removeReference(_,v.targetId,T)))))))))}catch(_){if(!dc(_))throw _;me(Cv,"Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const T=g.Ms.get(v),A=T.snapshotVersion,S=T.withLastLimboFreeSnapshotVersion(A);g.Ms=g.Ms.insert(v,S)}}})(r.localStore,o))}async function jF(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){me(Lv,"User change. New user:",e.toKey());const r=await RR(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new de(ee.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Td(t,r.Ls)}}function VF(n,e){const t=$e(n),r=t.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let s=Je();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const u=t.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function HR(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DF.bind(null,e),e.Pu.H_=EF.bind(null,e.eventManager),e.Pu.yu=xF.bind(null,e.eventManager),e}function FF(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MF.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $V(this.persistence,new UV,e.initialUser,this.serializer)}Cu(e){return new bR(Tv.mi,this.serializer)}Du(e){return new YV}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class UF extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ct(this.persistence.referenceDelegate instanceof Xf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CV(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new bR((r=>Xf.mi(r,t)),this.serializer)}}class m_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jF.bind(null,this.syncEngine),await _F(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wF})()}createDatastore(e){const t=Gp(e.databaseInfo.databaseId),r=(function(o){return new tF(o)})(e.databaseInfo);return(function(o,l,u,d){return new iF(o,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,u){return new aF(r,s,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>mI(this.syncEngine,t,0)),(function(){return cI.v()?new cI:new XV})())}createSyncEngine(e,t){return(function(s,o,l,u,d,p,g){const _=new SF(s,o,l,u,d,p);return g&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=$e(t);me(ma,"RemoteStore shutting down."),r.Ea.add(5),await xd(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="FirestoreClient";class zF{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{me(go,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(me(go,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Nv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vy(n,e){n.asyncQueue.verifyOperationInProgress(),me(go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await RR(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await BF(n);me(go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>dI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>dI(e.remoteStore,s))),n._onlineComponents=e}async function BF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(go,"Using user provided OfflineComponentProvider");try{await vy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Hl("Error using user provided cache. Falling back to memory cache: "+t),await vy(n,new Zf)}}else me(go,"Using default OfflineComponentProvider"),await vy(n,new UF(void 0));return n._offlineComponents}async function qR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(go,"Using user provided OnlineComponentProvider"),await yI(n,n._uninitializedComponentsProvider._online)):(me(go,"Using default OnlineComponentProvider"),await yI(n,new m_))),n._onlineComponents}function $F(n){return qR(n).then((e=>e.syncEngine))}async function ep(n){const e=await qR(n),t=e.eventManager;return t.onListen=bF.bind(null,e.syncEngine),t.onUnlisten=kF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),t}function WF(n,e,t={}){const r=new Zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const g=new Vv({next:v=>{g.Nu(),l.enqueueAndForget((()=>Dv(o,_)));const T=v.docs.has(u);!T&&v.fromCache?p.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&d&&d.source==="server"?p.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(v)},error:v=>p.reject(v)}),_=new Mv(zp(u.path),g,{includeMetadataChanges:!0,qa:!0});return Pv(o,_)})(await ep(n),n.asyncQueue,e,t,r))),r.promise}function HF(n,e,t={}){const r=new Zs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,d,p){const g=new Vv({next:v=>{g.Nu(),l.enqueueAndForget((()=>Dv(o,_))),v.fromCache&&d.source==="server"?p.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),_=new Mv(u,g,{includeMetadataChanges:!0,qa:!0});return Pv(o,_)})(await ep(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firestore.googleapis.com",vI=!0;class wI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KR,this.ssl=vI}else this.host=e.host,this.ssl=e.ssl??vI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TV)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Y4;switch(r.type){case"firstParty":return new ej(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=_I.get(t);r&&(me("ComponentProvider","Removing Datastore"),_I.delete(t),r.terminate())})(this),Promise.resolve()}}function qF(n,e,t,r={}){n=rr(n,Yp);const s=Is(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(Ap(`https://${u}`),kp("Firestore",!0)),o.host!==KR&&o.host!==u&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:u,ssl:s,emulatorOptions:r};if(!ti(d,l)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=vn.MOCK_USER;else{p=Q_(r.mockUserToken,n._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new vn(_)}n._authCredentials=new X4(new jb(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vd(t,At._jsonSchema))return new At(e,r||null,new Re(mt.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Bt("string",At._jsonSchemaVersion),referencePath:Bt("string")};class oo extends hi{constructor(e,t,r){super(e,t,zp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Re(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function xs(n,e,...t){if(n=lt(n),Vb("collection","path",e),n instanceof Yp){const r=mt.fromString(e,...t);return DT(r),new oo(n,null,r)}{if(!(n instanceof At||n instanceof oo))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return DT(r),new oo(n.firestore,null,r)}}function fi(n,e,...t){if(n=lt(n),arguments.length===1&&(e=hv.newId()),Vb("doc","path",e),n instanceof Yp){const r=mt.fromString(e,...t);return PT(r),new At(n,null,new Re(r))}{if(!(n instanceof At||n instanceof oo))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return PT(r),new At(n.firestore,n instanceof oo?n.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="AsyncQueue";class xI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kR(this,"async_queue_retry"),this._c=()=>{const r=_y();r&&me(EI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=_y();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_y();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dc(e))throw e;me(EI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ii("INTERNAL UNHANDLED ERROR: ",TI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=kv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Oe(47125,{Pc:TI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function TI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class yo extends Yp{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new xI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xI(e),this._firestoreClient=void 0,await e}}}function GF(n,e){const t=typeof n=="object"?n:pd(),r=typeof n=="string"?n:Hf,s=di(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=K_("firestore");o&&qF(s,...o)}return s}function Xp(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KF(n),n._firestoreClient}function KF(n){const e=n._freezeSettings(),t=(function(s,o,l,u){return new yj(s,o,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GR(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _r(dn.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _r(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vd(e,_r._jsonSchema))return _r.fromBase64String(e.bytes)}}_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:Bt("string",_r._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_s._jsonSchemaVersion}}static fromJSON(e){if(vd(e,_s._jsonSchema))return new _s(e.latitude,e.longitude)}}_s._jsonSchemaVersion="firestore/geoPoint/1.0",_s._jsonSchema={type:Bt("string",_s._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vd(e,vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vs(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vs._jsonSchemaVersion="firestore/vectorValue/1.0",vs._jsonSchema={type:Bt("string",vs._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=/^__.*__$/;class YF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new wd(e,this.data,t,this.fieldTransforms)}}class QR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:n})}}class Fv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YR(this.Ac)&&QF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gp(e)}Cc(e,t,r,s=!1){return new Fv({Ac:e,methodName:t,Dc:r,path:cn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function em(n){const e=n._freezeSettings(),t=Gp(n._databaseId);return new XF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XR(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);zv("Data must be an object, but it was:",l,r);const u=JR(r,l);let d,p;if(o.merge)d=new er(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const _ of o.mergeFields){const v=g_(e,_,t);if(!l.contains(v))throw new de(ee.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);eA(g,v)||g.push(v)}d=new er(g),p=l.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=l.fieldTransforms;return new YF(new Fn(u),d,p)}class tm extends Zp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tm}}class Uv extends Zp{_toFieldTransform(e){return new $j(e.path,new Ju)}isEqual(e){return e instanceof Uv}}function JF(n,e,t,r){const s=n.Cc(1,e,t);zv("Data must be an object, but it was:",s,r);const o=[],l=Fn.empty();So(r,((d,p)=>{const g=Bv(e,d,t);p=lt(p);const _=s.yc(g);if(p instanceof tm)o.push(g);else{const v=Id(p,_);v!=null&&(o.push(g),l.set(g,v))}}));const u=new er(o);return new QR(l,u,s.fieldTransforms)}function ZF(n,e,t,r,s,o){const l=n.Cc(1,e,t),u=[g_(e,r,t)],d=[s];if(o.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(g_(e,o[v])),d.push(o[v+1]);const p=[],g=Fn.empty();for(let v=u.length-1;v>=0;--v)if(!eA(p,u[v])){const T=u[v];let A=d[v];A=lt(A);const S=l.yc(T);if(A instanceof tm)p.push(T);else{const b=Id(A,S);b!=null&&(p.push(T),g.set(T,b))}}const _=new er(p);return new QR(g,_,l.fieldTransforms)}function eU(n,e,t,r=!1){return Id(t,n.Cc(r?4:3,e))}function Id(n,e){if(ZR(n=lt(n)))return zv("Unsupported field value:",e,n),JR(n,e);if(n instanceof Zp)return(function(r,s){if(!YR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const u of r){let d=Id(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Yf(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yf(s.serializer,o)}}if(r instanceof _s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _r)return{bytesValue:vR(s.serializer,r._byteString)};if(r instanceof At){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ev(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vs)return(function(l,u){return{mapValue:{fields:{[Gb]:{stringValue:Kb},[qf]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return _v(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${jp(r)}`)})(n,e)}function JR(n,e){const t={};return zb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,s)=>{const o=Id(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function ZR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof _s||n instanceof _r||n instanceof At||n instanceof Zp||n instanceof vs)}function zv(n,e,t){if(!ZR(t)||!Fb(t)){const r=jp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function g_(n,e,t){if((e=lt(e))instanceof Jp)return e._internalPath;if(typeof e=="string")return Bv(n,e);throw tp("Field path arguments must be of type string or ",n,!1,void 0,t)}const tU=new RegExp("[~\\*/\\[\\]]");function Bv(n,e,t){if(e.search(tU)>=0)throw tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jp(...e.split("."))._internalPath}catch{throw tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tp(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new de(ee.INVALID_ARGUMENT,u+n+d)}function eA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nU extends tA{data(){return super.data()}}function nm(n,e){return typeof e=="string"?Bv(n,e):e instanceof Jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $v{}class Wv extends $v{}function Xl(n,e,...t){let r=[];e instanceof $v&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((d=>d instanceof Hv)).length,u=o.filter((d=>d instanceof rm)).length;if(l>1||l>0&&u>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class rm extends Wv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rm(e,t,r)}_apply(e){const t=this._parse(e);return rA(e._query,t),new hi(e.firestore,e.converter,o_(e._query,t))}_parse(e){const t=em(e.firestore);return(function(o,l,u,d,p,g,_){let v;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){SI(_,g);const A=[];for(const S of _)A.push(CI(d,o,S));v={arrayValue:{values:A}}}else v=CI(d,o,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||SI(_,g),v=eU(u,l,_,g==="in"||g==="not-in");return zt.create(p,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Lu(n,e,t){const r=e,s=nm("where",n);return rm._create(s,r,t)}class Hv extends $v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const u=o.getFlattenedFilters();for(const d of u)rA(l,d),l=o_(l,d)})(e._query,t),new hi(e.firestore,e.converter,o_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qv extends Wv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qv(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xu(o,l)})(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,(function(s,o){const l=s.explicitOrderBy.concat([o]);return new hc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function sm(n,e="asc"){const t=e,r=nm("orderBy",n);return qv._create(r,t)}class Gv extends Wv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Gv(e,t,r)}_apply(e){return new hi(e.firestore,e.converter,Kf(e._query,this._limit,this._limitType))}}function rU(n){return Gv._create("limit",n,"F")}function CI(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nR(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!Re.isDocumentKey(r))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zT(n,new Re(r))}if(t instanceof At)return zT(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(t)}.`)}function SI(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rA(n,e){const t=(function(s,o){for(const l of s)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sU{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[qf].arrayValue?.values?.map((r=>Ot(r.doubleValue)));return new vs(t)}convertGeoPoint(e){return new _s(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Up(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=ho(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);ct(CR(r),9688,{name:e});const s=new Qu(r.get(1),r.get(3)),o=new Re(r.popFirst(5));return s.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class la extends tA{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=la._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}la._jsonSchemaVersion="firestore/documentSnapshot/1.0",la._jsonSchema={type:Bt("string",la._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Cf extends la{data(e={}){return super.data(e)}}class ca{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Su(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Cf(this._firestore,this._userDataWriter,r.key,r,new Su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new Cf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Su(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const d=new Cf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Su(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return u.type!==0&&(p=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:iU(u.type),doc:d,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n){n=rr(n,At);const e=rr(n.firestore,yo);return WF(Xp(e),n._key).then((t=>iA(e,n,t)))}ca._jsonSchemaVersion="firestore/querySnapshot/1.0",ca._jsonSchema={type:Bt("string",ca._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Kv extends sU{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function Qv(n){n=rr(n,hi);const e=rr(n.firestore,yo),t=Xp(e),r=new Kv(e);return nA(n._query),HF(t,n._query).then((s=>new ca(e,r,n,s)))}function Yv(n,e,t){n=rr(n,At);const r=rr(n.firestore,yo),s=sA(n.converter,e);return Zv(r,[XR(em(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Vr.none())])}function im(n,e,t,...r){n=rr(n,At);const s=rr(n.firestore,yo),o=em(s);let l;return l=typeof(e=lt(e))=="string"||e instanceof Jp?ZF(o,"updateDoc",n._key,e,t,r):JF(o,"updateDoc",n._key,e),Zv(s,[l.toMutation(n._key,Vr.exists(!0))])}function Xv(n,e){const t=rr(n.firestore,yo),r=fi(n),s=sA(n.converter,e);return Zv(t,[XR(em(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Vr.exists(!1))]).then((()=>r))}function Jv(n,...e){n=lt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||II(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(II(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let o,l,u;if(n instanceof At)l=rr(n.firestore,yo),u=zp(n._key.path),o={next:d=>{e[r]&&e[r](iA(l,n,d))},error:e[r+1],complete:e[r+2]};else{const d=rr(n,hi);l=rr(d.firestore,yo),u=d._query;const p=new Kv(l);o={next:g=>{e[r]&&e[r](new ca(l,p,d,g))},error:e[r+1],complete:e[r+2]},nA(n._query)}return(function(p,g,_,v){const T=new Vv(v),A=new Mv(g,T,_);return p.asyncQueue.enqueueAndForget((async()=>Pv(await ep(p),A))),()=>{T.Nu(),p.asyncQueue.enqueueAndForget((async()=>Dv(await ep(p),A)))}})(Xp(l),u,s,o)}function Zv(n,e){return(function(r,s){const o=new Zs;return r.asyncQueue.enqueueAndForget((async()=>PF(await $F(r),s,o))),o.promise})(Xp(n),e)}function iA(n,e,t){const r=t.docs.get(e._key),s=new Kv(n);return new la(n,s,e._key,r,new Su(t.hasPendingWrites,t.fromCache),e.converter)}function ao(){return new Uv("serverTimestamp")}(function(e,t=!0){(function(s){cc=s})(xo),Er(new ir("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new yo(new J4(r.getProvider("auth-internal")),new tj(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qu(p.options.projectId,g)})(l,s),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),En(RT,AT,e),En(RT,AT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebasestorage.googleapis.com",aA="storageBucket",oU=120*1e3,aU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends Tr{constructor(e,t,r=0){super(wy(e),`Firebase Storage: ${t} (${wy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kt||(kt={}));function wy(n){return"storage/"+n}function ew(){const n="An unknown error occurred, please check the error payload for server response.";return new Nt(kt.UNKNOWN,n)}function lU(n){return new Nt(kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function cU(n){return new Nt(kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(kt.UNAUTHENTICATED,n)}function dU(){return new Nt(kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hU(n){return new Nt(kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function fU(){return new Nt(kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pU(){return new Nt(kt.CANCELED,"User canceled the upload/download.")}function mU(n){return new Nt(kt.INVALID_URL,"Invalid URL '"+n+"'.")}function gU(n){return new Nt(kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function yU(){return new Nt(kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aA+"' property when initializing the app?")}function _U(){return new Nt(kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vU(){return new Nt(kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wU(n){return new Nt(kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function y_(n){return new Nt(kt.INVALID_ARGUMENT,n)}function lA(){return new Nt(kt.APP_DELETED,"The Firebase app was deleted.")}function EU(n){return new Nt(kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ju(n,e){return new Nt(kt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mu(n){throw new Nt(kt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=tr.makeFromUrl(e,t)}catch{return new tr(e,"")}if(r.path==="")return r;throw gU(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function p(G){G.path_=decodeURIComponent(G.path)}const g="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",T=new RegExp(`^https?://${_}/${g}/b/${s}/o${v}`,"i"),A={bucket:1,path:3},S=t===oA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",j=new RegExp(`^https?://${S}/${s}/${b}`,"i"),B=[{regex:u,indices:d,postModify:o},{regex:T,indices:A,postModify:p},{regex:j,indices:{bucket:1,path:2},postModify:p}];for(let G=0;G<B.length;G++){const X=B[G],ne=X.regex.exec(e);if(ne){const P=ne[X.indices.bucket];let R=ne[X.indices.path];R||(R=""),r=new tr(P,R),X.postModify(r);break}}if(r==null)throw mU(e);return r}}class xU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let p=!1;function g(...b){p||(p=!0,e.apply(null,b))}function _(b){s=setTimeout(()=>{s=null,n(T,d())},b)}function v(){o&&clearTimeout(o)}function T(b,...j){if(p){v();return}if(b){v(),g.call(null,b,...j);return}if(d()||l){v(),g.call(null,b,...j);return}r<64&&(r*=2);let B;u===1?(u=2,B=0):B=(r+Math.random())*1e3,_(B)}let A=!1;function S(b){A||(A=!0,v(),!p&&(s!==null?(b||(u=2),clearTimeout(s),_(0)):b||(u=1)))}return _(0),o=setTimeout(()=>{l=!0,S(!0)},t),S}function IU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(n){return n!==void 0}function SU(n){return typeof n=="object"&&!Array.isArray(n)}function tw(n){return typeof n=="string"||n instanceof String}function bI(n){return nw()&&n instanceof Blob}function nw(){return typeof Blob<"u"}function RI(n,e,t,r){if(r<e)throw y_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw y_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function cA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var ua;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ua||(ua={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t,r,s,o,l,u,d,p,g,_,v=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,S)=>{this.resolve_=A,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new rf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===ua.NO_ERROR,d=o.getStatus();if(!u||bU(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ua.ABORT;r(!1,new rf(!1,null,g));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new rf(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());CU(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=ew();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?lA():pU();l(d)}else{const d=fU();l(d)}};this.canceled_?t(!1,new rf(!1,null,!0)):this.backoffId_=TU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function kU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function PU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function DU(n,e,t,r,s,o,l=!0,u=!1){const d=cA(n.urlParams),p=n.url+d,g=Object.assign({},n.headers);return NU(g,e),AU(g,t),kU(g,o),PU(g,r),new RU(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MU(...n){const e=OU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(nw())return new Blob(n);throw new Nt(kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(n){if(typeof atob>"u")throw wU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ey{constructor(e,t){this.data=e,this.contentType=t||null}}function VU(n,e){switch(n){case ds.RAW:return new Ey(uA(e));case ds.BASE64:case ds.BASE64URL:return new Ey(dA(n,e));case ds.DATA_URL:return new Ey(UU(e),zU(e))}throw ew()}function uA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function FU(n){let e;try{e=decodeURIComponent(n)}catch{throw ju(ds.DATA_URL,"Malformed data URL.")}return uA(e)}function dA(n,e){switch(n){case ds.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw ju(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ds.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw ju(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=jU(e)}catch(s){throw s.message.includes("polyfill")?s:ju(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class hA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ju(ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=BU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function UU(n){const e=new hA(n);return e.base64?dA(ds.BASE64,e.rest):FU(e.rest)}function zU(n){return new hA(n).contentType}function BU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t){let r=0,s="";bI(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(bI(this.data_)){const r=this.data_,s=LU(r,e,t);return s===null?null:new eo(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new eo(r,!0)}}static getBlob(...e){if(nw()){const t=e.map(r=>r instanceof eo?r.data_:r);return new eo(MU.apply(null,t))}else{const t=e.map(l=>tw(l)?VU(ds.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new eo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){let e;try{e=JSON.parse(n)}catch{return null}return SU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function WU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function pA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(n,e){return e}class bn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||HU}}let sf=null;function qU(n){return!tw(n)||n.length<2?n:pA(n)}function mA(){if(sf)return sf;const n=[];n.push(new bn("bucket")),n.push(new bn("generation")),n.push(new bn("metageneration")),n.push(new bn("name","fullPath",!0));function e(o,l){return qU(l)}const t=new bn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new bn("size");return s.xform=r,n.push(s),n.push(new bn("timeCreated")),n.push(new bn("updated")),n.push(new bn("md5Hash",null,!0)),n.push(new bn("cacheControl",null,!0)),n.push(new bn("contentDisposition",null,!0)),n.push(new bn("contentEncoding",null,!0)),n.push(new bn("contentLanguage",null,!0)),n.push(new bn("contentType",null,!0)),n.push(new bn("metadata","customMetadata",!0)),sf=n,sf}function GU(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new tr(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function KU(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return GU(r,n),r}function gA(n,e,t){const r=fA(e);return r===null?null:KU(n,r,t)}function QU(n,e,t,r){const s=fA(e);if(s===null||!tw(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const g=n.bucket,_=n.fullPath,v="/b/"+l(g)+"/o/"+l(_),T=rw(v,t,r),A=cA({alt:"media",token:p});return T+A})[0]}function YU(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class yA{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n){if(!n)throw ew()}function XU(n,e){function t(r,s){const o=gA(n,s,e);return _A(o!==null),o}return t}function JU(n,e){function t(r,s){const o=gA(n,s,e);return _A(o!==null),QU(o,s,n.host,n._protocol)}return t}function vA(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=dU():s=uU():t.getStatus()===402?s=cU(n.bucket):t.getStatus()===403?s=hU(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZU(n){const e=vA(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=lU(n.path)),o.serverResponse=s.serverResponse,o}return t}function e3(n,e,t){const r=e.fullServerUrl(),s=rw(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new yA(s,o,JU(n,t),l);return u.errorHandler=ZU(e),u}function t3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function n3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=t3(null,e)),r}function r3(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let B="";for(let G=0;G<2;G++)B=B+Math.random().toString().slice(2);return B}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const p=n3(e,r,s),g=YU(p,t),_="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,v=`\r
--`+d+"--",T=eo.getBlob(_,r,v);if(T===null)throw _U();const A={name:p.fullPath},S=rw(o,n.host,n._protocol),b="POST",j=n.maxUploadRetryTime,U=new yA(S,b,XU(n,t),j);return U.urlParams=A,U.headers=l,U.body=T.uploadData(),U.errorHandler=vA(e),U}class s3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,o){if(this.sent_)throw mu("cannot .send() more than once");if(Is(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i3 extends s3{initXhr(){this.xhr_.responseType="text"}}function wA(){return new i3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this._service=e,t instanceof tr?this._location=t:this._location=tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ga(e,t)}get root(){const e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pA(this._location.path)}get storage(){return this._service}get parent(){const e=$U(this._location.path);if(e===null)return null;const t=new tr(this._location.bucket,e);return new ga(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw EU(e)}}function o3(n,e,t){n._throwIfRoot("uploadBytes");const r=r3(n.storage,n._location,mA(),new eo(e,!0),t);return n.storage.makeRequestWithTokens(r,wA).then(s=>({metadata:s,ref:n}))}function a3(n){n._throwIfRoot("getDownloadURL");const e=e3(n.storage,n._location,mA());return n.storage.makeRequestWithTokens(e,wA).then(t=>{if(t===null)throw vU();return t})}function l3(n,e){const t=WU(n._location.path,e),r=new tr(n._location.bucket,t);return new ga(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n){return/^[A-Za-z]+:\/\//.test(n)}function u3(n,e){return new ga(n,e)}function EA(n,e){if(n instanceof sw){const t=n;if(t._bucket==null)throw yU();const r=new ga(t,t._bucket);return e!=null?EA(r,e):r}else return e!==void 0?l3(n,e):n}function d3(n,e){if(e&&c3(e)){if(n instanceof sw)return u3(n,e);throw y_("To use ref(service, url), the first argument must be a Storage instance.")}else return EA(n,e)}function AI(n,e){const t=e?.[aA];return t==null?null:tr.makeFromBucketSpec(t,n)}function h3(n,e,t,r={}){n.host=`${e}:${t}`;const s=Is(e);s&&(Ap(`https://${n.host}/b`),kp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Q_(o,n.app.options.projectId))}class sw{constructor(e,t,r,s,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=oA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oU,this._maxUploadRetryTime=aU,this._requests=new Set,s!=null?this._bucket=tr.makeFromBucketSpec(s,this._host):this._bucket=AI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=AI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ga(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new xU(lA());{const l=DU(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const kI="@firebase/storage",NI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="storage";function iw(n,e,t){return n=lt(n),o3(n,e,t)}function ow(n){return n=lt(n),a3(n)}function aw(n,e){return n=lt(n),d3(n,e)}function f3(n=pd(),e){n=lt(n);const r=di(n,xA).getImmediate({identifier:e}),s=K_("storage");return s&&p3(r,...s),r}function p3(n,e,t,r={}){h3(n,e,t,r)}function m3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new sw(t,r,s,e,xo)}function g3(){Er(new ir(xA,m3,"PUBLIC").setMultipleInstances(!0)),En(kI,NI,""),En(kI,NI,"esm2020")}g3();var PI={};const DI="@firebase/database",OI="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TA="";function y3(n){TA=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:$u(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Cs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _3(e)}}catch{}return new v3},oa=IA("localStorage"),w3=IA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new fd("@firebase/database"),E3=(function(){let n=1;return function(){return n++}})(),CA=function(n){const e=n2(n),t=new JD;t.update(e);const r=t.digest();return G_.encodeByteArray(r)},Sd=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Sd.apply(null,r):typeof r=="object"?e+=tn(r):e+=r,e+=" "}return e};let Vu=null,MI=!0;const x3=function(n,e){le(!0,"Can't turn on custom loggers persistently."),jl.logLevel=Qe.VERBOSE,Vu=jl.log.bind(jl)},an=function(...n){if(MI===!0&&(MI=!1,Vu===null&&w3.get("logging_enabled")===!0&&x3()),Vu){const e=Sd.apply(null,n);Vu(e)}},bd=function(n){return function(...e){an(n,...e)}},__=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sd(...n);jl.error(e)},ai=function(...n){const e=`FIREBASE FATAL ERROR: ${Sd(...n)}`;throw jl.error(e),new Error(e)},$n=function(...n){const e="FIREBASE WARNING: "+Sd(...n);jl.warn(e)},T3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},om=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},I3=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Jl="[MIN_NAME]",ya="[MAX_NAME]",ba=function(n,e){if(n===e)return 0;if(n===Jl||e===ya)return-1;if(e===Jl||n===ya)return 1;{const t=LI(n),r=LI(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},C3=function(n,e){return n===e?0:n<e?-1:1},gu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+tn(e))},lw=function(n){if(typeof n!="object"||n===null)return tn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=tn(e[r]),t+=":",t+=lw(n[e[r]]);return t+="}",t},SA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function Tn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bA=function(n){le(!om(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,l,u,d;n===0?(o=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=u+r,l=Math.round(n*Math.pow(2,t-u)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(d=t;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=e;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const g=p.join("");let _="";for(d=0;d<64;d+=8){let v=parseInt(g.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},S3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},b3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function R3(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const A3=new RegExp("^-?(0*)\\d{1,10}$"),k3=-2147483648,N3=2147483647,LI=function(n){if(A3.test(n)){const e=Number(n);if(e>=k3&&e<=N3)return e}return null},pc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw $n("Exception was thrown by user callback.",t),e},Math.floor(0))}},P3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Rn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}}class Sf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Sf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="5",RA="v",AA="s",kA="r",NA="f",PA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DA="ls",OA="p",v_="ac",MA="websocket",LA="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,r,s,o=!1,l="",u=!1,d=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=oa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&oa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function M3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function VA(n,e,t){le(typeof e=="string","typeof type must == string"),le(typeof t=="object","typeof params must == object");let r;if(e===MA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===LA)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);M3(n)&&(t.ns=n.namespace);const s=[];return Tn(t,(o,l)=>{s.push(o+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.counters_={}}incrementCounter(e,t=1){Cs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return DD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy={},Ty={};function uw(n){const e=n.toString();return xy[e]||(xy[e]=new L3),xy[e]}function j3(n,e){const t=n.toString();return Ty[t]||(Ty[t]=e()),Ty[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&pc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="start",F3="close",U3="pLPCommand",z3="pRTLPCB",FA="id",UA="pw",zA="ser",B3="cb",$3="seg",W3="ts",H3="d",q3="dframe",BA=1870,$A=30,G3=BA-$A,K3=25e3,Q3=3e4;class Pl{constructor(e,t,r,s,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bd(e),this.stats_=uw(t),this.urlFn=d=>(this.appCheckToken&&(d[v_]=this.appCheckToken),VA(t,LA,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new V3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Q3)),I3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dw((...o)=>{const[l,u,d,p,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===jI)this.id=u,this.password=d;else if(l===F3)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[jI]="t",r[zA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[B3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[RA]=cw,this.transportSessionId&&(r[AA]=this.transportSessionId),this.lastSessionId&&(r[DA]=this.lastSessionId),this.applicationId&&(r[OA]=this.applicationId),this.appCheckToken&&(r[v_]=this.appCheckToken),typeof location<"u"&&location.hostname&&PA.test(location.hostname)&&(r[kA]=NA);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pl.forceAllow_=!0}static forceDisallow(){Pl.forceDisallow_=!0}static isAvailable(){return Pl.forceAllow_?!0:!Pl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!S3()&&!b3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=dS(t),s=SA(r,G3);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[q3]="t",r[FA]=e,r[UA]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=tn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dw{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=E3(),window[U3+this.uniqueCallbackIdentifier]=e,window[z3+this.uniqueCallbackIdentifier]=t,this.myIFrame=dw.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){an("frame writing exception"),u.stack&&an(u.stack),an(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||an("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FA]=this.myID,e[UA]=this.myPW,e[zA]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$A+r.length<=BA;){const l=this.pendingSegs.shift();r=r+"&"+$3+s+"="+l.seg+"&"+W3+s+"="+l.ts+"&"+H3+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(K3)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{an("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=16384,X3=45e3;let np=null;typeof MozWebSocket<"u"?np=MozWebSocket:typeof WebSocket<"u"&&(np=WebSocket);class Or{constructor(e,t,r,s,o,l,u){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bd(this.connId),this.stats_=uw(t),this.connURL=Or.connectionURL_(t,l,u,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const l={};return l[RA]=cw,typeof location<"u"&&location.hostname&&PA.test(location.hostname)&&(l[kA]=NA),t&&(l[AA]=t),r&&(l[DA]=r),s&&(l[v_]=s),o&&(l[OA]=o),VA(e,MA,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,oa.set("previous_websocket_failure",!0);try{let r;WD(),this.mySock=new np(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Or.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&np!==null&&!Or.forceDisallow_}static previouslyFailed(){return oa.isInMemoryStorage||oa.get("previous_websocket_failure")===!0}markConnectionHealthy(){oa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=$u(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(le(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=tn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=SA(t,Y3);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(X3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Or.responsesRequiredToBeHealthy=2;Or.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{static get ALL_TRANSPORTS(){return[Pl,Or]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Or&&Or.isAvailable();let r=t&&!Or.previouslyFailed();if(e.webSocketOnly&&(t||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Or];else{const s=this.transports_=[];for(const o of td.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);td.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}td.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=6e4,Z3=5e3,e6=10*1024,t6=100*1024,Iy="t",VI="d",n6="s",FI="r",r6="e",UI="o",zI="a",BI="n",$I="p",s6="h";class i6{constructor(e,t,r,s,o,l,u,d,p,g){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bd("c:"+this.id+":"),this.transportManager_=new td(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Fu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>t6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>e6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Iy in e){const t=e[Iy];t===zI?this.upgradeIfSecondaryHealthy_():t===FI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===UI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=gu("t",e),r=gu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$I,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=gu("t",e),r=gu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=gu(Iy,e);if(VI in e){const r=e[VI];if(t===s6){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===BI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===n6?this.onConnectionShutdown_(r):t===FI?this.onReset_(r):t===r6?__("Server Error: "+r):t===UI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):__("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cw!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Z3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$I,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(oa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.allowedEvents_=e,this.listeners_={},le(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){le(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends HA{static getInstance(){return new rp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Y_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return le(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=32,HI=768;class dt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function at(){return new dt("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _o(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new dt(n.pieces_,e)}function hw(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function o6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function nd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new dt(e,0)}function Mt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof dt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new dt(t,0)}function Ge(n){return n.pieceNum_>=n.pieces_.length}function Un(n,e){const t=He(n),r=He(e);if(t===null)return e;if(t===r)return Un(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function a6(n,e){const t=nd(n,0),r=nd(e,0);for(let s=0;s<t.length&&s<r.length;s++){const o=ba(t[s],r[s]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function fw(n,e){if(_o(n)!==_o(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_o(n)>_o(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class l6{constructor(e,t){this.errorPrefix_=t,this.parts_=nd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Np(this.parts_[r]);GA(this)}}function c6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Np(e),GA(n)}function u6(n){const e=n.parts_.pop();n.byteLength_-=Np(e),n.parts_.length>0&&(n.byteLength_-=1)}function GA(n){if(n.byteLength_>HI)throw new Error(n.errorPrefix_+"has a key path longer than "+HI+" bytes ("+n.byteLength_+").");if(n.parts_.length>WI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+WI+") or object contains a cycle "+ra(n))}function ra(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends HA{static getInstance(){return new pw}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return le(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=1e3,d6=300*1e3,qI=30*1e3,h6=1.3,f6=3e4,p6="server_kill",GI=3;class ei extends WA{constructor(e,t,r,s,o,l,u,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=u,this.authOverride_=d,this.id=ei.nextPersistentConnectionId_++,this.log_=bd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yu,this.maxReconnectDelay_=d6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&rp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(tn(o)),le(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Qs,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const u=l.d;l.s==="ok"?t.resolve(u):t.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),le(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,u=>{const d=u.d,p=u.s;ei.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",u),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Cs(e,"w")){const r=$l(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||XD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=YD(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,l=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";s&&(o.q=r,o.t=s),this.sendRequest(l,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const l={p:t,d:r};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):__("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){le(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>f6&&(this.reconnectDelay_=yu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*h6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ei.nextConnectionId_++,o=this.lastSessionId;let l=!1,u=null;const d=function(){u?u.close():(l=!0,r())},p=function(_){le(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)};this.realtime_={close:d,sendRequest:p};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,u=new i6(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,T=>{$n(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(p6)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&$n(_),d())}}}interrupt(e){an("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){an("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Df(this.interruptReasons_)&&(this.reconnectDelay_=yu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>lw(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new dt(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){an("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=GI&&(this.reconnectDelay_=qI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){an("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=GI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+TA.replace(/\./g,"-")]=1,Y_()?e["framework.cordova"]=1:yS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=rp.getInstance().currentlyOnline();return Df(this.interruptReasons_)&&e}}ei.nextPersistentConnectionId_=0;ei.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ke(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Ke(Jl,e),s=new Ke(Jl,t);return this.compare(r,s)!==0}minPost(){return Ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of;class KA extends am{static get __EMPTY_NODE(){return of}static set __EMPTY_NODE(e){of=e}compare(e,t){return ba(e.name,t.name)}isDefinedOn(e){throw oc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ke.MIN}maxPost(){return new Ke(ya,of)}makePost(e,t){return le(typeof e=="string","KeyIndex indexValue must always be a string."),new Ke(e,of)}toString(){return".key"}}const Vl=new KA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class en{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??en.RED,this.left=s??zn.EMPTY_NODE,this.right=o??zn.EMPTY_NODE}copy(e,t,r,s,o){return new en(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return zn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return zn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}en.RED=!0;en.BLACK=!1;class m6{copy(e,t,r,s,o){return this}insert(e,t,r){return new en(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class zn{constructor(e,t=zn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new zn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,en.BLACK,null,null))}remove(e){return new zn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,en.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new af(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new af(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new af(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new af(this.root_,null,this.comparator_,!0,e)}}zn.EMPTY_NODE=new m6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n,e){return ba(n.name,e.name)}function mw(n,e){return ba(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w_;function y6(n){w_=n}const QA=function(n){return typeof n=="number"?"number:"+bA(n):"string:"+n},YA=function(n){if(n.isLeafNode()){const e=n.val();le(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cs(e,".sv"),"Priority must be a string or number.")}else le(n===w_||n.isEmpty(),"priority of unexpected type.");le(n===w_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KI;class Jt{static set __childrenNodeConstructor(e){KI=e}static get __childrenNodeConstructor(){return KI}constructor(e,t=Jt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,le(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),YA(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Jt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ge(e)?this:He(e)===".priority"?this.priorityNode_:Jt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Jt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=He(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(le(r!==".priority"||_o(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Jt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+QA(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=bA(this.value_):e+=this.value_,this.lazyHash_=CA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Jt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Jt.__childrenNodeConstructor?-1:(le(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Jt.VALUE_TYPE_ORDER.indexOf(t),o=Jt.VALUE_TYPE_ORDER.indexOf(r);return le(s>=0,"Unknown leaf type: "+t),le(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Jt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XA,JA;function _6(n){XA=n}function v6(n){JA=n}class w6 extends am{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?ba(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ke.MIN}maxPost(){return new Ke(ya,new Jt("[PRIORITY-POST]",JA))}makePost(e,t){const r=XA(e);return new Ke(t,new Jt("[PRIORITY-POST]",r))}toString(){return".priority"}}const St=new w6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=Math.log(2);class x6{constructor(e){const t=o=>parseInt(Math.log(o)/E6,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sp=function(n,e,t,r){n.sort(e);const s=function(d,p){const g=p-d;let _,v;if(g===0)return null;if(g===1)return _=n[d],v=t?t(_):_,new en(v,_.node,en.BLACK,null,null);{const T=parseInt(g/2,10)+d,A=s(d,T),S=s(T+1,p);return _=n[T],v=t?t(_):_,new en(v,_.node,en.BLACK,A,S)}},o=function(d){let p=null,g=null,_=n.length;const v=function(A,S){const b=_-A,j=_;_-=A;const U=s(b+1,j),B=n[b],G=t?t(B):B;T(new en(G,B.node,S,null,U))},T=function(A){p?(p.left=A,p=A):(g=A,p=A)};for(let A=0;A<d.count;++A){const S=d.nextBitIsOne(),b=Math.pow(2,d.count-(A+1));S?v(b,en.BLACK):(v(b,en.BLACK),v(b,en.RED))}return g},l=new x6(n.length),u=o(l);return new zn(r||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy;const xl={};class Js{static get Default(){return le(xl&&St,"ChildrenNode.ts has not been loaded"),Cy=Cy||new Js({".priority":xl},{".priority":St}),Cy}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=$l(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zn?t:null}hasIndex(e){return Cs(this.indexSet_,e.toString())}addIndex(e,t){le(e!==Vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(Ke.Wrap);let l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=o.getNext();let u;s?u=sp(r,e.getCompare()):u=xl;const d=e.toString(),p={...this.indexSet_};p[d]=e;const g={...this.indexes_};return g[d]=u,new Js(g,p)}addToIndexes(e,t){const r=Of(this.indexes_,(s,o)=>{const l=$l(this.indexSet_,o);if(le(l,"Missing index implementation for "+o),s===xl)if(l.isDefinedOn(e.node)){const u=[],d=t.getIterator(Ke.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&u.push(p),p=d.getNext();return u.push(e),sp(u,l.getCompare())}else return xl;else{const u=t.get(e.name);let d=s;return u&&(d=d.remove(new Ke(e.name,u))),d.insert(e,e.node)}});return new Js(r,this.indexSet_)}removeFromIndexes(e,t){const r=Of(this.indexes_,s=>{if(s===xl)return s;{const o=t.get(e.name);return o?s.remove(new Ke(e.name,o)):s}});return new Js(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u;class Me{static get EMPTY_NODE(){return _u||(_u=new Me(new zn(mw),null,Js.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&YA(this.priorityNode_),this.children_.isEmpty()&&le(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_u}updatePriority(e){return this.children_.isEmpty()?this:new Me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?_u:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(le(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new Ke(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?_u:this.priorityNode_;return new Me(s,l,o)}}updateChild(e,t){const r=He(e);if(r===null)return t;{le(He(e)!==".priority"||_o(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ft(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(St,(l,u)=>{t[l]=u.val(e),r++,o&&Me.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):o=!1}),!e&&o&&s<2*r){const l=[];for(const u in t)l[u]=t[u];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+QA(this.getPriority().val())+":"),this.forEachChild(St,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":CA(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Ke(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ke(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ke(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ke.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Rd?-1:0}withIndex(e){if(e===Vl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Me(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Vl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(St),s=t.getIterator(St);let o=r.getNext(),l=s.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=r.getNext(),l=s.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Vl?null:this.indexMap_.get(e.toString())}}Me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class T6 extends Me{constructor(){super(new zn(mw),Me.EMPTY_NODE,Js.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Me.EMPTY_NODE}isEmpty(){return!1}}const Rd=new T6;Object.defineProperties(Ke,{MIN:{value:new Ke(Jl,Me.EMPTY_NODE)},MAX:{value:new Ke(ya,Rd)}});KA.__EMPTY_NODE=Me.EMPTY_NODE;Jt.__childrenNodeConstructor=Me;y6(Rd);v6(Rd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=!0;function Ut(n,e=null){if(n===null)return Me.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),le(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Jt(t,Ut(e))}if(!(n instanceof Array)&&I6){const t=[];let r=!1;if(Tn(n,(l,u)=>{if(l.substring(0,1)!=="."){const d=Ut(u);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new Ke(l,d)))}}),t.length===0)return Me.EMPTY_NODE;const o=sp(t,g6,l=>l.name,mw);if(r){const l=sp(t,St.getCompare());return new Me(o,Ut(e),new Js({".priority":l},{".priority":St}))}else return new Me(o,Ut(e),Js.Default)}else{let t=Me.EMPTY_NODE;return Tn(n,(r,s)=>{if(Cs(n,r)&&r.substring(0,1)!=="."){const o=Ut(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Ut(e))}}_6(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6 extends am{constructor(e){super(),this.indexPath_=e,le(!Ge(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?ba(e.name,t.name):o}makePost(e,t){const r=Ut(e),s=Me.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ke(t,s)}maxPost(){const e=Me.EMPTY_NODE.updateChild(this.indexPath_,Rd);return new Ke(ya,e)}toString(){return nd(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6 extends am{compare(e,t){const r=e.node.compareTo(t.node);return r===0?ba(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ke.MIN}maxPost(){return Ke.MAX}makePost(e,t){const r=Ut(e);return new Ke(t,r)}toString(){return".value"}}const b6=new S6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){return{type:"value",snapshotNode:n}}function Zl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sd(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function R6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){this.index_=e}updateChild(e,t,r,s,o,l){le(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(t);return u.getChild(s).equals(r.getChild(s))&&u.isEmpty()===r.isEmpty()||(l!=null&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(rd(t,u)):le(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(Zl(t,r)):l.trackChildChange(sd(t,r,u))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(St,(s,o)=>{t.hasChild(s)||r.trackChildChange(rd(s,o))}),t.isLeafNode()||t.forEachChild(St,(s,o)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(o)||r.trackChildChange(sd(s,o,l))}else r.trackChildChange(Zl(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Me.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.indexedFilter_=new gw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=id.getStartPost_(e),this.endPost_=id.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,o,l){return this.matches(new Ke(t,r))||(r=Me.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Me.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(Me.EMPTY_NODE);const o=this;return t.forEachChild(St,(l,u)=>{o.matches(new Ke(l,u))||(s=s.updateImmediateChild(l,Me.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new id(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,o,l){return this.rangedFilter_.matches(new Ke(t,r))||(r=Me.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=Me.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=Me.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))s=s.updateImmediateChild(u.name,u.node),l++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(Me.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let l=0;for(;o.hasNext();){const u=o.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:s=s.updateImmediateChild(u.name,Me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(v,T)=>_(T,v)}else l=this.index_.getCompare();const u=e;le(u.numChildren()===this.limit_,"");const d=new Ke(t,r),p=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),g=this.rangedFilter_.matches(d);if(u.hasChild(t)){const _=u.getImmediateChild(t);let v=s.getChildAfterChild(this.index_,p,this.reverse_);for(;v!=null&&(v.name===t||u.hasChild(v.name));)v=s.getChildAfterChild(this.index_,v,this.reverse_);const T=v==null?1:l(v,d);if(g&&!r.isEmpty()&&T>=0)return o?.trackChildChange(sd(t,r,_)),u.updateImmediateChild(t,r);{o?.trackChildChange(rd(t,_));const S=u.updateImmediateChild(t,Me.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o?.trackChildChange(Zl(v.name,v.node)),S.updateImmediateChild(v.name,v.node)):S}}else return r.isEmpty()?e:g&&l(p,d)>=0?(o!=null&&(o.trackChildChange(rd(p.name,p.node)),o.trackChildChange(Zl(t,r))),u.updateImmediateChild(t,r).updateImmediateChild(p.name,Me.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=St}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return le(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return le(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jl}hasEnd(){return this.endSet_}getIndexEndValue(){return le(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return le(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ya}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return le(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===St}copy(){const e=new yw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function k6(n){return n.loadsAllData()?new gw(n.getIndex()):n.hasLimit()?new A6(n):new id(n)}function QI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===St?t="$priority":n.index_===b6?t="$value":n.index_===Vl?t="$key":(le(n.index_ instanceof C6,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=tn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=tn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+tn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=tn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+tn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function YI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==St&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends WA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(le(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=bd("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=ip.getListenId_(e,r),u={};this.listens_[l]=u;const d=QI(e._queryParams);this.restRequest_(o+".json",d,(p,g)=>{let _=g;if(p===404&&(_=null,p=null),p===null&&this.onDataUpdate_(o,_,!1,r),$l(this.listens_,l)===u){let v;p?p===401?v="permission_denied":v="rest_error:"+p:v="ok",s(v,null)}})}unlisten(e,t){const r=ip.getListenId_(e,t);delete this.listens_[r]}get(e){const t=QI(e._queryParams),r=e._path.toString(),s=new Qs;return this.restRequest_(r+".json",t,(o,l)=>{let u=l;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ac(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=$u(u.responseText)}catch{$n("Failed to parse JSON response for "+l+": "+u.responseText)}r(null,d)}else u.status!==401&&u.status!==404&&$n("Got unsuccessful REST response for "+l+" Status: "+u.status),r(u.status);r=null}},u.open("GET",l,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.rootNode_=Me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(){return{value:null,children:new Map}}function mc(n,e,t){if(Ge(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=He(e);n.children.has(r)||n.children.set(r,op());const s=n.children.get(r);e=ft(e),mc(s,e,t)}}function E_(n,e){if(Ge(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(St,(r,s)=>{mc(n,new dt(r),s)}),E_(n,e)}}else if(n.children.size>0){const t=He(e);return e=ft(e),n.children.has(t)&&E_(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function x_(n,e,t){n.value!==null?t(e,n.value):P6(n,(r,s)=>{const o=new dt(e.toString()+"/"+r);x_(s,o,t)})}function P6(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Tn(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=10*1e3,O6=30*1e3,M6=300*1e3;class L6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new D6(e);const r=XI+(O6-XI)*Math.random();Fu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Tn(e,(s,o)=>{o>0&&Cs(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Fu(this.reportStats_.bind(this),Math.floor(Math.random()*2*M6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Lr||(Lr={}));function ek(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _w(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vw(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Lr.ACK_USER_WRITE,this.source=ek()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return le(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new dt(e));return new ap(at(),t,this.revert)}}else return le(He(this.path)===e,"operationForChild called for unrelated child."),new ap(ft(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.source=e,this.path=t,this.type=Lr.LISTEN_COMPLETE}operationForChild(e){return Ge(this.path)?new od(this.source,at()):new od(this.source,ft(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Lr.OVERWRITE}operationForChild(e){return Ge(this.path)?new _a(this.source,at(),this.snap.getImmediateChild(e)):new _a(this.source,ft(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Lr.MERGE}operationForChild(e){if(Ge(this.path)){const t=this.children.subtree(new dt(e));return t.isEmpty()?null:t.value?new _a(this.source,at(),t.value):new ad(this.source,at(),t)}else return le(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ad(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function V6(n,e,t,r){const s=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(R6(l.childName,l.snapshotNode))}),vu(n,s,"child_removed",e,r,t),vu(n,s,"child_added",e,r,t),vu(n,s,"child_moved",o,r,t),vu(n,s,"child_changed",e,r,t),vu(n,s,"value",e,r,t),s}function vu(n,e,t,r,s,o){const l=r.filter(u=>u.type===t);l.sort((u,d)=>U6(n,u,d)),l.forEach(u=>{const d=F6(n,u,o);s.forEach(p=>{p.respondsTo(u.type)&&e.push(p.createEvent(d,n.query_))})})}function F6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function U6(n,e,t){if(e.childName==null||t.childName==null)throw oc("Should only compare child_ events.");const r=new Ke(e.childName,e.snapshotNode),s=new Ke(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(n,e){return{eventCache:n,serverCache:e}}function Uu(n,e,t,r){return lm(new va(e,t,r),n.serverCache)}function tk(n,e,t,r){return lm(n.eventCache,new va(e,t,r))}function T_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sy;const z6=()=>(Sy||(Sy=new zn(C3)),Sy);class vt{static fromObject(e){let t=new vt(null);return Tn(e,(r,s)=>{t=t.set(new dt(r),s)}),t}constructor(e,t=z6()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:at(),value:this.value};if(Ge(e))return null;{const r=He(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(ft(e),t);return o!=null?{path:Mt(new dt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{const t=He(e),r=this.children.get(t);return r!==null?r.subtree(ft(e)):new vt(null)}}set(e,t){if(Ge(e))return new vt(t,this.children);{const r=He(e),o=(this.children.get(r)||new vt(null)).set(ft(e),t),l=this.children.insert(r,o);return new vt(this.value,l)}}remove(e){if(Ge(e))return this.children.isEmpty()?new vt(null):new vt(null,this.children);{const t=He(e),r=this.children.get(t);if(r){const s=r.remove(ft(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new vt(null):new vt(this.value,o)}else return this}}get(e){if(Ge(e))return this.value;{const t=He(e),r=this.children.get(t);return r?r.get(ft(e)):null}}setTree(e,t){if(Ge(e))return t;{const r=He(e),o=(this.children.get(r)||new vt(null)).setTree(ft(e),t);let l;return o.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,o),new vt(this.value,l)}}fold(e){return this.fold_(at(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(Mt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,at(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Ge(e))return null;{const o=He(e),l=this.children.get(o);return l?l.findOnPath_(ft(e),Mt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,at(),t)}foreachOnPath_(e,t,r){if(Ge(e))return this;{this.value&&r(t,this.value);const s=He(e),o=this.children.get(s);return o?o.foreachOnPath_(ft(e),Mt(t,s),r):new vt(null)}}foreach(e){this.foreach_(at(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Mt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.writeTree_=e}static empty(){return new Fr(new vt(null))}}function zu(n,e,t){if(Ge(e))return new Fr(new vt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const l=Un(s,e);return o=o.updateChild(l,t),new Fr(n.writeTree_.set(s,o))}else{const s=new vt(t),o=n.writeTree_.setTree(e,s);return new Fr(o)}}}function JI(n,e,t){let r=n;return Tn(t,(s,o)=>{r=zu(r,Mt(e,s),o)}),r}function ZI(n,e){if(Ge(e))return Fr.empty();{const t=n.writeTree_.setTree(e,new vt(null));return new Fr(t)}}function I_(n,e){return Ra(n,e)!=null}function Ra(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Un(t.path,e)):null}function eC(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(St,(r,s)=>{e.push(new Ke(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ke(r,s.value))}),e}function lo(n,e){if(Ge(e))return n;{const t=Ra(n,e);return t!=null?new Fr(new vt(t)):new Fr(n.writeTree_.subtree(e))}}function C_(n){return n.writeTree_.isEmpty()}function ec(n,e){return nk(at(),n.writeTree_,e)}function nk(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(le(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=nk(Mt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Mt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n,e){return ok(e,n)}function B6(n,e,t,r,s){le(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=zu(n.visibleWrites,e,t)),n.lastWriteId=r}function $6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function W6(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);le(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&H6(u,r.path)?s=!1:vr(r.path,u.path)&&(o=!0)),l--}if(s){if(o)return q6(n),!0;if(r.snap)n.visibleWrites=ZI(n.visibleWrites,r.path);else{const u=r.children;Tn(u,d=>{n.visibleWrites=ZI(n.visibleWrites,Mt(r.path,d))})}return!0}else return!1}function H6(n,e){if(n.snap)return vr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&vr(Mt(n.path,t),e))return!0;return!1}function q6(n){n.visibleWrites=rk(n.allWrites,G6,at()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function G6(n){return n.visible}function rk(n,e,t){let r=Fr.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let u;if(o.snap)vr(t,l)?(u=Un(t,l),r=zu(r,u,o.snap)):vr(l,t)&&(u=Un(l,t),r=zu(r,at(),o.snap.getChild(u)));else if(o.children){if(vr(t,l))u=Un(t,l),r=JI(r,u,o.children);else if(vr(l,t))if(u=Un(l,t),Ge(u))r=JI(r,at(),o.children);else{const d=$l(o.children,He(u));if(d){const p=d.getChild(ft(u));r=zu(r,at(),p)}}}else throw oc("WriteRecord should have .snap or .children")}}return r}function sk(n,e,t,r,s){if(!r&&!s){const o=Ra(n.visibleWrites,e);if(o!=null)return o;{const l=lo(n.visibleWrites,e);if(C_(l))return t;if(t==null&&!I_(l,at()))return null;{const u=t||Me.EMPTY_NODE;return ec(l,u)}}}else{const o=lo(n.visibleWrites,e);if(!s&&C_(o))return t;if(!s&&t==null&&!I_(o,at()))return null;{const l=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(vr(p.path,e)||vr(e,p.path))},u=rk(n.allWrites,l,e),d=t||Me.EMPTY_NODE;return ec(u,d)}}}function K6(n,e,t){let r=Me.EMPTY_NODE;const s=Ra(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(St,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=lo(n.visibleWrites,e);return t.forEachChild(St,(l,u)=>{const d=ec(lo(o,new dt(l)),u);r=r.updateImmediateChild(l,d)}),eC(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const o=lo(n.visibleWrites,e);return eC(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function Q6(n,e,t,r,s){le(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=Mt(e,t);if(I_(n.visibleWrites,o))return null;{const l=lo(n.visibleWrites,o);return C_(l)?s.getChild(t):ec(l,s.getChild(t))}}function Y6(n,e,t,r){const s=Mt(e,t),o=Ra(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const l=lo(n.visibleWrites,s);return ec(l,r.getNode().getImmediateChild(t))}else return null}function X6(n,e){return Ra(n.visibleWrites,e)}function J6(n,e,t,r,s,o,l){let u;const d=lo(n.visibleWrites,e),p=Ra(d,at());if(p!=null)u=p;else if(t!=null)u=ec(d,t);else return[];if(u=u.withIndex(l),!u.isEmpty()&&!u.isLeafNode()){const g=[],_=l.getCompare(),v=o?u.getReverseIteratorFrom(r,l):u.getIteratorFrom(r,l);let T=v.getNext();for(;T&&g.length<s;)_(T,r)!==0&&g.push(T),T=v.getNext();return g}else return[]}function Z6(){return{visibleWrites:Fr.empty(),allWrites:[],lastWriteId:-1}}function lp(n,e,t,r){return sk(n.writeTree,n.treePath,e,t,r)}function Ew(n,e){return K6(n.writeTree,n.treePath,e)}function tC(n,e,t,r){return Q6(n.writeTree,n.treePath,e,t,r)}function cp(n,e){return X6(n.writeTree,Mt(n.treePath,e))}function e5(n,e,t,r,s,o){return J6(n.writeTree,n.treePath,e,t,r,s,o)}function xw(n,e,t){return Y6(n.writeTree,n.treePath,e,t)}function ik(n,e){return ok(Mt(n.treePath,e),n.writeTree)}function ok(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;le(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),le(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,sd(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,rd(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Zl(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,sd(r,e.snapshotNode,s.oldSnap));else throw oc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const ak=new n5;class Tw{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new va(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xw(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wa(this.viewCache_),o=e5(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){return{filter:n}}function s5(n,e){le(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),le(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function i5(n,e,t,r,s){const o=new t5;let l,u;if(t.type===Lr.OVERWRITE){const p=t;p.source.fromUser?l=S_(n,e,p.path,p.snap,r,s,o):(le(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered()&&!Ge(p.path),l=up(n,e,p.path,p.snap,r,s,u,o))}else if(t.type===Lr.MERGE){const p=t;p.source.fromUser?l=a5(n,e,p.path,p.children,r,s,o):(le(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered(),l=b_(n,e,p.path,p.children,r,s,u,o))}else if(t.type===Lr.ACK_USER_WRITE){const p=t;p.revert?l=u5(n,e,p.path,r,s,o):l=l5(n,e,p.path,p.affectedTree,r,s,o)}else if(t.type===Lr.LISTEN_COMPLETE)l=c5(n,e,t.path,r,o);else throw oc("Unknown operation type: "+t.type);const d=o.getChanges();return o5(e,l,d),{viewCache:l,changes:d}}function o5(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=T_(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(ZA(T_(e)))}}function lk(n,e,t,r,s,o){const l=e.eventCache;if(cp(r,t)!=null)return e;{let u,d;if(Ge(t))if(le(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=wa(e),g=p instanceof Me?p:Me.EMPTY_NODE,_=Ew(r,g);u=n.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const p=lp(r,wa(e));u=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=He(t);if(p===".priority"){le(_o(t)===1,"Can't have a priority with additional path components");const g=l.getNode();d=e.serverCache.getNode();const _=tC(r,t,g,d);_!=null?u=n.filter.updatePriority(g,_):u=l.getNode()}else{const g=ft(t);let _;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const v=tC(r,t,l.getNode(),d);v!=null?_=l.getNode().getImmediateChild(p).updateChild(g,v):_=l.getNode().getImmediateChild(p)}else _=xw(r,p,e.serverCache);_!=null?u=n.filter.updateChild(l.getNode(),p,_,g,s,o):u=l.getNode()}}return Uu(e,u,l.isFullyInitialized()||Ge(t),n.filter.filtersNodes())}}function up(n,e,t,r,s,o,l,u){const d=e.serverCache;let p;const g=l?n.filter:n.filter.getIndexedFilter();if(Ge(t))p=g.updateFullNode(d.getNode(),r,null);else if(g.filtersNodes()&&!d.isFiltered()){const T=d.getNode().updateChild(t,r);p=g.updateFullNode(d.getNode(),T,null)}else{const T=He(t);if(!d.isCompleteForPath(t)&&_o(t)>1)return e;const A=ft(t),b=d.getNode().getImmediateChild(T).updateChild(A,r);T===".priority"?p=g.updatePriority(d.getNode(),b):p=g.updateChild(d.getNode(),T,b,A,ak,null)}const _=tk(e,p,d.isFullyInitialized()||Ge(t),g.filtersNodes()),v=new Tw(s,_,o);return lk(n,_,t,s,v,u)}function S_(n,e,t,r,s,o,l){const u=e.eventCache;let d,p;const g=new Tw(s,e,o);if(Ge(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),d=Uu(e,p,!0,n.filter.filtersNodes());else{const _=He(t);if(_===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),d=Uu(e,p,u.isFullyInitialized(),u.isFiltered());else{const v=ft(t),T=u.getNode().getImmediateChild(_);let A;if(Ge(v))A=r;else{const S=g.getCompleteChild(_);S!=null?hw(v)===".priority"&&S.getChild(qA(v)).isEmpty()?A=S:A=S.updateChild(v,r):A=Me.EMPTY_NODE}if(T.equals(A))d=e;else{const S=n.filter.updateChild(u.getNode(),_,A,v,g,l);d=Uu(e,S,u.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function nC(n,e){return n.eventCache.isCompleteForChild(e)}function a5(n,e,t,r,s,o,l){let u=e;return r.foreach((d,p)=>{const g=Mt(t,d);nC(e,He(g))&&(u=S_(n,u,g,p,s,o,l))}),r.foreach((d,p)=>{const g=Mt(t,d);nC(e,He(g))||(u=S_(n,u,g,p,s,o,l))}),u}function rC(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function b_(n,e,t,r,s,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;Ge(t)?p=r:p=new vt(null).setTree(t,r);const g=e.serverCache.getNode();return p.children.inorderTraversal((_,v)=>{if(g.hasChild(_)){const T=e.serverCache.getNode().getImmediateChild(_),A=rC(n,T,v);d=up(n,d,new dt(_),A,s,o,l,u)}}),p.children.inorderTraversal((_,v)=>{const T=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!g.hasChild(_)&&!T){const A=e.serverCache.getNode().getImmediateChild(_),S=rC(n,A,v);d=up(n,d,new dt(_),S,s,o,l,u)}}),d}function l5(n,e,t,r,s,o,l){if(cp(s,t)!=null)return e;const u=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Ge(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return up(n,e,t,d.getNode().getChild(t),s,o,u,l);if(Ge(t)){let p=new vt(null);return d.getNode().forEachChild(Vl,(g,_)=>{p=p.set(new dt(g),_)}),b_(n,e,t,p,s,o,u,l)}else return e}else{let p=new vt(null);return r.foreach((g,_)=>{const v=Mt(t,g);d.isCompleteForPath(v)&&(p=p.set(g,d.getNode().getChild(v)))}),b_(n,e,t,p,s,o,u,l)}}function c5(n,e,t,r,s){const o=e.serverCache,l=tk(e,o.getNode(),o.isFullyInitialized()||Ge(t),o.isFiltered());return lk(n,l,t,r,ak,s)}function u5(n,e,t,r,s,o){let l;if(cp(r,t)!=null)return e;{const u=new Tw(r,e,s),d=e.eventCache.getNode();let p;if(Ge(t)||He(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=lp(r,wa(e));else{const _=e.serverCache.getNode();le(_ instanceof Me,"serverChildren would be complete if leaf node"),g=Ew(r,_)}g=g,p=n.filter.updateFullNode(d,g,o)}else{const g=He(t);let _=xw(r,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=d.getImmediateChild(g)),_!=null?p=n.filter.updateChild(d,g,_,ft(t),u,o):e.eventCache.getNode().hasChild(g)?p=n.filter.updateChild(d,g,Me.EMPTY_NODE,ft(t),u,o):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=lp(r,wa(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||cp(r,at())!=null,Uu(e,p,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new gw(r.getIndex()),o=k6(r);this.processor_=r5(o);const l=t.serverCache,u=t.eventCache,d=s.updateFullNode(Me.EMPTY_NODE,l.getNode(),null),p=o.updateFullNode(Me.EMPTY_NODE,u.getNode(),null),g=new va(d,l.isFullyInitialized(),s.filtersNodes()),_=new va(p,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=lm(_,g),this.eventGenerator_=new j6(this.query_)}get query(){return this.query_}}function h5(n){return n.viewCache_.serverCache.getNode()}function f5(n,e){const t=wa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ge(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function sC(n){return n.eventRegistrations_.length===0}function p5(n,e){n.eventRegistrations_.push(e)}function iC(n,e,t){const r=[];if(t){le(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,s);l&&r.push(l)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(!l.matches(e))s.push(l);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function oC(n,e,t,r){e.type===Lr.MERGE&&e.source.queryId!==null&&(le(wa(n.viewCache_),"We should always have a full cache before handling merges"),le(T_(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=i5(n.processor_,s,e,t,r);return s5(n.processor_,o.viewCache),le(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,ck(n,o.changes,o.viewCache.eventCache.getNode(),null)}function m5(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(St,(o,l)=>{r.push(Zl(o,l))}),t.isFullyInitialized()&&r.push(ZA(t.getNode())),ck(n,r,t.getNode(),e)}function ck(n,e,t,r){const s=r?[r]:n.eventRegistrations_;return V6(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp;class g5{constructor(){this.views=new Map}}function y5(n){le(!dp,"__referenceConstructor has already been defined"),dp=n}function _5(){return le(dp,"Reference.ts has not been loaded"),dp}function v5(n){return n.views.size===0}function Iw(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return le(o!=null,"SyncTree gave us an op for an invalid query."),oC(o,e,t,r)}else{let o=[];for(const l of n.views.values())o=o.concat(oC(l,e,t,r));return o}}function w5(n,e,t,r,s){const o=e._queryIdentifier,l=n.views.get(o);if(!l){let u=lp(t,s?r:null),d=!1;u?d=!0:r instanceof Me?(u=Ew(t,r),d=!1):(u=Me.EMPTY_NODE,d=!1);const p=lm(new va(u,d,!1),new va(r,s,!1));return new d5(e,p)}return l}function E5(n,e,t,r,s,o){const l=w5(n,e,r,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),p5(l,t),m5(l,t)}function x5(n,e,t,r){const s=e._queryIdentifier,o=[];let l=[];const u=vo(n);if(s==="default")for(const[d,p]of n.views.entries())l=l.concat(iC(p,t,r)),sC(p)&&(n.views.delete(d),p.query._queryParams.loadsAllData()||o.push(p.query));else{const d=n.views.get(s);d&&(l=l.concat(iC(d,t,r)),sC(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||o.push(d.query)))}return u&&!vo(n)&&o.push(new(_5())(e._repo,e._path)),{removed:o,events:l}}function uk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Fl(n,e){let t=null;for(const r of n.views.values())t=t||f5(r,e);return t}function dk(n,e){if(e._queryParams.loadsAllData())return cm(n);{const r=e._queryIdentifier;return n.views.get(r)}}function hk(n,e){return dk(n,e)!=null}function vo(n){return cm(n)!=null}function cm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp;function T5(n){le(!hp,"__referenceConstructor has already been defined"),hp=n}function I5(){return le(hp,"Reference.ts has not been loaded"),hp}let C5=1;class aC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vt(null),this.pendingWriteTree_=Z6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fk(n,e,t,r,s){return B6(n.pendingWriteTree_,e,t,r,s),s?Ad(n,new _a(ek(),e,t)):[]}function aa(n,e,t=!1){const r=$6(n.pendingWriteTree_,e);if(W6(n.pendingWriteTree_,e)){let o=new vt(null);return r.snap!=null?o=o.set(at(),!0):Tn(r.children,l=>{o=o.set(new dt(l),!0)}),Ad(n,new ap(r.path,o,t))}else return[]}function um(n,e,t){return Ad(n,new _a(_w(),e,t))}function S5(n,e,t){const r=vt.fromObject(t);return Ad(n,new ad(_w(),e,r))}function b5(n,e){return Ad(n,new od(_w(),e))}function R5(n,e,t){const r=Sw(n,t);if(r){const s=bw(r),o=s.path,l=s.queryId,u=Un(o,e),d=new od(vw(l),u);return Rw(n,o,d)}else return[]}function R_(n,e,t,r,s=!1){const o=e._path,l=n.syncPointTree_.get(o);let u=[];if(l&&(e._queryIdentifier==="default"||hk(l,e))){const d=x5(l,e,t,r);v5(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=d.removed;if(u=d.events,!s){const g=p.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=n.syncPointTree_.findOnPath(o,(v,T)=>vo(T));if(g&&!_){const v=n.syncPointTree_.subtree(o);if(!v.isEmpty()){const T=N5(v);for(let A=0;A<T.length;++A){const S=T[A],b=S.query,j=gk(n,S);n.listenProvider_.startListening(Bu(b),fp(n,b),j.hashFn,j.onComplete)}}}!_&&p.length>0&&!r&&(g?n.listenProvider_.stopListening(Bu(e),null):p.forEach(v=>{const T=n.queryToTagMap.get(dm(v));n.listenProvider_.stopListening(Bu(v),T)}))}P5(n,p)}return u}function A5(n,e,t,r){const s=Sw(n,r);if(s!=null){const o=bw(s),l=o.path,u=o.queryId,d=Un(l,e),p=new _a(vw(u),d,t);return Rw(n,l,p)}else return[]}function k5(n,e,t,r){const s=Sw(n,r);if(s){const o=bw(s),l=o.path,u=o.queryId,d=Un(l,e),p=vt.fromObject(t),g=new ad(vw(u),d,p);return Rw(n,l,g)}else return[]}function lC(n,e,t,r=!1){const s=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(s,(v,T)=>{const A=Un(v,s);o=o||Fl(T,A),l=l||vo(T)});let u=n.syncPointTree_.get(s);u?(l=l||vo(u),o=o||Fl(u,at())):(u=new g5,n.syncPointTree_=n.syncPointTree_.set(s,u));let d;o!=null?d=!0:(d=!1,o=Me.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((T,A)=>{const S=Fl(A,at());S&&(o=o.updateImmediateChild(T,S))}));const p=hk(u,e);if(!p&&!e._queryParams.loadsAllData()){const v=dm(e);le(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const T=D5();n.queryToTagMap.set(v,T),n.tagToQueryMap.set(T,v)}const g=ww(n.pendingWriteTree_,s);let _=E5(u,e,t,g,o,d);if(!p&&!l&&!r){const v=dk(u,e);_=_.concat(O5(n,e,v))}return _}function Cw(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const d=Un(l,e),p=Fl(u,d);if(p)return p});return sk(s,e,o,t,!0)}function Ad(n,e){return pk(e,n.syncPointTree_,null,ww(n.pendingWriteTree_,at()))}function pk(n,e,t,r){if(Ge(n.path))return mk(n,e,t,r);{const s=e.get(at());t==null&&s!=null&&(t=Fl(s,at()));let o=[];const l=He(n.path),u=n.operationForChild(l),d=e.children.get(l);if(d&&u){const p=t?t.getImmediateChild(l):null,g=ik(r,l);o=o.concat(pk(u,d,p,g))}return s&&(o=o.concat(Iw(s,n,r,t))),o}}function mk(n,e,t,r){const s=e.get(at());t==null&&s!=null&&(t=Fl(s,at()));let o=[];return e.children.inorderTraversal((l,u)=>{const d=t?t.getImmediateChild(l):null,p=ik(r,l),g=n.operationForChild(l);g&&(o=o.concat(mk(g,u,d,p)))}),s&&(o=o.concat(Iw(s,n,r,t))),o}function gk(n,e){const t=e.query,r=fp(n,t);return{hashFn:()=>(h5(e)||Me.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?R5(n,t._path,r):b5(n,t._path);{const o=R3(s,t);return R_(n,t,null,o)}}}}function fp(n,e){const t=dm(e);return n.queryToTagMap.get(t)}function dm(n){return n._path.toString()+"$"+n._queryIdentifier}function Sw(n,e){return n.tagToQueryMap.get(e)}function bw(n){const e=n.indexOf("$");return le(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new dt(n.substr(0,e))}}function Rw(n,e,t){const r=n.syncPointTree_.get(e);le(r,"Missing sync point for query tag that we're tracking");const s=ww(n.pendingWriteTree_,e);return Iw(r,t,s,null)}function N5(n){return n.fold((e,t,r)=>{if(t&&vo(t))return[cm(t)];{let s=[];return t&&(s=uk(t)),Tn(r,(o,l)=>{s=s.concat(l)}),s}})}function Bu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(I5())(n._repo,n._path):n}function P5(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=dm(r),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function D5(){return C5++}function O5(n,e,t){const r=e._path,s=fp(n,e),o=gk(n,t),l=n.listenProvider_.startListening(Bu(e),s,o.hashFn,o.onComplete),u=n.syncPointTree_.subtree(r);if(s)le(!vo(u.value),"If we're adding a query, it shouldn't be shadowed");else{const d=u.fold((p,g,_)=>{if(!Ge(p)&&g&&vo(g))return[cm(g).query];{let v=[];return g&&(v=v.concat(uk(g).map(T=>T.query))),Tn(_,(T,A)=>{v=v.concat(A)}),v}});for(let p=0;p<d.length;++p){const g=d[p];n.listenProvider_.stopListening(Bu(g),fp(n,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Aw(t)}node(){return this.node_}}class kw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Mt(this.path_,e);return new kw(this.syncTree_,t)}node(){return Cw(this.syncTree_,this.path_)}}const M5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},cC=function(n,e,t){if(!n||typeof n!="object")return n;if(le(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return L5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return j5(n[".sv"],e);le(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},L5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:le(!1,"Unexpected server value: "+n)}},j5=function(n,e,t){n.hasOwnProperty("increment")||le(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&le(!1,"Unexpected increment value: "+r);const s=e.node();if(le(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},V5=function(n,e,t,r){return Nw(e,new kw(t,n),r)},yk=function(n,e,t){return Nw(n,new Aw(e),t)};function Nw(n,e,t){const r=n.getPriority().val(),s=cC(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=cC(l.getValue(),e,t);return u!==l.getValue()||s!==l.getPriority().val()?new Jt(u,Ut(s)):n}else{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Jt(s))),l.forEachChild(St,(u,d)=>{const p=Nw(d,e.getImmediateChild(u),t);p!==d&&(o=o.updateImmediateChild(u,p))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Dw(n,e){let t=e instanceof dt?e:new dt(e),r=n,s=He(t);for(;s!==null;){const o=$l(r.node.children,s)||{children:{},childCount:0};r=new Pw(s,r,o),t=ft(t),s=He(t)}return r}function gc(n){return n.node.value}function _k(n,e){n.node.value=e,A_(n)}function vk(n){return n.node.childCount>0}function F5(n){return gc(n)===void 0&&!vk(n)}function hm(n,e){Tn(n.node.children,(t,r)=>{e(new Pw(t,n,r))})}function wk(n,e,t,r){t&&e(n),hm(n,s=>{wk(s,e,!0)})}function U5(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function kd(n){return new dt(n.parent===null?n.name:kd(n.parent)+"/"+n.name)}function A_(n){n.parent!==null&&z5(n.parent,n.name,n)}function z5(n,e,t){const r=F5(t),s=Cs(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,A_(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,A_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=/[\[\].#$\/\u0000-\u001F\u007F]/,$5=/[\[\].#$\u0000-\u001F\u007F]/,by=10*1024*1024,Ow=function(n){return typeof n=="string"&&n.length!==0&&!B5.test(n)},Ek=function(n){return typeof n=="string"&&n.length!==0&&!$5.test(n)},W5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ek(n)},xk=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!om(n)||n&&typeof n=="object"&&Cs(n,".sv")},k_=function(n,e,t,r){fm(Wl(n,"value"),e,t)},fm=function(n,e,t){const r=t instanceof dt?new l6(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ra(r));if(typeof e=="function")throw new Error(n+"contains a function "+ra(r)+" with contents = "+e.toString());if(om(e))throw new Error(n+"contains "+e.toString()+" "+ra(r));if(typeof e=="string"&&e.length>by/3&&Np(e)>by)throw new Error(n+"contains a string greater than "+by+" utf8 bytes "+ra(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(Tn(e,(l,u)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!Ow(l)))throw new Error(n+" contains an invalid key ("+l+") "+ra(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);c6(r,l),fm(n,u,r),u6(r)}),s&&o)throw new Error(n+' contains ".value" child '+ra(r)+" in addition to actual children.")}},H5=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=nd(r);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!Ow(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(a6);let s=null;for(t=0;t<e.length;t++){if(r=e[t],s!==null&&vr(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},q5=function(n,e,t,r){const s=Wl(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const o=[];Tn(e,(l,u)=>{const d=new dt(l);if(fm(s,u,Mt(t,d)),hw(d)===".priority"&&!xk(u))throw new Error(s+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),H5(s,o)},G5=function(n,e,t){if(om(e))throw new Error(Wl(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xk(e))throw new Error(Wl(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Tk=function(n,e,t,r){if(!Ek(t))throw new Error(Wl(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},K5=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tk(n,e,t)},bu=function(n,e){if(He(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Q5=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ow(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!W5(t))throw new Error(Wl(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mw(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!fw(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Ik(n,e,t){Mw(n,t),Ck(n,r=>fw(r,e))}function li(n,e,t){Mw(n,t),Ck(n,r=>vr(r,e)||vr(e,r))}function Ck(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(X5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function X5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Vu&&an("event: "+t.toString()),pc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="repo_interrupt",Z5=25;class e9{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Y5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=op(),this.transactionQueueTree_=new Pw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function t9(n,e,t){if(n.stats_=uw(n.repoInfo_),n.forceRestClient_||P3())n.server_=new ip(n.repoInfo_,(r,s,o,l)=>{uC(n,r,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dC(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ei(n.repoInfo_,e,(r,s,o,l)=>{uC(n,r,s,o,l)},r=>{dC(n,r)},r=>{r9(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=j3(n.repoInfo_,()=>new L6(n.stats_,n.server_)),n.infoData_=new N6,n.infoSyncTree_=new aC({startListening:(r,s,o,l)=>{let u=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(u=um(n.infoSyncTree_,r._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),jw(n,"connected",!1),n.serverSyncTree_=new aC({startListening:(r,s,o,l)=>(n.server_.listen(r,o,s,(u,d)=>{const p=l(u,d);li(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function n9(n){const t=n.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Lw(n){return M5({timestamp:n9(n)})}function uC(n,e,t,r,s){n.dataUpdateCount++;const o=new dt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const d=Of(t,p=>Ut(p));l=k5(n.serverSyncTree_,o,d,s)}else{const d=Ut(t);l=A5(n.serverSyncTree_,o,d,s)}else if(r){const d=Of(t,p=>Ut(p));l=S5(n.serverSyncTree_,o,d)}else{const d=Ut(t);l=um(n.serverSyncTree_,o,d)}let u=o;l.length>0&&(u=pm(n,o)),li(n.eventQueue_,u,l)}function dC(n,e){jw(n,"connected",e),e===!1&&i9(n)}function r9(n,e){Tn(e,(t,r)=>{jw(n,t,r)})}function jw(n,e,t){const r=new dt("/.info/"+e),s=Ut(t);n.infoData_.updateSnapshot(r,s);const o=um(n.infoSyncTree_,r,s);li(n.eventQueue_,r,o)}function Sk(n){return n.nextWriteId_++}function s9(n,e,t,r,s){Vw(n,"set",{path:e.toString(),value:t,priority:r});const o=Lw(n),l=Ut(t,r),u=Cw(n.serverSyncTree_,e),d=yk(l,u,o),p=Sk(n),g=fk(n.serverSyncTree_,e,d,p,!0);Mw(n.eventQueue_,g),n.server_.put(e.toString(),l.val(!0),(v,T)=>{const A=v==="ok";A||$n("set at "+e+" failed: "+v);const S=aa(n.serverSyncTree_,p,!A);li(n.eventQueue_,e,S),tc(n,s,v,T)});const _=Nk(n,e);pm(n,_),li(n.eventQueue_,_,[])}function i9(n){Vw(n,"onDisconnectEvents");const e=Lw(n),t=op();x_(n.onDisconnect_,at(),(s,o)=>{const l=V5(s,o,n.serverSyncTree_,e);mc(t,s,l)});let r=[];x_(t,at(),(s,o)=>{r=r.concat(um(n.serverSyncTree_,s,o));const l=Nk(n,s);pm(n,l)}),n.onDisconnect_=op(),li(n.eventQueue_,at(),r)}function o9(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&E_(n.onDisconnect_,e),tc(n,t,r,s)})}function hC(n,e,t,r){const s=Ut(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{o==="ok"&&mc(n.onDisconnect_,e,s),tc(n,r,o,l)})}function a9(n,e,t,r,s){const o=Ut(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,u)=>{l==="ok"&&mc(n.onDisconnect_,e,o),tc(n,s,l,u)})}function l9(n,e,t,r){if(Df(t)){an("onDisconnect().update() called with empty data.  Don't do anything."),tc(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(s,o)=>{s==="ok"&&Tn(t,(l,u)=>{const d=Ut(u);mc(n.onDisconnect_,Mt(e,l),d)}),tc(n,r,s,o)})}function c9(n,e,t){let r;He(e._path)===".info"?r=lC(n.infoSyncTree_,e,t):r=lC(n.serverSyncTree_,e,t),Ik(n.eventQueue_,e._path,r)}function u9(n,e,t){let r;He(e._path)===".info"?r=R_(n.infoSyncTree_,e,t):r=R_(n.serverSyncTree_,e,t),Ik(n.eventQueue_,e._path,r)}function d9(n){n.persistentConnection_&&n.persistentConnection_.interrupt(J5)}function Vw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),an(t,...e)}function tc(n,e,t,r){e&&pc(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let o=s;r&&(o+=": "+r);const l=new Error(o);l.code=s,e(l)}})}function bk(n,e,t){return Cw(n.serverSyncTree_,e,t)||Me.EMPTY_NODE}function Fw(n,e=n.transactionQueueTree_){if(e||mm(n,e),gc(e)){const t=Ak(n,e);le(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&h9(n,kd(e),t)}else vk(e)&&hm(e,t=>{Fw(n,t)})}function h9(n,e,t){const r=t.map(p=>p.currentWriteId),s=bk(n,e,r);let o=s;const l=s.hash();for(let p=0;p<t.length;p++){const g=t[p];le(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=Un(e,g.path);o=o.updateChild(_,g.currentOutputSnapshotRaw)}const u=o.val(!0),d=e;n.server_.put(d.toString(),u,p=>{Vw(n,"transaction put response",{path:d.toString(),status:p});let g=[];if(p==="ok"){const _=[];for(let v=0;v<t.length;v++)t[v].status=2,g=g.concat(aa(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&_.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();mm(n,Dw(n.transactionQueueTree_,e)),Fw(n,n.transactionQueueTree_),li(n.eventQueue_,e,g);for(let v=0;v<_.length;v++)pc(_[v])}else{if(p==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{$n("transaction at "+d.toString()+" failed: "+p);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=p}pm(n,e)}},l)}function pm(n,e){const t=Rk(n,e),r=kd(t),s=Ak(n,t);return f9(n,s,r),r}function f9(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const d=e[u],p=Un(t,d.path);let g=!1,_;if(le(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)g=!0,_=d.abortReason,s=s.concat(aa(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=Z5)g=!0,_="maxretry",s=s.concat(aa(n.serverSyncTree_,d.currentWriteId,!0));else{const v=bk(n,d.path,l);d.currentInputSnapshot=v;const T=e[u].update(v.val());if(T!==void 0){fm("transaction failed: Data returned ",T,d.path);let A=Ut(T);typeof T=="object"&&T!=null&&Cs(T,".priority")||(A=A.updatePriority(v.getPriority()));const b=d.currentWriteId,j=Lw(n),U=yk(A,v,j);d.currentOutputSnapshotRaw=A,d.currentOutputSnapshotResolved=U,d.currentWriteId=Sk(n),l.splice(l.indexOf(b),1),s=s.concat(fk(n.serverSyncTree_,d.path,U,d.currentWriteId,d.applyLocally)),s=s.concat(aa(n.serverSyncTree_,b,!0))}else g=!0,_="nodata",s=s.concat(aa(n.serverSyncTree_,d.currentWriteId,!0))}li(n.eventQueue_,t,s),s=[],g&&(e[u].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[u].unwatcher),e[u].onComplete&&(_==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(_),!1,null))))}mm(n,n.transactionQueueTree_);for(let u=0;u<r.length;u++)pc(r[u]);Fw(n,n.transactionQueueTree_)}function Rk(n,e){let t,r=n.transactionQueueTree_;for(t=He(e);t!==null&&gc(r)===void 0;)r=Dw(r,t),e=ft(e),t=He(e);return r}function Ak(n,e){const t=[];return kk(n,e,t),t.sort((r,s)=>r.order-s.order),t}function kk(n,e,t){const r=gc(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);hm(e,s=>{kk(n,s,t)})}function mm(n,e){const t=gc(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,_k(e,t.length>0?t:void 0)}hm(e,r=>{mm(n,r)})}function Nk(n,e){const t=kd(Rk(n,e)),r=Dw(n.transactionQueueTree_,e);return U5(r,s=>{Ry(n,s)}),Ry(n,r),wk(r,s=>{Ry(n,s)}),t}function Ry(n,e){const t=gc(e);if(t){const r=[];let s=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(le(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(le(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(aa(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?_k(e,void 0):t.length=o+1,li(n.eventQueue_,kd(e),s);for(let l=0;l<r.length;l++)pc(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function m9(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${n}'`)}return e}const fC=function(n,e){const t=g9(n),r=t.namespace;t.domain==="firebase.com"&&ai(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ai("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||T3();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new jA(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new dt(t.pathString)}},g9=function(n){let e="",t="",r="",s="",o="",l=!0,u="https",d=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(u=n.substring(0,p-1),n=n.substring(p+2));let g=n.indexOf("/");g===-1&&(g=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(g,_)),g<_&&(s=p9(n.substring(g,_)));const v=m9(n.substring(Math.min(n.length,_)));p=e.indexOf(":"),p>=0?(l=u==="https"||u==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")t="localhost";else if(T.split(".").length<=2)t=T;else{const A=e.indexOf(".");r=e.substring(0,A).toLowerCase(),t=e.substring(A+1),o=r}"ns"in v&&(o=v.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:l,scheme:u,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+tn(this.snapshot.exportVal())}}class _9{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return le(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Qs;return o9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){bu("OnDisconnect.remove",this._path);const e=new Qs;return hC(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){bu("OnDisconnect.set",this._path),k_("OnDisconnect.set",e,this._path);const t=new Qs;return hC(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){bu("OnDisconnect.setWithPriority",this._path),k_("OnDisconnect.setWithPriority",e,this._path),G5("OnDisconnect.setWithPriority",t);const r=new Qs;return a9(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){bu("OnDisconnect.update",this._path),q5("OnDisconnect.update",e,this._path);const t=new Qs;return l9(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Ge(this._path)?null:hw(this._path)}get ref(){return new Ro(this._repo,this._path)}get _queryIdentifier(){const e=YI(this._queryParams),t=lw(e);return t==="{}"?"default":t}get _queryObject(){return YI(this._queryParams)}isEqual(e){if(e=lt(e),!(e instanceof Uw))return!1;const t=this._repo===e._repo,r=fw(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+o6(this._path)}}class Ro extends Uw{constructor(e,t){super(e,t,new yw,!1)}get parent(){const e=qA(this._path);return e===null?null:new Ro(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class pp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new dt(e),r=P_(this.ref,e);return new pp(this._node.getChild(t),r,St)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new pp(s,P_(this.ref,r),St)))}hasChild(e){const t=new dt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function N_(n,e){return n=lt(n),n._checkNotDeleted("ref"),e!==void 0?P_(n._root,e):n._root}function P_(n,e){return n=lt(n),He(n._path)===null?K5("child","path",e):Tk("child","path",e),new Ro(n._repo,Mt(n._path,e))}function E9(n){return n=lt(n),new w9(n._repo,n._path)}function x9(n,e){n=lt(n),bu("set",n._path),k_("set",e,n._path);const t=new Qs;return s9(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class zw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new y9("value",this,new pp(e.snapshotNode,new Ro(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _9(this,e,t):null}matches(e){return e instanceof zw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function T9(n,e,t,r,s){const o=new v9(t,void 0),l=new zw(o);return c9(n._repo,n,l),()=>u9(n._repo,n,l)}function Pk(n,e,t,r){return T9(n,"value",e)}y5(Ro);T5(Ro);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="FIREBASE_DATABASE_EMULATOR_HOST",D_={};let C9=!1;function S9(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),l=Is(o);n.repoInfo_=new jA(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function b9(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||ai("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=fC(o,s),u=l.repoInfo,d;typeof process<"u"&&PI&&(d=PI[I9]),d?(o=`http://${d}?ns=${u.namespace}`,l=fC(o,s),u=l.repoInfo):l.repoInfo.secure;const p=new O3(n.name,n.options,e);Q5("Invalid Firebase Database URL",l),Ge(l.path)||ai("Database URL must point to the root of a Firebase Database (not including a child path).");const g=A9(u,n,p,new D3(n,t));return new k9(g,n)}function R9(n,e){const t=D_[e];(!t||t[n.key]!==n)&&ai(`Database ${e}(${n.repoInfo_}) has already been deleted.`),d9(n),delete t[n.key]}function A9(n,e,t,r){let s=D_[e.name];s||(s={},D_[e.name]=s);let o=s[n.toURLString()];return o&&ai("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new e9(n,C9,t,r),s[n.toURLString()]=o,o}class k9{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(t9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ro(this._repo,at())),this._rootInternal}_delete(){return this._rootInternal!==null&&(R9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ai("Cannot call "+e+" on a deleted database.")}}function N9(n=pd(),e){const t=di(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=K_("database");r&&P9(t,...r)}return t}function P9(n,e,t,r={}){n=lt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ti(r,o.repoInfo_.emulatorOptions))return;ai("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ai('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Sf(Sf.OWNER);else if(r.mockUserToken){const u=typeof r.mockUserToken=="string"?r.mockUserToken:Q_(r.mockUserToken,n.app.options.projectId);l=new Sf(u)}Is(e)&&(Ap(e),kp("Database",!0)),S9(o,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(n){y3(xo),Er(new ir("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return b9(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),En(DI,OI,n),En(DI,OI,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9={".sv":"timestamp"};function pC(){return O9}ei.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ei.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};D9();const M9={apiKey:"AIzaSyD3LkYqJE5Y_TR6A6UnajL304eyL4zO2lM",authDomain:"darklight-chat.firebaseapp.com",databaseURL:"https://darklight-chat-default-rtdb.europe-west1.firebasedatabase.app",projectId:"darklight-chat",storageBucket:"darklight-chat.firebasestorage.app",messagingSenderId:"425772939802",appId:"1:425772939802:web:5ba327426570f1b0d82fa3",measurementId:"G-HZ8Y56X7GV"},Nd=IS(M9);NM(Nd);const mp=K4(Nd),hn=GF(Nd),Bw=f3(Nd),O_=N9(Nd),Dk=async(n,e)=>{if(!n)return;const t=fi(hn,"users",n.uid);try{if(!(await Cd(t)).exists()){const{displayName:s,username:o}=e,l=new Date;await Yv(t,{displayName:s,username:o.toLowerCase(),email:n.email,createdAt:l,avatar:"https://firebasestorage.googleapis.com/v0/b/darklight-chat.appspot.com/o/profile-pictures%2Fdefault_avatar.png?alt=media&token=0default-avatar-token",bio:`مرحباً! أنا ${s} في Dark*Chat`,postsCount:0,followersCount:0,followingCount:0,isGuest:e.isGuest||!1,...e})}return t}catch(r){throw console.error("Error in createUserDocument:",r),r}},L9=async(n,e,t)=>{const r=`${n.toLowerCase()}@darkchat.app`,{user:s}=await PL(gm,r,t);return await Dk(s,{username:n,displayName:e}),s},j9=async(n,e)=>{const t=`${n.toLowerCase()}@darkchat.app`,{user:r}=await DL(gm,t,e);return r},V9=async()=>{const{user:n}=await RL(gm),t=`Anonymous${Math.floor(Math.random()*9e5)+1e5}`;return await Dk(n,{username:t.toLowerCase(),displayName:t,isGuest:!0}),n},mC=()=>jL(gm),F9=n=>LL(mp,n),gm=mp,bf=async n=>{if(!n)return null;const e=fi(hn,"users",n),t=await Cd(e);return t.exists()?{uid:n,...t.data()}:null},U9=async n=>{try{const e=await Cd(fi(hn,"users",n));return e.exists()?{id:e.id,...e.data()}:null}catch{throw new Error("فشل في تحميل الملف الشخصي")}},z9=async(n,e)=>{try{const t=fi(hn,"users",n);await im(t,e)}catch(t){throw console.error("Error updating user profile: ",t),new Error("فشل في تحديث الملف الشخصي")}},B9=async n=>{try{return(await Xv(xs(hn,"posts"),{...n,timestamp:ao(),createdAt:new Date().toISOString()})).id}catch{throw new Error("فشل في إنشاء المنشور")}},gC=async(n,e)=>{try{await im(fi(hn,"posts",n),e)}catch{throw new Error("فشل في تحديث المنشور")}},$9=async(n,e)=>{try{const t=fi(xs(hn,"stories"),n),r=await Cd(t),s={...e,id:Date.now().toString(),timestamp:ao(),viewedBy:[]};if(r.exists()){const o=r.data().stories||[];await im(t,{stories:[...o,s],updatedAt:ao()})}else await Yv(t,{userId:n,stories:[s],updatedAt:ao()});return s.id}catch(t){throw console.error("Error creating story: ",t),new Error("فشل في إنشاء الستوري")}},M_=async()=>{try{const n=new Date(Date.now()-864e5),e=Xl(xs(hn,"stories"),Lu("updatedAt",">=",n),sm("updatedAt","desc"));return(await Qv(e)).docs.map(s=>{const o=s.data(),l=o.stories.filter(u=>u.timestamp.toDate()>n);return{userId:s.id,...o,stories:l}}).filter(s=>s.stories.length>0)}catch(n){throw console.error("Error getting stories: ",n),new Error("فشل في تحميل الستوريز")}},W9=async(n,e)=>{const t=[n,e].sort(),r=t.join("_"),s=fi(hn,"chats",r);return(await Cd(s)).exists()||await Yv(s,{participants:t,createdAt:ao(),lastMessage:null}),r},yC=async(n,e)=>{try{const t=xs(hn,"chats",n,"messages"),r=await Xv(t,{...e,timestamp:ao()});return await im(fi(hn,"chats",n),{lastMessage:{text:e.content,senderId:e.senderId,timestamp:ao()}}),r.id}catch(t){throw console.error("Error sending message: ",t),new Error("فشل في إرسال الرسالة")}},H9=(n,e)=>{const t=Xl(xs(hn,"chats"),Lu("participants","array-contains",n));return Jv(t,async r=>{const s=r.docs.map(async l=>{const u=l.data(),d=u.participants.find(p=>p!==n);if(d){const p=await U9(d),g=xs(hn,"chats",l.id,"messages"),_=Xl(g,Lu("senderId","!=",n),Lu("isRead","==",!1)),T=(await Qv(_)).size;return{id:l.id,...u,otherUser:p,unreadCount:T}}return null}),o=(await Promise.all(s)).filter(l=>l!==null).sort((l,u)=>{const d=l.lastMessage?.timestamp?.toDate()||l.createdAt?.toDate()||0;return(u.lastMessage?.timestamp?.toDate()||u.createdAt?.toDate()||0)-d});e(o)})},q9=async n=>{try{return(await Xv(xs(hn,"comments"),{...n,timestamp:ao(),createdAt:new Date().toISOString()})).id}catch{throw new Error("فشل في إضافة التعليق")}},_C=async n=>{try{const e=Xl(xs(hn,"comments"),Lu("postId","==",n),sm("timestamp","asc"));return(await Qv(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{throw new Error("فشل في تحميل التعليقات")}},G9=(n,e)=>{const t=xs(hn,"chats",n,"messages"),r=Xl(t,sm("timestamp","asc"));return Jv(r,s=>{const o=s.docs.map(l=>{const u=l.data();return{id:l.id,...u,timestamp:u.timestamp?.toDate?u.timestamp.toDate().getTime():Date.now()}});e(o)})},vC=n=>{const e=Xl(xs(hn,"posts"),sm("timestamp","desc"),rU(50));return Jv(e,t=>{const r=t.docs.map(s=>({id:s.id,...s.data()}));n(r)})},K9=async(n,e)=>{try{const t=aw(Bw,`profile-pictures/${n}/${e.name}`),r=await iw(t,e);return await ow(r.ref)}catch(t){throw console.error("Error uploading avatar: ",t),new Error("فشل في رفع الصورة الرمزية")}},Q9=async(n,e)=>{try{const t=aw(Bw,`post-images/${n}/${Date.now()}_${e.name}`),r=await iw(t,e);return await ow(r.ref)}catch(t){throw console.error("Error uploading post image: ",t),new Error("فشل في رفع صورة المنشور")}},Y9=async(n,e)=>{try{const t=aw(Bw,`story-images/${e}/${Date.now()}_${n.name}`),r=await iw(t,n);return await ow(r.ref)}catch(t){throw console.error("Error uploading story image:",t),new Error("Failed to upload story image.")}},X9=n=>{const e=N_(O_,"/status/"+n),t={state:"offline",last_changed:pC()},r={state:"online",last_changed:pC()};Pk(N_(O_,".info/connected"),s=>{s.val()!==!1&&E9(e).set(t).then(()=>{x9(e,r)})})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Z9=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),wC=n=>{const e=Z9(n);return e.charAt(0).toUpperCase()+e.slice(1)},Ok=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ez={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>I.createElement("svg",{ref:d,...ez,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Ok("lucide",s),...u},[...l.map(([p,g])=>I.createElement(p,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(n,e)=>{const t=I.forwardRef(({className:r,...s},o)=>I.createElement(tz,{ref:o,iconNode:e,className:Ok(`lucide-${J9(wC(n))}`,`lucide-${n}`,r),...s}));return t.displayName=wC(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],EC=tt("arrow-left",nz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],L_=tt("arrow-right",rz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Mk=tt("camera",sz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oz=tt("check",iz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lz=tt("chevron-left",az);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uz=tt("chevron-right",cz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hz=tt("clock",dz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],pz=tt("code",fz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],gz=tt("ellipsis-vertical",mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],$w=tt("ellipsis",yz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vz=tt("file-text",_z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],Ez=tt("ghost",wz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],nc=tt("heart",xz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Lk=tt("image",Tz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Cz=tt("loader-circle",Iz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],bz=tt("log-in",Sz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ld=tt("message-circle",Rz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],kz=tt("phone",Az);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gp=tt("plus",Nz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],Dz=tt("reply",Pz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],yp=tt("search",Oz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ea=tt("send",Mz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jz=tt("settings",Lz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],Ww=tt("share",Vz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xC=tt("shield",Fz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],jk=tt("smile",Uz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Vk=tt("square-pen",zz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],TC=tt("trending-up",Bz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Wz=tt("type",$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Hw=tt("user-plus",Hz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gz=tt("user",qz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Fk=tt("users",Kz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Yz=tt("video",Qz);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Aa=tt("x",Xz);function IC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ym(...n){return e=>{let t=!1;const r=n.map(s=>{const o=IC(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():IC(n[s],null)}}}}function Et(...n){return I.useCallback(ym(...n),n)}function rc(n){const e=Jz(n),t=I.forwardRef((r,s)=>{const{children:o,...l}=r,u=I.Children.toArray(o),d=u.find(eB);if(d){const p=d.props.children,g=u.map(_=>_===d?I.Children.count(p)>1?I.Children.only(null):I.isValidElement(p)?p.props.children:null:_);return m.jsx(e,{...l,ref:s,children:I.isValidElement(p)?I.cloneElement(p,void 0,g):null})}return m.jsx(e,{...l,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var Uk=rc("Slot");function Jz(n){const e=I.forwardRef((t,r)=>{const{children:s,...o}=t;if(I.isValidElement(s)){const l=nB(s),u=tB(o,s.props);return s.type!==I.Fragment&&(u.ref=r?ym(r,l):l),I.cloneElement(s,u)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Zz=Symbol("radix.slottable");function eB(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Zz}function tB(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{const d=o(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function nB(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function zk(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=zk(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Bk(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=zk(n))&&(r&&(r+=" "),r+=e);return r}const CC=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,SC=Bk,$k=(n,e)=>t=>{var r;if(e?.variants==null)return SC(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,l=Object.keys(s).map(p=>{const g=t?.[p],_=o?.[p];if(g===null)return null;const v=CC(g)||CC(_);return s[p][v]}),u=t&&Object.entries(t).reduce((p,g)=>{let[_,v]=g;return v===void 0||(p[_]=v),p},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:_,className:v,...T}=g;return Object.entries(T).every(A=>{let[S,b]=A;return Array.isArray(b)?b.includes({...o,...u}[S]):{...o,...u}[S]===b})?[...p,_,v]:p},[]);return SC(n,l,d,t?.class,t?.className)},qw="-",rB=n=>{const e=iB(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const u=l.split(qw);return u[0]===""&&u.length!==1&&u.shift(),Wk(u,e)||sB(l)},getConflictingClassGroupIds:(l,u)=>{const d=t[l]||[];return u&&r[l]?[...d,...r[l]]:d}}},Wk=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?Wk(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(qw);return e.validators.find(({validator:l})=>l(o))?.classGroupId},bC=/^\[(.+)\]$/,sB=n=>{if(bC.test(n)){const e=bC.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},iB=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)j_(t[s],r,s,e);return r},j_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:RC(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(oB(s)){j_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,l])=>{j_(l,RC(e,o),t,r)})})},RC=(n,e)=>{let t=n;return e.split(qw).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},oB=n=>n.isThemeGetter,aB=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set(o,l){t.has(o)?t.set(o,l):s(o,l)}}},V_="!",F_=":",lB=F_.length,cB=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let l=0,u=0,d=0,p;for(let A=0;A<s.length;A++){let S=s[A];if(l===0&&u===0){if(S===F_){o.push(s.slice(d,A)),d=A+lB;continue}if(S==="/"){p=A;continue}}S==="["?l++:S==="]"?l--:S==="("?u++:S===")"&&u--}const g=o.length===0?s:s.substring(d),_=uB(g),v=_!==g,T=p&&p>d?p-d:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:_,maybePostfixModifierPosition:T}};if(e){const s=e+F_,o=r;r=l=>l.startsWith(s)?o(l.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},uB=n=>n.endsWith(V_)?n.substring(0,n.length-1):n.startsWith(V_)?n.substring(1):n,dB=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(l=>{l[0]==="["||e[l]?(s.push(...o.sort(),l),o=[]):o.push(l)}),s.push(...o.sort()),s}},hB=n=>({cache:aB(n.cacheSize),parseClassName:cB(n),sortModifiers:dB(n),...rB(n)}),fB=/\s+/,pB=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,l=[],u=n.trim().split(fB);let d="";for(let p=u.length-1;p>=0;p-=1){const g=u[p],{isExternal:_,modifiers:v,hasImportantModifier:T,baseClassName:A,maybePostfixModifierPosition:S}=t(g);if(_){d=g+(d.length>0?" "+d:d);continue}let b=!!S,j=r(b?A.substring(0,S):A);if(!j){if(!b){d=g+(d.length>0?" "+d:d);continue}if(j=r(A),!j){d=g+(d.length>0?" "+d:d);continue}b=!1}const U=o(v).join(":"),B=T?U+V_:U,G=B+j;if(l.includes(G))continue;l.push(G);const X=s(j,b);for(let ne=0;ne<X.length;++ne){const P=X[ne];l.push(B+P)}d=g+(d.length>0?" "+d:d)}return d};function mB(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Hk(e))&&(r&&(r+=" "),r+=t);return r}const Hk=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Hk(n[r]))&&(t&&(t+=" "),t+=e);return t};function gB(n,...e){let t,r,s,o=l;function l(d){const p=e.reduce((g,_)=>_(g),n());return t=hB(p),r=t.cache.get,s=t.cache.set,o=u,u(d)}function u(d){const p=r(d);if(p)return p;const g=pB(d,t);return s(d,g),g}return function(){return o(mB.apply(null,arguments))}}const qt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},qk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Gk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yB=/^\d+\/\d+$/,_B=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,EB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tl=n=>yB.test(n),We=n=>!!n&&!Number.isNaN(Number(n)),Gi=n=>!!n&&Number.isInteger(Number(n)),Ay=n=>n.endsWith("%")&&We(n.slice(0,-1)),qs=n=>_B.test(n),TB=()=>!0,IB=n=>vB.test(n)&&!wB.test(n),Kk=()=>!1,CB=n=>EB.test(n),SB=n=>xB.test(n),bB=n=>!we(n)&&!Ee(n),RB=n=>yc(n,Xk,Kk),we=n=>qk.test(n),ta=n=>yc(n,Jk,IB),ky=n=>yc(n,DB,We),AC=n=>yc(n,Qk,Kk),AB=n=>yc(n,Yk,SB),lf=n=>yc(n,Zk,CB),Ee=n=>Gk.test(n),wu=n=>_c(n,Jk),kB=n=>_c(n,OB),kC=n=>_c(n,Qk),NB=n=>_c(n,Xk),PB=n=>_c(n,Yk),cf=n=>_c(n,Zk,!0),yc=(n,e,t)=>{const r=qk.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},_c=(n,e,t=!1)=>{const r=Gk.exec(n);return r?r[1]?e(r[1]):t:!1},Qk=n=>n==="position"||n==="percentage",Yk=n=>n==="image"||n==="url",Xk=n=>n==="length"||n==="size"||n==="bg-size",Jk=n=>n==="length",DB=n=>n==="number",OB=n=>n==="family-name",Zk=n=>n==="shadow",MB=()=>{const n=qt("color"),e=qt("font"),t=qt("text"),r=qt("font-weight"),s=qt("tracking"),o=qt("leading"),l=qt("breakpoint"),u=qt("container"),d=qt("spacing"),p=qt("radius"),g=qt("shadow"),_=qt("inset-shadow"),v=qt("text-shadow"),T=qt("drop-shadow"),A=qt("blur"),S=qt("perspective"),b=qt("aspect"),j=qt("ease"),U=qt("animate"),B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],X=()=>[...G(),Ee,we],ne=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],R=()=>[Ee,we,d],N=()=>[Tl,"full","auto",...R()],L=()=>[Gi,"none","subgrid",Ee,we],O=()=>["auto",{span:["full",Gi,Ee,we]},Gi,Ee,we],F=()=>[Gi,"auto",Ee,we],D=()=>["auto","min","max","fr",Ee,we],Ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],je=()=>["start","end","center","stretch","center-safe","end-safe"],Ce=()=>["auto",...R()],Se=()=>[Tl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],W=()=>[n,Ee,we],J=()=>[...G(),kC,AC,{position:[Ee,we]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",NB,RB,{size:[Ee,we]}],Z=()=>[Ay,wu,ta],ge=()=>["","none","full",p,Ee,we],_e=()=>["",We,wu,ta],Ne=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[We,Ay,kC,AC],Ue=()=>["","none",A,Ee,we],Ye=()=>["none",We,Ee,we],xt=()=>["none",We,Ee,we],kn=()=>[We,Ee,we],Nn=()=>[Tl,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qs],breakpoint:[qs],color:[TB],container:[qs],"drop-shadow":[qs],ease:["in","out","in-out"],font:[bB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qs],shadow:[qs],spacing:["px",We],text:[qs],"text-shadow":[qs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Tl,we,Ee,b]}],container:["container"],columns:[{columns:[We,we,Ee,u]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:X()}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Gi,"auto",Ee,we]}],basis:[{basis:[Tl,"full","auto",u,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,Tl,"auto","initial","none",we]}],grow:[{grow:["",We,Ee,we]}],shrink:[{shrink:["",We,Ee,we]}],order:[{order:[Gi,"first","last","none",Ee,we]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Ie(),"normal"]}],"justify-items":[{"justify-items":[...je(),"normal"]}],"justify-self":[{"justify-self":["auto",...je()]}],"align-content":[{content:["normal",...Ie()]}],"align-items":[{items:[...je(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...je(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ie()}],"place-items":[{"place-items":[...je(),"baseline"]}],"place-self":[{"place-self":["auto",...je()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:Ce()}],mx:[{mx:Ce()}],my:[{my:Ce()}],ms:[{ms:Ce()}],me:[{me:Ce()}],mt:[{mt:Ce()}],mr:[{mr:Ce()}],mb:[{mb:Ce()}],ml:[{ml:Ce()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:Se()}],w:[{w:[u,"screen",...Se()]}],"min-w":[{"min-w":[u,"screen","none",...Se()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Se()]}],h:[{h:["screen","lh",...Se()]}],"min-h":[{"min-h":["screen","lh","none",...Se()]}],"max-h":[{"max-h":["screen","lh",...Se()]}],"font-size":[{text:["base",t,wu,ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ee,ky]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ay,we]}],"font-family":[{font:[kB,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ee,we]}],"line-clamp":[{"line-clamp":[We,"none",Ee,ky]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",Ee,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ee,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",Ee,ta]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[We,"auto",Ee,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Gi,Ee,we],radial:["",Ee,we],conic:[Gi,Ee,we]},PB,AB]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:ge()}],"rounded-s":[{"rounded-s":ge()}],"rounded-e":[{"rounded-e":ge()}],"rounded-t":[{"rounded-t":ge()}],"rounded-r":[{"rounded-r":ge()}],"rounded-b":[{"rounded-b":ge()}],"rounded-l":[{"rounded-l":ge()}],"rounded-ss":[{"rounded-ss":ge()}],"rounded-se":[{"rounded-se":ge()}],"rounded-ee":[{"rounded-ee":ge()}],"rounded-es":[{"rounded-es":ge()}],"rounded-tl":[{"rounded-tl":ge()}],"rounded-tr":[{"rounded-tr":ge()}],"rounded-br":[{"rounded-br":ge()}],"rounded-bl":[{"rounded-bl":ge()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,Ee,we]}],"outline-w":[{outline:["",We,wu,ta]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",g,cf,lf]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",_,cf,lf]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[We,ta]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",v,cf,lf]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[We,Ee,we]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[Ee,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ee,we]}],filter:[{filter:["","none",Ee,we]}],blur:[{blur:Ue()}],brightness:[{brightness:[We,Ee,we]}],contrast:[{contrast:[We,Ee,we]}],"drop-shadow":[{"drop-shadow":["","none",T,cf,lf]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",We,Ee,we]}],"hue-rotate":[{"hue-rotate":[We,Ee,we]}],invert:[{invert:["",We,Ee,we]}],saturate:[{saturate:[We,Ee,we]}],sepia:[{sepia:["",We,Ee,we]}],"backdrop-filter":[{"backdrop-filter":["","none",Ee,we]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[We,Ee,we]}],"backdrop-contrast":[{"backdrop-contrast":[We,Ee,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,Ee,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,Ee,we]}],"backdrop-invert":[{"backdrop-invert":["",We,Ee,we]}],"backdrop-opacity":[{"backdrop-opacity":[We,Ee,we]}],"backdrop-saturate":[{"backdrop-saturate":[We,Ee,we]}],"backdrop-sepia":[{"backdrop-sepia":["",We,Ee,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ee,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",Ee,we]}],ease:[{ease:["linear","initial",j,Ee,we]}],delay:[{delay:[We,Ee,we]}],animate:[{animate:["none",U,Ee,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Ee,we]}],"perspective-origin":[{"perspective-origin":X()}],rotate:[{rotate:Ye()}],"rotate-x":[{"rotate-x":Ye()}],"rotate-y":[{"rotate-y":Ye()}],"rotate-z":[{"rotate-z":Ye()}],scale:[{scale:xt()}],"scale-x":[{"scale-x":xt()}],"scale-y":[{"scale-y":xt()}],"scale-z":[{"scale-z":xt()}],"scale-3d":["scale-3d"],skew:[{skew:kn()}],"skew-x":[{"skew-x":kn()}],"skew-y":[{"skew-y":kn()}],transform:[{transform:[Ee,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:X()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Nn()}],"translate-x":[{"translate-x":Nn()}],"translate-y":[{"translate-y":Nn()}],"translate-z":[{"translate-z":Nn()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee,we]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[We,wu,ta,ky]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LB=gB(MB);function Lt(...n){return LB(Bk(n))}const jB=$k("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ue({className:n,variant:e,size:t,asChild:r=!1,...s}){const o=r?Uk:"button";return m.jsx(o,{"data-slot":"button",className:Lt(jB({variant:e,size:t,className:n})),...s})}const VB=$k("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Gw({className:n,variant:e,asChild:t=!1,...r}){const s=t?Uk:"span";return m.jsx(s,{"data-slot":"badge",className:Lt(VB({variant:e}),n),...r})}function FB({currentView:n,onViewChange:e,unreadCount:t=0}){return m.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-gray-800",dir:"rtl",children:m.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h1",{className:"text-white font-bold text-lg",children:"Dark*Chat"}),m.jsx("span",{className:"text-green-400 text-sm",children:"•"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>e("feed"),className:`p-2 ${n==="feed"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[m.jsx(Fk,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline mr-2",children:"الرئيسية"})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>e("messages"),className:`p-2 relative ${n==="messages"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[m.jsx(ld,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline mr-2",children:"الرسائل"}),t>0&&m.jsx(Gw,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 text-xs p-0 flex items-center justify-center rounded-full bg-red-500 text-white",children:t>99?"99+":t})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>e("likes"),className:`p-2 ${n==="likes"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[m.jsx(nc,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline mr-2",children:"الإعجابات"})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>e("profile"),className:`p-2 ${n==="profile"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[m.jsx(Gz,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline mr-2",children:"الملف الشخصي"})]})]})]})})}function UB(n,e){const t=I.createContext(e),r=o=>{const{children:l,...u}=o,d=I.useMemo(()=>u,Object.values(u));return m.jsx(t.Provider,{value:d,children:l})};r.displayName=n+"Provider";function s(o){const l=I.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function pi(n,e=[]){let t=[];function r(o,l){const u=I.createContext(l),d=t.length;t=[...t,l];const p=_=>{const{scope:v,children:T,...A}=_,S=v?.[n]?.[d]||u,b=I.useMemo(()=>A,Object.values(A));return m.jsx(S.Provider,{value:b,children:T})};p.displayName=o+"Provider";function g(_,v){const T=v?.[n]?.[d]||u,A=I.useContext(T);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${_}\` must be used within \`${o}\``)}return[p,g]}const s=()=>{const o=t.map(l=>I.createContext(l));return function(u){const d=u?.[n]||o;return I.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,zB(s,...e)]}function zB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const l=r.reduce((u,{useScope:d,scopeName:p})=>{const _=d(o)[`__scope${p}`];return{...u,..._}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function un(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>e.current?.(...t),[])}var xr=globalThis?.document?I.useLayoutEffect:()=>{},Kw=aS();const BB=oS(Kw);var $B=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=$B.reduce((n,e)=>{const t=rc(`Primitive.${e}`),r=I.forwardRef((s,o)=>{const{asChild:l,...u}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(d,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function eN(n,e){n&&Kw.flushSync(()=>n.dispatchEvent(e))}var Ny={exports:{}},Py={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function WB(){if(NC)return Py;NC=1;var n=bp();function e(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(_,v){var T=v(),A=r({inst:{value:T,getSnapshot:v}}),S=A[0].inst,b=A[1];return o(function(){S.value=T,S.getSnapshot=v,d(S)&&b({inst:S})},[_,T,v]),s(function(){return d(S)&&b({inst:S}),_(function(){d(S)&&b({inst:S})})},[_]),l(T),T}function d(_){var v=_.getSnapshot;_=_.value;try{var T=v();return!t(_,T)}catch{return!0}}function p(_,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return Py.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Py}var PC;function HB(){return PC||(PC=1,Ny.exports=WB()),Ny.exports}var qB=HB();function GB(){return qB.useSyncExternalStore(KB,()=>!0,()=>!1)}function KB(){return()=>{}}var Qw="Avatar",[QB]=pi(Qw),[YB,tN]=QB(Qw),nN=I.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=I.useState("idle");return m.jsx(YB,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:m.jsx(rt.span,{...r,ref:e})})});nN.displayName=Qw;var rN="AvatarImage",sN=I.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,l=tN(rN,t),u=XB(r,o),d=un(p=>{s(p),l.onImageLoadingStatusChange(p)});return xr(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?m.jsx(rt.img,{...o,ref:e,src:r}):null});sN.displayName=rN;var iN="AvatarFallback",oN=I.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=tN(iN,t),[l,u]=I.useState(r===void 0);return I.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(d)}},[r]),l&&o.imageLoadingStatus!=="loaded"?m.jsx(rt.span,{...s,ref:e}):null});oN.displayName=iN;function DC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function XB(n,{referrerPolicy:e,crossOrigin:t}){const r=GB(),s=I.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[l,u]=I.useState(()=>DC(o,n));return xr(()=>{u(DC(o,n))},[o,n]),xr(()=>{const d=_=>()=>{u(_)};if(!o)return;const p=d("loaded"),g=d("error");return o.addEventListener("load",p),o.addEventListener("error",g),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",p),o.removeEventListener("error",g)}},[o,t,e]),l}var JB=nN,ZB=sN,e$=oN;function or({className:n,...e}){return m.jsx(JB,{"data-slot":"avatar",className:Lt("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function ar({className:n,...e}){return m.jsx(ZB,{"data-slot":"avatar-image",className:Lt("aspect-square size-full",n),...e})}function lr({className:n,...e}){return m.jsx(e$,{"data-slot":"avatar-fallback",className:Lt("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function t$({currentUser:n,onStoryClick:e,onAddStory:t}){const[r,s]=I.useState([]);I.useEffect(()=>{(async()=>{try{const u=await M_(),d=await Promise.all(u.map(async p=>{const g=await bf(p.userId);return{...p,username:g?.username||"Unknown",displayName:g?.displayName||"Unknown User",avatar:g?.avatar||"/api/placeholder/64/64"}}));s(d)}catch(u){console.error("Failed to fetch stories:",u)}})()},[]);const o=l=>l.isViewed||l.isViewed?"ring-gray-500":"ring-gradient-to-r from-green-500 to-black";return m.jsxs("div",{className:"flex gap-4 p-4 overflow-x-auto scrollbar-hide bg-gray-900/50",children:[m.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[70px]",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-16 h-16 ring-2 ring-green-500",children:[m.jsx(ar,{src:n?.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:n?.displayName?.charAt(0)||"Y"})]}),m.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-gray-900 cursor-pointer hover:bg-green-600 transition-colors",onClick:t,children:m.jsx(gp,{className:"w-3 h-3 text-white"})})]}),m.jsx("span",{className:"text-xs text-gray-300 text-center",children:"Your Story"})]}),r.map(l=>m.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[70px] cursor-pointer",onClick:()=>e(l),children:[m.jsx("div",{className:"relative",children:m.jsxs(or,{className:`w-16 h-16 ring-2 ${o(l)}`,children:[m.jsx(ar,{src:l.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:l.displayName.charAt(0)})]})}),m.jsx("span",{className:"text-xs text-gray-300 text-center truncate w-full",children:l.displayName})]},l.userId))]})}function jr({className:n,...e}){return m.jsx("div",{"data-slot":"card",className:Lt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function n$({posts:n,stories:e,currentUser:t,onLike:r,onReply:s,onShare:o,onStoryClick:l,onUserClick:u,onAddStory:d,onCreatePost:p,currentUserId:g}){const _=v=>{if(!v)return"الآن";if(typeof v=="object"&&v.seconds){const T=new Date(v.seconds*1e3),S=Math.floor((new Date().getTime()-T.getTime())/(1e3*60));return S<1?"الآن":S<60?`${S}د`:S<1440?`${Math.floor(S/60)}س`:`${Math.floor(S/1440)}ي`}return v};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black",dir:"rtl",children:[m.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm sticky top-16 z-40",children:m.jsx(t$,{currentUser:t,onStoryClick:l,onAddStory:d})}),m.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:m.jsx(ue,{onClick:p,className:"w-14 h-14 rounded-full bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",children:m.jsx(gp,{className:"w-6 h-6"})})}),m.jsx("div",{className:"max-w-2xl mx-auto px-4 pb-20 pt-4",children:n.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(ld,{className:"w-8 h-8 text-gray-400"})}),m.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"لا توجد منشورات بعد"}),m.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"كن أول من يشارك شيئاً!"}),m.jsxs(ue,{onClick:p,className:"bg-green-600 hover:bg-green-700 text-white",children:[m.jsx(gp,{className:"w-4 h-4 ml-2"}),"إنشاء منشور"]})]}):n.map(v=>m.jsx(jr,{className:"mb-4 bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-10 h-10 cursor-pointer",onClick:()=>u(v.userId),children:[m.jsx(ar,{src:v.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:v.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-1 -left-1 w-3 h-3 rounded-full border-2 border-gray-800 ${v.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-white font-medium cursor-pointer hover:text-green-400 transition-colors",onClick:()=>u(v.userId),children:v.displayName}),m.jsxs("p",{className:"text-gray-400 text-sm cursor-pointer hover:text-green-400 transition-colors",onClick:()=>u(v.userId),children:["@",v.username]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-500 text-sm",children:_(v.timestamp)}),m.jsx(ue,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:m.jsx($w,{className:"w-4 h-4"})})]})]}),m.jsx("p",{className:"text-gray-100 mb-4 leading-relaxed",children:v.content}),m.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>r(v.id),className:`flex items-center gap-2 ${v.likedBy&&g&&v.likedBy[g]||v.isLiked?"text-red-500 hover:text-red-400":"text-gray-400 hover:text-red-500"}`,children:[m.jsx(nc,{className:`w-4 h-4 ${v.likedBy&&g&&v.likedBy[g]||v.isLiked?"fill-current":""}`}),m.jsx("span",{children:v.likes||0})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>s(v.id),className:"flex items-center gap-2 text-gray-400 hover:text-blue-400",children:[m.jsx(ld,{className:"w-4 h-4"}),m.jsx("span",{children:v.replies||0})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>o(v.id),className:"flex items-center gap-2 text-gray-400 hover:text-green-400",children:[m.jsx(Ww,{className:"w-4 h-4"}),m.jsx("span",{children:"مشاركة"})]})]})]})},v.id))})]})}function ln({className:n,type:e,...t}){return m.jsx("input",{type:e,"data-slot":"input",className:Lt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function r$({conversations:n,onStartChat:e,onDeleteChat:t,onConversationClick:r,onSearchUsers:s}){const[o,l]=I.useState(""),u=n.filter(d=>d.displayName.toLowerCase().includes(o.toLowerCase())||d.username.toLowerCase().includes(o.toLowerCase())||d.lastMessage.toLowerCase().includes(o.toLowerCase()));return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsxs("div",{className:"px-4 py-4 border-b border-gray-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl text-white font-bold",children:"Messages"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>s&&s(),className:"text-gray-400 hover:text-green-400",children:m.jsx(yp,{className:"w-5 h-5"})}),m.jsx(ue,{variant:"ghost",size:"sm",className:"text-green-400 hover:text-green-300",children:m.jsx(Vk,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx(yp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx(ln,{value:o,onChange:d=>l(d.target.value),placeholder:"Search messages...",className:"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400"})]})]}),m.jsx("div",{className:"px-4 py-2",children:u.length===0&&o?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("p",{className:"text-gray-400",children:"لا توجد نتائج"}),m.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['No results found for "',o,'"']})]}):u.map(d=>m.jsx(jr,{className:"mb-2 bg-gray-800/30 border-gray-700 hover:bg-gray-800/50 transition-colors cursor-pointer",onClick:()=>r(d),children:m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-12 h-12",children:[m.jsx(ar,{src:d.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:d.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-gray-800 ${d.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("p",{className:"text-white font-medium truncate",children:d.displayName}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400 text-sm",children:d.timestamp}),d.unreadCount>0&&m.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-xs text-white font-medium",children:d.unreadCount})})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-gray-400 text-sm truncate flex-1",children:d.lastMessage}),m.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),e&&e(d.id)},className:"text-gray-400 hover:text-green-400 p-1",children:m.jsx(Mk,{className:"w-4 h-4"})}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),t&&t(d.id)},className:"text-gray-400 hover:text-red-400 p-1",children:m.jsx(gz,{className:"w-4 h-4"})})]})]}),!d.isOnline&&d.lastSeen&&m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:d.lastSeen})]})]})})},d.id))})]})})}function s$({profile:n,isOwnProfile:e=!0,onEditProfile:t,onShareProfile:r,onFollow:s}){const[o,l]=I.useState(!1);return I.useEffect(()=>{if(!n.id)return;const u=N_(O_,"/status/"+n.id),d=Pk(u,p=>{const g=p.val();l(g?.state==="online")});return()=>d()},[n.id,o]),m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:m.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-20 h-20 ring-2 ring-green-500",children:[m.jsx(ar,{src:n.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white text-xl",children:n.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-2 -right-2 w-5 h-5 rounded-full border-2 border-gray-800 ${o?"bg-green-500":"bg-gray-500"}`})]}),m.jsx("div",{className:"flex gap-2",children:e?m.jsxs(m.Fragment,{children:[m.jsxs(ue,{variant:"outline",size:"sm",onClick:t,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[m.jsx(Vk,{className:"w-4 h-4 mr-1"}),"تعديل"]}),m.jsx(ue,{variant:"outline",size:"sm",onClick:r,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:m.jsx(Ww,{className:"w-4 h-4"})})]}):m.jsxs(ue,{onClick:s,className:"bg-green-500 hover:bg-green-600 text-white",children:[m.jsx(Hw,{className:"w-4 h-4 mr-1"}),"متابعة"]})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl text-white font-bold",children:n.displayName}),m.jsxs("p",{className:"text-gray-400",children:["@",n.username]})]}),n.bio&&m.jsx("p",{className:"text-gray-300 leading-relaxed",children:n.bio}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Gw,{variant:"secondary",className:"bg-gray-700 text-gray-300",children:o?"✅ متصل":"⚫ غير متصل"}),m.jsxs("span",{className:"text-gray-500 text-sm",children:["انضم ",n.joinDate]})]})]})]})}),m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.postsCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"منشورات"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.followersCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"متابعين"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.followingCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"يتابع"})]})]})})}),e&&m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-4 space-y-3",children:[m.jsxs(ue,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[m.jsx(jz,{className:"w-4 h-4 mr-3"}),"إعدادات الحساب"]}),m.jsxs(ue,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[m.jsx(Fk,{className:"w-4 h-4 mr-3"}),"إدارة المتابعين"]}),m.jsxs(ue,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[m.jsx(vz,{className:"w-4 h-4 mr-3"}),"سياسة الخصوصية"]})]})})]})})}function i$({likedPosts:n,onUnlike:e,onReply:t,onShare:r}){return m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:m.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl text-white font-bold mb-2",children:"Liked Posts"}),m.jsx("p",{className:"text-gray-400",children:"Posts you've liked recently"})]}),n.length===0?m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-8 text-center",children:[m.jsx(nc,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg text-gray-300 mb-2",children:"No liked posts yet"}),m.jsx("p",{className:"text-gray-500",children:"Start exploring and like posts that interest you!"})]})}):m.jsx("div",{className:"space-y-4",children:n.map(s=>m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-10 h-10",children:[m.jsx(ar,{src:s.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:s.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-gray-800 ${s.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-white font-medium",children:s.displayName}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["@",s.username]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-gray-500 text-sm",children:s.timestamp}),m.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[m.jsx(hz,{className:"w-3 h-3"}),m.jsxs("span",{children:["Liked ",s.likedAt]})]})]})]}),m.jsx("p",{className:"text-gray-100 mb-4 leading-relaxed",children:s.content}),m.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>e(s.id),className:"flex items-center gap-2 text-red-500 hover:text-red-400",children:[m.jsx(nc,{className:"w-4 h-4 fill-current"}),m.jsx("span",{children:s.likes})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>t(s.id),className:"flex items-center gap-2 text-gray-400 hover:text-blue-400",children:[m.jsx(ld,{className:"w-4 h-4"}),m.jsx("span",{children:s.replies})]}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>r(s.id),className:"flex items-center gap-2 text-gray-400 hover:text-green-400",children:[m.jsx(Ww,{className:"w-4 h-4"}),m.jsx("span",{children:"Share"})]})]})]})},s.id))})]})})}function Le(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}var o$=lS[" useId ".trim().toString()]||(()=>{}),a$=0;function Ul(n){const[e,t]=I.useState(o$());return xr(()=>{t(r=>r??String(a$++))},[n]),n||(e?`radix-${e}`:"")}var l$=lS[" useInsertionEffect ".trim().toString()]||xr;function _m({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,l]=c$({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:s;{const g=I.useRef(n!==void 0);I.useEffect(()=>{const _=g.current;_!==u&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,r])}const p=I.useCallback(g=>{if(u){const _=u$(g)?g(n):g;_!==n&&l.current?.(_)}else o(g)},[u,n,o,l]);return[d,p]}function c$({defaultProp:n,onChange:e}){const[t,r]=I.useState(n),s=I.useRef(t),o=I.useRef(e);return l$(()=>{o.current=e},[e]),I.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function u$(n){return typeof n=="function"}function d$(n,e=globalThis?.document){const t=un(n);I.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var h$="DismissableLayer",U_="dismissableLayer.update",f$="dismissableLayer.pointerDownOutside",p$="dismissableLayer.focusOutside",OC,aN=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yw=I.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...d}=n,p=I.useContext(aN),[g,_]=I.useState(null),v=g?.ownerDocument??globalThis?.document,[,T]=I.useState({}),A=Et(e,P=>_(P)),S=Array.from(p.layers),[b]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),j=S.indexOf(b),U=g?S.indexOf(g):-1,B=p.layersWithOutsidePointerEventsDisabled.size>0,G=U>=j,X=y$(P=>{const R=P.target,N=[...p.branches].some(L=>L.contains(R));!G||N||(s?.(P),l?.(P),P.defaultPrevented||u?.())},v),ne=_$(P=>{const R=P.target;[...p.branches].some(L=>L.contains(R))||(o?.(P),l?.(P),P.defaultPrevented||u?.())},v);return d$(P=>{U===p.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),I.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(OC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),MC(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=OC)}},[g,v,t,p]),I.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),MC())},[g,p]),I.useEffect(()=>{const P=()=>T({});return document.addEventListener(U_,P),()=>document.removeEventListener(U_,P)},[]),m.jsx(rt.div,{...d,ref:A,style:{pointerEvents:B?G?"auto":"none":void 0,...n.style},onFocusCapture:Le(n.onFocusCapture,ne.onFocusCapture),onBlurCapture:Le(n.onBlurCapture,ne.onBlurCapture),onPointerDownCapture:Le(n.onPointerDownCapture,X.onPointerDownCapture)})});Yw.displayName=h$;var m$="DismissableLayerBranch",g$=I.forwardRef((n,e)=>{const t=I.useContext(aN),r=I.useRef(null),s=Et(e,r);return I.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),m.jsx(rt.div,{...n,ref:s})});g$.displayName=m$;function y$(n,e=globalThis?.document){const t=un(n),r=I.useRef(!1),s=I.useRef(()=>{});return I.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let d=function(){lN(f$,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function _$(n,e=globalThis?.document){const t=un(n),r=I.useRef(!1);return I.useEffect(()=>{const s=o=>{o.target&&!r.current&&lN(p$,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MC(){const n=new CustomEvent(U_);document.dispatchEvent(n)}function lN(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?eN(s,o):s.dispatchEvent(o)}var Dy="focusScope.autoFocusOnMount",Oy="focusScope.autoFocusOnUnmount",LC={bubbles:!1,cancelable:!0},v$="FocusScope",Xw=I.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...l}=n,[u,d]=I.useState(null),p=un(s),g=un(o),_=I.useRef(null),v=Et(e,S=>d(S)),T=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let S=function(B){if(T.paused||!u)return;const G=B.target;u.contains(G)?_.current=G:Qi(_.current,{select:!0})},b=function(B){if(T.paused||!u)return;const G=B.relatedTarget;G!==null&&(u.contains(G)||Qi(_.current,{select:!0}))},j=function(B){if(document.activeElement===document.body)for(const X of B)X.removedNodes.length>0&&Qi(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",b);const U=new MutationObserver(j);return u&&U.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",b),U.disconnect()}}},[r,u,T.paused]),I.useEffect(()=>{if(u){VC.add(T);const S=document.activeElement;if(!u.contains(S)){const j=new CustomEvent(Dy,LC);u.addEventListener(Dy,p),u.dispatchEvent(j),j.defaultPrevented||(w$(C$(cN(u)),{select:!0}),document.activeElement===S&&Qi(u))}return()=>{u.removeEventListener(Dy,p),setTimeout(()=>{const j=new CustomEvent(Oy,LC);u.addEventListener(Oy,g),u.dispatchEvent(j),j.defaultPrevented||Qi(S??document.body,{select:!0}),u.removeEventListener(Oy,g),VC.remove(T)},0)}}},[u,p,g,T]);const A=I.useCallback(S=>{if(!t&&!r||T.paused)return;const b=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,j=document.activeElement;if(b&&j){const U=S.currentTarget,[B,G]=E$(U);B&&G?!S.shiftKey&&j===G?(S.preventDefault(),t&&Qi(B,{select:!0})):S.shiftKey&&j===B&&(S.preventDefault(),t&&Qi(G,{select:!0})):j===U&&S.preventDefault()}},[t,r,T.paused]);return m.jsx(rt.div,{tabIndex:-1,...l,ref:v,onKeyDown:A})});Xw.displayName=v$;function w$(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Qi(r,{select:e}),document.activeElement!==t)return}function E$(n){const e=cN(n),t=jC(e,n),r=jC(e.reverse(),n);return[t,r]}function cN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jC(n,e){for(const t of n)if(!x$(t,{upTo:e}))return t}function x$(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function T$(n){return n instanceof HTMLInputElement&&"select"in n}function Qi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&T$(n)&&e&&n.select()}}var VC=I$();function I$(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=FC(n,e),n.unshift(e)},remove(e){n=FC(n,e),n[0]?.resume()}}}function FC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function C$(n){return n.filter(e=>e.tagName!=="A")}var S$="Portal",Jw=I.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=I.useState(!1);xr(()=>o(!0),[]);const l=t||s&&globalThis?.document?.body;return l?BB.createPortal(m.jsx(rt.div,{...r,ref:e}),l):null});Jw.displayName=S$;function b$(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var cr=n=>{const{present:e,children:t}=n,r=R$(e),s=typeof t=="function"?t({present:r.isPresent}):I.Children.only(t),o=Et(r.ref,A$(s));return typeof t=="function"||r.isPresent?I.cloneElement(s,{ref:o}):null};cr.displayName="Presence";function R$(n){const[e,t]=I.useState(),r=I.useRef(null),s=I.useRef(n),o=I.useRef("none"),l=n?"mounted":"unmounted",[u,d]=b$(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const p=uf(r.current);o.current=u==="mounted"?p:"none"},[u]),xr(()=>{const p=r.current,g=s.current;if(g!==n){const v=o.current,T=uf(p);n?d("MOUNT"):T==="none"||p?.display==="none"?d("UNMOUNT"):d(g&&v!==T?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),xr(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,_=T=>{const S=uf(r.current).includes(CSS.escape(T.animationName));if(T.target===e&&S&&(d("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},v=T=>{T.target===e&&(o.current=uf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:I.useCallback(p=>{r.current=p?getComputedStyle(p):null,t(p)},[])}}function uf(n){return n?.animationName||"none"}function A$(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var My=0;function uN(){I.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??UC()),document.body.insertAdjacentElement("beforeend",n[1]??UC()),My++,()=>{My===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),My--}},[])}function UC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var us=function(){return us=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},us.apply(this,arguments)};function dN(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function k$(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Rf="right-scroll-bar-position",Af="width-before-scroll-bar",N$="with-scroll-bars-hidden",P$="--removed-body-scroll-bar-size";function Ly(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function D$(n,e){var t=I.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var O$=typeof window<"u"?I.useLayoutEffect:I.useEffect,zC=new WeakMap;function M$(n,e){var t=D$(null,function(r){return n.forEach(function(s){return Ly(s,r)})});return O$(function(){var r=zC.get(t);if(r){var s=new Set(r),o=new Set(n),l=t.current;s.forEach(function(u){o.has(u)||Ly(u,null)}),o.forEach(function(u){s.has(u)||Ly(u,l)})}zC.set(t,n)},[n]),t}function L$(n){return n}function j$(n,e){e===void 0&&(e=L$);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var l=e(o,r);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(r=!0;t.length;){var l=t;t=[],l.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(o),l=t}var d=function(){var g=l;l=[],g.forEach(o)},p=function(){return Promise.resolve().then(d)};p(),t={push:function(g){l.push(g),p()},filter:function(g){return l=l.filter(g),t}}}};return s}function V$(n){n===void 0&&(n={});var e=j$(null);return e.options=us({async:!0,ssr:!1},n),e}var hN=function(n){var e=n.sideCar,t=dN(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,us({},t))};hN.isSideCarExport=!0;function F$(n,e){return n.useMedium(e),hN}var fN=V$(),jy=function(){},vm=I.forwardRef(function(n,e){var t=I.useRef(null),r=I.useState({onScrollCapture:jy,onWheelCapture:jy,onTouchMoveCapture:jy}),s=r[0],o=r[1],l=n.forwardProps,u=n.children,d=n.className,p=n.removeScrollBar,g=n.enabled,_=n.shards,v=n.sideCar,T=n.noRelative,A=n.noIsolation,S=n.inert,b=n.allowPinchZoom,j=n.as,U=j===void 0?"div":j,B=n.gapMode,G=dN(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),X=v,ne=M$([t,e]),P=us(us({},G),s);return I.createElement(I.Fragment,null,g&&I.createElement(X,{sideCar:fN,removeScrollBar:p,shards:_,noRelative:T,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!b,lockRef:t,gapMode:B}),l?I.cloneElement(I.Children.only(u),us(us({},P),{ref:ne})):I.createElement(U,us({},P,{className:d,ref:ne}),u))});vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vm.classNames={fullWidth:Af,zeroRight:Rf};var U$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function z$(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=U$();return e&&n.setAttribute("nonce",e),n}function B$(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function $$(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var W$=function(){var n=0,e=null;return{add:function(t){n==0&&(e=z$())&&(B$(e,t),$$(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},H$=function(){var n=W$();return function(e,t){I.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},pN=function(){var n=H$(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},q$={left:0,top:0,right:0,gap:0},Vy=function(n){return parseInt(n||"",10)||0},G$=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Vy(t),Vy(r),Vy(s)]},K$=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return q$;var e=G$(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Q$=pN(),zl="data-scroll-locked",Y$=function(n,e,t,r){var s=n.left,o=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(N$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(zl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rf,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Af,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Rf," .").concat(Rf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Af," .").concat(Af,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zl,`] {
    `).concat(P$,": ").concat(u,`px;
  }
`)},BC=function(){var n=parseInt(document.body.getAttribute(zl)||"0",10);return isFinite(n)?n:0},X$=function(){I.useEffect(function(){return document.body.setAttribute(zl,(BC()+1).toString()),function(){var n=BC()-1;n<=0?document.body.removeAttribute(zl):document.body.setAttribute(zl,n.toString())}},[])},J$=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;X$();var o=I.useMemo(function(){return K$(s)},[s]);return I.createElement(Q$,{styles:Y$(o,!e,s,t?"":"!important")})},z_=!1;if(typeof window<"u")try{var df=Object.defineProperty({},"passive",{get:function(){return z_=!0,!0}});window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{z_=!1}var Il=z_?{passive:!1}:!1,Z$=function(n){return n.tagName==="TEXTAREA"},mN=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Z$(n)&&t[e]==="visible")},e8=function(n){return mN(n,"overflowY")},t8=function(n){return mN(n,"overflowX")},$C=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=gN(n,r);if(s){var o=yN(n,r),l=o[1],u=o[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},n8=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},r8=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},gN=function(n,e){return n==="v"?e8(e):t8(e)},yN=function(n,e){return n==="v"?n8(e):r8(e)},s8=function(n,e){return n==="h"&&e==="rtl"?-1:1},i8=function(n,e,t,r,s){var o=s8(n,window.getComputedStyle(e).direction),l=o*r,u=t.target,d=e.contains(u),p=!1,g=l>0,_=0,v=0;do{if(!u)break;var T=yN(n,u),A=T[0],S=T[1],b=T[2],j=S-b-o*A;(A||j)&&gN(n,u)&&(_+=j,v+=A);var U=u.parentNode;u=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(g&&Math.abs(_)<1||!g&&Math.abs(v)<1)&&(p=!0),p},hf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},WC=function(n){return[n.deltaX,n.deltaY]},HC=function(n){return n&&"current"in n?n.current:n},o8=function(n,e){return n[0]===e[0]&&n[1]===e[1]},a8=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},l8=0,Cl=[];function c8(n){var e=I.useRef([]),t=I.useRef([0,0]),r=I.useRef(),s=I.useState(l8++)[0],o=I.useState(pN)[0],l=I.useRef(n);I.useEffect(function(){l.current=n},[n]),I.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var S=k$([n.lockRef.current],(n.shards||[]).map(HC),!0).filter(Boolean);return S.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),S.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=I.useCallback(function(S,b){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var j=hf(S),U=t.current,B="deltaX"in S?S.deltaX:U[0]-j[0],G="deltaY"in S?S.deltaY:U[1]-j[1],X,ne=S.target,P=Math.abs(B)>Math.abs(G)?"h":"v";if("touches"in S&&P==="h"&&ne.type==="range")return!1;var R=$C(P,ne);if(!R)return!0;if(R?X=P:(X=P==="v"?"h":"v",R=$C(P,ne)),!R)return!1;if(!r.current&&"changedTouches"in S&&(B||G)&&(r.current=X),!X)return!0;var N=r.current||X;return i8(N,b,S,N==="h"?B:G)},[]),d=I.useCallback(function(S){var b=S;if(!(!Cl.length||Cl[Cl.length-1]!==o)){var j="deltaY"in b?WC(b):hf(b),U=e.current.filter(function(X){return X.name===b.type&&(X.target===b.target||b.target===X.shadowParent)&&o8(X.delta,j)})[0];if(U&&U.should){b.cancelable&&b.preventDefault();return}if(!U){var B=(l.current.shards||[]).map(HC).filter(Boolean).filter(function(X){return X.contains(b.target)}),G=B.length>0?u(b,B[0]):!l.current.noIsolation;G&&b.cancelable&&b.preventDefault()}}},[]),p=I.useCallback(function(S,b,j,U){var B={name:S,delta:b,target:j,should:U,shadowParent:u8(j)};e.current.push(B),setTimeout(function(){e.current=e.current.filter(function(G){return G!==B})},1)},[]),g=I.useCallback(function(S){t.current=hf(S),r.current=void 0},[]),_=I.useCallback(function(S){p(S.type,WC(S),S.target,u(S,n.lockRef.current))},[]),v=I.useCallback(function(S){p(S.type,hf(S),S.target,u(S,n.lockRef.current))},[]);I.useEffect(function(){return Cl.push(o),n.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Il),document.addEventListener("touchmove",d,Il),document.addEventListener("touchstart",g,Il),function(){Cl=Cl.filter(function(S){return S!==o}),document.removeEventListener("wheel",d,Il),document.removeEventListener("touchmove",d,Il),document.removeEventListener("touchstart",g,Il)}},[]);var T=n.removeScrollBar,A=n.inert;return I.createElement(I.Fragment,null,A?I.createElement(o,{styles:a8(s)}):null,T?I.createElement(J$,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function u8(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const d8=F$(fN,c8);var Zw=I.forwardRef(function(n,e){return I.createElement(vm,us({},n,{ref:e,sideCar:d8}))});Zw.classNames=vm.classNames;var h8=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Sl=new WeakMap,ff=new WeakMap,pf={},Fy=0,_N=function(n){return n&&(n.host||_N(n.parentNode))},f8=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=_N(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},p8=function(n,e,t,r){var s=f8(e,Array.isArray(n)?n:[n]);pf[t]||(pf[t]=new WeakMap);var o=pf[t],l=[],u=new Set,d=new Set(s),p=function(_){!_||u.has(_)||(u.add(_),p(_.parentNode))};s.forEach(p);var g=function(_){!_||d.has(_)||Array.prototype.forEach.call(_.children,function(v){if(u.has(v))g(v);else try{var T=v.getAttribute(r),A=T!==null&&T!=="false",S=(Sl.get(v)||0)+1,b=(o.get(v)||0)+1;Sl.set(v,S),o.set(v,b),l.push(v),S===1&&A&&ff.set(v,!0),b===1&&v.setAttribute(t,"true"),A||v.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",v,j)}})};return g(e),u.clear(),Fy++,function(){l.forEach(function(_){var v=Sl.get(_)-1,T=o.get(_)-1;Sl.set(_,v),o.set(_,T),v||(ff.has(_)||_.removeAttribute(r),ff.delete(_)),T||_.removeAttribute(t)}),Fy--,Fy||(Sl=new WeakMap,Sl=new WeakMap,ff=new WeakMap,pf={})}},vN=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=h8(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),p8(r,s,t,"aria-hidden")):function(){return null}},wm="Dialog",[wN]=pi(wm),[m8,Wr]=wN(wm),EN=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,u=I.useRef(null),d=I.useRef(null),[p,g]=_m({prop:r,defaultProp:s??!1,onChange:o,caller:wm});return m.jsx(m8,{scope:e,triggerRef:u,contentRef:d,contentId:Ul(),titleId:Ul(),descriptionId:Ul(),open:p,onOpenChange:g,onOpenToggle:I.useCallback(()=>g(_=>!_),[g]),modal:l,children:t})};EN.displayName=wm;var xN="DialogTrigger",g8=I.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Wr(xN,t),o=Et(e,s.triggerRef);return m.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":n0(s.open),...r,ref:o,onClick:Le(n.onClick,s.onOpenToggle)})});g8.displayName=xN;var e0="DialogPortal",[y8,TN]=wN(e0,{forceMount:void 0}),IN=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=Wr(e0,e);return m.jsx(y8,{scope:e,forceMount:t,children:I.Children.map(r,l=>m.jsx(cr,{present:t||o.open,children:m.jsx(Jw,{asChild:!0,container:s,children:l})}))})};IN.displayName=e0;var _p="DialogOverlay",CN=I.forwardRef((n,e)=>{const t=TN(_p,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Wr(_p,n.__scopeDialog);return o.modal?m.jsx(cr,{present:r||o.open,children:m.jsx(v8,{...s,ref:e})}):null});CN.displayName=_p;var _8=rc("DialogOverlay.RemoveScroll"),v8=I.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Wr(_p,t);return m.jsx(Zw,{as:_8,allowPinchZoom:!0,shards:[s.contentRef],children:m.jsx(rt.div,{"data-state":n0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),xa="DialogContent",SN=I.forwardRef((n,e)=>{const t=TN(xa,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Wr(xa,n.__scopeDialog);return m.jsx(cr,{present:r||o.open,children:o.modal?m.jsx(w8,{...s,ref:e}):m.jsx(E8,{...s,ref:e})})});SN.displayName=xa;var w8=I.forwardRef((n,e)=>{const t=Wr(xa,n.__scopeDialog),r=I.useRef(null),s=Et(e,t.contentRef,r);return I.useEffect(()=>{const o=r.current;if(o)return vN(o)},[]),m.jsx(bN,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(n.onCloseAutoFocus,o=>{o.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Le(n.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&o.preventDefault()}),onFocusOutside:Le(n.onFocusOutside,o=>o.preventDefault())})}),E8=I.forwardRef((n,e)=>{const t=Wr(xa,n.__scopeDialog),r=I.useRef(!1),s=I.useRef(!1);return m.jsx(bN,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{n.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||t.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{n.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;t.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),bN=I.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...l}=n,u=Wr(xa,t),d=I.useRef(null),p=Et(e,d);return uN(),m.jsxs(m.Fragment,{children:[m.jsx(Xw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:m.jsx(Yw,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":n0(u.open),...l,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(x8,{titleId:u.titleId}),m.jsx(I8,{contentRef:d,descriptionId:u.descriptionId})]})]})}),t0="DialogTitle",RN=I.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Wr(t0,t);return m.jsx(rt.h2,{id:s.titleId,...r,ref:e})});RN.displayName=t0;var AN="DialogDescription",kN=I.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Wr(AN,t);return m.jsx(rt.p,{id:s.descriptionId,...r,ref:e})});kN.displayName=AN;var NN="DialogClose",PN=I.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Wr(NN,t);return m.jsx(rt.button,{type:"button",...r,ref:e,onClick:Le(n.onClick,()=>s.onOpenChange(!1))})});PN.displayName=NN;function n0(n){return n?"open":"closed"}var DN="DialogTitleWarning",[Nq,ON]=UB(DN,{contentName:xa,titleName:t0,docsSlug:"dialog"}),x8=({titleId:n})=>{const e=ON(DN),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return I.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},T8="DialogDescriptionWarning",I8=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ON(T8).contentName}}.`;return I.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},C8=EN,S8=IN,MN=CN,b8=SN,R8=RN,A8=kN,k8=PN;function ka({...n}){return m.jsx(C8,{"data-slot":"dialog",...n})}function N8({...n}){return m.jsx(S8,{"data-slot":"dialog-portal",...n})}const LN=I.forwardRef(({className:n,...e},t)=>m.jsx(MN,{ref:t,"data-slot":"dialog-overlay",className:Lt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e}));LN.displayName=MN.displayName;function Na({className:n,children:e,...t}){return m.jsxs(N8,{"data-slot":"dialog-portal",children:[m.jsx(LN,{}),m.jsxs(b8,{"data-slot":"dialog-content",className:Lt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,m.jsxs(k8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[m.jsx(Aa,{}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Pa({className:n,...e}){return m.jsx("div",{"data-slot":"dialog-header",className:Lt("flex flex-col gap-2 text-center sm:text-left",n),...e})}function P8({className:n,...e}){return m.jsx("div",{"data-slot":"dialog-footer",className:Lt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function Da({className:n,...e}){return m.jsx(R8,{"data-slot":"dialog-title",className:Lt("text-lg leading-none font-semibold",n),...e})}function vc({className:n,...e}){return m.jsx(A8,{"data-slot":"dialog-description",className:Lt("text-muted-foreground text-sm",n),...e})}var D8=I.createContext(void 0);function r0(n){const e=I.useContext(D8);return n||e||"ltr"}function O8(n,[e,t]){return Math.min(t,Math.max(e,n))}function M8(n,e){return I.useReducer((t,r)=>e[t][r]??t,n)}var s0="ScrollArea",[jN]=pi(s0),[L8,Ir]=jN(s0),VN=I.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:o=600,...l}=n,[u,d]=I.useState(null),[p,g]=I.useState(null),[_,v]=I.useState(null),[T,A]=I.useState(null),[S,b]=I.useState(null),[j,U]=I.useState(0),[B,G]=I.useState(0),[X,ne]=I.useState(!1),[P,R]=I.useState(!1),N=Et(e,O=>d(O)),L=r0(s);return m.jsx(L8,{scope:t,type:r,dir:L,scrollHideDelay:o,scrollArea:u,viewport:p,onViewportChange:g,content:_,onContentChange:v,scrollbarX:T,onScrollbarXChange:A,scrollbarXEnabled:X,onScrollbarXEnabledChange:ne,scrollbarY:S,onScrollbarYChange:b,scrollbarYEnabled:P,onScrollbarYEnabledChange:R,onCornerWidthChange:U,onCornerHeightChange:G,children:m.jsx(rt.div,{dir:L,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":B+"px",...n.style}})})});VN.displayName=s0;var FN="ScrollAreaViewport",UN=I.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...o}=n,l=Ir(FN,t),u=I.useRef(null),d=Et(e,u,l.onViewportChange);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),m.jsx(rt.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...n.style},children:m.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});UN.displayName=FN;var Ss="ScrollAreaScrollbar",zN=I.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Ir(Ss,n.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=s,u=n.orientation==="horizontal";return I.useEffect(()=>(u?o(!0):l(!0),()=>{u?o(!1):l(!1)}),[u,o,l]),s.type==="hover"?m.jsx(j8,{...r,ref:e,forceMount:t}):s.type==="scroll"?m.jsx(V8,{...r,ref:e,forceMount:t}):s.type==="auto"?m.jsx(BN,{...r,ref:e,forceMount:t}):s.type==="always"?m.jsx(i0,{...r,ref:e}):null});zN.displayName=Ss;var j8=I.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Ir(Ss,n.__scopeScrollArea),[o,l]=I.useState(!1);return I.useEffect(()=>{const u=s.scrollArea;let d=0;if(u){const p=()=>{window.clearTimeout(d),l(!0)},g=()=>{d=window.setTimeout(()=>l(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",g)}}},[s.scrollArea,s.scrollHideDelay]),m.jsx(cr,{present:t||o,children:m.jsx(BN,{"data-state":o?"visible":"hidden",...r,ref:e})})}),V8=I.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Ir(Ss,n.__scopeScrollArea),o=n.orientation==="horizontal",l=xm(()=>d("SCROLL_END"),100),[u,d]=M8("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return I.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,s.scrollHideDelay,d]),I.useEffect(()=>{const p=s.viewport,g=o?"scrollLeft":"scrollTop";if(p){let _=p[g];const v=()=>{const T=p[g];_!==T&&(d("SCROLL"),l()),_=T};return p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[s.viewport,o,d,l]),m.jsx(cr,{present:t||u!=="hidden",children:m.jsx(i0,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Le(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Le(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),BN=I.forwardRef((n,e)=>{const t=Ir(Ss,n.__scopeScrollArea),{forceMount:r,...s}=n,[o,l]=I.useState(!1),u=n.orientation==="horizontal",d=xm(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;l(u?p:g)}},10);return sc(t.viewport,d),sc(t.content,d),m.jsx(cr,{present:r||o,children:m.jsx(i0,{"data-state":o?"visible":"hidden",...s,ref:e})})}),i0=I.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=Ir(Ss,n.__scopeScrollArea),o=I.useRef(null),l=I.useRef(0),[u,d]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=GN(u.viewport,u.content),g={...r,sizes:u,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:v=>l.current=v};function _(v,T){return W8(v,l.current,u,T)}return t==="horizontal"?m.jsx(F8,{...g,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollLeft,T=qC(v,u,s.dir);o.current.style.transform=`translate3d(${T}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=_(v,s.dir))}}):t==="vertical"?m.jsx(U8,{...g,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const v=s.viewport.scrollTop,T=qC(v,u);o.current.style.transform=`translate3d(0, ${T}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=_(v))}}):null}),F8=I.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=Ir(Ss,n.__scopeScrollArea),[l,u]=I.useState(),d=I.useRef(null),p=Et(e,d,o.onScrollbarXChange);return I.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),m.jsx(WN,{"data-orientation":"horizontal",...s,ref:p,sizes:t,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Em(t)+"px",...n.style},onThumbPointerDown:g=>n.onThumbPointerDown(g.x),onDragScroll:g=>n.onDragScroll(g.x),onWheelScroll:(g,_)=>{if(o.viewport){const v=o.viewport.scrollLeft+g.deltaX;n.onWheelScroll(v),QN(v,_)&&g.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:wp(l.paddingLeft),paddingEnd:wp(l.paddingRight)}})}})}),U8=I.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,o=Ir(Ss,n.__scopeScrollArea),[l,u]=I.useState(),d=I.useRef(null),p=Et(e,d,o.onScrollbarYChange);return I.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),m.jsx(WN,{"data-orientation":"vertical",...s,ref:p,sizes:t,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Em(t)+"px",...n.style},onThumbPointerDown:g=>n.onThumbPointerDown(g.y),onDragScroll:g=>n.onDragScroll(g.y),onWheelScroll:(g,_)=>{if(o.viewport){const v=o.viewport.scrollTop+g.deltaY;n.onWheelScroll(v),QN(v,_)&&g.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:wp(l.paddingTop),paddingEnd:wp(l.paddingBottom)}})}})}),[z8,$N]=jN(Ss),WN=I.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:p,onWheelScroll:g,onResize:_,...v}=n,T=Ir(Ss,t),[A,S]=I.useState(null),b=Et(e,N=>S(N)),j=I.useRef(null),U=I.useRef(""),B=T.viewport,G=r.content-r.viewport,X=un(g),ne=un(d),P=xm(_,10);function R(N){if(j.current){const L=N.clientX-j.current.left,O=N.clientY-j.current.top;p({x:L,y:O})}}return I.useEffect(()=>{const N=L=>{const O=L.target;A?.contains(O)&&X(L,G)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[B,A,G,X]),I.useEffect(ne,[r,ne]),sc(A,P),sc(T.content,P),m.jsx(z8,{scope:t,scrollbar:A,hasThumb:s,onThumbChange:un(o),onThumbPointerUp:un(l),onThumbPositionChange:ne,onThumbPointerDown:un(u),children:m.jsx(rt.div,{...v,ref:b,style:{position:"absolute",...v.style},onPointerDown:Le(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),j.current=A.getBoundingClientRect(),U.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T.viewport&&(T.viewport.style.scrollBehavior="auto"),R(N))}),onPointerMove:Le(n.onPointerMove,R),onPointerUp:Le(n.onPointerUp,N=>{const L=N.target;L.hasPointerCapture(N.pointerId)&&L.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=U.current,T.viewport&&(T.viewport.style.scrollBehavior=""),j.current=null})})})}),vp="ScrollAreaThumb",HN=I.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=$N(vp,n.__scopeScrollArea);return m.jsx(cr,{present:t||s.hasThumb,children:m.jsx(B8,{ref:e,...r})})}),B8=I.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,o=Ir(vp,t),l=$N(vp,t),{onThumbPositionChange:u}=l,d=Et(e,_=>l.onThumbChange(_)),p=I.useRef(void 0),g=xm(()=>{p.current&&(p.current(),p.current=void 0)},100);return I.useEffect(()=>{const _=o.viewport;if(_){const v=()=>{if(g(),!p.current){const T=H8(_,u);p.current=T,u()}};return u(),_.addEventListener("scroll",v),()=>_.removeEventListener("scroll",v)}},[o.viewport,g,u]),m.jsx(rt.div,{"data-state":l.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Le(n.onPointerDownCapture,_=>{const T=_.target.getBoundingClientRect(),A=_.clientX-T.left,S=_.clientY-T.top;l.onThumbPointerDown({x:A,y:S})}),onPointerUp:Le(n.onPointerUp,l.onThumbPointerUp)})});HN.displayName=vp;var o0="ScrollAreaCorner",qN=I.forwardRef((n,e)=>{const t=Ir(o0,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?m.jsx($8,{...n,ref:e}):null});qN.displayName=o0;var $8=I.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=Ir(o0,t),[o,l]=I.useState(0),[u,d]=I.useState(0),p=!!(o&&u);return sc(s.scrollbarX,()=>{const g=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(g),d(g)}),sc(s.scrollbarY,()=>{const g=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(g),l(g)}),p?m.jsx(rt.div,{...r,ref:e,style:{width:o,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function wp(n){return n?parseInt(n,10):0}function GN(n,e){const t=n/e;return isNaN(t)?0:t}function Em(n){const e=GN(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function W8(n,e,t,r="ltr"){const s=Em(t),o=s/2,l=e||o,u=s-l,d=t.scrollbar.paddingStart+l,p=t.scrollbar.size-t.scrollbar.paddingEnd-u,g=t.content-t.viewport,_=r==="ltr"?[0,g]:[g*-1,0];return KN([d,p],_)(n)}function qC(n,e,t="ltr"){const r=Em(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,l=e.content-e.viewport,u=o-r,d=t==="ltr"?[0,l]:[l*-1,0],p=O8(n,d);return KN([0,l],[0,u])(p)}function KN(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function QN(n,e){return n>0&&n<e}var H8=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const o={left:n.scrollLeft,top:n.scrollTop},l=t.left!==o.left,u=t.top!==o.top;(l||u)&&e(),t=o,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function xm(n,e){const t=un(n),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function sc(n,e){const t=un(e);xr(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var q8=VN,G8=UN,K8=qN;function a0({className:n,children:e,...t}){return m.jsxs(q8,{"data-slot":"scroll-area",className:Lt("relative",n),...t,children:[m.jsx(G8,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),m.jsx(Q8,{}),m.jsx(K8,{})]})}function Q8({className:n,orientation:e="vertical",...t}){return m.jsx(zN,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Lt("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:m.jsx(HN,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const YN="efxIXZk8hBcXsDtZomqJGDi2MQJHyOWW",XN="https://api.giphy.com/v1",Y8=async(n,e=20,t=0)=>{try{const r=await fetch(`${XN}/gifs/search?api_key=${YN}&q=${encodeURIComponent(n)}&limit=${e}&offset=${t}`);if(!r.ok)throw new Error("Failed to fetch GIFs");return await r.json()}catch(r){throw console.error("Error searching GIFs:",r),r}},X8=async(n=20,e=0)=>{try{const t=await fetch(`${XN}/gifs/trending?api_key=${YN}&limit=${n}&offset=${e}`);if(!t.ok)throw new Error("Failed to fetch trending GIFs");return await t.json()}catch(t){throw console.error("Error fetching trending GIFs:",t),t}},J8=["happy","love","funny","cute","excited","sad","angry","surprised","dance","party","food","cat","dog","reaction","hello","goodbye","yes","no","think","confused"],Z8=["سعيد","حب","مضحك","لطيف","متحمس","حزين","غاضب","مندهش","رقص","حفلة","طعام","قطة","كلب","ردة فعل","مرحبا","وداعا","نعم","لا","تفكير","محتار"];function e7({isOpen:n,onClose:e,onSelectGif:t}){const[r,s]=I.useState([]),[o,l]=I.useState(""),[u,d]=I.useState(!1),[p,g]=I.useState("");I.useEffect(()=>{n&&r.length===0&&_()},[n]);const _=async()=>{d(!0),g("");try{const S=await X8(20);s(S.data)}catch(S){g("فشل في تحميل الصور المتحركة"),console.error("Error loading trending GIFs:",S)}finally{d(!1)}},v=async S=>{if(!S.trim()){_();return}d(!0),g("");try{const b=await Y8(S,20);s(b.data)}catch(b){g("فشل في البحث عن الصور المتحركة"),console.error("Error searching GIFs:",b)}finally{d(!1)}},T=S=>{S.preventDefault(),v(o)},A=S=>{l(S),v(S)};return m.jsx(ka,{open:n,onOpenChange:e,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh]",dir:"rtl",children:[m.jsx(Pa,{children:m.jsxs(Da,{className:"flex items-center justify-between",children:[m.jsx("span",{children:"اختر صورة متحركة"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:e,children:m.jsx(Aa,{className:"w-4 h-4"})})]})}),m.jsxs("form",{onSubmit:T,className:"flex gap-2",children:[m.jsx(ln,{value:o,onChange:S=>l(S.target.value),placeholder:"ابحث عن صورة متحركة...",className:"bg-gray-800 border-gray-600 text-white",dir:"rtl"}),m.jsx(ue,{type:"submit",size:"sm",className:"bg-green-600 hover:bg-green-700",children:m.jsx(yp,{className:"w-4 h-4"})})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs(ue,{variant:"outline",size:"sm",onClick:_,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[m.jsx(TC,{className:"w-3 h-3 ml-1"}),"الرائج"]}),Z8.slice(0,4).map((S,b)=>m.jsx(ue,{variant:"outline",size:"sm",onClick:()=>A(J8[b]),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:S},S))]}),p&&m.jsx("div",{className:"text-red-400 text-sm text-center py-2",children:p}),m.jsx(a0,{className:"h-[400px]",children:u?m.jsx("div",{className:"flex items-center justify-center h-40",children:m.jsx("div",{className:"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})}):r.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:[m.jsx(TC,{className:"w-12 h-12 mb-2"}),m.jsx("p",{children:"لم يتم العثور على صور متحركة"})]}):m.jsx("div",{className:"grid grid-cols-2 gap-2 p-2",children:r.map(S=>m.jsxs("div",{className:"relative cursor-pointer rounded-lg overflow-hidden hover:scale-105 transition-transform",onClick:()=>t(S),children:[m.jsx("img",{src:S.images.fixed_height.url,alt:S.title,className:"w-full h-auto object-cover",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200"})]},S.id))})}),m.jsx("div",{className:"text-center text-xs text-gray-500",children:"مدعوم بواسطة GIPHY"})]})})}const t7=n=>(typeof n=="number"?new Date(n):new Date(n)).toLocaleTimeString("ar",{hour:"2-digit",minute:"2-digit"});function n7({user:n,onBack:e,currentUserId:t}){const[r,s]=I.useState(""),[o,l]=I.useState([]),[u,d]=I.useState(null),[p,g]=I.useState(!1),_=I.useRef(null),v=()=>{_.current?.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{(async()=>{if(t&&n.id){const B=await W9(t,n.id);d(B)}})()},[t,n.id]),I.useEffect(()=>{if(!u)return;const U=G9(u,B=>{l(B)});return()=>U()},[u]),I.useEffect(()=>{v()},[o]);const T=async()=>{if(r.trim()&&u){const U={content:r.trim(),senderId:t,isRead:!1};await yC(u,U),s("")}},A=U=>{U.key==="Enter"&&T()},S=async U=>{if(u){const B={content:`[GIF] ${U.images.fixed_height.url}`,senderId:t,isRead:!1};await yC(u,B),g(!1)}},b=()=>{console.log("Open photo/video picker")},j=U=>{if(U.content.startsWith("[GIF] ")){const B=U.content.replace("[GIF] ","");return m.jsx("div",{className:"rounded-lg overflow-hidden max-w-[200px]",children:m.jsx("img",{src:B,alt:"GIF",className:"w-full h-auto"})})}return m.jsx("p",{className:"leading-relaxed",children:U.content})};return m.jsxs("div",{className:"fixed inset-0 z-[60] min-h-screen bg-gradient-to-b from-gray-900 to-black flex flex-col",dir:"rtl",children:[m.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-sm border-b border-gray-800 p-4 flex items-center gap-3",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:m.jsx(L_,{className:"w-5 h-5"})}),m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-10 h-10",children:[m.jsx(ar,{src:n.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:n.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-1 -left-1 w-3 h-3 rounded-full border-2 border-gray-900 ${n.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-white font-medium",children:n.displayName}),m.jsx("p",{className:"text-gray-400 text-sm",children:n.isOnline?"متصل":n.lastSeen||"آخر ظهور مؤخراً"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ue,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:m.jsx(kz,{className:"w-5 h-5"})}),m.jsx(ue,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:m.jsx(Yz,{className:"w-5 h-5"})}),m.jsx(ue,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:m.jsx($w,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.length===0?m.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-20",children:[m.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:m.jsx(Ea,{className:"w-8 h-8 text-gray-400"})}),m.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"بداية المحادثة"}),m.jsxs("p",{className:"text-gray-500 text-sm",children:["أرسل رسالة لبدء المحادثة مع ",n.displayName]})]}):o.map(U=>{const B=U.senderId===t;return m.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${B?"bg-green-600 text-white":"bg-gray-700 text-white"}`,children:[j(U),m.jsxs("div",{className:`flex items-center gap-1 mt-1 ${B?"justify-end":"justify-start"}`,children:[m.jsx("span",{className:"text-xs opacity-70",children:t7(U.timestamp)}),B&&m.jsx("div",{className:`w-2 h-2 rounded-full ${U.isRead?"bg-blue-400":"bg-gray-400"}`})]})]})},U.id)}),m.jsx("div",{ref:_})]}),m.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border-t border-gray-700 p-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:b,className:"text-gray-400 hover:text-white",children:m.jsx(gp,{className:"w-5 h-5"})}),m.jsxs("div",{className:"flex-1 bg-gray-700 rounded-full flex items-center px-4 py-2",children:[m.jsx(ln,{value:r,onChange:U=>s(U.target.value),onKeyPress:A,placeholder:"اكتب رسالة...",className:"flex-1 bg-transparent border-none text-white placeholder-gray-400 focus:ring-0",dir:"rtl"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>g(!0),className:"text-gray-400 hover:text-white ml-2",children:m.jsx(jk,{className:"w-5 h-5"})})]}),m.jsx(ue,{onClick:T,disabled:!r.trim(),className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2",children:m.jsx(Ea,{className:"w-4 h-4"})})]})}),m.jsx(e7,{isOpen:p,onClose:()=>g(!1),onSelectGif:S})]})}function r7({stories:n,currentStoryIndex:e,currentContentIndex:t,onClose:r,onNext:s,onPrevious:o,onReply:l}){const[u,d]=I.useState(0),[p,g]=I.useState(""),[_,v]=I.useState(!1),T=n[e],A=T?.stories[t];I.useEffect(()=>{d(0);const b=setInterval(()=>{d(j=>j>=100?(s(),0):j+2)},100);return()=>clearInterval(b)},[e,t,s]);const S=()=>{p.trim()&&(l(T.id,p),g(""),v(!1))};return!T||!A?null:m.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[m.jsx("div",{className:"absolute top-4 left-4 right-4 flex gap-1 z-10",children:T.stories.map((b,j)=>m.jsx("div",{className:"flex-1 h-1 bg-gray-600 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:j<t?"100%":j===t?`${u}%`:"0%"}})},j))}),m.jsxs("div",{className:"absolute top-8 left-4 right-4 flex items-center justify-between z-10 mt-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(or,{className:"w-10 h-10 ring-2 ring-white",children:[m.jsx(ar,{src:T.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:T.displayName.charAt(0)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-white font-medium",children:T.displayName}),m.jsx("p",{className:"text-gray-300 text-sm",children:A.timestamp})]})]}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:r,className:"text-white hover:bg-white/20",children:m.jsx(Aa,{className:"w-6 h-6"})})]}),m.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[A.type==="image"?m.jsx("img",{src:A.content,alt:"Story",className:"max-w-full max-h-full object-contain"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{backgroundColor:A.backgroundColor||"#1f2937"},children:m.jsx("p",{className:"text-white text-center text-xl leading-relaxed max-w-md",children:A.content})}),m.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full cursor-pointer z-20",onClick:o}),m.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full cursor-pointer z-20",onClick:s})]}),m.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:_?m.jsxs("div",{className:"flex items-center gap-2 bg-black/50 rounded-full p-2",children:[m.jsx(ln,{value:p,onChange:b=>g(b.target.value),placeholder:`Reply to ${T.displayName}...`,className:"flex-1 bg-transparent border-none text-white placeholder-gray-300 focus:ring-0",onKeyPress:b=>b.key==="Enter"&&S()}),m.jsx(ue,{onClick:S,disabled:!p.trim(),className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2",children:m.jsx(Ea,{className:"w-4 h-4"})})]}):m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(ue,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:m.jsx(nc,{className:"w-5 h-5"})}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:()=>v(!0),className:"text-white hover:bg-white/20",children:m.jsx(Ea,{className:"w-5 h-5"})})]})}),e>0&&m.jsx(ue,{variant:"ghost",size:"sm",onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-30",children:m.jsx(lz,{className:"w-6 h-6"})}),e<n.length-1&&m.jsx(ue,{variant:"ghost",size:"sm",onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-30",children:m.jsx(uz,{className:"w-6 h-6"})})]})}function s7({isOpen:n,onClose:e,postId:t,comments:r,onAddComment:s,onLikeComment:o,onReplyToComment:l}){const[u,d]=I.useState(""),[p,g]=I.useState(null),[_,v]=I.useState(""),T=()=>{u.trim()&&(s(t,u),d(""))},A=b=>{_.trim()&&l&&(l(b,_),v(""),g(null))},S=({comment:b,isReply:j=!1})=>m.jsxs("div",{className:`flex gap-3 ${j?"ml-8 mt-2":"mb-4"}`,children:[m.jsxs(or,{className:"w-8 h-8",children:[m.jsx(ar,{src:b.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white text-sm",children:b.displayName.charAt(0)})]}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"bg-gray-800/50 rounded-2xl px-3 py-2",children:[m.jsx("p",{className:"text-white font-medium text-sm",children:b.displayName}),m.jsx("p",{className:"text-gray-100 text-sm leading-relaxed mt-1",children:b.content})]}),m.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[m.jsx("span",{children:b.timestamp}),m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>o&&o(b.id),className:`p-0 h-auto text-xs ${b.isLiked?"text-red-400":"text-gray-400 hover:text-red-400"}`,children:[m.jsx(nc,{className:`w-3 h-3 mr-1 ${b.isLiked?"fill-current":""}`}),b.likes>0&&b.likes]}),!j&&m.jsxs(ue,{variant:"ghost",size:"sm",onClick:()=>g(b.id),className:"p-0 h-auto text-xs text-gray-400 hover:text-white",children:[m.jsx(Dz,{className:"w-3 h-3 mr-1"}),"Reply"]})]}),p===b.id&&m.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[m.jsx(ln,{value:_,onChange:U=>v(U.target.value),placeholder:`Reply to ${b.displayName}...`,className:"flex-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 text-sm",onKeyPress:U=>U.key==="Enter"&&A(b.id)}),m.jsx(ue,{onClick:()=>A(b.id),disabled:!_.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 text-sm",children:m.jsx(Ea,{className:"w-3 h-3"})})]}),b.replies&&b.replies.map(U=>m.jsx(S,{comment:U,isReply:!0},U.id))]})]});return m.jsx(ka,{open:n,onOpenChange:e,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh] p-0",children:[m.jsxs(Pa,{className:"p-4 border-b border-gray-700",children:[m.jsx(Da,{className:"text-center",children:"Comments"}),m.jsx(vc,{className:"text-center text-gray-400",children:"Join the conversation and share your thoughts"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:m.jsx(Aa,{className:"w-5 h-5"})})]}),m.jsx(a0,{className:"flex-1 p-4 max-h-[400px]",children:r.length===0?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("p",{className:"text-gray-400",children:"No comments yet"}),m.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Be the first to comment!"})]}):r.map(b=>m.jsx(S,{comment:b},b.id))}),m.jsx("div",{className:"p-4 border-t border-gray-700",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(or,{className:"w-8 h-8",children:[m.jsx(ar,{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop&crop=face"}),m.jsx(lr,{className:"bg-gray-700 text-white",children:"You"})]}),m.jsx(ln,{value:u,onChange:b=>d(b.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-800 border-gray-600 text-white placeholder-gray-400",onKeyPress:b=>b.key==="Enter"&&T()}),m.jsx(ue,{onClick:T,disabled:!u.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:m.jsx(Ea,{className:"w-4 h-4"})})]})})]})})}function i7(n){const e=I.useRef({value:n,previous:n});return I.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function JN(n){const[e,t]=I.useState(void 0);return xr(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let l,u;if("borderBoxSize"in o){const d=o.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,u=p.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Tm="Checkbox",[o7]=pi(Tm),[a7,l0]=o7(Tm);function l7(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:o,form:l,name:u,onCheckedChange:d,required:p,value:g="on",internal_do_not_use_render:_}=n,[v,T]=_m({prop:t,defaultProp:s??!1,onChange:d,caller:Tm}),[A,S]=I.useState(null),[b,j]=I.useState(null),U=I.useRef(!1),B=A?!!l||!!A.closest("form"):!0,G={checked:v,disabled:o,setChecked:T,control:A,setControl:S,name:u,form:l,value:g,hasConsumerStoppedPropagationRef:U,required:p,defaultChecked:co(s)?!1:s,isFormControl:B,bubbleInput:b,setBubbleInput:j};return m.jsx(a7,{scope:e,...G,children:c7(_)?_(G):r})}var ZN="CheckboxTrigger",e1=I.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:o,value:l,disabled:u,checked:d,required:p,setControl:g,setChecked:_,hasConsumerStoppedPropagationRef:v,isFormControl:T,bubbleInput:A}=l0(ZN,n),S=Et(s,g),b=I.useRef(d);return I.useEffect(()=>{const j=o?.form;if(j){const U=()=>_(b.current);return j.addEventListener("reset",U),()=>j.removeEventListener("reset",U)}},[o,_]),m.jsx(rt.button,{type:"button",role:"checkbox","aria-checked":co(d)?"mixed":d,"aria-required":p,"data-state":o1(d),"data-disabled":u?"":void 0,disabled:u,value:l,...r,ref:S,onKeyDown:Le(e,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Le(t,j=>{_(U=>co(U)?!0:!U),A&&T&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})})});e1.displayName=ZN;var t1=I.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:o,required:l,disabled:u,value:d,onCheckedChange:p,form:g,..._}=n;return m.jsx(l7,{__scopeCheckbox:t,checked:s,defaultChecked:o,disabled:u,required:l,onCheckedChange:p,name:r,form:g,value:d,internal_do_not_use_render:({isFormControl:v})=>m.jsxs(m.Fragment,{children:[m.jsx(e1,{..._,ref:e,__scopeCheckbox:t}),v&&m.jsx(i1,{__scopeCheckbox:t})]})})});t1.displayName=Tm;var n1="CheckboxIndicator",r1=I.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,o=l0(n1,t);return m.jsx(cr,{present:r||co(o.checked)||o.checked===!0,children:m.jsx(rt.span,{"data-state":o1(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});r1.displayName=n1;var s1="CheckboxBubbleInput",i1=I.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:l,required:u,disabled:d,name:p,value:g,form:_,bubbleInput:v,setBubbleInput:T}=l0(s1,n),A=Et(t,T),S=i7(o),b=JN(r);I.useEffect(()=>{const U=v;if(!U)return;const B=window.HTMLInputElement.prototype,X=Object.getOwnPropertyDescriptor(B,"checked").set,ne=!s.current;if(S!==o&&X){const P=new Event("click",{bubbles:ne});U.indeterminate=co(o),X.call(U,co(o)?!1:o),U.dispatchEvent(P)}},[v,S,o,s]);const j=I.useRef(co(o)?!1:o);return m.jsx(rt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??j.current,required:u,disabled:d,name:p,value:g,form:_,...e,tabIndex:-1,ref:A,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});i1.displayName=s1;function c7(n){return typeof n=="function"}function co(n){return n==="indeterminate"}function o1(n){return co(n)?"indeterminate":n?"checked":"unchecked"}function u7({className:n,...e}){return m.jsx(t1,{"data-slot":"checkbox",className:Lt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:m.jsx(r1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(oz,{className:"size-3.5"})})})}function d7({isOpen:n,onClose:e,postId:t,users:r,onShare:s}){const[o,l]=I.useState([]),[u,d]=I.useState(""),[p,g]=I.useState(""),_=r.filter(S=>S.displayName.toLowerCase().includes(u.toLowerCase())||S.username.toLowerCase().includes(u.toLowerCase())),v=S=>{l(b=>b.includes(S)?b.filter(j=>j!==S):[...b,S])},T=()=>{o.length>0&&(s(t,o,p||void 0),l([]),g(""),d(""),e())},A=()=>{l([]),g(""),d(""),e()};return m.jsx(ka,{open:n,onOpenChange:A,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh] p-0",children:[m.jsxs(Pa,{className:"p-4 border-b border-gray-700",children:[m.jsx(Da,{className:"text-center",children:"Share Post"}),m.jsx(vc,{className:"text-center text-gray-400",children:"Share this post with your friends and connections"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:A,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:m.jsx(Aa,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"p-4 border-b border-gray-700",children:m.jsxs("div",{className:"relative",children:[m.jsx(yp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx(ln,{value:u,onChange:S=>d(S.target.value),placeholder:"Search users...",className:"pl-10 bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]})}),m.jsx(a0,{className:"flex-1 max-h-[300px]",children:m.jsxs("div",{className:"p-4 space-y-3",children:[_.map(S=>m.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-800/50",children:[m.jsx(u7,{checked:o.includes(S.id),onCheckedChange:()=>v(S.id),className:"border-gray-600"}),m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-10 h-10",children:[m.jsx(ar,{src:S.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white",children:S.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-gray-900 ${S.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-white font-medium",children:S.displayName}),m.jsxs("p",{className:"text-gray-400 text-sm",children:["@",S.username]})]})]},S.id)),_.length===0&&m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-gray-400",children:"No users found"})})]})}),o.length>0&&m.jsx("div",{className:"px-4 py-2 bg-gray-800/50",children:m.jsxs("p",{className:"text-sm text-gray-300",children:[o.length," user",o.length!==1?"s":""," selected"]})}),m.jsxs("div",{className:"p-4 border-t border-gray-700",children:[m.jsx(ln,{value:p,onChange:S=>g(S.target.value),placeholder:"Add a message (optional)...",className:"mb-3 bg-gray-800 border-gray-600 text-white placeholder-gray-400"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ue,{variant:"outline",onClick:A,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),m.jsxs(ue,{onClick:T,disabled:o.length===0,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[m.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})]})})}function a1(n){const e=n+"CollectionProvider",[t,r]=pi(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:b,children:j}=S,U=Ki.useRef(null),B=Ki.useRef(new Map).current;return m.jsx(s,{scope:b,itemMap:B,collectionRef:U,children:j})};l.displayName=e;const u=n+"CollectionSlot",d=rc(u),p=Ki.forwardRef((S,b)=>{const{scope:j,children:U}=S,B=o(u,j),G=Et(b,B.collectionRef);return m.jsx(d,{ref:G,children:U})});p.displayName=u;const g=n+"CollectionItemSlot",_="data-radix-collection-item",v=rc(g),T=Ki.forwardRef((S,b)=>{const{scope:j,children:U,...B}=S,G=Ki.useRef(null),X=Et(b,G),ne=o(g,j);return Ki.useEffect(()=>(ne.itemMap.set(G,{ref:G,...B}),()=>void ne.itemMap.delete(G))),m.jsx(v,{[_]:"",ref:X,children:U})});T.displayName=g;function A(S){const b=o(n+"CollectionConsumer",S);return Ki.useCallback(()=>{const U=b.collectionRef.current;if(!U)return[];const B=Array.from(U.querySelectorAll(`[${_}]`));return Array.from(b.itemMap.values()).sort((ne,P)=>B.indexOf(ne.ref.current)-B.indexOf(P.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:p,ItemSlot:T},A,r]}const h7=["top","right","bottom","left"],wo=Math.min,Zn=Math.max,Ep=Math.round,mf=Math.floor,ws=n=>({x:n,y:n}),f7={left:"right",right:"left",bottom:"top",top:"bottom"},p7={start:"end",end:"start"};function B_(n,e,t){return Zn(n,wo(e,t))}function ci(n,e){return typeof n=="function"?n(e):n}function ui(n){return n.split("-")[0]}function wc(n){return n.split("-")[1]}function c0(n){return n==="x"?"y":"x"}function u0(n){return n==="y"?"height":"width"}const m7=new Set(["top","bottom"]);function hs(n){return m7.has(ui(n))?"y":"x"}function d0(n){return c0(hs(n))}function g7(n,e,t){t===void 0&&(t=!1);const r=wc(n),s=d0(n),o=u0(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=xp(l)),[l,xp(l)]}function y7(n){const e=xp(n);return[$_(n),e,$_(e)]}function $_(n){return n.replace(/start|end/g,e=>p7[e])}const GC=["left","right"],KC=["right","left"],_7=["top","bottom"],v7=["bottom","top"];function w7(n,e,t){switch(n){case"top":case"bottom":return t?e?KC:GC:e?GC:KC;case"left":case"right":return e?_7:v7;default:return[]}}function E7(n,e,t,r){const s=wc(n);let o=w7(ui(n),t==="start",r);return s&&(o=o.map(l=>l+"-"+s),e&&(o=o.concat(o.map($_)))),o}function xp(n){return n.replace(/left|right|bottom|top/g,e=>f7[e])}function x7(n){return{top:0,right:0,bottom:0,left:0,...n}}function l1(n){return typeof n!="number"?x7(n):{top:n,right:n,bottom:n,left:n}}function Tp(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function QC(n,e,t){let{reference:r,floating:s}=n;const o=hs(e),l=d0(e),u=u0(l),d=ui(e),p=o==="y",g=r.x+r.width/2-s.width/2,_=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let T;switch(d){case"top":T={x:g,y:r.y-s.height};break;case"bottom":T={x:g,y:r.y+r.height};break;case"right":T={x:r.x+r.width,y:_};break;case"left":T={x:r.x-s.width,y:_};break;default:T={x:r.x,y:r.y}}switch(wc(e)){case"start":T[l]-=v*(t&&p?-1:1);break;case"end":T[l]+=v*(t&&p?-1:1);break}return T}const T7=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:l}=t,u=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:_}=QC(p,r,d),v=r,T={},A=0;for(let S=0;S<u.length;S++){const{name:b,fn:j}=u[S],{x:U,y:B,data:G,reset:X}=await j({x:g,y:_,initialPlacement:r,placement:v,strategy:s,middlewareData:T,rects:p,platform:l,elements:{reference:n,floating:e}});g=U??g,_=B??_,T={...T,[b]:{...T[b],...G}},X&&A<=50&&(A++,typeof X=="object"&&(X.placement&&(v=X.placement),X.rects&&(p=X.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):X.rects),{x:g,y:_}=QC(p,v,d)),S=-1)}return{x:g,y:_,placement:v,strategy:s,middlewareData:T}};async function cd(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:l,elements:u,strategy:d}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:_="floating",altBoundary:v=!1,padding:T=0}=ci(e,n),A=l1(T),b=u[v?_==="floating"?"reference":"floating":_],j=Tp(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(b)))==null||t?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:d})),U=_==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),G=await(o.isElement==null?void 0:o.isElement(B))?await(o.getScale==null?void 0:o.getScale(B))||{x:1,y:1}:{x:1,y:1},X=Tp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:U,offsetParent:B,strategy:d}):U);return{top:(j.top-X.top+A.top)/G.y,bottom:(X.bottom-j.bottom+A.bottom)/G.y,left:(j.left-X.left+A.left)/G.x,right:(X.right-j.right+A.right)/G.x}}const I7=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:l,elements:u,middlewareData:d}=e,{element:p,padding:g=0}=ci(n,e)||{};if(p==null)return{};const _=l1(g),v={x:t,y:r},T=d0(s),A=u0(T),S=await l.getDimensions(p),b=T==="y",j=b?"top":"left",U=b?"bottom":"right",B=b?"clientHeight":"clientWidth",G=o.reference[A]+o.reference[T]-v[T]-o.floating[A],X=v[T]-o.reference[T],ne=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let P=ne?ne[B]:0;(!P||!await(l.isElement==null?void 0:l.isElement(ne)))&&(P=u.floating[B]||o.floating[A]);const R=G/2-X/2,N=P/2-S[A]/2-1,L=wo(_[j],N),O=wo(_[U],N),F=L,D=P-S[A]-O,Ie=P/2-S[A]/2+R,je=B_(F,Ie,D),Ce=!d.arrow&&wc(s)!=null&&Ie!==je&&o.reference[A]/2-(Ie<F?L:O)-S[A]/2<0,Se=Ce?Ie<F?Ie-F:Ie-D:0;return{[T]:v[T]+Se,data:{[T]:je,centerOffset:Ie-je-Se,...Ce&&{alignmentOffset:Se}},reset:Ce}}}),C7=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:d,elements:p}=e,{mainAxis:g=!0,crossAxis:_=!0,fallbackPlacements:v,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...b}=ci(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const j=ui(s),U=hs(u),B=ui(u)===u,G=await(d.isRTL==null?void 0:d.isRTL(p.floating)),X=v||(B||!S?[xp(u)]:y7(u)),ne=A!=="none";!v&&ne&&X.push(...E7(u,S,A,G));const P=[u,...X],R=await cd(e,b),N=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(g&&N.push(R[j]),_){const Ie=g7(s,l,G);N.push(R[Ie[0]],R[Ie[1]])}if(L=[...L,{placement:s,overflows:N}],!N.every(Ie=>Ie<=0)){var O,F;const Ie=(((O=o.flip)==null?void 0:O.index)||0)+1,je=P[Ie];if(je&&(!(_==="alignment"?U!==hs(je):!1)||L.every(W=>hs(W.placement)===U?W.overflows[0]>0:!0)))return{data:{index:Ie,overflows:L},reset:{placement:je}};let Ce=(F=L.filter(Se=>Se.overflows[0]<=0).sort((Se,W)=>Se.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!Ce)switch(T){case"bestFit":{var D;const Se=(D=L.filter(W=>{if(ne){const J=hs(W.placement);return J===U||J==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(J=>J>0).reduce((J,oe)=>J+oe,0)]).sort((W,J)=>W[1]-J[1])[0])==null?void 0:D[0];Se&&(Ce=Se);break}case"initialPlacement":Ce=u;break}if(s!==Ce)return{reset:{placement:Ce}}}return{}}}};function YC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function XC(n){return h7.some(e=>n[e]>=0)}const S7=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ci(n,e);switch(r){case"referenceHidden":{const o=await cd(e,{...s,elementContext:"reference"}),l=YC(o,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:XC(l)}}}case"escaped":{const o=await cd(e,{...s,altBoundary:!0}),l=YC(o,t.floating);return{data:{escapedOffsets:l,escaped:XC(l)}}}default:return{}}}}},c1=new Set(["left","top"]);async function b7(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ui(t),u=wc(t),d=hs(t)==="y",p=c1.has(l)?-1:1,g=o&&d?-1:1,_=ci(e,n);let{mainAxis:v,crossAxis:T,alignmentAxis:A}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return u&&typeof A=="number"&&(T=u==="end"?A*-1:A),d?{x:T*g,y:v*p}:{x:v*p,y:T*g}}const R7=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:l,middlewareData:u}=e,d=await b7(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:l}}}}},A7=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:b=>{let{x:j,y:U}=b;return{x:j,y:U}}},...d}=ci(n,e),p={x:t,y:r},g=await cd(e,d),_=hs(ui(s)),v=c0(_);let T=p[v],A=p[_];if(o){const b=v==="y"?"top":"left",j=v==="y"?"bottom":"right",U=T+g[b],B=T-g[j];T=B_(U,T,B)}if(l){const b=_==="y"?"top":"left",j=_==="y"?"bottom":"right",U=A+g[b],B=A-g[j];A=B_(U,A,B)}const S=u.fn({...e,[v]:T,[_]:A});return{...S,data:{x:S.x-t,y:S.y-r,enabled:{[v]:o,[_]:l}}}}}},k7=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:l}=e,{offset:u=0,mainAxis:d=!0,crossAxis:p=!0}=ci(n,e),g={x:t,y:r},_=hs(s),v=c0(_);let T=g[v],A=g[_];const S=ci(u,e),b=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const B=v==="y"?"height":"width",G=o.reference[v]-o.floating[B]+b.mainAxis,X=o.reference[v]+o.reference[B]-b.mainAxis;T<G?T=G:T>X&&(T=X)}if(p){var j,U;const B=v==="y"?"width":"height",G=c1.has(ui(s)),X=o.reference[_]-o.floating[B]+(G&&((j=l.offset)==null?void 0:j[_])||0)+(G?0:b.crossAxis),ne=o.reference[_]+o.reference[B]+(G?0:((U=l.offset)==null?void 0:U[_])||0)-(G?b.crossAxis:0);A<X?A=X:A>ne&&(A=ne)}return{[v]:T,[_]:A}}}},N7=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:l,elements:u}=e,{apply:d=()=>{},...p}=ci(n,e),g=await cd(e,p),_=ui(s),v=wc(s),T=hs(s)==="y",{width:A,height:S}=o.floating;let b,j;_==="top"||_==="bottom"?(b=_,j=v===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(j=_,b=v==="end"?"top":"bottom");const U=S-g.top-g.bottom,B=A-g.left-g.right,G=wo(S-g[b],U),X=wo(A-g[j],B),ne=!e.middlewareData.shift;let P=G,R=X;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=B),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=U),ne&&!v){const L=Zn(g.left,0),O=Zn(g.right,0),F=Zn(g.top,0),D=Zn(g.bottom,0);T?R=A-2*(L!==0||O!==0?L+O:Zn(g.left,g.right)):P=S-2*(F!==0||D!==0?F+D:Zn(g.top,g.bottom))}await d({...e,availableWidth:R,availableHeight:P});const N=await l.getDimensions(u.floating);return A!==N.width||S!==N.height?{reset:{rects:!0}}:{}}}};function Im(){return typeof window<"u"}function Ec(n){return u1(n)?(n.nodeName||"").toLowerCase():"#document"}function sr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function bs(n){var e;return(e=(u1(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function u1(n){return Im()?n instanceof Node||n instanceof sr(n).Node:!1}function Br(n){return Im()?n instanceof Element||n instanceof sr(n).Element:!1}function Ts(n){return Im()?n instanceof HTMLElement||n instanceof sr(n).HTMLElement:!1}function JC(n){return!Im()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof sr(n).ShadowRoot}const P7=new Set(["inline","contents"]);function Pd(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=$r(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!P7.has(s)}const D7=new Set(["table","td","th"]);function O7(n){return D7.has(Ec(n))}const M7=[":popover-open",":modal"];function Cm(n){return M7.some(e=>{try{return n.matches(e)}catch{return!1}})}const L7=["transform","translate","scale","rotate","perspective"],j7=["transform","translate","scale","rotate","perspective","filter"],V7=["paint","layout","strict","content"];function h0(n){const e=f0(),t=Br(n)?$r(n):n;return L7.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||j7.some(r=>(t.willChange||"").includes(r))||V7.some(r=>(t.contain||"").includes(r))}function F7(n){let e=Eo(n);for(;Ts(e)&&!ic(e);){if(h0(e))return e;if(Cm(e))return null;e=Eo(e)}return null}function f0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const U7=new Set(["html","body","#document"]);function ic(n){return U7.has(Ec(n))}function $r(n){return sr(n).getComputedStyle(n)}function Sm(n){return Br(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Eo(n){if(Ec(n)==="html")return n;const e=n.assignedSlot||n.parentNode||JC(n)&&n.host||bs(n);return JC(e)?e.host:e}function d1(n){const e=Eo(n);return ic(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ts(e)&&Pd(e)?e:d1(e)}function ud(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=d1(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),l=sr(s);if(o){const u=W_(l);return e.concat(l,l.visualViewport||[],Pd(s)?s:[],u&&t?ud(u):[])}return e.concat(s,ud(s,[],t))}function W_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function h1(n){const e=$r(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ts(n),o=s?n.offsetWidth:t,l=s?n.offsetHeight:r,u=Ep(t)!==o||Ep(r)!==l;return u&&(t=o,r=l),{width:t,height:r,$:u}}function p0(n){return Br(n)?n:n.contextElement}function Bl(n){const e=p0(n);if(!Ts(e))return ws(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=h1(e);let l=(o?Ep(t.width):t.width)/r,u=(o?Ep(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const z7=ws(0);function f1(n){const e=sr(n);return!f0()||!e.visualViewport?z7:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function B7(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==sr(n)?!1:e}function Ta(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=p0(n);let l=ws(1);e&&(r?Br(r)&&(l=Bl(r)):l=Bl(n));const u=B7(o,t,r)?f1(o):ws(0);let d=(s.left+u.x)/l.x,p=(s.top+u.y)/l.y,g=s.width/l.x,_=s.height/l.y;if(o){const v=sr(o),T=r&&Br(r)?sr(r):r;let A=v,S=W_(A);for(;S&&r&&T!==A;){const b=Bl(S),j=S.getBoundingClientRect(),U=$r(S),B=j.left+(S.clientLeft+parseFloat(U.paddingLeft))*b.x,G=j.top+(S.clientTop+parseFloat(U.paddingTop))*b.y;d*=b.x,p*=b.y,g*=b.x,_*=b.y,d+=B,p+=G,A=sr(S),S=W_(A)}}return Tp({width:g,height:_,x:d,y:p})}function bm(n,e){const t=Sm(n).scrollLeft;return e?e.left+t:Ta(bs(n)).left+t}function p1(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-bm(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function $7(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",l=bs(r),u=e?Cm(e.floating):!1;if(r===l||u&&o)return t;let d={scrollLeft:0,scrollTop:0},p=ws(1);const g=ws(0),_=Ts(r);if((_||!_&&!o)&&((Ec(r)!=="body"||Pd(l))&&(d=Sm(r)),Ts(r))){const T=Ta(r);p=Bl(r),g.x=T.x+r.clientLeft,g.y=T.y+r.clientTop}const v=l&&!_&&!o?p1(l,d):ws(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-d.scrollLeft*p.x+g.x+v.x,y:t.y*p.y-d.scrollTop*p.y+g.y+v.y}}function W7(n){return Array.from(n.getClientRects())}function H7(n){const e=bs(n),t=Sm(n),r=n.ownerDocument.body,s=Zn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Zn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+bm(n);const u=-t.scrollTop;return $r(r).direction==="rtl"&&(l+=Zn(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:l,y:u}}const ZC=25;function q7(n,e){const t=sr(n),r=bs(n),s=t.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;const g=f0();(!g||g&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const p=bm(r);if(p<=0){const g=r.ownerDocument,_=g.body,v=getComputedStyle(_),T=g.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,A=Math.abs(r.clientWidth-_.clientWidth-T);A<=ZC&&(o-=A)}else p<=ZC&&(o+=p);return{width:o,height:l,x:u,y:d}}const G7=new Set(["absolute","fixed"]);function K7(n,e){const t=Ta(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=Ts(n)?Bl(n):ws(1),l=n.clientWidth*o.x,u=n.clientHeight*o.y,d=s*o.x,p=r*o.y;return{width:l,height:u,x:d,y:p}}function eS(n,e,t){let r;if(e==="viewport")r=q7(n,t);else if(e==="document")r=H7(bs(n));else if(Br(e))r=K7(e,t);else{const s=f1(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Tp(r)}function m1(n,e){const t=Eo(n);return t===e||!Br(t)||ic(t)?!1:$r(t).position==="fixed"||m1(t,e)}function Q7(n,e){const t=e.get(n);if(t)return t;let r=ud(n,[],!1).filter(u=>Br(u)&&Ec(u)!=="body"),s=null;const o=$r(n).position==="fixed";let l=o?Eo(n):n;for(;Br(l)&&!ic(l);){const u=$r(l),d=h0(l);!d&&u.position==="fixed"&&(s=null),(o?!d&&!s:!d&&u.position==="static"&&!!s&&G7.has(s.position)||Pd(l)&&!d&&m1(n,l))?r=r.filter(g=>g!==l):s=u,l=Eo(l)}return e.set(n,r),r}function Y7(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?Cm(e)?[]:Q7(e,this._c):[].concat(t),r],u=l[0],d=l.reduce((p,g)=>{const _=eS(e,g,s);return p.top=Zn(_.top,p.top),p.right=wo(_.right,p.right),p.bottom=wo(_.bottom,p.bottom),p.left=Zn(_.left,p.left),p},eS(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function X7(n){const{width:e,height:t}=h1(n);return{width:e,height:t}}function J7(n,e,t){const r=Ts(e),s=bs(e),o=t==="fixed",l=Ta(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const d=ws(0);function p(){d.x=bm(s)}if(r||!r&&!o)if((Ec(e)!=="body"||Pd(s))&&(u=Sm(e)),r){const T=Ta(e,!0,o,e);d.x=T.x+e.clientLeft,d.y=T.y+e.clientTop}else s&&p();o&&!r&&s&&p();const g=s&&!r&&!o?p1(s,u):ws(0),_=l.left+u.scrollLeft-d.x-g.x,v=l.top+u.scrollTop-d.y-g.y;return{x:_,y:v,width:l.width,height:l.height}}function Uy(n){return $r(n).position==="static"}function tS(n,e){if(!Ts(n)||$r(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return bs(n)===t&&(t=t.ownerDocument.body),t}function g1(n,e){const t=sr(n);if(Cm(n))return t;if(!Ts(n)){let s=Eo(n);for(;s&&!ic(s);){if(Br(s)&&!Uy(s))return s;s=Eo(s)}return t}let r=tS(n,e);for(;r&&O7(r)&&Uy(r);)r=tS(r,e);return r&&ic(r)&&Uy(r)&&!h0(r)?t:r||F7(n)||t}const Z7=async function(n){const e=this.getOffsetParent||g1,t=this.getDimensions,r=await t(n.floating);return{reference:J7(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eW(n){return $r(n).direction==="rtl"}const tW={convertOffsetParentRelativeRectToViewportRelativeRect:$7,getDocumentElement:bs,getClippingRect:Y7,getOffsetParent:g1,getElementRects:Z7,getClientRects:W7,getDimensions:X7,getScale:Bl,isElement:Br,isRTL:eW};function y1(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function nW(n,e){let t=null,r;const s=bs(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),o();const p=n.getBoundingClientRect(),{left:g,top:_,width:v,height:T}=p;if(u||e(),!v||!T)return;const A=mf(_),S=mf(s.clientWidth-(g+v)),b=mf(s.clientHeight-(_+T)),j=mf(g),B={rootMargin:-A+"px "+-S+"px "+-b+"px "+-j+"px",threshold:Zn(0,wo(1,d))||1};let G=!0;function X(ne){const P=ne[0].intersectionRatio;if(P!==d){if(!G)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!y1(p,n.getBoundingClientRect())&&l(),G=!1}try{t=new IntersectionObserver(X,{...B,root:s.ownerDocument})}catch{t=new IntersectionObserver(X,B)}t.observe(n)}return l(!0),o}function rW(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,p=p0(n),g=s||o?[...p?ud(p):[],...ud(e)]:[];g.forEach(j=>{s&&j.addEventListener("scroll",t,{passive:!0}),o&&j.addEventListener("resize",t)});const _=p&&u?nW(p,t):null;let v=-1,T=null;l&&(T=new ResizeObserver(j=>{let[U]=j;U&&U.target===p&&T&&(T.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var B;(B=T)==null||B.observe(e)})),t()}),p&&!d&&T.observe(p),T.observe(e));let A,S=d?Ta(n):null;d&&b();function b(){const j=Ta(n);S&&!y1(S,j)&&t(),S=j,A=requestAnimationFrame(b)}return t(),()=>{var j;g.forEach(U=>{s&&U.removeEventListener("scroll",t),o&&U.removeEventListener("resize",t)}),_?.(),(j=T)==null||j.disconnect(),T=null,d&&cancelAnimationFrame(A)}}const sW=R7,iW=A7,oW=C7,aW=N7,lW=S7,nS=I7,cW=k7,uW=(n,e,t)=>{const r=new Map,s={platform:tW,...t},o={...s.platform,_c:r};return T7(n,e,{...s,platform:o})};var dW=typeof document<"u",hW=function(){},kf=dW?I.useLayoutEffect:hW;function Ip(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Ip(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!Ip(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function _1(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function rS(n,e){const t=_1(n);return Math.round(e*t)/t}function zy(n){const e=I.useRef(n);return kf(()=>{e.current=n}),e}function fW(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:d,open:p}=n,[g,_]=I.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,T]=I.useState(r);Ip(v,r)||T(r);const[A,S]=I.useState(null),[b,j]=I.useState(null),U=I.useCallback(W=>{W!==ne.current&&(ne.current=W,S(W))},[]),B=I.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),G=o||A,X=l||b,ne=I.useRef(null),P=I.useRef(null),R=I.useRef(g),N=d!=null,L=zy(d),O=zy(s),F=zy(p),D=I.useCallback(()=>{if(!ne.current||!P.current)return;const W={placement:e,strategy:t,middleware:v};O.current&&(W.platform=O.current),uW(ne.current,P.current,W).then(J=>{const oe={...J,isPositioned:F.current!==!1};Ie.current&&!Ip(R.current,oe)&&(R.current=oe,Kw.flushSync(()=>{_(oe)}))})},[v,e,t,O,F]);kf(()=>{p===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,_(W=>({...W,isPositioned:!1})))},[p]);const Ie=I.useRef(!1);kf(()=>(Ie.current=!0,()=>{Ie.current=!1}),[]),kf(()=>{if(G&&(ne.current=G),X&&(P.current=X),G&&X){if(L.current)return L.current(G,X,D);D()}},[G,X,D,L,N]);const je=I.useMemo(()=>({reference:ne,floating:P,setReference:U,setFloating:B}),[U,B]),Ce=I.useMemo(()=>({reference:G,floating:X}),[G,X]),Se=I.useMemo(()=>{const W={position:t,left:0,top:0};if(!Ce.floating)return W;const J=rS(Ce.floating,g.x),oe=rS(Ce.floating,g.y);return u?{...W,transform:"translate("+J+"px, "+oe+"px)",..._1(Ce.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:oe}},[t,u,Ce.floating,g.x,g.y]);return I.useMemo(()=>({...g,update:D,refs:je,elements:Ce,floatingStyles:Se}),[g,D,je,Ce,Se])}const pW=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?nS({element:r.current,padding:s}).fn(t):{}:r?nS({element:r,padding:s}).fn(t):{}}}},mW=(n,e)=>({...sW(n),options:[n,e]}),gW=(n,e)=>({...iW(n),options:[n,e]}),yW=(n,e)=>({...cW(n),options:[n,e]}),_W=(n,e)=>({...oW(n),options:[n,e]}),vW=(n,e)=>({...aW(n),options:[n,e]}),wW=(n,e)=>({...lW(n),options:[n,e]}),EW=(n,e)=>({...pW(n),options:[n,e]});var xW="Arrow",v1=I.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return m.jsx(rt.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});v1.displayName=xW;var TW=v1,m0="Popper",[w1,E1]=pi(m0),[IW,x1]=w1(m0),T1=n=>{const{__scopePopper:e,children:t}=n,[r,s]=I.useState(null);return m.jsx(IW,{scope:e,anchor:r,onAnchorChange:s,children:t})};T1.displayName=m0;var I1="PopperAnchor",C1=I.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=x1(I1,t),l=I.useRef(null),u=Et(e,l),d=I.useRef(null);return I.useEffect(()=>{const p=d.current;d.current=r?.current||l.current,p!==d.current&&o.onAnchorChange(d.current)}),r?null:m.jsx(rt.div,{...s,ref:u})});C1.displayName=I1;var g0="PopperContent",[CW,SW]=w1(g0),S1=I.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:v=!1,updatePositionStrategy:T="optimized",onPlaced:A,...S}=n,b=x1(g0,t),[j,U]=I.useState(null),B=Et(e,he=>U(he)),[G,X]=I.useState(null),ne=JN(G),P=ne?.width??0,R=ne?.height??0,N=r+(o!=="center"?"-"+o:""),L=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},O=Array.isArray(p)?p:[p],F=O.length>0,D={padding:L,boundary:O.filter(RW),altBoundary:F},{refs:Ie,floatingStyles:je,placement:Ce,isPositioned:Se,middlewareData:W}=fW({strategy:"fixed",placement:N,whileElementsMounted:(...he)=>rW(...he,{animationFrame:T==="always"}),elements:{reference:b.anchor},middleware:[mW({mainAxis:s+R,alignmentAxis:l}),d&&gW({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?yW():void 0,...D}),d&&_W({...D}),vW({...D,apply:({elements:he,rects:Ue,availableWidth:Ye,availableHeight:xt})=>{const{width:kn,height:Nn}=Ue.reference,In=he.floating.style;In.setProperty("--radix-popper-available-width",`${Ye}px`),In.setProperty("--radix-popper-available-height",`${xt}px`),In.setProperty("--radix-popper-anchor-width",`${kn}px`),In.setProperty("--radix-popper-anchor-height",`${Nn}px`)}}),G&&EW({element:G,padding:u}),AW({arrowWidth:P,arrowHeight:R}),v&&wW({strategy:"referenceHidden",...D})]}),[J,oe]=A1(Ce),$=un(A);xr(()=>{Se&&$?.()},[Se,$]);const Z=W.arrow?.x,ge=W.arrow?.y,_e=W.arrow?.centerOffset!==0,[Ne,Pe]=I.useState();return xr(()=>{j&&Pe(window.getComputedStyle(j).zIndex)},[j]),m.jsx("div",{ref:Ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...je,transform:Se?je.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:m.jsx(CW,{scope:t,placedSide:J,onArrowChange:X,arrowX:Z,arrowY:ge,shouldHideArrow:_e,children:m.jsx(rt.div,{"data-side":J,"data-align":oe,...S,ref:B,style:{...S.style,animation:Se?void 0:"none"}})})})});S1.displayName=g0;var b1="PopperArrow",bW={top:"bottom",right:"left",bottom:"top",left:"right"},R1=I.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=SW(b1,r),l=bW[o.placedSide];return m.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:m.jsx(TW,{...s,ref:t,style:{...s.style,display:"block"}})})});R1.displayName=b1;function RW(n){return n!==null}var AW=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,u=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[p,g]=A1(t),_={start:"0%",center:"50%",end:"100%"}[g],v=(s.arrow?.x??0)+u/2,T=(s.arrow?.y??0)+d/2;let A="",S="";return p==="bottom"?(A=l?_:`${v}px`,S=`${-d}px`):p==="top"?(A=l?_:`${v}px`,S=`${r.floating.height+d}px`):p==="right"?(A=`${-d}px`,S=l?_:`${T}px`):p==="left"&&(A=`${r.floating.width+d}px`,S=l?_:`${T}px`),{data:{x:A,y:S}}}});function A1(n){const[e,t="center"]=n.split("-");return[e,t]}var kW=T1,NW=C1,PW=S1,DW=R1,By="rovingFocusGroup.onEntryFocus",OW={bubbles:!1,cancelable:!0},Dd="RovingFocusGroup",[H_,k1,MW]=a1(Dd),[LW,N1]=pi(Dd,[MW]),[jW,VW]=LW(Dd),P1=I.forwardRef((n,e)=>m.jsx(H_.Provider,{scope:n.__scopeRovingFocusGroup,children:m.jsx(H_.Slot,{scope:n.__scopeRovingFocusGroup,children:m.jsx(FW,{...n,ref:e})})}));P1.displayName=Dd;var FW=I.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,..._}=n,v=I.useRef(null),T=Et(e,v),A=r0(o),[S,b]=_m({prop:l,defaultProp:u??null,onChange:d,caller:Dd}),[j,U]=I.useState(!1),B=un(p),G=k1(t),X=I.useRef(!1),[ne,P]=I.useState(0);return I.useEffect(()=>{const R=v.current;if(R)return R.addEventListener(By,B),()=>R.removeEventListener(By,B)},[B]),m.jsx(jW,{scope:t,orientation:r,dir:A,loop:s,currentTabStopId:S,onItemFocus:I.useCallback(R=>b(R),[b]),onItemShiftTab:I.useCallback(()=>U(!0),[]),onFocusableItemAdd:I.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:I.useCallback(()=>P(R=>R-1),[]),children:m.jsx(rt.div,{tabIndex:j||ne===0?-1:0,"data-orientation":r,..._,ref:T,style:{outline:"none",...n.style},onMouseDown:Le(n.onMouseDown,()=>{X.current=!0}),onFocus:Le(n.onFocus,R=>{const N=!X.current;if(R.target===R.currentTarget&&N&&!j){const L=new CustomEvent(By,OW);if(R.currentTarget.dispatchEvent(L),!L.defaultPrevented){const O=G().filter(Ce=>Ce.focusable),F=O.find(Ce=>Ce.active),D=O.find(Ce=>Ce.id===S),je=[F,D,...O].filter(Boolean).map(Ce=>Ce.ref.current);M1(je,g)}}X.current=!1}),onBlur:Le(n.onBlur,()=>U(!1))})})}),D1="RovingFocusGroupItem",O1=I.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:l,...u}=n,d=Ul(),p=o||d,g=VW(D1,t),_=g.currentTabStopId===p,v=k1(t),{onFocusableItemAdd:T,onFocusableItemRemove:A,currentTabStopId:S}=g;return I.useEffect(()=>{if(r)return T(),()=>A()},[r,T,A]),m.jsx(H_.ItemSlot,{scope:t,id:p,focusable:r,active:s,children:m.jsx(rt.span,{tabIndex:_?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:Le(n.onMouseDown,b=>{r?g.onItemFocus(p):b.preventDefault()}),onFocus:Le(n.onFocus,()=>g.onItemFocus(p)),onKeyDown:Le(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){g.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const j=BW(b,g.orientation,g.dir);if(j!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let B=v().filter(G=>G.focusable).map(G=>G.ref.current);if(j==="last")B.reverse();else if(j==="prev"||j==="next"){j==="prev"&&B.reverse();const G=B.indexOf(b.currentTarget);B=g.loop?$W(B,G+1):B.slice(G+1)}setTimeout(()=>M1(B))}}),children:typeof l=="function"?l({isCurrentTabStop:_,hasTabStop:S!=null}):l})})});O1.displayName=D1;var UW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zW(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function BW(n,e,t){const r=zW(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return UW[r]}function M1(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function $W(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var WW=P1,HW=O1,q_=["Enter"," "],qW=["ArrowDown","PageUp","Home"],L1=["ArrowUp","PageDown","End"],GW=[...qW,...L1],KW={ltr:[...q_,"ArrowRight"],rtl:[...q_,"ArrowLeft"]},QW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Od="Menu",[dd,YW,XW]=a1(Od),[Oa,j1]=pi(Od,[XW,E1,N1]),Rm=E1(),V1=N1(),[JW,Ma]=Oa(Od),[ZW,Md]=Oa(Od),F1=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:o,modal:l=!0}=n,u=Rm(e),[d,p]=I.useState(null),g=I.useRef(!1),_=un(o),v=r0(s);return I.useEffect(()=>{const T=()=>{g.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>g.current=!1;return document.addEventListener("keydown",T,{capture:!0}),()=>{document.removeEventListener("keydown",T,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),m.jsx(kW,{...u,children:m.jsx(JW,{scope:e,open:t,onOpenChange:_,content:d,onContentChange:p,children:m.jsx(ZW,{scope:e,onClose:I.useCallback(()=>_(!1),[_]),isUsingKeyboardRef:g,dir:v,modal:l,children:r})})})};F1.displayName=Od;var eH="MenuAnchor",y0=I.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Rm(t);return m.jsx(NW,{...s,...r,ref:e})});y0.displayName=eH;var _0="MenuPortal",[tH,U1]=Oa(_0,{forceMount:void 0}),z1=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,o=Ma(_0,e);return m.jsx(tH,{scope:e,forceMount:t,children:m.jsx(cr,{present:t||o.open,children:m.jsx(Jw,{asChild:!0,container:s,children:r})})})};z1.displayName=_0;var wr="MenuContent",[nH,v0]=Oa(wr),B1=I.forwardRef((n,e)=>{const t=U1(wr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=Ma(wr,n.__scopeMenu),l=Md(wr,n.__scopeMenu);return m.jsx(dd.Provider,{scope:n.__scopeMenu,children:m.jsx(cr,{present:r||o.open,children:m.jsx(dd.Slot,{scope:n.__scopeMenu,children:l.modal?m.jsx(rH,{...s,ref:e}):m.jsx(sH,{...s,ref:e})})})})}),rH=I.forwardRef((n,e)=>{const t=Ma(wr,n.__scopeMenu),r=I.useRef(null),s=Et(e,r);return I.useEffect(()=>{const o=r.current;if(o)return vN(o)},[]),m.jsx(w0,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Le(n.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),sH=I.forwardRef((n,e)=>{const t=Ma(wr,n.__scopeMenu);return m.jsx(w0,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),iH=rc("MenuContent.ScrollLock"),w0=I.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:_,onInteractOutside:v,onDismiss:T,disableOutsideScroll:A,...S}=n,b=Ma(wr,t),j=Md(wr,t),U=Rm(t),B=V1(t),G=YW(t),[X,ne]=I.useState(null),P=I.useRef(null),R=Et(e,P,b.onContentChange),N=I.useRef(0),L=I.useRef(""),O=I.useRef(0),F=I.useRef(null),D=I.useRef("right"),Ie=I.useRef(0),je=A?Zw:I.Fragment,Ce=A?{as:iH,allowPinchZoom:!0}:void 0,Se=J=>{const oe=L.current+J,$=G().filter(he=>!he.disabled),Z=document.activeElement,ge=$.find(he=>he.ref.current===Z)?.textValue,_e=$.map(he=>he.textValue),Ne=yH(_e,oe,ge),Pe=$.find(he=>he.textValue===Ne)?.ref.current;(function he(Ue){L.current=Ue,window.clearTimeout(N.current),Ue!==""&&(N.current=window.setTimeout(()=>he(""),1e3))})(oe),Pe&&setTimeout(()=>Pe.focus())};I.useEffect(()=>()=>window.clearTimeout(N.current),[]),uN();const W=I.useCallback(J=>D.current===F.current?.side&&vH(J,F.current?.area),[]);return m.jsx(nH,{scope:t,searchRef:L,onItemEnter:I.useCallback(J=>{W(J)&&J.preventDefault()},[W]),onItemLeave:I.useCallback(J=>{W(J)||(P.current?.focus(),ne(null))},[W]),onTriggerLeave:I.useCallback(J=>{W(J)&&J.preventDefault()},[W]),pointerGraceTimerRef:O,onPointerGraceIntentChange:I.useCallback(J=>{F.current=J},[]),children:m.jsx(je,{...Ce,children:m.jsx(Xw,{asChild:!0,trapped:s,onMountAutoFocus:Le(o,J=>{J.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:m.jsx(Yw,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:_,onInteractOutside:v,onDismiss:T,children:m.jsx(WW,{asChild:!0,...B,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:X,onCurrentTabStopIdChange:ne,onEntryFocus:Le(d,J=>{j.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(PW,{role:"menu","aria-orientation":"vertical","data-state":sP(b.open),"data-radix-menu-content":"",dir:j.dir,...U,...S,ref:R,style:{outline:"none",...S.style},onKeyDown:Le(S.onKeyDown,J=>{const $=J.target.closest("[data-radix-menu-content]")===J.currentTarget,Z=J.ctrlKey||J.altKey||J.metaKey,ge=J.key.length===1;$&&(J.key==="Tab"&&J.preventDefault(),!Z&&ge&&Se(J.key));const _e=P.current;if(J.target!==_e||!GW.includes(J.key))return;J.preventDefault();const Pe=G().filter(he=>!he.disabled).map(he=>he.ref.current);L1.includes(J.key)&&Pe.reverse(),mH(Pe)}),onBlur:Le(n.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(N.current),L.current="")}),onPointerMove:Le(n.onPointerMove,hd(J=>{const oe=J.target,$=Ie.current!==J.clientX;if(J.currentTarget.contains(oe)&&$){const Z=J.clientX>Ie.current?"right":"left";D.current=Z,Ie.current=J.clientX}}))})})})})})})});B1.displayName=wr;var oH="MenuGroup",E0=I.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(rt.div,{role:"group",...r,ref:e})});E0.displayName=oH;var aH="MenuLabel",$1=I.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(rt.div,{...r,ref:e})});$1.displayName=aH;var Cp="MenuItem",sS="menu.itemSelect",Am=I.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,o=I.useRef(null),l=Md(Cp,n.__scopeMenu),u=v0(Cp,n.__scopeMenu),d=Et(e,o),p=I.useRef(!1),g=()=>{const _=o.current;if(!t&&_){const v=new CustomEvent(sS,{bubbles:!0,cancelable:!0});_.addEventListener(sS,T=>r?.(T),{once:!0}),eN(_,v),v.defaultPrevented?p.current=!1:l.onClose()}};return m.jsx(W1,{...s,ref:d,disabled:t,onClick:Le(n.onClick,g),onPointerDown:_=>{n.onPointerDown?.(_),p.current=!0},onPointerUp:Le(n.onPointerUp,_=>{p.current||_.currentTarget?.click()}),onKeyDown:Le(n.onKeyDown,_=>{const v=u.searchRef.current!=="";t||v&&_.key===" "||q_.includes(_.key)&&(_.currentTarget.click(),_.preventDefault())})})});Am.displayName=Cp;var W1=I.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...o}=n,l=v0(Cp,t),u=V1(t),d=I.useRef(null),p=Et(e,d),[g,_]=I.useState(!1),[v,T]=I.useState("");return I.useEffect(()=>{const A=d.current;A&&T((A.textContent??"").trim())},[o.children]),m.jsx(dd.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:m.jsx(HW,{asChild:!0,...u,focusable:!r,children:m.jsx(rt.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:p,onPointerMove:Le(n.onPointerMove,hd(A=>{r?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(n.onPointerLeave,hd(A=>l.onItemLeave(A))),onFocus:Le(n.onFocus,()=>_(!0)),onBlur:Le(n.onBlur,()=>_(!1))})})})}),lH="MenuCheckboxItem",H1=I.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return m.jsx(Y1,{scope:n.__scopeMenu,checked:t,children:m.jsx(Am,{role:"menuitemcheckbox","aria-checked":Sp(t)?"mixed":t,...s,ref:e,"data-state":T0(t),onSelect:Le(s.onSelect,()=>r?.(Sp(t)?!0:!t),{checkForDefaultPrevented:!1})})})});H1.displayName=lH;var q1="MenuRadioGroup",[cH,uH]=Oa(q1,{value:void 0,onValueChange:()=>{}}),G1=I.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,o=un(r);return m.jsx(cH,{scope:n.__scopeMenu,value:t,onValueChange:o,children:m.jsx(E0,{...s,ref:e})})});G1.displayName=q1;var K1="MenuRadioItem",Q1=I.forwardRef((n,e)=>{const{value:t,...r}=n,s=uH(K1,n.__scopeMenu),o=t===s.value;return m.jsx(Y1,{scope:n.__scopeMenu,checked:o,children:m.jsx(Am,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":T0(o),onSelect:Le(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Q1.displayName=K1;var x0="MenuItemIndicator",[Y1,dH]=Oa(x0,{checked:!1}),X1=I.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,o=dH(x0,t);return m.jsx(cr,{present:r||Sp(o.checked)||o.checked===!0,children:m.jsx(rt.span,{...s,ref:e,"data-state":T0(o.checked)})})});X1.displayName=x0;var hH="MenuSeparator",J1=I.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return m.jsx(rt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});J1.displayName=hH;var fH="MenuArrow",Z1=I.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Rm(t);return m.jsx(DW,{...s,...r,ref:e})});Z1.displayName=fH;var pH="MenuSub",[Pq,eP]=Oa(pH),Ru="MenuSubTrigger",tP=I.forwardRef((n,e)=>{const t=Ma(Ru,n.__scopeMenu),r=Md(Ru,n.__scopeMenu),s=eP(Ru,n.__scopeMenu),o=v0(Ru,n.__scopeMenu),l=I.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=o,p={__scopeMenu:n.__scopeMenu},g=I.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return I.useEffect(()=>g,[g]),I.useEffect(()=>{const _=u.current;return()=>{window.clearTimeout(_),d(null)}},[u,d]),m.jsx(y0,{asChild:!0,...p,children:m.jsx(W1,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":sP(t.open),...n,ref:ym(e,s.onTriggerChange),onClick:_=>{n.onClick?.(_),!(n.disabled||_.defaultPrevented)&&(_.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Le(n.onPointerMove,hd(_=>{o.onItemEnter(_),!_.defaultPrevented&&!n.disabled&&!t.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:Le(n.onPointerLeave,hd(_=>{g();const v=t.content?.getBoundingClientRect();if(v){const T=t.content?.dataset.side,A=T==="right",S=A?-5:5,b=v[A?"left":"right"],j=v[A?"right":"left"];o.onPointerGraceIntentChange({area:[{x:_.clientX+S,y:_.clientY},{x:b,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:b,y:v.bottom}],side:T}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(_),_.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Le(n.onKeyDown,_=>{const v=o.searchRef.current!=="";n.disabled||v&&_.key===" "||KW[r.dir].includes(_.key)&&(t.onOpenChange(!0),t.content?.focus(),_.preventDefault())})})})});tP.displayName=Ru;var nP="MenuSubContent",rP=I.forwardRef((n,e)=>{const t=U1(wr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,o=Ma(wr,n.__scopeMenu),l=Md(wr,n.__scopeMenu),u=eP(nP,n.__scopeMenu),d=I.useRef(null),p=Et(e,d);return m.jsx(dd.Provider,{scope:n.__scopeMenu,children:m.jsx(cr,{present:r||o.open,children:m.jsx(dd.Slot,{scope:n.__scopeMenu,children:m.jsx(w0,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{l.isUsingKeyboardRef.current&&d.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:Le(n.onFocusOutside,g=>{g.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Le(n.onEscapeKeyDown,g=>{l.onClose(),g.preventDefault()}),onKeyDown:Le(n.onKeyDown,g=>{const _=g.currentTarget.contains(g.target),v=QW[l.dir].includes(g.key);_&&v&&(o.onOpenChange(!1),u.trigger?.focus(),g.preventDefault())})})})})})});rP.displayName=nP;function sP(n){return n?"open":"closed"}function Sp(n){return n==="indeterminate"}function T0(n){return Sp(n)?"indeterminate":n?"checked":"unchecked"}function mH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function gH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function yH(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let l=gH(n,Math.max(o,0));s.length===1&&(l=l.filter(p=>p!==t));const d=l.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function _H(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const u=e[o],d=e[l],p=u.x,g=u.y,_=d.x,v=d.y;g>r!=v>r&&t<(_-p)*(r-g)/(v-g)+p&&(s=!s)}return s}function vH(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return _H(t,e)}function hd(n){return e=>e.pointerType==="mouse"?n(e):void 0}var wH=F1,EH=y0,xH=z1,TH=B1,IH=E0,CH=$1,SH=Am,bH=H1,RH=G1,AH=Q1,kH=X1,NH=J1,PH=Z1,DH=tP,OH=rP,km="DropdownMenu",[MH]=pi(km,[j1]),An=j1(),[LH,iP]=MH(km),oP=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:o,onOpenChange:l,modal:u=!0}=n,d=An(e),p=I.useRef(null),[g,_]=_m({prop:s,defaultProp:o??!1,onChange:l,caller:km});return m.jsx(LH,{scope:e,triggerId:Ul(),triggerRef:p,contentId:Ul(),open:g,onOpenChange:_,onOpenToggle:I.useCallback(()=>_(v=>!v),[_]),modal:u,children:m.jsx(wH,{...d,open:g,onOpenChange:_,dir:r,modal:u,children:t})})};oP.displayName=km;var aP="DropdownMenuTrigger",lP=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,o=iP(aP,t),l=An(t);return m.jsx(EH,{asChild:!0,...l,children:m.jsx(rt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ym(e,o.triggerRef),onPointerDown:Le(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:Le(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});lP.displayName=aP;var jH="DropdownMenuPortal",cP=n=>{const{__scopeDropdownMenu:e,...t}=n,r=An(e);return m.jsx(xH,{...r,...t})};cP.displayName=jH;var uP="DropdownMenuContent",dP=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=iP(uP,t),o=An(t),l=I.useRef(!1);return m.jsx(TH,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:Le(n.onCloseAutoFocus,u=>{l.current||s.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Le(n.onInteractOutside,u=>{const d=u.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,g=d.button===2||p;(!s.modal||g)&&(l.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dP.displayName=uP;var VH="DropdownMenuGroup",FH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(IH,{...s,...r,ref:e})});FH.displayName=VH;var UH="DropdownMenuLabel",zH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(CH,{...s,...r,ref:e})});zH.displayName=UH;var BH="DropdownMenuItem",hP=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(SH,{...s,...r,ref:e})});hP.displayName=BH;var $H="DropdownMenuCheckboxItem",WH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(bH,{...s,...r,ref:e})});WH.displayName=$H;var HH="DropdownMenuRadioGroup",qH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(RH,{...s,...r,ref:e})});qH.displayName=HH;var GH="DropdownMenuRadioItem",KH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(AH,{...s,...r,ref:e})});KH.displayName=GH;var QH="DropdownMenuItemIndicator",YH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(kH,{...s,...r,ref:e})});YH.displayName=QH;var XH="DropdownMenuSeparator",JH=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(NH,{...s,...r,ref:e})});JH.displayName=XH;var ZH="DropdownMenuArrow",eq=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(PH,{...s,...r,ref:e})});eq.displayName=ZH;var tq="DropdownMenuSubTrigger",nq=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(DH,{...s,...r,ref:e})});nq.displayName=tq;var rq="DropdownMenuSubContent",sq=I.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=An(t);return m.jsx(OH,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sq.displayName=rq;var iq=oP,oq=lP,aq=cP,lq=dP,cq=hP;function uq({...n}){return m.jsx(iq,{"data-slot":"dropdown-menu",...n})}function dq({...n}){return m.jsx(oq,{"data-slot":"dropdown-menu-trigger",...n})}function hq({className:n,sideOffset:e=4,...t}){return m.jsx(aq,{children:m.jsx(lq,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Lt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function fq({className:n,inset:e,variant:t="default",...r}){return m.jsx(cq,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Lt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function pq({profile:n,onBack:e,onFollow:t,onMessage:r,onBlock:s}){const[o,l]=I.useState(n.isFollowing||!1),[u,d]=I.useState(n.isBlocked||!1),p=()=>{l(!o),t&&t()},g=()=>{d(!0),s&&s()};return u?m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:m.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:m.jsx(EC,{className:"w-5 h-5"})}),m.jsx("h2",{className:"text-xl text-white font-bold",children:"User Profile"})]}),m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-8 text-center",children:[m.jsx(xC,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg text-gray-300 mb-2",children:"User Blocked"}),m.jsx("p",{className:"text-gray-500",children:"You have blocked this user. You won't see their posts or messages."})]})})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:m.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(ue,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:m.jsx(EC,{className:"w-5 h-5"})}),m.jsxs("h2",{className:"text-xl text-white font-bold",children:["@",n.username]})]}),m.jsxs(uq,{children:[m.jsx(dq,{asChild:!0,children:m.jsx(ue,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:m.jsx($w,{className:"w-5 h-5"})})}),m.jsx(hq,{align:"end",className:"bg-gray-800 border-gray-700",children:m.jsxs(fq,{onClick:g,className:"text-red-400 hover:text-red-300 hover:bg-gray-700",children:[m.jsx(xC,{className:"w-4 h-4 mr-2"}),"Block User"]})})]})]}),m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"relative",children:[m.jsxs(or,{className:"w-20 h-20 ring-2 ring-green-500",children:[m.jsx(ar,{src:n.avatar}),m.jsx(lr,{className:"bg-gray-700 text-white text-xl",children:n.displayName.charAt(0)})]}),m.jsx("div",{className:`absolute -bottom-2 -right-2 w-5 h-5 rounded-full border-2 border-gray-800 ${n.isOnline?"bg-green-500":"bg-gray-500"}`})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ue,{onClick:p,className:`${o?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:[m.jsx(Hw,{className:"w-4 h-4 mr-1"}),o?"Following":"Follow"]}),m.jsxs(ue,{onClick:r,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[m.jsx(ld,{className:"w-4 h-4 mr-1"}),"Message"]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl text-white font-bold",children:n.displayName}),m.jsxs("p",{className:"text-gray-400",children:["@",n.username]})]}),n.bio&&m.jsx("p",{className:"text-gray-300 leading-relaxed",children:n.bio}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Gw,{variant:"secondary",className:"bg-gray-700 text-gray-300",children:n.isOnline?"✅ Online":"⚫ Offline"}),m.jsxs("span",{className:"text-gray-500 text-sm",children:["Joined ",n.joinDate]})]})]})]})}),m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.postsCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Posts"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.followersCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Followers"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-xl text-white font-bold",children:n.followingCount}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Following"})]})]})})}),m.jsx(jr,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-white font-medium mb-4",children:"Recent Posts"}),m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-gray-400",children:"No recent posts to show"})})]})})]})})}function I0({className:n,...e}){return m.jsx("textarea",{"data-slot":"textarea",className:Lt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}function mq({isOpen:n,onClose:e,onSubmit:t}){const[r,s]=I.useState("image"),[o,l]=I.useState(""),[u,d]=I.useState("#1f2937"),[p,g]=I.useState(""),[_,v]=I.useState(!1),T=I.useRef(null),A=["#1f2937","#7c3aed","#dc2626","#059669","#ea580c","#0891b2","#be185d","#4338ca"],S=()=>{l(""),g(""),s("image"),d("#1f2937"),v(!1)},b=()=>{S(),e()},j=async()=>{try{r==="text"&&o.trim()?await t({content:o,type:"text",backgroundColor:u}):r==="image"&&p.trim()&&await t({content:p,type:"image"}),b()}catch(B){console.error("Error adding story:",B)}},U=async B=>{const G=B.target.files?.[0];if(G&&mp.currentUser){v(!0);try{const X=await Y9(G,mp.currentUser.uid);g(X)}catch(X){console.error("Error uploading story image:",X)}finally{v(!1)}}};return m.jsx(ka,{open:n,onOpenChange:b,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white max-w-md",children:[m.jsxs(Pa,{children:[m.jsx(Da,{className:"text-center",children:"Add New Story"}),m.jsx(vc,{className:"text-center text-gray-400",children:"Share a moment with your story that lasts 24 hours"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:b,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:m.jsx(Aa,{className:"w-5 h-5"})})]}),m.jsxs("div",{className:"flex gap-2 p-4",children:[m.jsxs(ue,{variant:r==="image"?"default":"outline",onClick:()=>s("image"),className:"flex-1 flex items-center gap-2",disabled:_,children:[m.jsx(Lk,{className:"w-4 h-4"}),"صورة"]}),m.jsxs(ue,{variant:r==="text"?"default":"outline",onClick:()=>s("text"),className:"flex-1 flex items-center gap-2",disabled:_,children:[m.jsx(Wz,{className:"w-4 h-4"}),"نص"]})]}),m.jsx("div",{className:"p-4 space-y-4",children:r==="image"?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"رابط الصورة"}),m.jsx(ln,{value:p,onChange:B=>g(B.target.value),placeholder:"أدخل رابط الصورة...",className:"bg-gray-800 border-gray-600 text-white",disabled:_})]}),m.jsx("input",{type:"file",ref:T,onChange:U,style:{display:"none"},accept:"image/*"}),m.jsxs(ue,{onClick:()=>T.current?.click(),className:"w-full flex items-center gap-2 bg-green-600 hover:bg-green-700",disabled:_,children:[_?m.jsx(Cz,{className:"w-4 h-4 animate-spin"}):m.jsx(Mk,{className:"w-4 h-4"}),_?"جاري الرفع...":"أو اختر من الجهاز"]}),p&&m.jsx("div",{className:"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden",children:m.jsx("img",{src:p,alt:"Preview",className:"w-full h-full object-cover"})})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"محتوى النص"}),m.jsx(I0,{value:o,onChange:B=>l(B.target.value),placeholder:"اكتب نصك هنا...",className:"bg-gray-800 border-gray-600 text-white min-h-[100px]",maxLength:200}),m.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[o.length,"/200"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"لون الخلفية"}),m.jsx("div",{className:"flex gap-2 flex-wrap",children:A.map(B=>m.jsx("button",{onClick:()=>d(B),className:`w-8 h-8 rounded-full border-2 ${u===B?"border-white":"border-gray-600"}`,style:{backgroundColor:B}},B))})]}),o&&m.jsx("div",{className:"w-full h-48 rounded-lg flex items-center justify-center p-4",style:{backgroundColor:u},children:m.jsx("p",{className:"text-white text-center text-lg leading-relaxed",children:o})})]})}),m.jsxs("div",{className:"flex gap-2 p-4",children:[m.jsx(ue,{variant:"outline",onClick:b,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:_,children:"إلغاء"}),m.jsx(ue,{onClick:j,disabled:_||r==="text"&&!o.trim()||r==="image"&&!p.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:_?"...":"نشر الستوري"})]})]})})}var gq="Label",fP=I.forwardRef((n,e)=>m.jsx(rt.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));fP.displayName=gq;var yq=fP;function Ks({className:n,...e}){return m.jsx(yq,{"data-slot":"label",className:Lt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}var _q="Separator",iS="horizontal",vq=["horizontal","vertical"],pP=I.forwardRef((n,e)=>{const{decorative:t,orientation:r=iS,...s}=n,o=wq(r)?r:iS,u=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return m.jsx(rt.div,{"data-orientation":o,...u,...s,ref:e})});pP.displayName=_q;function wq(n){return vq.includes(n)}var Eq=pP;function xq({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return m.jsx(Eq,{"data-slot":"separator-root",decorative:t,orientation:e,className:Lt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function Tq({isOpen:n,onClose:e,onDevModeToggle:t}){const[r,s]=I.useState("options"),[o,l]=I.useState(!1),[u,d]=I.useState(""),[p,g]=I.useState(""),[_,v]=I.useState(""),[T,A]=I.useState(""),[S,b]=I.useState(""),[j,U]=I.useState(""),[B,G]=I.useState(""),X=()=>{g(""),v(""),A(""),b(""),U(""),G(""),d(""),s("options")},ne=O=>{const F=/^[a-zA-Z][a-zA-Z0-9_]*$/;return O.length>=2&&F.test(O)},P=O=>{const F=/[a-zA-Z]/.test(O),D=/[0-9]/.test(O);return O.length>=8&&F&&D},R=async O=>{if(O.preventDefault(),!p.trim()||!_.trim()){d("يرجى ملء جميع الحقول");return}l(!0),d("");try{await j9(p,_)}catch(F){console.error("Login Error:",F),d("اسم المستخدم او كلمة المرور غير صحيحة")}finally{l(!1)}},N=async O=>{if(O.preventDefault(),!T.trim()||!S.trim()||!j.trim()||!B.trim()){d("يرجى ملء جميع الحقول");return}if(!ne(T)){d("اسم المستخدم يجب أن يبدأ بحرف ويحتوي على حروف وأرقام انجليزية و _ فقط (حد أدنى حرفين)");return}if(!P(S)){d("كلمة المرور يجب أن تكون 8 خانات على الأقل وتحتوي على حرف ورقم انجليزي");return}if(S!==j){d("كلمة المرور وتأكيد كلمة المرور غير متطابقتين");return}l(!0),d("");try{await L9(T,B,S)}catch(F){console.error("Registration Error:",F),d("فشل في إنشاء الحساب. قد يكون اسم المستخدم مستخدماً بالفعل.")}finally{l(!1)}},L=async()=>{l(!0),d("");try{await V9()}catch(O){console.error("Guest Login Error:",O),d("فشل في تسجيل الدخول كضيف. يرجى المحاولة مرة أخرى.")}finally{l(!1)}};return m.jsx(ka,{open:n,onOpenChange:O=>{O||(X(),e())},children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white relative",dir:"rtl",children:[m.jsx("button",{onClick:t,className:"absolute top-2 left-2 z-10 bg-gray-800/50 text-white p-2 rounded-full border border-gray-600 hover:bg-gray-700 transition-colors","aria-label":"Developer Mode",children:m.jsx(pz,{className:"h-5 w-5"})}),m.jsxs(Pa,{children:[m.jsx(Da,{className:"text-center text-xl text-green-400",children:"مرحباً بك في Dark*Chat"}),m.jsxs(vc,{className:"text-center text-gray-400",children:[r==="options"&&"اختر كيف تريد الانضمام للمحادثة",r==="login"&&"سجل دخولك إلى حسابك",r==="register"&&"أنشئ حسابك الجديد"]})]}),r==="options"&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs(ue,{onClick:()=>s("login"),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[m.jsx(bz,{className:"ml-2 h-4 w-4"}),"تسجيل الدخول"]}),m.jsxs(ue,{onClick:()=>s("register"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[m.jsx(Hw,{className:"ml-2 h-4 w-4"}),"إنشاء حساب جديد"]}),m.jsxs("div",{className:"relative",children:[m.jsx(xq,{className:"bg-gray-600"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("span",{className:"bg-gray-900 px-2 text-gray-400 text-sm",children:"أو"})})]}),m.jsxs(ue,{onClick:L,disabled:o,className:"w-full bg-gray-700 hover:bg-gray-600 text-white border-gray-600 border",children:[m.jsx(Ez,{className:"ml-2 h-4 w-4"}),o?"جاري الدخول...":"الدخول كضيف"]})]}),r==="login"&&m.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u&&m.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 p-2 rounded",children:u}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"loginUsername",className:"text-gray-300",children:"اسم المستخدم"}),m.jsx(ln,{id:"loginUsername",value:p,onChange:O=>g(O.target.value),placeholder:"اسم المستخدم",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"ltr"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"loginPassword",className:"text-gray-300",children:"كلمة المرور"}),m.jsx(ln,{id:"loginPassword",type:"password",value:_,onChange:O=>v(O.target.value),placeholder:"كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"ltr"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ue,{type:"button",onClick:()=>s("options"),variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:o,children:[m.jsx(L_,{className:"ml-2 h-4 w-4"}),"رجوع"]}),m.jsx(ue,{type:"submit",disabled:o||!p.trim()||!_.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:o?"جاري تسجيل الدخول...":"دخول"})]})]}),r==="register"&&m.jsxs("form",{onSubmit:N,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"displayName",className:"text-gray-300",children:"الاسم الكامل"}),m.jsx(ln,{id:"displayName",value:B,onChange:O=>G(O.target.value),placeholder:"اسمك الكامل",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"rtl"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"registerUsername",className:"text-gray-300",children:"اسم المستخدم"}),m.jsx(ln,{id:"registerUsername",value:T,onChange:O=>A(O.target.value.toLowerCase()),placeholder:"username",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"ltr"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يجب أن يبدأ بحرف، حروف وأرقام انجليزية و _ فقط"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"registerPassword",className:"text-gray-300",children:"كلمة المرور"}),m.jsx(ln,{id:"registerPassword",type:"password",value:S,onChange:O=>b(O.target.value),placeholder:"كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"ltr"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"8 خانات على الأقل، حرف ورقم انجليزي"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"confirmPassword",className:"text-gray-300",children:"تأكيد كلمة المرور"}),m.jsx(ln,{id:"confirmPassword",type:"password",value:j,onChange:O=>U(O.target.value),placeholder:"تأكيد كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:o,dir:"ltr"})]}),u&&m.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 p-2 rounded",children:u}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ue,{type:"button",onClick:()=>s("options"),variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:o,children:[m.jsx(L_,{className:"ml-2 h-4 w-4"}),"رجوع"]}),m.jsx(ue,{type:"submit",disabled:o||!T.trim()||!S.trim()||!j.trim()||!B.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:o?"جاري الإنشاء...":"إنشاء الحساب"})]})]})]})})}function Iq({isOpen:n,onClose:e,onSubmit:t}){const[r,s]=I.useState(""),[o,l]=I.useState(!1),[u,d]=I.useState(null),p=I.useRef(null),g=async T=>{if(T.preventDefault(),!!r.trim()){l(!0);try{await t(r.trim(),u||void 0),s(""),d(null),e()}catch(A){console.error("Error creating post:",A)}finally{l(!1)}}},_=()=>{s(""),d(null),e()},v=T=>{T.target.files&&d(T.target.files[0])};return m.jsx(ka,{open:n,onOpenChange:_,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white max-w-md",dir:"rtl",children:[m.jsxs(Pa,{children:[m.jsx(Da,{className:"text-center text-green-400",children:"إنشاء منشور جديد"}),m.jsx(vc,{className:"text-center text-gray-400",children:"شارك ما يجري في بالك مع المجتمع"}),m.jsx(ue,{variant:"ghost",size:"sm",onClick:_,className:"absolute left-4 top-4 text-gray-400 hover:text-white",children:m.jsx(Aa,{className:"w-5 h-5"})})]}),m.jsxs("form",{onSubmit:g,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(I0,{value:r,onChange:T=>s(T.target.value),placeholder:"ماذا يحدث؟",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400 min-h-[120px] resize-none",disabled:o,maxLength:500,dir:"rtl"}),m.jsxs("div",{className:"flex justify-between items-center mt-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"file",ref:p,onChange:v,className:"hidden",accept:"image/*"}),m.jsx(ue,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",disabled:o,onClick:()=>p.current?.click(),children:m.jsx(Lk,{className:"w-4 h-4"})}),m.jsx(ue,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",disabled:o,children:m.jsx(jk,{className:"w-4 h-4"})})]}),m.jsxs("span",{className:"text-xs text-gray-500",children:[r.length,"/500"]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ue,{type:"button",variant:"outline",onClick:_,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:o,children:"إلغاء"}),m.jsx(ue,{type:"submit",disabled:o||!r.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:o?"جاري النشر...":"نشر"})]})]})]})})}function Cq({isOpen:n,onClose:e,onSubmit:t,currentUser:r}){const[s,o]=I.useState(""),[l,u]=I.useState(""),[d,p]=I.useState(null),[g,_]=I.useState(null),[v,T]=I.useState(!1);I.useEffect(()=>{r&&(o(r.displayName||""),u(r.bio||""),_(r.avatar||null))},[r]);const A=b=>{if(b.target.files&&b.target.files[0]){const j=b.target.files[0];p(j),_(URL.createObjectURL(j))}},S=async b=>{b.preventDefault(),T(!0);const j={};s!==r.displayName&&(j.displayName=s),l!==r.bio&&(j.bio=l),d&&(j.avatar=d),await t(j),T(!1),e()};return m.jsx(ka,{open:n,onOpenChange:e,children:m.jsxs(Na,{className:"bg-gray-900 border-gray-700 text-white",dir:"rtl",children:[m.jsxs(Pa,{children:[m.jsx(Da,{className:"text-green-400",children:"تعديل الملف الشخصي"}),m.jsx(vc,{children:"قم بتحديث معلومات ملفك الشخصي هنا."})]}),m.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsxs(or,{className:"w-24 h-24 ring-2 ring-green-500",children:[m.jsx(ar,{src:g||""}),m.jsx(lr,{children:s.charAt(0)})]}),m.jsx(ln,{id:"avatar-upload",type:"file",accept:"image/*",onChange:A,className:"hidden"}),m.jsx(Ks,{htmlFor:"avatar-upload",className:"cursor-pointer text-green-400 hover:underline",children:"تغيير الصورة"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"displayName",className:"text-gray-300",children:"الاسم الظاهر"}),m.jsx(ln,{id:"displayName",value:s,onChange:b=>o(b.target.value),className:"bg-gray-800 border-gray-600"})]}),m.jsxs("div",{children:[m.jsx(Ks,{htmlFor:"bio",className:"text-gray-300",children:"النبذة التعريفية"}),m.jsx(I0,{id:"bio",value:l,onChange:b=>u(b.target.value),className:"bg-gray-800 border-gray-600",rows:3})]}),m.jsxs(P8,{children:[m.jsx(ue,{type:"button",variant:"outline",onClick:e,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"إلغاء"}),m.jsx(ue,{type:"submit",disabled:v,className:"bg-green-600 hover:bg-green-700",children:v?"جاري الحفظ...":"حفظ التغييرات"})]})]})]})})}function Sq(){const[n,e]=I.useState("feed"),[t,r]=I.useState(null),[s,o]=I.useState(null),[l,u]=I.useState(!0),[d,p]=I.useState([]),[g,_]=I.useState([]),[v,T]=I.useState([]),[A,S]=I.useState([]),[b,j]=I.useState([]),[U,B]=I.useState(null),[G,X]=I.useState(null),[ne,P]=I.useState(!1),[R,N]=I.useState(0),[L,O]=I.useState(0),[F,D]=I.useState(!1),[Ie,je]=I.useState(!1),[Ce,Se]=I.useState(!1),[W,J]=I.useState(null),[oe,$]=I.useState(!1),[Z,ge]=I.useState(null),[_e,Ne]=I.useState(!1),Pe=()=>{const pe=prompt("أدخل رمز المطور:");if(pe==="9760"){console.log("Developer mode activated");const be={uid:"dev_user_01"},Ve={uid:"dev_user_01",username:"developer",displayName:"المطور",avatar:"https://firebasestorage.googleapis.com/v0/b/darklight-chat.appspot.com/o/profile-pictures%2Fdefault_avatar.png?alt=media&token=0default-avatar-token",bio:"أنا أستخدم وضع المطور لتجربة التطبيق.",postsCount:42,followersCount:1337,followingCount:42,isGuest:!1};r(be),o(Ve),u(!1)}else pe&&alert("الرمز غير صحيح!")};I.useEffect(()=>{const pe=F9(async be=>{if(be){X9(be.uid);try{const Ve=await bf(be.uid);Ve?(r(be),o(Ve)):(console.warn("No user profile found for authenticated user. Signing out to resolve inconsistency."),await mC(),r(null),o(null))}catch(Ve){console.error("Error fetching user profile, signing out:",Ve),await mC(),r(null),o(null)}}else r(null),o(null);u(!1)});return()=>pe()},[]),I.useEffect(()=>{if(t&&s){const pe=vC(p),be=H9(t.uid,T);return(async()=>{const it=await M_();_(it)})(),()=>{pe(),be()}}else p([]),_([]),T([]),S([]),j([])},[t,s]);const he=async(pe,be)=>{if(s)try{let Ve;be&&(Ve=await Q9(s.uid,be));const it={content:pe,imageUrl:Ve,userId:s.uid,username:s.username,displayName:s.displayName,avatar:s.avatar,likes:0,replies:0,likedBy:[]};await B9(it),vC(p)()}catch(Ve){console.error("Error creating post:",Ve)}finally{je(!1)}},Ue=async pe=>{if(!t)return;const be=d.find(Kt=>Kt.id===pe);if(!be)return;const it=be.likedBy.includes(t.uid)?be.likedBy.filter(Kt=>Kt!==t.uid):[...be.likedBy,t.uid];await gC(pe,{likedBy:it,likes:it.length})},Ye=async(pe,be)=>{if(!s)return;const Ve={postId:pe,content:be,userId:s.uid,username:s.username,displayName:s.displayName,avatar:s.avatar};await q9(Ve);const it=d.find(Kt=>Kt.id===pe);it&&await gC(pe,{replies:(it.replies||0)+1})},xt=async pe=>{if(!t)return;const be={type:pe.type,content:pe.content,backgroundColor:pe.backgroundColor};await $9(t.uid,be),D(!1);const Ve=await M_();_(Ve)},kn=async pe=>{if(s)try{const be={};if(pe.displayName&&pe.displayName!==s.displayName&&(be.displayName=pe.displayName),pe.bio&&pe.bio!==s.bio&&(be.bio=pe.bio),pe.avatar){const Ve=await K9(s.uid,pe.avatar);be.avatar=Ve}if(Object.keys(be).length>0){await z9(s.uid,be);const Ve=await bf(s.uid);Ve&&o(Ve)}}catch(be){console.error("Error updating profile:",be)}finally{Ne(!1)}},Nn=pe=>{const be=g.findIndex(Ve=>Ve.userId===pe.userId);be!==-1&&(N(be),O(0),P(!0))},In=()=>{const pe=g[R]?.stories;L<pe.length-1?O(be=>be+1):R<g.length-1?(N(be=>be+1),O(0)):P(!1)},mi=()=>{if(L>0)O(pe=>pe-1);else if(R>0){const pe=R-1,be=g[pe].stories;N(pe),O(be.length-1)}},La=async pe=>{const be=await bf(pe);X(be)},gi=pe=>{pe.otherUser?B(pe.otherUser):console.error("Conversation is missing otherUser property",pe)};return l?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 border-2 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-white",children:"تحميل Dark*Chat..."})]})}):t?m.jsxs("div",{className:"min-h-screen bg-black",dir:"rtl",children:[m.jsx(FB,{currentView:n,onViewChange:e,unreadCount:v.reduce((pe,be)=>pe+(be.unreadCount||0),0)}),G&&m.jsx(pq,{profile:G,onBack:()=>X(null),onMessage:()=>{B(G),X(null)}}),U&&m.jsx(n7,{user:U,onBack:()=>B(null),currentUserId:t.uid}),ne&&g.length>0&&m.jsx(r7,{stories:g,currentStoryIndex:R,currentContentIndex:L,onClose:()=>P(!1),onNext:In,onPrevious:mi,onReply:(pe,be)=>console.log("Reply to story:",pe,be)}),m.jsx(mq,{isOpen:F,onClose:()=>D(!1),onSubmit:xt}),m.jsx(Iq,{isOpen:Ie,onClose:()=>je(!1),onSubmit:he}),m.jsx(s7,{isOpen:Ce,onClose:()=>{Se(!1),J(null),j([])},postId:W||"",comments:b,onAddComment:Ye}),m.jsx(d7,{isOpen:oe,onClose:()=>$(!1),postId:Z||"",users:[],onShare:(pe,be,Ve)=>console.log("Share post:",pe,be,Ve)}),s&&m.jsx(Cq,{isOpen:_e,onClose:()=>Ne(!1),onSubmit:kn,currentUser:s}),m.jsxs("div",{className:U||G?"hidden":"",children:[n==="feed"&&m.jsx(n$,{posts:d,stories:g,onLike:Ue,onReply:async pe=>{const be=await _C(pe);j(be),J(pe),Se(!0)},onShare:pe=>{ge(pe),$(!0)},onStoryClick:Nn,onUserClick:La,onAddStory:()=>D(!0),onCreatePost:()=>je(!0),currentUserId:t?.uid,currentUser:s}),n==="messages"&&m.jsx(r$,{conversations:v,onConversationClick:gi}),n==="likes"&&m.jsx(i$,{likedPosts:d.filter(pe=>pe.likedBy.includes(t.uid)),onUnlike:Ue,onReply:async pe=>{const be=await _C(pe);j(be),J(pe),Se(!0)},onShare:pe=>{ge(pe),$(!0)}}),n==="profile"&&s&&m.jsx(s$,{profile:s,isOwnProfile:!0,onEditProfile:()=>Ne(!0),onShareProfile:()=>console.log("Share profile clicked"),onFollow:()=>console.log("Follow clicked")})]})]}):m.jsx("div",{className:"min-h-screen bg-black",children:m.jsx(Tq,{isOpen:!0,onClose:()=>{},onDevModeToggle:Pe})})}AD.createRoot(document.getElementById("root")).render(m.jsx(Sq,{}));
