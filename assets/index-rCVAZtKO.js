function l1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Rx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dp={exports:{}},ec={},Op={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function c1(){if(Q_)return Be;Q_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function A(B,Z,pe){this.props=B,this.context=Z,this.refs=C,this.updater=pe||I}A.prototype.isReactComponent={},A.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=A.prototype;function z(B,Z,pe){this.props=B,this.context=Z,this.refs=C,this.updater=pe||I}var $=z.prototype=new j;$.constructor=z,k($,A.prototype),$.isPureReactComponent=!0;var K=Array.isArray,X=Object.prototype.hasOwnProperty,ne={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function b(B,Z,pe){var ge,Re={},Ne=null,de=null;if(Z!=null)for(ge in Z.ref!==void 0&&(de=Z.ref),Z.key!==void 0&&(Ne=""+Z.key),Z)X.call(Z,ge)&&!P.hasOwnProperty(ge)&&(Re[ge]=Z[ge]);var Ve=arguments.length-2;if(Ve===1)Re.children=pe;else if(1<Ve){for(var We=Array(Ve),ht=0;ht<Ve;ht++)We[ht]=arguments[ht+2];Re.children=We}if(B&&B.defaultProps)for(ge in Ve=B.defaultProps,Ve)Re[ge]===void 0&&(Re[ge]=Ve[ge]);return{$$typeof:n,type:B,key:Ne,ref:de,props:Re,_owner:ne.current}}function N(B,Z){return{$$typeof:n,type:B.type,key:Z,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function L(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(pe){return Z[pe]})}var F=/\/+/g;function D(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):Z.toString(36)}function Te(B,Z,pe,ge,Re){var Ne=typeof B;(Ne==="undefined"||Ne==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(Ne){case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case n:case e:de=!0}}if(de)return de=B,Re=Re(de),B=ge===""?"."+D(de,0):ge,K(Re)?(pe="",B!=null&&(pe=B.replace(F,"$&/")+"/"),Te(Re,Z,pe,"",function(ht){return ht})):Re!=null&&(O(Re)&&(Re=N(Re,pe+(!Re.key||de&&de.key===Re.key?"":(""+Re.key).replace(F,"$&/")+"/")+B)),Z.push(Re)),1;if(de=0,ge=ge===""?".":ge+":",K(B))for(var Ve=0;Ve<B.length;Ve++){Ne=B[Ve];var We=ge+D(Ne,Ve);de+=Te(Ne,Z,pe,We,Re)}else if(We=x(B),typeof We=="function")for(B=We.call(B),Ve=0;!(Ne=B.next()).done;)Ne=Ne.value,We=ge+D(Ne,Ve++),de+=Te(Ne,Z,pe,We,Re);else if(Ne==="object")throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return de}function Me(B,Z,pe){if(B==null)return B;var ge=[],Re=0;return Te(B,ge,"","",function(Ne){return Z.call(pe,Ne,Re++)}),ge}function Se(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(pe){(B._status===0||B._status===-1)&&(B._status=1,B._result=pe)},function(pe){(B._status===0||B._status===-1)&&(B._status=2,B._result=pe)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var Ie={current:null},W={transition:null},J={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:W,ReactCurrentOwner:ne};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:Me,forEach:function(B,Z,pe){Me(B,function(){Z.apply(this,arguments)},pe)},count:function(B){var Z=0;return Me(B,function(){Z++}),Z},toArray:function(B){return Me(B,function(Z){return Z})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Be.Component=A,Be.Fragment=t,Be.Profiler=i,Be.PureComponent=z,Be.StrictMode=r,Be.Suspense=f,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Be.act=oe,Be.cloneElement=function(B,Z,pe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ge=k({},B.props),Re=B.key,Ne=B.ref,de=B._owner;if(Z!=null){if(Z.ref!==void 0&&(Ne=Z.ref,de=ne.current),Z.key!==void 0&&(Re=""+Z.key),B.type&&B.type.defaultProps)var Ve=B.type.defaultProps;for(We in Z)X.call(Z,We)&&!P.hasOwnProperty(We)&&(ge[We]=Z[We]===void 0&&Ve!==void 0?Ve[We]:Z[We])}var We=arguments.length-2;if(We===1)ge.children=pe;else if(1<We){Ve=Array(We);for(var ht=0;ht<We;ht++)Ve[ht]=arguments[ht+2];ge.children=Ve}return{$$typeof:n,type:B.type,key:Re,ref:Ne,props:ge,_owner:de}},Be.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Be.createElement=b,Be.createFactory=function(B){var Z=b.bind(null,B);return Z.type=B,Z},Be.createRef=function(){return{current:null}},Be.forwardRef=function(B){return{$$typeof:h,render:B}},Be.isValidElement=O,Be.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:Se}},Be.memo=function(B,Z){return{$$typeof:m,type:B,compare:Z===void 0?null:Z}},Be.startTransition=function(B){var Z=W.transition;W.transition={};try{B()}finally{W.transition=Z}},Be.unstable_act=oe,Be.useCallback=function(B,Z){return Ie.current.useCallback(B,Z)},Be.useContext=function(B){return Ie.current.useContext(B)},Be.useDebugValue=function(){},Be.useDeferredValue=function(B){return Ie.current.useDeferredValue(B)},Be.useEffect=function(B,Z){return Ie.current.useEffect(B,Z)},Be.useId=function(){return Ie.current.useId()},Be.useImperativeHandle=function(B,Z,pe){return Ie.current.useImperativeHandle(B,Z,pe)},Be.useInsertionEffect=function(B,Z){return Ie.current.useInsertionEffect(B,Z)},Be.useLayoutEffect=function(B,Z){return Ie.current.useLayoutEffect(B,Z)},Be.useMemo=function(B,Z){return Ie.current.useMemo(B,Z)},Be.useReducer=function(B,Z,pe){return Ie.current.useReducer(B,Z,pe)},Be.useRef=function(B){return Ie.current.useRef(B)},Be.useState=function(B){return Ie.current.useState(B)},Be.useSyncExternalStore=function(B,Z,pe){return Ie.current.useSyncExternalStore(B,Z,pe)},Be.useTransition=function(){return Ie.current.useTransition()},Be.version="18.3.1",Be}var Y_;function wh(){return Y_||(Y_=1,Op.exports=c1()),Op.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function u1(){if(X_)return ec;X_=1;var n=wh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(h,f,m){var y,w={},x=null,I=null;m!==void 0&&(x=""+m),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(I=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(w[y]=f[y]);if(h&&h.defaultProps)for(y in f=h.defaultProps,f)w[y]===void 0&&(w[y]=f[y]);return{$$typeof:e,type:h,key:x,ref:I,props:w,_owner:i.current}}return ec.Fragment=t,ec.jsx=c,ec.jsxs=c,ec}var J_;function d1(){return J_||(J_=1,Dp.exports=u1()),Dp.exports}var p=d1(),hd={},Mp={exports:{}},_n={},Lp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function h1(){return Z_||(Z_=1,(function(n){function e(W,J){var oe=W.length;W.push(J);e:for(;0<oe;){var B=oe-1>>>1,Z=W[B];if(0<i(Z,J))W[B]=J,W[oe]=Z,oe=B;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],oe=W.pop();if(oe!==J){W[0]=oe;e:for(var B=0,Z=W.length,pe=Z>>>1;B<pe;){var ge=2*(B+1)-1,Re=W[ge],Ne=ge+1,de=W[Ne];if(0>i(Re,oe))Ne<Z&&0>i(de,Re)?(W[B]=de,W[Ne]=oe,B=Ne):(W[B]=Re,W[ge]=oe,B=ge);else if(Ne<Z&&0>i(de,oe))W[B]=de,W[Ne]=oe,B=Ne;else break e}}return J}function i(W,J){var oe=W.sortIndex-J.sortIndex;return oe!==0?oe:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],m=[],y=1,w=null,x=3,I=!1,k=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(W){for(var J=t(m);J!==null;){if(J.callback===null)r(m);else if(J.startTime<=W)r(m),J.sortIndex=J.expirationTime,e(f,J);else break;J=t(m)}}function K(W){if(C=!1,$(W),!k)if(t(f)!==null)k=!0,Se(X);else{var J=t(m);J!==null&&Ie(K,J.startTime-W)}}function X(W,J){k=!1,C&&(C=!1,j(b),b=-1),I=!0;var oe=x;try{for($(J),w=t(f);w!==null&&(!(w.expirationTime>J)||W&&!L());){var B=w.callback;if(typeof B=="function"){w.callback=null,x=w.priorityLevel;var Z=B(w.expirationTime<=J);J=n.unstable_now(),typeof Z=="function"?w.callback=Z:w===t(f)&&r(f),$(J)}else r(f);w=t(f)}if(w!==null)var pe=!0;else{var ge=t(m);ge!==null&&Ie(K,ge.startTime-J),pe=!1}return pe}finally{w=null,x=oe,I=!1}}var ne=!1,P=null,b=-1,N=5,O=-1;function L(){return!(n.unstable_now()-O<N)}function F(){if(P!==null){var W=n.unstable_now();O=W;var J=!0;try{J=P(!0,W)}finally{J?D():(ne=!1,P=null)}}else ne=!1}var D;if(typeof z=="function")D=function(){z(F)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Me=Te.port2;Te.port1.onmessage=F,D=function(){Me.postMessage(null)}}else D=function(){A(F,0)};function Se(W){P=W,ne||(ne=!0,D())}function Ie(W,J){b=A(function(){W(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){k||I||(k=!0,Se(X))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(W){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var oe=x;x=J;try{return W()}finally{x=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var oe=x;x=W;try{return J()}finally{x=oe}},n.unstable_scheduleCallback=function(W,J,oe){var B=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?B+oe:B):oe=B,W){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=oe+Z,W={id:y++,callback:J,priorityLevel:W,startTime:oe,expirationTime:Z,sortIndex:-1},oe>B?(W.sortIndex=oe,e(m,W),t(f)===null&&W===t(m)&&(C?(j(b),b=-1):C=!0,Ie(K,oe-B))):(W.sortIndex=Z,e(f,W),k||I||(k=!0,Se(X))),W},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(W){var J=x;return function(){var oe=x;x=J;try{return W.apply(this,arguments)}finally{x=oe}}}})(jp)),jp}var ew;function f1(){return ew||(ew=1,Lp.exports=h1()),Lp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function p1(){if(tw)return _n;tw=1;var n=wh(),e=f1();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){c(s,o),c(s+"Capture",o)}function c(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function x(s){return f.call(w,s)?!0:f.call(y,s)?!1:m.test(s)?w[s]=!0:(y[s]=!0,!1)}function I(s,o,l,d){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,o,l,d){if(o===null||typeof o>"u"||I(s,o,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(s,o,l,d,g,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new C(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];A[o]=new C(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new C(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new C(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new C(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new C(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new C(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new C(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new C(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function z(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(j,z);A[o]=new C(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(j,z);A[o]=new C(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(j,z);A[o]=new C(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new C(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new C(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,o,l,d){var g=A.hasOwnProperty(o)?A[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,l,g,d)&&(l=null),d||g===null?x(o)&&(l===null?s.removeAttribute(o):s.setAttribute(o,""+l)):g.mustUseProperty?s[g.propertyName]=l===null?g.type===3?!1:"":l:(o=g.attributeName,d=g.attributeNamespace,l===null?s.removeAttribute(o):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,d?s.setAttributeNS(d,o,l):s.setAttribute(o,l))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),ne=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),W=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,B;function Z(s){if(B===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+s}var pe=!1;function ge(s,o){if(!s||pe)return"";pe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var d=Q}Reflect.construct(s,[],o)}else{try{o.call()}catch(Q){d=Q}s.call(o.prototype)}else{try{throw Error()}catch(Q){d=Q}s()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),v=d.stack.split(`
`),S=g.length-1,M=v.length-1;1<=S&&0<=M&&g[S]!==v[M];)M--;for(;1<=S&&0<=M;S--,M--)if(g[S]!==v[M]){if(S!==1||M!==1)do if(S--,M--,0>M||g[S]!==v[M]){var V=`
`+g[S].replace(" at new "," at ");return s.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",s.displayName)),V}while(1<=S&&0<=M);break}}}finally{pe=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Z(s):""}function Re(s){switch(s.tag){case 5:return Z(s.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return s=ge(s.type,!1),s;case 11:return s=ge(s.type.render,!1),s;case 1:return s=ge(s.type,!0),s;default:return""}}function Ne(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case ne:return"Portal";case N:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case Te:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Me:return o=s.displayName||null,o!==null?o:Ne(s.type)||"Memo";case Se:o=s._payload,s=s._init;try{return Ne(s(o))}catch{}}return null}function de(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function We(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ht(s){var o=We(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){d=""+S,v.call(this,S)}}),Object.defineProperty(s,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function hn(s){s._valueTracker||(s._valueTracker=ht(s))}function fn(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return s&&(d=We(s)?s.checked?"true":"false":s.value),s=d,s!==l?(o.setValue(s),!0):!1}function an(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ds(s,o){var l=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function Fo(s,o){var l=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),s._wrapperState={initialChecked:d,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function xe(s,o){o=o.checked,o!=null&&$(s,"checked",o,!1)}function ke(s,o){xe(s,o);var l=Ve(o.value),d=o.type;if(l!=null)d==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?$e(s,o.type,l):o.hasOwnProperty("defaultValue")&&$e(s,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Ut(s,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,l||o===s.value||(s.value=o),s.defaultValue=o}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function $e(s,o,l){(o!=="number"||an(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var rt=Array.isArray;function Zn(s,o,l,d){if(s=s.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=o.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&d&&(s[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function ll(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function cl(s,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(rt(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}s._wrapperState={initialValue:Ve(l)}}function Jc(s,o){var l=Ve(o.value),d=Ve(o.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),o.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),d!=null&&(s.defaultValue=""+d)}function Os(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function ul(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uo(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?ul(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ms,Zc=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,d,g){MSApp.execUnsafeLocalFunction(function(){return s(o,l,d,g)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ms.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function zi(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eu=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(s){eu.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ls[o]=Ls[s]})});function js(s,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Ls.hasOwnProperty(s)&&Ls[s]?(""+o).trim():o+"px"}function zo(s,o){s=s.style;for(var l in o)if(o.hasOwnProperty(l)){var d=l.indexOf("--")===0,g=js(l,o[l],d);l==="float"&&(l="cssFloat"),d?s.setProperty(l,g):s[l]=g}}var dl=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function er(s,o){if(o){if(dl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Bo(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vs=null;function $o(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zr=null,es=null,vt=null;function hl(s){if(s=Fl(s)){if(typeof Zr!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Cu(o),Zr(s.stateNode,s.type,o))}}function Fs(s){es?vt?vt.push(s):vt=[s]:es=s}function Us(){if(es){var s=es,o=vt;if(vt=es=null,hl(s),o)for(s=0;s<o.length;s++)hl(o[s])}}function tu(s,o){return s(o)}function nu(){}var yr=!1;function ru(s,o,l){if(yr)return s(o,l);yr=!0;try{return tu(s,o,l)}finally{yr=!1,(es!==null||vt!==null)&&(nu(),Us())}}function Bi(s,o){var l=s.stateNode;if(l===null)return null;var d=Cu(l);if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var zs=!1;if(h)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){zs=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{zs=!1}function su(s,o,l,d,g,v,S,M,V){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(l,Q)}catch(se){this.onError(se)}}var ts=!1,vr=null,Wo=!1,zn=null,iu={onError:function(s){ts=!0,vr=s}};function ou(s,o,l,d,g,v,S,M,V){ts=!1,vr=null,su.apply(iu,arguments)}function fl(s,o,l,d,g,v,S,M,V){if(ou.apply(this,arguments),ts){if(ts){var Q=vr;ts=!1,vr=null}else throw Error(t(198));Wo||(Wo=!0,zn=Q)}}function tr(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function pl(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function au(s){if(tr(s)!==s)throw Error(t(188))}function lu(s){var o=s.alternate;if(!o){if(o=tr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var l=s,d=o;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return au(g),s;if(v===d)return au(g),o;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=g,d=v;else{for(var S=!1,M=g.child;M;){if(M===l){S=!0,l=g,d=v;break}if(M===d){S=!0,d=g,l=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===l){S=!0,l=v,d=g;break}if(M===d){S=!0,d=v,l=g;break}M=M.sibling}if(!S)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:o}function cu(s){return s=lu(s),s!==null?$i(s):null}function $i(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=$i(s);if(o!==null)return o;s=s.sibling}return null}var ml=e.unstable_scheduleCallback,Ho=e.unstable_cancelCallback,Wi=e.unstable_shouldYield,ns=e.unstable_requestPaint,at=e.unstable_now,uf=e.unstable_getCurrentPriorityLevel,qo=e.unstable_ImmediatePriority,gl=e.unstable_UserBlockingPriority,Hi=e.unstable_NormalPriority,yl=e.unstable_LowPriority,Go=e.unstable_IdlePriority,qi=null,Tn=null;function uu(s){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(qi,s,void 0,(s.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:Gi,_r=Math.log,Bn=Math.LN2;function Gi(s){return s>>>=0,s===0?32:31-(_r(s)/Bn|0)|0}var wr=64,$s=4194304;function et(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function rs(s,o){var l=s.pendingLanes;if(l===0)return 0;var d=0,g=s.suspendedLanes,v=s.pingedLanes,S=l&268435455;if(S!==0){var M=S&~g;M!==0?d=et(M):(v&=S,v!==0&&(d=et(v)))}else S=l&~g,S!==0?d=et(S):v!==0&&(d=et(v));if(d===0)return 0;if(o!==0&&o!==d&&(o&g)===0&&(g=d&-d,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((d&4)!==0&&(d|=l&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)l=31-Sn(o),g=1<<l,d|=s[l],o&=~g;return d}function Ki(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qi(s,o){for(var l=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-Sn(v),M=1<<S,V=g[S];V===-1?((M&l)===0||(M&d)!==0)&&(g[S]=Ki(M,o)):V<=o&&(s.expiredLanes|=M),v&=~M}}function vl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function _l(){var s=wr;return wr<<=1,(wr&4194240)===0&&(wr=64),s}function wl(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function Yi(s,o,l){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Sn(o),s[o]=l}function df(s,o){var l=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<l;){var g=31-Sn(l),v=1<<g;o[g]=0,d[g]=-1,s[g]=-1,l&=~v}}function xl(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var d=31-Sn(l),g=1<<d;g&o|s[d]&o&&(s[d]|=o),l&=~g}}var Ke=0;function xr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var El,Ko,Tl,Sl,Il,Er=!1,Qo=[],Tr=null,Sr=null,zt=null,Xi=new Map,ss=new Map,In=[],du="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ws(s,o){switch(s){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Xi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(o.pointerId)}}function nr(s,o,l,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},o!==null&&(o=Fl(o),o!==null&&Ko(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function hu(s,o,l,d,g){switch(o){case"focusin":return Tr=nr(Tr,s,o,l,d,g),!0;case"dragenter":return Sr=nr(Sr,s,o,l,d,g),!0;case"mouseover":return zt=nr(zt,s,o,l,d,g),!0;case"pointerover":var v=g.pointerId;return Xi.set(v,nr(Xi.get(v)||null,s,o,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,ss.set(v,nr(ss.get(v)||null,s,o,l,d,g)),!0}return!1}function Yo(s){var o=to(s.target);if(o!==null){var l=tr(o);if(l!==null){if(o=l.tag,o===13){if(o=pl(l),o!==null){s.blockedOn=o,Il(s.priority,function(){Tl(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function st(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=Xo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var d=new l.constructor(l.type,l);Vs=d,l.target.dispatchEvent(d),Vs=null}else return o=Fl(l),o!==null&&Ko(o),s.blockedOn=l,!1;o.shift()}return!0}function fu(s,o,l){st(s)&&l.delete(o)}function hf(){Er=!1,Tr!==null&&st(Tr)&&(Tr=null),Sr!==null&&st(Sr)&&(Sr=null),zt!==null&&st(zt)&&(zt=null),Xi.forEach(fu),ss.forEach(fu)}function Hs(s,o){s.blockedOn===o&&(s.blockedOn=null,Er||(Er=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hf)))}function qs(s){function o(g){return Hs(g,s)}if(0<Qo.length){Hs(Qo[0],s);for(var l=1;l<Qo.length;l++){var d=Qo[l];d.blockedOn===s&&(d.blockedOn=null)}}for(Tr!==null&&Hs(Tr,s),Sr!==null&&Hs(Sr,s),zt!==null&&Hs(zt,s),Xi.forEach(o),ss.forEach(o),l=0;l<In.length;l++)d=In[l],d.blockedOn===s&&(d.blockedOn=null);for(;0<In.length&&(l=In[0],l.blockedOn===null);)Yo(l),l.blockedOn===null&&In.shift()}var is=K.ReactCurrentBatchConfig,os=!0;function Ir(s,o,l,d){var g=Ke,v=is.transition;is.transition=null;try{Ke=1,bl(s,o,l,d)}finally{Ke=g,is.transition=v}}function pu(s,o,l,d){var g=Ke,v=is.transition;is.transition=null;try{Ke=4,bl(s,o,l,d)}finally{Ke=g,is.transition=v}}function bl(s,o,l,d){if(os){var g=Xo(s,o,l,d);if(g===null)Tf(s,o,d,br,l),Ws(s,d);else if(hu(g,s,o,l,d))d.stopPropagation();else if(Ws(s,d),o&4&&-1<du.indexOf(s)){for(;g!==null;){var v=Fl(g);if(v!==null&&El(v),v=Xo(s,o,l,d),v===null&&Tf(s,o,d,br,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else Tf(s,o,d,null,l)}}var br=null;function Xo(s,o,l,d){if(br=null,s=$o(d),s=to(s),s!==null)if(o=tr(s),o===null)s=null;else if(l=o.tag,l===13){if(s=pl(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return br=s,null}function Jo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uf()){case qo:return 1;case gl:return 4;case Hi:case yl:return 16;case Go:return 536870912;default:return 16}default:return 16}}var bn=null,Zo=null,as=null;function mu(){if(as)return as;var s,o=Zo,l=o.length,d,g="value"in bn?bn.value:bn.textContent,v=g.length;for(s=0;s<l&&o[s]===g[s];s++);var S=l-s;for(d=1;d<=S&&o[l-d]===g[v-d];d++);return as=g.slice(s,1<d?1-d:void 0)}function Ji(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Cr(){return!0}function Cl(){return!1}function Yt(s){function o(l,d,g,v,S){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(l=s[M],this[M]=l?l(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Cr:Cl,this.isPropagationStopped=Cl,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),o}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Yt(Ar),Gs=oe({},Ar,{view:0,detail:0}),ea=Yt(Gs),ta,na,Cn,eo=oe({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fe,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Cn&&(Cn&&s.type==="mousemove"?(ta=s.screenX-Cn.screenX,na=s.screenY-Cn.screenY):na=ta=0,Cn=s),ta)},movementY:function(s){return"movementY"in s?s.movementY:na}}),Al=Yt(eo),gu=oe({},eo,{dataTransfer:0}),yu=Yt(gu),ra=oe({},Gs,{relatedTarget:0}),Bt=Yt(ra),vu=oe({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),_u=Yt(vu),Ks=oe({},Ar,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),u=Yt(Ks),_=oe({},Ar,{data:0}),E=Yt(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function le(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Y[s])?!!o[s]:!1}function Fe(){return le}var Tt=oe({},Gs,{key:function(s){if(s.key){var o=R[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Ji(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?q[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fe,charCode:function(s){return s.type==="keypress"?Ji(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ji(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),nt=Yt(Tt),Ct=oe({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),An=Yt(Ct),ls=oe({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fe}),Rr=Yt(ls),kr=oe({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),sa=Yt(kr),Rl=oe({},eo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),nC=Yt(Rl),rC=[9,13,27,32],ff=h&&"CompositionEvent"in window,kl=null;h&&"documentMode"in document&&(kl=document.documentMode);var sC=h&&"TextEvent"in window&&!kl,zy=h&&(!ff||kl&&8<kl&&11>=kl),By=" ",$y=!1;function Wy(s,o){switch(s){case"keyup":return rC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ia=!1;function iC(s,o){switch(s){case"compositionend":return Hy(o);case"keypress":return o.which!==32?null:($y=!0,By);case"textInput":return s=o.data,s===By&&$y?null:s;default:return null}}function oC(s,o){if(ia)return s==="compositionend"||!ff&&Wy(s,o)?(s=mu(),as=Zo=bn=null,ia=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zy&&o.locale!=="ko"?null:o.data;default:return null}}var aC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!aC[s.type]:o==="textarea"}function Gy(s,o,l,d){Fs(d),o=Su(o,"onChange"),0<o.length&&(l=new Zi("onChange","change",null,l,d),s.push({event:l,listeners:o}))}var Nl=null,Pl=null;function lC(s){dv(s,0)}function wu(s){var o=ua(s);if(fn(o))return s}function cC(s,o){if(s==="change")return o}var Ky=!1;if(h){var pf;if(h){var mf="oninput"in document;if(!mf){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),mf=typeof Qy.oninput=="function"}pf=mf}else pf=!1;Ky=pf&&(!document.documentMode||9<document.documentMode)}function Yy(){Nl&&(Nl.detachEvent("onpropertychange",Xy),Pl=Nl=null)}function Xy(s){if(s.propertyName==="value"&&wu(Pl)){var o=[];Gy(o,Pl,s,$o(s)),ru(lC,o)}}function uC(s,o,l){s==="focusin"?(Yy(),Nl=o,Pl=l,Nl.attachEvent("onpropertychange",Xy)):s==="focusout"&&Yy()}function dC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return wu(Pl)}function hC(s,o){if(s==="click")return wu(o)}function fC(s,o){if(s==="input"||s==="change")return wu(o)}function pC(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var rr=typeof Object.is=="function"?Object.is:pC;function Dl(s,o){if(rr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!f.call(o,g)||!rr(s[g],o[g]))return!1}return!0}function Jy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Zy(s,o){var l=Jy(s);s=0;for(var d;l;){if(l.nodeType===3){if(d=s+l.textContent.length,s<=o&&d>=o)return{node:l,offset:o-s};s=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Jy(l)}}function ev(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?ev(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function tv(){for(var s=window,o=an();o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=an(s.document)}return o}function gf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function mC(s){var o=tv(),l=s.focusedElem,d=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&ev(l.ownerDocument.documentElement,l)){if(d!==null&&gf(l)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(s,l.value.length);else if(s=(o=l.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=l.textContent.length,v=Math.min(d.start,g);d=d.end===void 0?v:Math.min(d.end,g),!s.extend&&v>d&&(g=d,d=v,v=g),g=Zy(l,v);var S=Zy(l,d);g&&S&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),v>d?(s.addRange(o),s.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),s.addRange(o)))}}for(o=[],s=l;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)s=o[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var gC=h&&"documentMode"in document&&11>=document.documentMode,oa=null,yf=null,Ol=null,vf=!1;function nv(s,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vf||oa==null||oa!==an(d)||(d=oa,"selectionStart"in d&&gf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ol&&Dl(Ol,d)||(Ol=d,d=Su(yf,"onSelect"),0<d.length&&(o=new Zi("onSelect","select",null,o,l),s.push({event:o,listeners:d}),o.target=oa)))}function xu(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var aa={animationend:xu("Animation","AnimationEnd"),animationiteration:xu("Animation","AnimationIteration"),animationstart:xu("Animation","AnimationStart"),transitionend:xu("Transition","TransitionEnd")},_f={},rv={};h&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function Eu(s){if(_f[s])return _f[s];if(!aa[s])return s;var o=aa[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in rv)return _f[s]=o[l];return s}var sv=Eu("animationend"),iv=Eu("animationiteration"),ov=Eu("animationstart"),av=Eu("transitionend"),lv=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(s,o){lv.set(s,o),a(o,[s])}for(var wf=0;wf<cv.length;wf++){var xf=cv[wf],yC=xf.toLowerCase(),vC=xf[0].toUpperCase()+xf.slice(1);Qs(yC,"on"+vC)}Qs(sv,"onAnimationEnd"),Qs(iv,"onAnimationIteration"),Qs(ov,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(av,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function uv(s,o,l){var d=s.type||"unknown-event";s.currentTarget=l,fl(d,o,void 0,s),s.currentTarget=null}function dv(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var d=s[l],g=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var S=d.length-1;0<=S;S--){var M=d[S],V=M.instance,Q=M.currentTarget;if(M=M.listener,V!==v&&g.isPropagationStopped())break e;uv(g,M,Q),v=V}else for(S=0;S<d.length;S++){if(M=d[S],V=M.instance,Q=M.currentTarget,M=M.listener,V!==v&&g.isPropagationStopped())break e;uv(g,M,Q),v=V}}}if(Wo)throw s=zn,Wo=!1,zn=null,s}function lt(s,o){var l=o[Rf];l===void 0&&(l=o[Rf]=new Set);var d=s+"__bubble";l.has(d)||(hv(o,s,2,!1),l.add(d))}function Ef(s,o,l){var d=0;o&&(d|=4),hv(l,s,d,o)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Ll(s){if(!s[Tu]){s[Tu]=!0,r.forEach(function(l){l!=="selectionchange"&&(_C.has(l)||Ef(l,!1,s),Ef(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Tu]||(o[Tu]=!0,Ef("selectionchange",!1,o))}}function hv(s,o,l,d){switch(Jo(o)){case 1:var g=Ir;break;case 4:g=pu;break;default:g=bl}l=g.bind(null,o,l,s),g=void 0,!zs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(o,l,{capture:!0,passive:g}):s.addEventListener(o,l,!0):g!==void 0?s.addEventListener(o,l,{passive:g}):s.addEventListener(o,l,!1)}function Tf(s,o,l,d,g){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var M=d.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=d.return;S!==null;){var V=S.tag;if((V===3||V===4)&&(V=S.stateNode.containerInfo,V===g||V.nodeType===8&&V.parentNode===g))return;S=S.return}for(;M!==null;){if(S=to(M),S===null)return;if(V=S.tag,V===5||V===6){d=v=S;continue e}M=M.parentNode}}d=d.return}ru(function(){var Q=v,se=$o(l),ie=[];e:{var re=lv.get(s);if(re!==void 0){var he=Zi,ye=s;switch(s){case"keypress":if(Ji(l)===0)break e;case"keydown":case"keyup":he=nt;break;case"focusin":ye="focus",he=Bt;break;case"focusout":ye="blur",he=Bt;break;case"beforeblur":case"afterblur":he=Bt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Rr;break;case sv:case iv:case ov:he=_u;break;case av:he=sa;break;case"scroll":he=ea;break;case"wheel":he=nC;break;case"copy":case"cut":case"paste":he=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=An}var we=(o&4)!==0,St=!we&&s==="scroll",H=we?re!==null?re+"Capture":null:re;we=[];for(var U=Q,G;U!==null;){G=U;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,H!==null&&(ae=Bi(U,H),ae!=null&&we.push(jl(U,ae,G)))),St)break;U=U.return}0<we.length&&(re=new he(re,ye,null,l,se),ie.push({event:re,listeners:we}))}}if((o&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",re&&l!==Vs&&(ye=l.relatedTarget||l.fromElement)&&(to(ye)||ye[cs]))break e;if((he||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,he?(ye=l.relatedTarget||l.toElement,he=Q,ye=ye?to(ye):null,ye!==null&&(St=tr(ye),ye!==St||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(he=null,ye=Q),he!==ye)){if(we=Al,ae="onMouseLeave",H="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(we=An,ae="onPointerLeave",H="onPointerEnter",U="pointer"),St=he==null?re:ua(he),G=ye==null?re:ua(ye),re=new we(ae,U+"leave",he,l,se),re.target=St,re.relatedTarget=G,ae=null,to(se)===Q&&(we=new we(H,U+"enter",ye,l,se),we.target=G,we.relatedTarget=St,ae=we),St=ae,he&&ye)t:{for(we=he,H=ye,U=0,G=we;G;G=la(G))U++;for(G=0,ae=H;ae;ae=la(ae))G++;for(;0<U-G;)we=la(we),U--;for(;0<G-U;)H=la(H),G--;for(;U--;){if(we===H||H!==null&&we===H.alternate)break t;we=la(we),H=la(H)}we=null}else we=null;he!==null&&fv(ie,re,he,we,!1),ye!==null&&St!==null&&fv(ie,St,ye,we,!0)}}e:{if(re=Q?ua(Q):window,he=re.nodeName&&re.nodeName.toLowerCase(),he==="select"||he==="input"&&re.type==="file")var Ee=cC;else if(qy(re))if(Ky)Ee=fC;else{Ee=dC;var Ce=uC}else(he=re.nodeName)&&he.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ee=hC);if(Ee&&(Ee=Ee(s,Q))){Gy(ie,Ee,l,se);break e}Ce&&Ce(s,re,Q),s==="focusout"&&(Ce=re._wrapperState)&&Ce.controlled&&re.type==="number"&&$e(re,"number",re.value)}switch(Ce=Q?ua(Q):window,s){case"focusin":(qy(Ce)||Ce.contentEditable==="true")&&(oa=Ce,yf=Q,Ol=null);break;case"focusout":Ol=yf=oa=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,nv(ie,l,se);break;case"selectionchange":if(gC)break;case"keydown":case"keyup":nv(ie,l,se)}var Ae;if(ff)e:{switch(s){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ia?Wy(s,l)&&(Le="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(zy&&l.locale!=="ko"&&(ia||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ia&&(Ae=mu()):(bn=se,Zo="value"in bn?bn.value:bn.textContent,ia=!0)),Ce=Su(Q,Le),0<Ce.length&&(Le=new E(Le,s,null,l,se),ie.push({event:Le,listeners:Ce}),Ae?Le.data=Ae:(Ae=Hy(l),Ae!==null&&(Le.data=Ae)))),(Ae=sC?iC(s,l):oC(s,l))&&(Q=Su(Q,"onBeforeInput"),0<Q.length&&(se=new E("onBeforeInput","beforeinput",null,l,se),ie.push({event:se,listeners:Q}),se.data=Ae))}dv(ie,o)})}function jl(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Su(s,o){for(var l=o+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Bi(s,l),v!=null&&d.unshift(jl(s,v,g)),v=Bi(s,o),v!=null&&d.push(jl(s,v,g))),s=s.return}return d}function la(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function fv(s,o,l,d,g){for(var v=o._reactName,S=[];l!==null&&l!==d;){var M=l,V=M.alternate,Q=M.stateNode;if(V!==null&&V===d)break;M.tag===5&&Q!==null&&(M=Q,g?(V=Bi(l,v),V!=null&&S.unshift(jl(l,V,M))):g||(V=Bi(l,v),V!=null&&S.push(jl(l,V,M)))),l=l.return}S.length!==0&&s.push({event:o,listeners:S})}var wC=/\r\n?/g,xC=/\u0000|\uFFFD/g;function pv(s){return(typeof s=="string"?s:""+s).replace(wC,`
`).replace(xC,"")}function Iu(s,o,l){if(o=pv(o),pv(s)!==o&&l)throw Error(t(425))}function bu(){}var Sf=null,If=null;function bf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Cf=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(s){return mv.resolve(null).then(s).catch(SC)}:Cf;function SC(s){setTimeout(function(){throw s})}function Af(s,o){var l=o,d=0;do{var g=l.nextSibling;if(s.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(d===0){s.removeChild(g),qs(o);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=g}while(l);qs(o)}function Ys(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function gv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return s;o--}else l==="/$"&&o++}s=s.previousSibling}return null}var ca=Math.random().toString(36).slice(2),Nr="__reactFiber$"+ca,Vl="__reactProps$"+ca,cs="__reactContainer$"+ca,Rf="__reactEvents$"+ca,IC="__reactListeners$"+ca,bC="__reactHandles$"+ca;function to(s){var o=s[Nr];if(o)return o;for(var l=s.parentNode;l;){if(o=l[cs]||l[Nr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=gv(s);s!==null;){if(l=s[Nr])return l;s=gv(s)}return o}s=l,l=s.parentNode}return null}function Fl(s){return s=s[Nr]||s[cs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ua(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Cu(s){return s[Vl]||null}var kf=[],da=-1;function Xs(s){return{current:s}}function ct(s){0>da||(s.current=kf[da],kf[da]=null,da--)}function it(s,o){da++,kf[da]=s.current,s.current=o}var Js={},Xt=Xs(Js),pn=Xs(!1),no=Js;function ha(s,o){var l=s.type.contextTypes;if(!l)return Js;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in l)g[v]=o[v];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function mn(s){return s=s.childContextTypes,s!=null}function Au(){ct(pn),ct(Xt)}function yv(s,o,l){if(Xt.current!==Js)throw Error(t(168));it(Xt,o),it(pn,l)}function vv(s,o,l){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(t(108,de(s)||"Unknown",g));return oe({},l,d)}function Ru(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Js,no=Xt.current,it(Xt,s),it(pn,pn.current),!0}function _v(s,o,l){var d=s.stateNode;if(!d)throw Error(t(169));l?(s=vv(s,o,no),d.__reactInternalMemoizedMergedChildContext=s,ct(pn),ct(Xt),it(Xt,s)):ct(pn),it(pn,l)}var us=null,ku=!1,Nf=!1;function wv(s){us===null?us=[s]:us.push(s)}function CC(s){ku=!0,wv(s)}function Zs(){if(!Nf&&us!==null){Nf=!0;var s=0,o=Ke;try{var l=us;for(Ke=1;s<l.length;s++){var d=l[s];do d=d(!0);while(d!==null)}us=null,ku=!1}catch(g){throw us!==null&&(us=us.slice(s+1)),ml(qo,Zs),g}finally{Ke=o,Nf=!1}}return null}var fa=[],pa=0,Nu=null,Pu=0,$n=[],Wn=0,ro=null,ds=1,hs="";function so(s,o){fa[pa++]=Pu,fa[pa++]=Nu,Nu=s,Pu=o}function xv(s,o,l){$n[Wn++]=ds,$n[Wn++]=hs,$n[Wn++]=ro,ro=s;var d=ds;s=hs;var g=32-Sn(d)-1;d&=~(1<<g),l+=1;var v=32-Sn(o)+g;if(30<v){var S=g-g%5;v=(d&(1<<S)-1).toString(32),d>>=S,g-=S,ds=1<<32-Sn(o)+g|l<<g|d,hs=v+s}else ds=1<<v|l<<g|d,hs=s}function Pf(s){s.return!==null&&(so(s,1),xv(s,1,0))}function Df(s){for(;s===Nu;)Nu=fa[--pa],fa[pa]=null,Pu=fa[--pa],fa[pa]=null;for(;s===ro;)ro=$n[--Wn],$n[Wn]=null,hs=$n[--Wn],$n[Wn]=null,ds=$n[--Wn],$n[Wn]=null}var Rn=null,kn=null,ft=!1,sr=null;function Ev(s,o){var l=Kn(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=s,o=s.deletions,o===null?(s.deletions=[l],s.flags|=16):o.push(l)}function Tv(s,o){switch(s.tag){case 5:var l=s.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Rn=s,kn=Ys(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Rn=s,kn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=ro!==null?{id:ds,overflow:hs}:null,s.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=Kn(18,null,null,0),l.stateNode=o,l.return=s,s.child=l,Rn=s,kn=null,!0):!1;default:return!1}}function Of(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Mf(s){if(ft){var o=kn;if(o){var l=o;if(!Tv(s,o)){if(Of(s))throw Error(t(418));o=Ys(l.nextSibling);var d=Rn;o&&Tv(s,o)?Ev(d,l):(s.flags=s.flags&-4097|2,ft=!1,Rn=s)}}else{if(Of(s))throw Error(t(418));s.flags=s.flags&-4097|2,ft=!1,Rn=s}}}function Sv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Rn=s}function Du(s){if(s!==Rn)return!1;if(!ft)return Sv(s),ft=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!bf(s.type,s.memoizedProps)),o&&(o=kn)){if(Of(s))throw Iv(),Error(t(418));for(;o;)Ev(s,o),o=Ys(o.nextSibling)}if(Sv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(o===0){kn=Ys(s.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}s=s.nextSibling}kn=null}}else kn=Rn?Ys(s.stateNode.nextSibling):null;return!0}function Iv(){for(var s=kn;s;)s=Ys(s.nextSibling)}function ma(){kn=Rn=null,ft=!1}function Lf(s){sr===null?sr=[s]:sr.push(s)}var AC=K.ReactCurrentBatchConfig;function Ul(s,o,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,s));var g=d,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var M=g.refs;S===null?delete M[v]:M[v]=S},o._stringRef=v,o)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function Ou(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function bv(s){var o=s._init;return o(s._payload)}function Cv(s){function o(H,U){if(s){var G=H.deletions;G===null?(H.deletions=[U],H.flags|=16):G.push(U)}}function l(H,U){if(!s)return null;for(;U!==null;)o(H,U),U=U.sibling;return null}function d(H,U){for(H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function g(H,U){return H=ai(H,U),H.index=0,H.sibling=null,H}function v(H,U,G){return H.index=G,s?(G=H.alternate,G!==null?(G=G.index,G<U?(H.flags|=2,U):G):(H.flags|=2,U)):(H.flags|=1048576,U)}function S(H){return s&&H.alternate===null&&(H.flags|=2),H}function M(H,U,G,ae){return U===null||U.tag!==6?(U=Cp(G,H.mode,ae),U.return=H,U):(U=g(U,G),U.return=H,U)}function V(H,U,G,ae){var Ee=G.type;return Ee===P?se(H,U,G.props.children,ae,G.key):U!==null&&(U.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Se&&bv(Ee)===U.type)?(ae=g(U,G.props),ae.ref=Ul(H,U,G),ae.return=H,ae):(ae=sd(G.type,G.key,G.props,null,H.mode,ae),ae.ref=Ul(H,U,G),ae.return=H,ae)}function Q(H,U,G,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Ap(G,H.mode,ae),U.return=H,U):(U=g(U,G.children||[]),U.return=H,U)}function se(H,U,G,ae,Ee){return U===null||U.tag!==7?(U=fo(G,H.mode,ae,Ee),U.return=H,U):(U=g(U,G),U.return=H,U)}function ie(H,U,G){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Cp(""+U,H.mode,G),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case X:return G=sd(U.type,U.key,U.props,null,H.mode,G),G.ref=Ul(H,null,U),G.return=H,G;case ne:return U=Ap(U,H.mode,G),U.return=H,U;case Se:var ae=U._init;return ie(H,ae(U._payload),G)}if(rt(U)||J(U))return U=fo(U,H.mode,G,null),U.return=H,U;Ou(H,U)}return null}function re(H,U,G,ae){var Ee=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Ee!==null?null:M(H,U,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case X:return G.key===Ee?V(H,U,G,ae):null;case ne:return G.key===Ee?Q(H,U,G,ae):null;case Se:return Ee=G._init,re(H,U,Ee(G._payload),ae)}if(rt(G)||J(G))return Ee!==null?null:se(H,U,G,ae,null);Ou(H,G)}return null}function he(H,U,G,ae,Ee){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(G)||null,M(U,H,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case X:return H=H.get(ae.key===null?G:ae.key)||null,V(U,H,ae,Ee);case ne:return H=H.get(ae.key===null?G:ae.key)||null,Q(U,H,ae,Ee);case Se:var Ce=ae._init;return he(H,U,G,Ce(ae._payload),Ee)}if(rt(ae)||J(ae))return H=H.get(G)||null,se(U,H,ae,Ee,null);Ou(U,ae)}return null}function ye(H,U,G,ae){for(var Ee=null,Ce=null,Ae=U,Le=U=0,Vt=null;Ae!==null&&Le<G.length;Le++){Ae.index>Le?(Vt=Ae,Ae=null):Vt=Ae.sibling;var Je=re(H,Ae,G[Le],ae);if(Je===null){Ae===null&&(Ae=Vt);break}s&&Ae&&Je.alternate===null&&o(H,Ae),U=v(Je,U,Le),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je,Ae=Vt}if(Le===G.length)return l(H,Ae),ft&&so(H,Le),Ee;if(Ae===null){for(;Le<G.length;Le++)Ae=ie(H,G[Le],ae),Ae!==null&&(U=v(Ae,U,Le),Ce===null?Ee=Ae:Ce.sibling=Ae,Ce=Ae);return ft&&so(H,Le),Ee}for(Ae=d(H,Ae);Le<G.length;Le++)Vt=he(Ae,H,Le,G[Le],ae),Vt!==null&&(s&&Vt.alternate!==null&&Ae.delete(Vt.key===null?Le:Vt.key),U=v(Vt,U,Le),Ce===null?Ee=Vt:Ce.sibling=Vt,Ce=Vt);return s&&Ae.forEach(function(li){return o(H,li)}),ft&&so(H,Le),Ee}function we(H,U,G,ae){var Ee=J(G);if(typeof Ee!="function")throw Error(t(150));if(G=Ee.call(G),G==null)throw Error(t(151));for(var Ce=Ee=null,Ae=U,Le=U=0,Vt=null,Je=G.next();Ae!==null&&!Je.done;Le++,Je=G.next()){Ae.index>Le?(Vt=Ae,Ae=null):Vt=Ae.sibling;var li=re(H,Ae,Je.value,ae);if(li===null){Ae===null&&(Ae=Vt);break}s&&Ae&&li.alternate===null&&o(H,Ae),U=v(li,U,Le),Ce===null?Ee=li:Ce.sibling=li,Ce=li,Ae=Vt}if(Je.done)return l(H,Ae),ft&&so(H,Le),Ee;if(Ae===null){for(;!Je.done;Le++,Je=G.next())Je=ie(H,Je.value,ae),Je!==null&&(U=v(Je,U,Le),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je);return ft&&so(H,Le),Ee}for(Ae=d(H,Ae);!Je.done;Le++,Je=G.next())Je=he(Ae,H,Le,Je.value,ae),Je!==null&&(s&&Je.alternate!==null&&Ae.delete(Je.key===null?Le:Je.key),U=v(Je,U,Le),Ce===null?Ee=Je:Ce.sibling=Je,Ce=Je);return s&&Ae.forEach(function(a1){return o(H,a1)}),ft&&so(H,Le),Ee}function St(H,U,G,ae){if(typeof G=="object"&&G!==null&&G.type===P&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case X:e:{for(var Ee=G.key,Ce=U;Ce!==null;){if(Ce.key===Ee){if(Ee=G.type,Ee===P){if(Ce.tag===7){l(H,Ce.sibling),U=g(Ce,G.props.children),U.return=H,H=U;break e}}else if(Ce.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===Se&&bv(Ee)===Ce.type){l(H,Ce.sibling),U=g(Ce,G.props),U.ref=Ul(H,Ce,G),U.return=H,H=U;break e}l(H,Ce);break}else o(H,Ce);Ce=Ce.sibling}G.type===P?(U=fo(G.props.children,H.mode,ae,G.key),U.return=H,H=U):(ae=sd(G.type,G.key,G.props,null,H.mode,ae),ae.ref=Ul(H,U,G),ae.return=H,H=ae)}return S(H);case ne:e:{for(Ce=G.key;U!==null;){if(U.key===Ce)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){l(H,U.sibling),U=g(U,G.children||[]),U.return=H,H=U;break e}else{l(H,U);break}else o(H,U);U=U.sibling}U=Ap(G,H.mode,ae),U.return=H,H=U}return S(H);case Se:return Ce=G._init,St(H,U,Ce(G._payload),ae)}if(rt(G))return ye(H,U,G,ae);if(J(G))return we(H,U,G,ae);Ou(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,U!==null&&U.tag===6?(l(H,U.sibling),U=g(U,G),U.return=H,H=U):(l(H,U),U=Cp(G,H.mode,ae),U.return=H,H=U),S(H)):l(H,U)}return St}var ga=Cv(!0),Av=Cv(!1),Mu=Xs(null),Lu=null,ya=null,jf=null;function Vf(){jf=ya=Lu=null}function Ff(s){var o=Mu.current;ct(Mu),s._currentValue=o}function Uf(s,o,l){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===l)break;s=s.return}}function va(s,o){Lu=s,jf=ya=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(gn=!0),s.firstContext=null)}function Hn(s){var o=s._currentValue;if(jf!==s)if(s={context:s,memoizedValue:o,next:null},ya===null){if(Lu===null)throw Error(t(308));ya=s,Lu.dependencies={lanes:0,firstContext:s}}else ya=ya.next=s;return o}var io=null;function zf(s){io===null?io=[s]:io.push(s)}function Rv(s,o,l,d){var g=o.interleaved;return g===null?(l.next=l,zf(o)):(l.next=g.next,g.next=l),o.interleaved=l,fs(s,d)}function fs(s,o){s.lanes|=o;var l=s.alternate;for(l!==null&&(l.lanes|=o),l=s,s=s.return;s!==null;)s.childLanes|=o,l=s.alternate,l!==null&&(l.childLanes|=o),l=s,s=s.return;return l.tag===3?l.stateNode:null}var ei=!1;function Bf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ps(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function ti(s,o,l){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,fs(s,l)}return g=d.interleaved,g===null?(o.next=o,zf(d)):(o.next=g.next,g.next=o),d.interleaved=o,fs(s,l)}function ju(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,xl(s,l)}}function Nv(s,o){var l=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?g=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?g=v=o:v=v.next=o}else g=v=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,effects:d.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}function Vu(s,o,l,d){var g=s.updateQueue;ei=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var V=M,Q=V.next;V.next=null,S===null?v=Q:S.next=Q,S=V;var se=s.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==S&&(M===null?se.firstBaseUpdate=Q:M.next=Q,se.lastBaseUpdate=V))}if(v!==null){var ie=g.baseState;S=0,se=Q=V=null,M=v;do{var re=M.lane,he=M.eventTime;if((d&re)===re){se!==null&&(se=se.next={eventTime:he,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ye=s,we=M;switch(re=o,he=l,we.tag){case 1:if(ye=we.payload,typeof ye=="function"){ie=ye.call(he,ie,re);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=we.payload,re=typeof ye=="function"?ye.call(he,ie,re):ye,re==null)break e;ie=oe({},ie,re);break e;case 2:ei=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,re=g.effects,re===null?g.effects=[M]:re.push(M))}else he={eventTime:he,lane:re,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Q=se=he,V=ie):se=se.next=he,S|=re;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;re=M,M=re.next,re.next=null,g.lastBaseUpdate=re,g.shared.pending=null}}while(!0);if(se===null&&(V=ie),g.baseState=V,g.firstBaseUpdate=Q,g.lastBaseUpdate=se,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);lo|=S,s.lanes=S,s.memoizedState=ie}}function Pv(s,o,l){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],g=d.callback;if(g!==null){if(d.callback=null,d=l,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var zl={},Pr=Xs(zl),Bl=Xs(zl),$l=Xs(zl);function oo(s){if(s===zl)throw Error(t(174));return s}function $f(s,o){switch(it($l,o),it(Bl,s),it(Pr,zl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Uo(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Uo(o,s)}ct(Pr),it(Pr,o)}function _a(){ct(Pr),ct(Bl),ct($l)}function Dv(s){oo($l.current);var o=oo(Pr.current),l=Uo(o,s.type);o!==l&&(it(Bl,s),it(Pr,l))}function Wf(s){Bl.current===s&&(ct(Pr),ct(Bl))}var pt=Xs(0);function Fu(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Hf=[];function qf(){for(var s=0;s<Hf.length;s++)Hf[s]._workInProgressVersionPrimary=null;Hf.length=0}var Uu=K.ReactCurrentDispatcher,Gf=K.ReactCurrentBatchConfig,ao=0,mt=null,Pt=null,Lt=null,zu=!1,Wl=!1,Hl=0,RC=0;function Jt(){throw Error(t(321))}function Kf(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!rr(s[l],o[l]))return!1;return!0}function Qf(s,o,l,d,g,v){if(ao=v,mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Uu.current=s===null||s.memoizedState===null?DC:OC,s=l(d,g),Wl){v=0;do{if(Wl=!1,Hl=0,25<=v)throw Error(t(301));v+=1,Lt=Pt=null,o.updateQueue=null,Uu.current=MC,s=l(d,g)}while(Wl)}if(Uu.current=Wu,o=Pt!==null&&Pt.next!==null,ao=0,Lt=Pt=mt=null,zu=!1,o)throw Error(t(300));return s}function Yf(){var s=Hl!==0;return Hl=0,s}function Dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?mt.memoizedState=Lt=s:Lt=Lt.next=s,Lt}function qn(){if(Pt===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Pt.next;var o=Lt===null?mt.memoizedState:Lt.next;if(o!==null)Lt=o,Pt=s;else{if(s===null)throw Error(t(310));Pt=s,s={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Lt===null?mt.memoizedState=Lt=s:Lt=Lt.next=s}return Lt}function ql(s,o){return typeof o=="function"?o(s):o}function Xf(s){var o=qn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var d=Pt,g=d.baseQueue,v=l.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}d.baseQueue=g=v,l.pending=null}if(g!==null){v=g.next,d=d.baseState;var M=S=null,V=null,Q=v;do{var se=Q.lane;if((ao&se)===se)V!==null&&(V=V.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:s(d,Q.action);else{var ie={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};V===null?(M=V=ie,S=d):V=V.next=ie,mt.lanes|=se,lo|=se}Q=Q.next}while(Q!==null&&Q!==v);V===null?S=d:V.next=M,rr(d,o.memoizedState)||(gn=!0),o.memoizedState=d,o.baseState=S,o.baseQueue=V,l.lastRenderedState=d}if(s=l.interleaved,s!==null){g=s;do v=g.lane,mt.lanes|=v,lo|=v,g=g.next;while(g!==s)}else g===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Jf(s){var o=qn(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var d=l.dispatch,g=l.pending,v=o.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);rr(v,o.memoizedState)||(gn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,d]}function Ov(){}function Mv(s,o){var l=mt,d=qn(),g=o(),v=!rr(d.memoizedState,g);if(v&&(d.memoizedState=g,gn=!0),d=d.queue,Zf(Vv.bind(null,l,d,s),[s]),d.getSnapshot!==o||v||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,Gl(9,jv.bind(null,l,d,g,o),void 0,null),jt===null)throw Error(t(349));(ao&30)!==0||Lv(l,o,g)}return g}function Lv(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function jv(s,o,l,d){o.value=l,o.getSnapshot=d,Fv(o)&&Uv(s)}function Vv(s,o,l){return l(function(){Fv(o)&&Uv(s)})}function Fv(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!rr(s,l)}catch{return!0}}function Uv(s){var o=fs(s,1);o!==null&&lr(o,s,1,-1)}function zv(s){var o=Dr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:s},o.queue=s,s=s.dispatch=PC.bind(null,mt,s),[o.memoizedState,s]}function Gl(s,o,l,d){return s={tag:s,create:o,destroy:l,deps:d,next:null},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.lastEffect=s.next=s):(l=o.lastEffect,l===null?o.lastEffect=s.next=s:(d=l.next,l.next=s,s.next=d,o.lastEffect=s)),s}function Bv(){return qn().memoizedState}function Bu(s,o,l,d){var g=Dr();mt.flags|=s,g.memoizedState=Gl(1|o,l,void 0,d===void 0?null:d)}function $u(s,o,l,d){var g=qn();d=d===void 0?null:d;var v=void 0;if(Pt!==null){var S=Pt.memoizedState;if(v=S.destroy,d!==null&&Kf(d,S.deps)){g.memoizedState=Gl(o,l,v,d);return}}mt.flags|=s,g.memoizedState=Gl(1|o,l,v,d)}function $v(s,o){return Bu(8390656,8,s,o)}function Zf(s,o){return $u(2048,8,s,o)}function Wv(s,o){return $u(4,2,s,o)}function Hv(s,o){return $u(4,4,s,o)}function qv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Gv(s,o,l){return l=l!=null?l.concat([s]):null,$u(4,4,qv.bind(null,o,s),l)}function ep(){}function Kv(s,o){var l=qn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Kf(o,d[1])?d[0]:(l.memoizedState=[s,o],s)}function Qv(s,o){var l=qn();o=o===void 0?null:o;var d=l.memoizedState;return d!==null&&o!==null&&Kf(o,d[1])?d[0]:(s=s(),l.memoizedState=[s,o],s)}function Yv(s,o,l){return(ao&21)===0?(s.baseState&&(s.baseState=!1,gn=!0),s.memoizedState=l):(rr(l,o)||(l=_l(),mt.lanes|=l,lo|=l,s.baseState=!0),o)}function kC(s,o){var l=Ke;Ke=l!==0&&4>l?l:4,s(!0);var d=Gf.transition;Gf.transition={};try{s(!1),o()}finally{Ke=l,Gf.transition=d}}function Xv(){return qn().memoizedState}function NC(s,o,l){var d=ii(s);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Jv(s))Zv(o,l);else if(l=Rv(s,o,l,d),l!==null){var g=cn();lr(l,s,d,g),e_(l,o,d)}}function PC(s,o,l){var d=ii(s),g={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jv(s))Zv(o,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,M=v(S,l);if(g.hasEagerState=!0,g.eagerState=M,rr(M,S)){var V=o.interleaved;V===null?(g.next=g,zf(o)):(g.next=V.next,V.next=g),o.interleaved=g;return}}catch{}finally{}l=Rv(s,o,g,d),l!==null&&(g=cn(),lr(l,s,d,g),e_(l,o,d))}}function Jv(s){var o=s.alternate;return s===mt||o!==null&&o===mt}function Zv(s,o){Wl=zu=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function e_(s,o,l){if((l&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,l|=d,o.lanes=l,xl(s,l)}}var Wu={readContext:Hn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},DC={readContext:Hn,useCallback:function(s,o){return Dr().memoizedState=[s,o===void 0?null:o],s},useContext:Hn,useEffect:$v,useImperativeHandle:function(s,o,l){return l=l!=null?l.concat([s]):null,Bu(4194308,4,qv.bind(null,o,s),l)},useLayoutEffect:function(s,o){return Bu(4194308,4,s,o)},useInsertionEffect:function(s,o){return Bu(4,2,s,o)},useMemo:function(s,o){var l=Dr();return o=o===void 0?null:o,s=s(),l.memoizedState=[s,o],s},useReducer:function(s,o,l){var d=Dr();return o=l!==void 0?l(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=NC.bind(null,mt,s),[d.memoizedState,s]},useRef:function(s){var o=Dr();return s={current:s},o.memoizedState=s},useState:zv,useDebugValue:ep,useDeferredValue:function(s){return Dr().memoizedState=s},useTransition:function(){var s=zv(!1),o=s[0];return s=kC.bind(null,s[1]),Dr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,l){var d=mt,g=Dr();if(ft){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),jt===null)throw Error(t(349));(ao&30)!==0||Lv(d,o,l)}g.memoizedState=l;var v={value:l,getSnapshot:o};return g.queue=v,$v(Vv.bind(null,d,v,s),[s]),d.flags|=2048,Gl(9,jv.bind(null,d,v,l,o),void 0,null),l},useId:function(){var s=Dr(),o=jt.identifierPrefix;if(ft){var l=hs,d=ds;l=(d&~(1<<32-Sn(d)-1)).toString(32)+l,o=":"+o+"R"+l,l=Hl++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=RC++,o=":"+o+"r"+l.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},OC={readContext:Hn,useCallback:Kv,useContext:Hn,useEffect:Zf,useImperativeHandle:Gv,useInsertionEffect:Wv,useLayoutEffect:Hv,useMemo:Qv,useReducer:Xf,useRef:Bv,useState:function(){return Xf(ql)},useDebugValue:ep,useDeferredValue:function(s){var o=qn();return Yv(o,Pt.memoizedState,s)},useTransition:function(){var s=Xf(ql)[0],o=qn().memoizedState;return[s,o]},useMutableSource:Ov,useSyncExternalStore:Mv,useId:Xv,unstable_isNewReconciler:!1},MC={readContext:Hn,useCallback:Kv,useContext:Hn,useEffect:Zf,useImperativeHandle:Gv,useInsertionEffect:Wv,useLayoutEffect:Hv,useMemo:Qv,useReducer:Jf,useRef:Bv,useState:function(){return Jf(ql)},useDebugValue:ep,useDeferredValue:function(s){var o=qn();return Pt===null?o.memoizedState=s:Yv(o,Pt.memoizedState,s)},useTransition:function(){var s=Jf(ql)[0],o=qn().memoizedState;return[s,o]},useMutableSource:Ov,useSyncExternalStore:Mv,useId:Xv,unstable_isNewReconciler:!1};function ir(s,o){if(s&&s.defaultProps){o=oe({},o),s=s.defaultProps;for(var l in s)o[l]===void 0&&(o[l]=s[l]);return o}return o}function tp(s,o,l,d){o=s.memoizedState,l=l(d,o),l=l==null?o:oe({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Hu={isMounted:function(s){return(s=s._reactInternals)?tr(s)===s:!1},enqueueSetState:function(s,o,l){s=s._reactInternals;var d=cn(),g=ii(s),v=ps(d,g);v.payload=o,l!=null&&(v.callback=l),o=ti(s,v,g),o!==null&&(lr(o,s,g,d),ju(o,s,g))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var d=cn(),g=ii(s),v=ps(d,g);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=ti(s,v,g),o!==null&&(lr(o,s,g,d),ju(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=cn(),d=ii(s),g=ps(l,d);g.tag=2,o!=null&&(g.callback=o),o=ti(s,g,d),o!==null&&(lr(o,s,d,l),ju(o,s,d))}};function t_(s,o,l,d,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,S):o.prototype&&o.prototype.isPureReactComponent?!Dl(l,d)||!Dl(g,v):!0}function n_(s,o,l){var d=!1,g=Js,v=o.contextType;return typeof v=="object"&&v!==null?v=Hn(v):(g=mn(o)?no:Xt.current,d=o.contextTypes,v=(d=d!=null)?ha(s,g):Js),o=new o(l,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Hu,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),o}function r_(s,o,l,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==s&&Hu.enqueueReplaceState(o,o.state,null)}function np(s,o,l,d){var g=s.stateNode;g.props=l,g.state=s.memoizedState,g.refs={},Bf(s);var v=o.contextType;typeof v=="object"&&v!==null?g.context=Hn(v):(v=mn(o)?no:Xt.current,g.context=ha(s,v)),g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(tp(s,o,v,l),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Hu.enqueueReplaceState(g,g.state,null),Vu(s,l,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function wa(s,o){try{var l="",d=o;do l+=Re(d),d=d.return;while(d);var g=l}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:g,digest:null}}function rp(s,o,l){return{value:s,source:null,stack:l??null,digest:o??null}}function sp(s,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var LC=typeof WeakMap=="function"?WeakMap:Map;function s_(s,o,l){l=ps(-1,l),l.tag=3,l.payload={element:null};var d=o.value;return l.callback=function(){Ju||(Ju=!0,_p=d),sp(s,o)},l}function i_(s,o,l){l=ps(-1,l),l.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;l.payload=function(){return d(g)},l.callback=function(){sp(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){sp(s,o),typeof d!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),l}function o_(s,o,l){var d=s.pingCache;if(d===null){d=s.pingCache=new LC;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(g.add(l),s=YC.bind(null,s,o,l),o.then(s,s))}function a_(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function l_(s,o,l,d,g){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=ps(-1,1),o.tag=2,ti(l,o,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var jC=K.ReactCurrentOwner,gn=!1;function ln(s,o,l,d){o.child=s===null?Av(o,null,l,d):ga(o,s.child,l,d)}function c_(s,o,l,d,g){l=l.render;var v=o.ref;return va(o,g),d=Qf(s,o,l,d,v,g),l=Yf(),s!==null&&!gn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ms(s,o,g)):(ft&&l&&Pf(o),o.flags|=1,ln(s,o,d,g),o.child)}function u_(s,o,l,d,g){if(s===null){var v=l.type;return typeof v=="function"&&!bp(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=v,d_(s,o,v,d,g)):(s=sd(l.type,null,d,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,(s.lanes&g)===0){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Dl,l(S,d)&&s.ref===o.ref)return ms(s,o,g)}return o.flags|=1,s=ai(v,d),s.ref=o.ref,s.return=o,o.child=s}function d_(s,o,l,d,g){if(s!==null){var v=s.memoizedProps;if(Dl(v,d)&&s.ref===o.ref)if(gn=!1,o.pendingProps=d=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(gn=!0);else return o.lanes=s.lanes,ms(s,o,g)}return ip(s,o,l,d,g)}function h_(s,o,l){var d=o.pendingProps,g=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ea,Nn),Nn|=l;else{if((l&1073741824)===0)return s=v!==null?v.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,it(Ea,Nn),Nn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,it(Ea,Nn),Nn|=d}else v!==null?(d=v.baseLanes|l,o.memoizedState=null):d=l,it(Ea,Nn),Nn|=d;return ln(s,o,g,l),o.child}function f_(s,o){var l=o.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function ip(s,o,l,d,g){var v=mn(l)?no:Xt.current;return v=ha(o,v),va(o,g),l=Qf(s,o,l,d,v,g),d=Yf(),s!==null&&!gn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ms(s,o,g)):(ft&&d&&Pf(o),o.flags|=1,ln(s,o,l,g),o.child)}function p_(s,o,l,d,g){if(mn(l)){var v=!0;Ru(o)}else v=!1;if(va(o,g),o.stateNode===null)Gu(s,o),n_(o,l,d),np(o,l,d,g),d=!0;else if(s===null){var S=o.stateNode,M=o.memoizedProps;S.props=M;var V=S.context,Q=l.contextType;typeof Q=="object"&&Q!==null?Q=Hn(Q):(Q=mn(l)?no:Xt.current,Q=ha(o,Q));var se=l.getDerivedStateFromProps,ie=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function";ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==d||V!==Q)&&r_(o,S,d,Q),ei=!1;var re=o.memoizedState;S.state=re,Vu(o,d,S,g),V=o.memoizedState,M!==d||re!==V||pn.current||ei?(typeof se=="function"&&(tp(o,l,se,d),V=o.memoizedState),(M=ei||t_(o,l,M,d,re,V,Q))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=V),S.props=d,S.state=V,S.context=Q,d=M):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{S=o.stateNode,kv(s,o),M=o.memoizedProps,Q=o.type===o.elementType?M:ir(o.type,M),S.props=Q,ie=o.pendingProps,re=S.context,V=l.contextType,typeof V=="object"&&V!==null?V=Hn(V):(V=mn(l)?no:Xt.current,V=ha(o,V));var he=l.getDerivedStateFromProps;(se=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ie||re!==V)&&r_(o,S,d,V),ei=!1,re=o.memoizedState,S.state=re,Vu(o,d,S,g);var ye=o.memoizedState;M!==ie||re!==ye||pn.current||ei?(typeof he=="function"&&(tp(o,l,he,d),ye=o.memoizedState),(Q=ei||t_(o,l,Q,d,re,ye,V)||!1)?(se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,ye,V),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,ye,V)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ye),S.props=d,S.state=ye,S.context=V,d=Q):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),d=!1)}return op(s,o,l,d,v,g)}function op(s,o,l,d,g,v){f_(s,o);var S=(o.flags&128)!==0;if(!d&&!S)return g&&_v(o,l,!1),ms(s,o,v);d=o.stateNode,jC.current=o;var M=S&&typeof l.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&S?(o.child=ga(o,s.child,null,v),o.child=ga(o,null,M,v)):ln(s,o,M,v),o.memoizedState=d.state,g&&_v(o,l,!0),o.child}function m_(s){var o=s.stateNode;o.pendingContext?yv(s,o.pendingContext,o.pendingContext!==o.context):o.context&&yv(s,o.context,!1),$f(s,o.containerInfo)}function g_(s,o,l,d,g){return ma(),Lf(g),o.flags|=256,ln(s,o,l,d),o.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(s){return{baseLanes:s,cachePool:null,transitions:null}}function y_(s,o,l){var d=o.pendingProps,g=pt.current,v=!1,S=(o.flags&128)!==0,M;if((M=S)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),it(pt,g&1),s===null)return Mf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=d.children,s=d.fallback,v?(d=o.mode,v=o.child,S={mode:"hidden",children:S},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=id(S,d,0,null),s=fo(s,d,l,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=lp(l),o.memoizedState=ap,s):cp(o,S));if(g=s.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return VC(s,o,S,d,M,g,l);if(v){v=d.fallback,S=o.mode,g=s.child,M=g.sibling;var V={mode:"hidden",children:d.children};return(S&1)===0&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=V,o.deletions=null):(d=ai(g,V),d.subtreeFlags=g.subtreeFlags&14680064),M!==null?v=ai(M,v):(v=fo(v,S,l,null),v.flags|=2),v.return=o,d.return=o,d.sibling=v,o.child=d,d=v,v=o.child,S=s.child.memoizedState,S=S===null?lp(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~l,o.memoizedState=ap,d}return v=s.child,s=v.sibling,d=ai(v,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=l),d.return=o,d.sibling=null,s!==null&&(l=o.deletions,l===null?(o.deletions=[s],o.flags|=16):l.push(s)),o.child=d,o.memoizedState=null,d}function cp(s,o){return o=id({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function qu(s,o,l,d){return d!==null&&Lf(d),ga(o,s.child,null,l),s=cp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function VC(s,o,l,d,g,v,S){if(l)return o.flags&256?(o.flags&=-257,d=rp(Error(t(422))),qu(s,o,S,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=d.fallback,g=o.mode,d=id({mode:"visible",children:d.children},g,0,null),v=fo(v,g,S,null),v.flags|=2,d.return=o,v.return=o,d.sibling=v,o.child=d,(o.mode&1)!==0&&ga(o,s.child,null,S),o.child.memoizedState=lp(S),o.memoizedState=ap,v);if((o.mode&1)===0)return qu(s,o,S,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var M=d.dgst;return d=M,v=Error(t(419)),d=rp(v,d,void 0),qu(s,o,S,d)}if(M=(S&s.childLanes)!==0,gn||M){if(d=jt,d!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,fs(s,g),lr(d,s,g,-1))}return Ip(),d=rp(Error(t(421))),qu(s,o,S,d)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=XC.bind(null,s),g._reactRetry=o,null):(s=v.treeContext,kn=Ys(g.nextSibling),Rn=o,ft=!0,sr=null,s!==null&&($n[Wn++]=ds,$n[Wn++]=hs,$n[Wn++]=ro,ds=s.id,hs=s.overflow,ro=o),o=cp(o,d.children),o.flags|=4096,o)}function v_(s,o,l){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Uf(s.return,o,l)}function up(s,o,l,d,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=g)}function __(s,o,l){var d=o.pendingProps,g=d.revealOrder,v=d.tail;if(ln(s,o,d.children,l),d=pt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&v_(s,l,o);else if(s.tag===19)v_(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(it(pt,d),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(l=o.child,g=null;l!==null;)s=l.alternate,s!==null&&Fu(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),up(o,!1,g,l,v);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&Fu(s)===null){o.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}up(o,!0,l,null,v);break;case"together":up(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Gu(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ms(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),lo|=o.lanes,(l&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,l=ai(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=ai(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function FC(s,o,l){switch(o.tag){case 3:m_(o),ma();break;case 5:Dv(o);break;case 1:mn(o.type)&&Ru(o);break;case 4:$f(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;it(Mu,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(it(pt,pt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?y_(s,o,l):(it(pt,pt.current&1),s=ms(s,o,l),s!==null?s.sibling:null);it(pt,pt.current&1);break;case 19:if(d=(l&o.childLanes)!==0,(s.flags&128)!==0){if(d)return __(s,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),it(pt,pt.current),d)break;return null;case 22:case 23:return o.lanes=0,h_(s,o,l)}return ms(s,o,l)}var w_,dp,x_,E_;w_=function(s,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},dp=function(){},x_=function(s,o,l,d){var g=s.memoizedProps;if(g!==d){s=o.stateNode,oo(Pr.current);var v=null;switch(l){case"input":g=Ds(s,g),d=Ds(s,d),v=[];break;case"select":g=oe({},g,{value:void 0}),d=oe({},d,{value:void 0}),v=[];break;case"textarea":g=ll(s,g),d=ll(s,d),v=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=bu)}er(l,d);var S;l=null;for(Q in g)if(!d.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var M=g[Q];for(S in M)M.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?v||(v=[]):(v=v||[]).push(Q,null));for(Q in d){var V=d[Q];if(M=g?.[Q],d.hasOwnProperty(Q)&&V!==M&&(V!=null||M!=null))if(Q==="style")if(M){for(S in M)!M.hasOwnProperty(S)||V&&V.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in V)V.hasOwnProperty(S)&&M[S]!==V[S]&&(l||(l={}),l[S]=V[S])}else l||(v||(v=[]),v.push(Q,l)),l=V;else Q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,M=M?M.__html:void 0,V!=null&&M!==V&&(v=v||[]).push(Q,V)):Q==="children"?typeof V!="string"&&typeof V!="number"||(v=v||[]).push(Q,""+V):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(V!=null&&Q==="onScroll"&&lt("scroll",s),v||M===V||(v=[])):(v=v||[]).push(Q,V))}l&&(v=v||[]).push("style",l);var Q=v;(o.updateQueue=Q)&&(o.flags|=4)}},E_=function(s,o,l,d){l!==d&&(o.flags|=4)};function Kl(s,o){if(!ft)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Zt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,d=0;if(o)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=l,o}function UC(s,o,l){var d=o.pendingProps;switch(Df(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(o),null;case 1:return mn(o.type)&&Au(),Zt(o),null;case 3:return d=o.stateNode,_a(),ct(pn),ct(Xt),qf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Du(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,sr!==null&&(Ep(sr),sr=null))),dp(s,o),Zt(o),null;case 5:Wf(o);var g=oo($l.current);if(l=o.type,s!==null&&o.stateNode!=null)x_(s,o,l,d,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return Zt(o),null}if(s=oo(Pr.current),Du(o)){d=o.stateNode,l=o.type;var v=o.memoizedProps;switch(d[Nr]=o,d[Vl]=v,s=(o.mode&1)!==0,l){case"dialog":lt("cancel",d),lt("close",d);break;case"iframe":case"object":case"embed":lt("load",d);break;case"video":case"audio":for(g=0;g<Ml.length;g++)lt(Ml[g],d);break;case"source":lt("error",d);break;case"img":case"image":case"link":lt("error",d),lt("load",d);break;case"details":lt("toggle",d);break;case"input":Fo(d,v),lt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},lt("invalid",d);break;case"textarea":cl(d,v),lt("invalid",d)}er(l,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var M=v[S];S==="children"?typeof M=="string"?d.textContent!==M&&(v.suppressHydrationWarning!==!0&&Iu(d.textContent,M,s),g=["children",M]):typeof M=="number"&&d.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&Iu(d.textContent,M,s),g=["children",""+M]):i.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&lt("scroll",d)}switch(l){case"input":hn(d),Ut(d,v,!0);break;case"textarea":hn(d),Os(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=bu)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ul(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=S.createElement(l,{is:d.is}):(s=S.createElement(l),l==="select"&&(S=s,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):s=S.createElementNS(s,l),s[Nr]=o,s[Vl]=d,w_(s,o,!1,!1),o.stateNode=s;e:{switch(S=Bo(l,d),l){case"dialog":lt("cancel",s),lt("close",s),g=d;break;case"iframe":case"object":case"embed":lt("load",s),g=d;break;case"video":case"audio":for(g=0;g<Ml.length;g++)lt(Ml[g],s);g=d;break;case"source":lt("error",s),g=d;break;case"img":case"image":case"link":lt("error",s),lt("load",s),g=d;break;case"details":lt("toggle",s),g=d;break;case"input":Fo(s,d),g=Ds(s,d),lt("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=oe({},d,{value:void 0}),lt("invalid",s);break;case"textarea":cl(s,d),g=ll(s,d),lt("invalid",s);break;default:g=d}er(l,g),M=g;for(v in M)if(M.hasOwnProperty(v)){var V=M[v];v==="style"?zo(s,V):v==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Zc(s,V)):v==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&zi(s,V):typeof V=="number"&&zi(s,""+V):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?V!=null&&v==="onScroll"&&lt("scroll",s):V!=null&&$(s,v,V,S))}switch(l){case"input":hn(s),Ut(s,d,!1);break;case"textarea":hn(s),Os(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Ve(d.value));break;case"select":s.multiple=!!d.multiple,v=d.value,v!=null?Zn(s,!!d.multiple,v,!1):d.defaultValue!=null&&Zn(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=bu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Zt(o),null;case 6:if(s&&o.stateNode!=null)E_(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(l=oo($l.current),oo(Pr.current),Du(o)){if(d=o.stateNode,l=o.memoizedProps,d[Nr]=o,(v=d.nodeValue!==l)&&(s=Rn,s!==null))switch(s.tag){case 3:Iu(d.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Iu(d.nodeValue,l,(s.mode&1)!==0)}v&&(o.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Nr]=o,o.stateNode=d}return Zt(o),null;case 13:if(ct(pt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ft&&kn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Iv(),ma(),o.flags|=98560,v=!1;else if(v=Du(o),d!==null&&d.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Nr]=o}else ma(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zt(o),v=!1}else sr!==null&&(Ep(sr),sr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(pt.current&1)!==0?Dt===0&&(Dt=3):Ip())),o.updateQueue!==null&&(o.flags|=4),Zt(o),null);case 4:return _a(),dp(s,o),s===null&&Ll(o.stateNode.containerInfo),Zt(o),null;case 10:return Ff(o.type._context),Zt(o),null;case 17:return mn(o.type)&&Au(),Zt(o),null;case 19:if(ct(pt),v=o.memoizedState,v===null)return Zt(o),null;if(d=(o.flags&128)!==0,S=v.rendering,S===null)if(d)Kl(v,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(S=Fu(s),S!==null){for(o.flags|=128,Kl(v,!1),d=S.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=l,l=o.child;l!==null;)v=l,s=d,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return it(pt,pt.current&1|2),o.child}s=s.sibling}v.tail!==null&&at()>Ta&&(o.flags|=128,d=!0,Kl(v,!1),o.lanes=4194304)}else{if(!d)if(s=Fu(S),s!==null){if(o.flags|=128,d=!0,l=s.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Kl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ft)return Zt(o),null}else 2*at()-v.renderingStartTime>Ta&&l!==1073741824&&(o.flags|=128,d=!0,Kl(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(l=v.last,l!==null?l.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=at(),o.sibling=null,l=pt.current,it(pt,d?l&1|2:l&1),o):(Zt(o),null);case 22:case 23:return Sp(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(Nn&1073741824)!==0&&(Zt(o),o.subtreeFlags&6&&(o.flags|=8192)):Zt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function zC(s,o){switch(Df(o),o.tag){case 1:return mn(o.type)&&Au(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return _a(),ct(pn),ct(Xt),qf(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Wf(o),null;case 13:if(ct(pt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ma()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ct(pt),null;case 4:return _a(),null;case 10:return Ff(o.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var Ku=!1,en=!1,BC=typeof WeakSet=="function"?WeakSet:Set,me=null;function xa(s,o){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){_t(s,o,d)}else l.current=null}function hp(s,o,l){try{l()}catch(d){_t(s,o,d)}}var T_=!1;function $C(s,o){if(Sf=os,s=tv(),gf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,M=-1,V=-1,Q=0,se=0,ie=s,re=null;t:for(;;){for(var he;ie!==l||g!==0&&ie.nodeType!==3||(M=S+g),ie!==v||d!==0&&ie.nodeType!==3||(V=S+d),ie.nodeType===3&&(S+=ie.nodeValue.length),(he=ie.firstChild)!==null;)re=ie,ie=he;for(;;){if(ie===s)break t;if(re===l&&++Q===g&&(M=S),re===v&&++se===d&&(V=S),(he=ie.nextSibling)!==null)break;ie=re,re=ie.parentNode}ie=he}l=M===-1||V===-1?null:{start:M,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(If={focusedElem:s,selectionRange:l},os=!1,me=o;me!==null;)if(o=me,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,me=s;else for(;me!==null;){o=me;try{var ye=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var we=ye.memoizedProps,St=ye.memoizedState,H=o.stateNode,U=H.getSnapshotBeforeUpdate(o.elementType===o.type?we:ir(o.type,we),St);H.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var G=o.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){_t(o,o.return,ae)}if(s=o.sibling,s!==null){s.return=o.return,me=s;break}me=o.return}return ye=T_,T_=!1,ye}function Ql(s,o,l){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&hp(o,l,v)}g=g.next}while(g!==d)}}function Qu(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&s)===s){var d=l.create;l.destroy=d()}l=l.next}while(l!==o)}}function fp(s){var o=s.ref;if(o!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof o=="function"?o(s):o.current=s}}function S_(s){var o=s.alternate;o!==null&&(s.alternate=null,S_(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Nr],delete o[Vl],delete o[Rf],delete o[IC],delete o[bC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function I_(s){return s.tag===5||s.tag===3||s.tag===4}function b_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||I_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pp(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(s,o):l.insertBefore(s,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(s,l)):(o=l,o.appendChild(s)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=bu));else if(d!==4&&(s=s.child,s!==null))for(pp(s,o,l),s=s.sibling;s!==null;)pp(s,o,l),s=s.sibling}function mp(s,o,l){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(mp(s,o,l),s=s.sibling;s!==null;)mp(s,o,l),s=s.sibling}var $t=null,or=!1;function ni(s,o,l){for(l=l.child;l!==null;)C_(s,o,l),l=l.sibling}function C_(s,o,l){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(qi,l)}catch{}switch(l.tag){case 5:en||xa(l,o);case 6:var d=$t,g=or;$t=null,ni(s,o,l),$t=d,or=g,$t!==null&&(or?(s=$t,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):$t.removeChild(l.stateNode));break;case 18:$t!==null&&(or?(s=$t,l=l.stateNode,s.nodeType===8?Af(s.parentNode,l):s.nodeType===1&&Af(s,l),qs(s)):Af($t,l.stateNode));break;case 4:d=$t,g=or,$t=l.stateNode.containerInfo,or=!0,ni(s,o,l),$t=d,or=g;break;case 0:case 11:case 14:case 15:if(!en&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&hp(l,o,S),g=g.next}while(g!==d)}ni(s,o,l);break;case 1:if(!en&&(xa(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(M){_t(l,o,M)}ni(s,o,l);break;case 21:ni(s,o,l);break;case 22:l.mode&1?(en=(d=en)||l.memoizedState!==null,ni(s,o,l),en=d):ni(s,o,l);break;default:ni(s,o,l)}}function A_(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new BC),o.forEach(function(d){var g=JC.bind(null,s,d);l.has(d)||(l.add(d),d.then(g,g))})}}function ar(s,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];try{var v=s,S=o,M=S;e:for(;M!==null;){switch(M.tag){case 5:$t=M.stateNode,or=!1;break e;case 3:$t=M.stateNode.containerInfo,or=!0;break e;case 4:$t=M.stateNode.containerInfo,or=!0;break e}M=M.return}if($t===null)throw Error(t(160));C_(v,S,g),$t=null,or=!1;var V=g.alternate;V!==null&&(V.return=null),g.return=null}catch(Q){_t(g,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)R_(o,s),o=o.sibling}function R_(s,o){var l=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ar(o,s),Or(s),d&4){try{Ql(3,s,s.return),Qu(3,s)}catch(we){_t(s,s.return,we)}try{Ql(5,s,s.return)}catch(we){_t(s,s.return,we)}}break;case 1:ar(o,s),Or(s),d&512&&l!==null&&xa(l,l.return);break;case 5:if(ar(o,s),Or(s),d&512&&l!==null&&xa(l,l.return),s.flags&32){var g=s.stateNode;try{zi(g,"")}catch(we){_t(s,s.return,we)}}if(d&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,S=l!==null?l.memoizedProps:v,M=s.type,V=s.updateQueue;if(s.updateQueue=null,V!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&xe(g,v),Bo(M,S);var Q=Bo(M,v);for(S=0;S<V.length;S+=2){var se=V[S],ie=V[S+1];se==="style"?zo(g,ie):se==="dangerouslySetInnerHTML"?Zc(g,ie):se==="children"?zi(g,ie):$(g,se,ie,Q)}switch(M){case"input":ke(g,v);break;case"textarea":Jc(g,v);break;case"select":var re=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?Zn(g,!!v.multiple,he,!1):re!==!!v.multiple&&(v.defaultValue!=null?Zn(g,!!v.multiple,v.defaultValue,!0):Zn(g,!!v.multiple,v.multiple?[]:"",!1))}g[Vl]=v}catch(we){_t(s,s.return,we)}}break;case 6:if(ar(o,s),Or(s),d&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(we){_t(s,s.return,we)}}break;case 3:if(ar(o,s),Or(s),d&4&&l!==null&&l.memoizedState.isDehydrated)try{qs(o.containerInfo)}catch(we){_t(s,s.return,we)}break;case 4:ar(o,s),Or(s);break;case 13:ar(o,s),Or(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(vp=at())),d&4&&A_(s);break;case 22:if(se=l!==null&&l.memoizedState!==null,s.mode&1?(en=(Q=en)||se,ar(o,s),en=Q):ar(o,s),Or(s),d&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!se&&(s.mode&1)!==0)for(me=s,se=s.child;se!==null;){for(ie=me=se;me!==null;){switch(re=me,he=re.child,re.tag){case 0:case 11:case 14:case 15:Ql(4,re,re.return);break;case 1:xa(re,re.return);var ye=re.stateNode;if(typeof ye.componentWillUnmount=="function"){d=re,l=re.return;try{o=d,ye.props=o.memoizedProps,ye.state=o.memoizedState,ye.componentWillUnmount()}catch(we){_t(d,l,we)}}break;case 5:xa(re,re.return);break;case 22:if(re.memoizedState!==null){P_(ie);continue}}he!==null?(he.return=re,me=he):P_(ie)}se=se.sibling}e:for(se=null,ie=s;;){if(ie.tag===5){if(se===null){se=ie;try{g=ie.stateNode,Q?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=ie.stateNode,V=ie.memoizedProps.style,S=V!=null&&V.hasOwnProperty("display")?V.display:null,M.style.display=js("display",S))}catch(we){_t(s,s.return,we)}}}else if(ie.tag===6){if(se===null)try{ie.stateNode.nodeValue=Q?"":ie.memoizedProps}catch(we){_t(s,s.return,we)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===s)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===s)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===s)break e;se===ie&&(se=null),ie=ie.return}se===ie&&(se=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:ar(o,s),Or(s),d&4&&A_(s);break;case 21:break;default:ar(o,s),Or(s)}}function Or(s){var o=s.flags;if(o&2){try{e:{for(var l=s.return;l!==null;){if(I_(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(zi(g,""),d.flags&=-33);var v=b_(s);mp(s,v,g);break;case 3:case 4:var S=d.stateNode.containerInfo,M=b_(s);pp(s,M,S);break;default:throw Error(t(161))}}catch(V){_t(s,s.return,V)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function WC(s,o,l){me=s,k_(s)}function k_(s,o,l){for(var d=(s.mode&1)!==0;me!==null;){var g=me,v=g.child;if(g.tag===22&&d){var S=g.memoizedState!==null||Ku;if(!S){var M=g.alternate,V=M!==null&&M.memoizedState!==null||en;M=Ku;var Q=en;if(Ku=S,(en=V)&&!Q)for(me=g;me!==null;)S=me,V=S.child,S.tag===22&&S.memoizedState!==null?D_(g):V!==null?(V.return=S,me=V):D_(g);for(;v!==null;)me=v,k_(v),v=v.sibling;me=g,Ku=M,en=Q}N_(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,me=v):N_(s)}}function N_(s){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:en||Qu(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!en)if(l===null)d.componentDidMount();else{var g=o.elementType===o.type?l.memoizedProps:ir(o.type,l.memoizedProps);d.componentDidUpdate(g,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Pv(o,v,d);break;case 3:var S=o.updateQueue;if(S!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Pv(o,S,l)}break;case 5:var M=o.stateNode;if(l===null&&o.flags&4){l=M;var V=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ie=se.dehydrated;ie!==null&&qs(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}en||o.flags&512&&fp(o)}catch(re){_t(o,o.return,re)}}if(o===s){me=null;break}if(l=o.sibling,l!==null){l.return=o.return,me=l;break}me=o.return}}function P_(s){for(;me!==null;){var o=me;if(o===s){me=null;break}var l=o.sibling;if(l!==null){l.return=o.return,me=l;break}me=o.return}}function D_(s){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Qu(4,o)}catch(V){_t(o,l,V)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(V){_t(o,g,V)}}var v=o.return;try{fp(o)}catch(V){_t(o,v,V)}break;case 5:var S=o.return;try{fp(o)}catch(V){_t(o,S,V)}}}catch(V){_t(o,o.return,V)}if(o===s){me=null;break}var M=o.sibling;if(M!==null){M.return=o.return,me=M;break}me=o.return}}var HC=Math.ceil,Yu=K.ReactCurrentDispatcher,gp=K.ReactCurrentOwner,Gn=K.ReactCurrentBatchConfig,Ye=0,jt=null,At=null,Wt=0,Nn=0,Ea=Xs(0),Dt=0,Yl=null,lo=0,Xu=0,yp=0,Xl=null,yn=null,vp=0,Ta=1/0,gs=null,Ju=!1,_p=null,ri=null,Zu=!1,si=null,ed=0,Jl=0,wp=null,td=-1,nd=0;function cn(){return(Ye&6)!==0?at():td!==-1?td:td=at()}function ii(s){return(s.mode&1)===0?1:(Ye&2)!==0&&Wt!==0?Wt&-Wt:AC.transition!==null?(nd===0&&(nd=_l()),nd):(s=Ke,s!==0||(s=window.event,s=s===void 0?16:Jo(s.type)),s)}function lr(s,o,l,d){if(50<Jl)throw Jl=0,wp=null,Error(t(185));Yi(s,l,d),((Ye&2)===0||s!==jt)&&(s===jt&&((Ye&2)===0&&(Xu|=l),Dt===4&&oi(s,Wt)),vn(s,d),l===1&&Ye===0&&(o.mode&1)===0&&(Ta=at()+500,ku&&Zs()))}function vn(s,o){var l=s.callbackNode;Qi(s,o);var d=rs(s,s===jt?Wt:0);if(d===0)l!==null&&Ho(l),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(l!=null&&Ho(l),o===1)s.tag===0?CC(M_.bind(null,s)):wv(M_.bind(null,s)),TC(function(){(Ye&6)===0&&Zs()}),l=null;else{switch(xr(d)){case 1:l=qo;break;case 4:l=gl;break;case 16:l=Hi;break;case 536870912:l=Go;break;default:l=Hi}l=$_(l,O_.bind(null,s))}s.callbackPriority=o,s.callbackNode=l}}function O_(s,o){if(td=-1,nd=0,(Ye&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Sa()&&s.callbackNode!==l)return null;var d=rs(s,s===jt?Wt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=rd(s,d);else{o=d;var g=Ye;Ye|=2;var v=j_();(jt!==s||Wt!==o)&&(gs=null,Ta=at()+500,uo(s,o));do try{KC();break}catch(M){L_(s,M)}while(!0);Vf(),Yu.current=v,Ye=g,At!==null?o=0:(jt=null,Wt=0,o=Dt)}if(o!==0){if(o===2&&(g=vl(s),g!==0&&(d=g,o=xp(s,g))),o===1)throw l=Yl,uo(s,0),oi(s,d),vn(s,at()),l;if(o===6)oi(s,d);else{if(g=s.current.alternate,(d&30)===0&&!qC(g)&&(o=rd(s,d),o===2&&(v=vl(s),v!==0&&(d=v,o=xp(s,v))),o===1))throw l=Yl,uo(s,0),oi(s,d),vn(s,at()),l;switch(s.finishedWork=g,s.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:ho(s,yn,gs);break;case 3:if(oi(s,d),(d&130023424)===d&&(o=vp+500-at(),10<o)){if(rs(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){cn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Cf(ho.bind(null,s,yn,gs),o);break}ho(s,yn,gs);break;case 4:if(oi(s,d),(d&4194240)===d)break;for(o=s.eventTimes,g=-1;0<d;){var S=31-Sn(d);v=1<<S,S=o[S],S>g&&(g=S),d&=~v}if(d=g,d=at()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*HC(d/1960))-d,10<d){s.timeoutHandle=Cf(ho.bind(null,s,yn,gs),d);break}ho(s,yn,gs);break;case 5:ho(s,yn,gs);break;default:throw Error(t(329))}}}return vn(s,at()),s.callbackNode===l?O_.bind(null,s):null}function xp(s,o){var l=Xl;return s.current.memoizedState.isDehydrated&&(uo(s,o).flags|=256),s=rd(s,o),s!==2&&(o=yn,yn=l,o!==null&&Ep(o)),s}function Ep(s){yn===null?yn=s:yn.push.apply(yn,s)}function qC(s){for(var o=s;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!rr(v(),g))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oi(s,o){for(o&=~yp,o&=~Xu,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var l=31-Sn(o),d=1<<l;s[l]=-1,o&=~d}}function M_(s){if((Ye&6)!==0)throw Error(t(327));Sa();var o=rs(s,0);if((o&1)===0)return vn(s,at()),null;var l=rd(s,o);if(s.tag!==0&&l===2){var d=vl(s);d!==0&&(o=d,l=xp(s,d))}if(l===1)throw l=Yl,uo(s,0),oi(s,o),vn(s,at()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,ho(s,yn,gs),vn(s,at()),null}function Tp(s,o){var l=Ye;Ye|=1;try{return s(o)}finally{Ye=l,Ye===0&&(Ta=at()+500,ku&&Zs())}}function co(s){si!==null&&si.tag===0&&(Ye&6)===0&&Sa();var o=Ye;Ye|=1;var l=Gn.transition,d=Ke;try{if(Gn.transition=null,Ke=1,s)return s()}finally{Ke=d,Gn.transition=l,Ye=o,(Ye&6)===0&&Zs()}}function Sp(){Nn=Ea.current,ct(Ea)}function uo(s,o){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,EC(l)),At!==null)for(l=At.return;l!==null;){var d=l;switch(Df(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Au();break;case 3:_a(),ct(pn),ct(Xt),qf();break;case 5:Wf(d);break;case 4:_a();break;case 13:ct(pt);break;case 19:ct(pt);break;case 10:Ff(d.type._context);break;case 22:case 23:Sp()}l=l.return}if(jt=s,At=s=ai(s.current,null),Wt=Nn=o,Dt=0,Yl=null,yp=Xu=lo=0,yn=Xl=null,io!==null){for(o=0;o<io.length;o++)if(l=io[o],d=l.interleaved,d!==null){l.interleaved=null;var g=d.next,v=l.pending;if(v!==null){var S=v.next;v.next=g,d.next=S}l.pending=d}io=null}return s}function L_(s,o){do{var l=At;try{if(Vf(),Uu.current=Wu,zu){for(var d=mt.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}zu=!1}if(ao=0,Lt=Pt=mt=null,Wl=!1,Hl=0,gp.current=null,l===null||l.return===null){Dt=1,Yl=o,At=null;break}e:{var v=s,S=l.return,M=l,V=o;if(o=Wt,M.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var Q=V,se=M,ie=se.tag;if((se.mode&1)===0&&(ie===0||ie===11||ie===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var he=a_(S);if(he!==null){he.flags&=-257,l_(he,S,M,v,o),he.mode&1&&o_(v,Q,o),o=he,V=Q;var ye=o.updateQueue;if(ye===null){var we=new Set;we.add(V),o.updateQueue=we}else ye.add(V);break e}else{if((o&1)===0){o_(v,Q,o),Ip();break e}V=Error(t(426))}}else if(ft&&M.mode&1){var St=a_(S);if(St!==null){(St.flags&65536)===0&&(St.flags|=256),l_(St,S,M,v,o),Lf(wa(V,M));break e}}v=V=wa(V,M),Dt!==4&&(Dt=2),Xl===null?Xl=[v]:Xl.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var H=s_(v,V,o);Nv(v,H);break e;case 1:M=V;var U=v.type,G=v.stateNode;if((v.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(ri===null||!ri.has(G)))){v.flags|=65536,o&=-o,v.lanes|=o;var ae=i_(v,M,o);Nv(v,ae);break e}}v=v.return}while(v!==null)}F_(l)}catch(Ee){o=Ee,At===l&&l!==null&&(At=l=l.return);continue}break}while(!0)}function j_(){var s=Yu.current;return Yu.current=Wu,s===null?Wu:s}function Ip(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),jt===null||(lo&268435455)===0&&(Xu&268435455)===0||oi(jt,Wt)}function rd(s,o){var l=Ye;Ye|=2;var d=j_();(jt!==s||Wt!==o)&&(gs=null,uo(s,o));do try{GC();break}catch(g){L_(s,g)}while(!0);if(Vf(),Ye=l,Yu.current=d,At!==null)throw Error(t(261));return jt=null,Wt=0,Dt}function GC(){for(;At!==null;)V_(At)}function KC(){for(;At!==null&&!Wi();)V_(At)}function V_(s){var o=B_(s.alternate,s,Nn);s.memoizedProps=s.pendingProps,o===null?F_(s):At=o,gp.current=null}function F_(s){var o=s;do{var l=o.alternate;if(s=o.return,(o.flags&32768)===0){if(l=UC(l,o,Nn),l!==null){At=l;return}}else{if(l=zC(l,o),l!==null){l.flags&=32767,At=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Dt=6,At=null;return}}if(o=o.sibling,o!==null){At=o;return}At=o=s}while(o!==null);Dt===0&&(Dt=5)}function ho(s,o,l){var d=Ke,g=Gn.transition;try{Gn.transition=null,Ke=1,QC(s,o,l,d)}finally{Gn.transition=g,Ke=d}return null}function QC(s,o,l,d){do Sa();while(si!==null);if((Ye&6)!==0)throw Error(t(327));l=s.finishedWork;var g=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=l.lanes|l.childLanes;if(df(s,v),s===jt&&(At=jt=null,Wt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Zu||(Zu=!0,$_(Hi,function(){return Sa(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=Gn.transition,Gn.transition=null;var S=Ke;Ke=1;var M=Ye;Ye|=4,gp.current=null,$C(s,l),R_(l,s),mC(If),os=!!Sf,If=Sf=null,s.current=l,WC(l),ns(),Ye=M,Ke=S,Gn.transition=v}else s.current=l;if(Zu&&(Zu=!1,si=s,ed=g),v=s.pendingLanes,v===0&&(ri=null),uu(l.stateNode),vn(s,at()),o!==null)for(d=s.onRecoverableError,l=0;l<o.length;l++)g=o[l],d(g.value,{componentStack:g.stack,digest:g.digest});if(Ju)throw Ju=!1,s=_p,_p=null,s;return(ed&1)!==0&&s.tag!==0&&Sa(),v=s.pendingLanes,(v&1)!==0?s===wp?Jl++:(Jl=0,wp=s):Jl=0,Zs(),null}function Sa(){if(si!==null){var s=xr(ed),o=Gn.transition,l=Ke;try{if(Gn.transition=null,Ke=16>s?16:s,si===null)var d=!1;else{if(s=si,si=null,ed=0,(Ye&6)!==0)throw Error(t(331));var g=Ye;for(Ye|=4,me=s.current;me!==null;){var v=me,S=v.child;if((me.flags&16)!==0){var M=v.deletions;if(M!==null){for(var V=0;V<M.length;V++){var Q=M[V];for(me=Q;me!==null;){var se=me;switch(se.tag){case 0:case 11:case 15:Ql(8,se,v)}var ie=se.child;if(ie!==null)ie.return=se,me=ie;else for(;me!==null;){se=me;var re=se.sibling,he=se.return;if(S_(se),se===Q){me=null;break}if(re!==null){re.return=he,me=re;break}me=he}}}var ye=v.alternate;if(ye!==null){var we=ye.child;if(we!==null){ye.child=null;do{var St=we.sibling;we.sibling=null,we=St}while(we!==null)}}me=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,me=S;else e:for(;me!==null;){if(v=me,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Ql(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,me=H;break e}me=v.return}}var U=s.current;for(me=U;me!==null;){S=me;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,me=G;else e:for(S=U;me!==null;){if(M=me,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Qu(9,M)}}catch(Ee){_t(M,M.return,Ee)}if(M===S){me=null;break e}var ae=M.sibling;if(ae!==null){ae.return=M.return,me=ae;break e}me=M.return}}if(Ye=g,Zs(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(qi,s)}catch{}d=!0}return d}finally{Ke=l,Gn.transition=o}}return!1}function U_(s,o,l){o=wa(l,o),o=s_(s,o,1),s=ti(s,o,1),o=cn(),s!==null&&(Yi(s,1,o),vn(s,o))}function _t(s,o,l){if(s.tag===3)U_(s,s,l);else for(;o!==null;){if(o.tag===3){U_(o,s,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ri===null||!ri.has(d))){s=wa(l,s),s=i_(o,s,1),o=ti(o,s,1),s=cn(),o!==null&&(Yi(o,1,s),vn(o,s));break}}o=o.return}}function YC(s,o,l){var d=s.pingCache;d!==null&&d.delete(o),o=cn(),s.pingedLanes|=s.suspendedLanes&l,jt===s&&(Wt&l)===l&&(Dt===4||Dt===3&&(Wt&130023424)===Wt&&500>at()-vp?uo(s,0):yp|=l),vn(s,o)}function z_(s,o){o===0&&((s.mode&1)===0?o=1:(o=$s,$s<<=1,($s&130023424)===0&&($s=4194304)));var l=cn();s=fs(s,o),s!==null&&(Yi(s,o,l),vn(s,l))}function XC(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),z_(s,l)}function JC(s,o){var l=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),z_(s,l)}var B_;B_=function(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps||pn.current)gn=!0;else{if((s.lanes&l)===0&&(o.flags&128)===0)return gn=!1,FC(s,o,l);gn=(s.flags&131072)!==0}else gn=!1,ft&&(o.flags&1048576)!==0&&xv(o,Pu,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Gu(s,o),s=o.pendingProps;var g=ha(o,Xt.current);va(o,l),g=Qf(null,o,d,s,g,l);var v=Yf();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,mn(d)?(v=!0,Ru(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bf(o),g.updater=Hu,o.stateNode=g,g._reactInternals=o,np(o,d,s,l),o=op(null,o,d,!0,v,l)):(o.tag=0,ft&&v&&Pf(o),ln(null,o,g,l),o=o.child),o;case 16:d=o.elementType;e:{switch(Gu(s,o),s=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=e1(d),s=ir(d,s),g){case 0:o=ip(null,o,d,s,l);break e;case 1:o=p_(null,o,d,s,l);break e;case 11:o=c_(null,o,d,s,l);break e;case 14:o=u_(null,o,d,ir(d.type,s),l);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:ir(d,g),ip(s,o,d,g,l);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:ir(d,g),p_(s,o,d,g,l);case 3:e:{if(m_(o),s===null)throw Error(t(387));d=o.pendingProps,v=o.memoizedState,g=v.element,kv(s,o),Vu(o,d,null,l);var S=o.memoizedState;if(d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=wa(Error(t(423)),o),o=g_(s,o,d,l,g);break e}else if(d!==g){g=wa(Error(t(424)),o),o=g_(s,o,d,l,g);break e}else for(kn=Ys(o.stateNode.containerInfo.firstChild),Rn=o,ft=!0,sr=null,l=Av(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ma(),d===g){o=ms(s,o,l);break e}ln(s,o,d,l)}o=o.child}return o;case 5:return Dv(o),s===null&&Mf(o),d=o.type,g=o.pendingProps,v=s!==null?s.memoizedProps:null,S=g.children,bf(d,g)?S=null:v!==null&&bf(d,v)&&(o.flags|=32),f_(s,o),ln(s,o,S,l),o.child;case 6:return s===null&&Mf(o),null;case 13:return y_(s,o,l);case 4:return $f(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=ga(o,null,d,l):ln(s,o,d,l),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:ir(d,g),c_(s,o,d,g,l);case 7:return ln(s,o,o.pendingProps,l),o.child;case 8:return ln(s,o,o.pendingProps.children,l),o.child;case 12:return ln(s,o,o.pendingProps.children,l),o.child;case 10:e:{if(d=o.type._context,g=o.pendingProps,v=o.memoizedProps,S=g.value,it(Mu,d._currentValue),d._currentValue=S,v!==null)if(rr(v.value,S)){if(v.children===g.children&&!pn.current){o=ms(s,o,l);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var M=v.dependencies;if(M!==null){S=v.child;for(var V=M.firstContext;V!==null;){if(V.context===d){if(v.tag===1){V=ps(-1,l&-l),V.tag=2;var Q=v.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?V.next=V:(V.next=se.next,se.next=V),Q.pending=V}}v.lanes|=l,V=v.alternate,V!==null&&(V.lanes|=l),Uf(v.return,l,o),M.lanes|=l;break}V=V.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=l,M=S.alternate,M!==null&&(M.lanes|=l),Uf(S,l,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}ln(s,o,g.children,l),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,va(o,l),g=Hn(g),d=d(g),o.flags|=1,ln(s,o,d,l),o.child;case 14:return d=o.type,g=ir(d,o.pendingProps),g=ir(d.type,g),u_(s,o,d,g,l);case 15:return d_(s,o,o.type,o.pendingProps,l);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:ir(d,g),Gu(s,o),o.tag=1,mn(d)?(s=!0,Ru(o)):s=!1,va(o,l),n_(o,d,g),np(o,d,g,l),op(null,o,d,!0,s,l);case 19:return __(s,o,l);case 22:return h_(s,o,l)}throw Error(t(156,o.tag))};function $_(s,o){return ml(s,o)}function ZC(s,o,l,d){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,o,l,d){return new ZC(s,o,l,d)}function bp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function e1(s){if(typeof s=="function")return bp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===Me)return 14}return 2}function ai(s,o){var l=s.alternate;return l===null?(l=Kn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function sd(s,o,l,d,g,v){var S=2;if(d=s,typeof s=="function")bp(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case P:return fo(l.children,g,v,o);case b:S=8,g|=8;break;case N:return s=Kn(12,l,o,g|2),s.elementType=N,s.lanes=v,s;case D:return s=Kn(13,l,o,g),s.elementType=D,s.lanes=v,s;case Te:return s=Kn(19,l,o,g),s.elementType=Te,s.lanes=v,s;case Ie:return id(l,g,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:S=10;break e;case L:S=9;break e;case F:S=11;break e;case Me:S=14;break e;case Se:S=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Kn(S,l,o,g),o.elementType=s,o.type=d,o.lanes=v,o}function fo(s,o,l,d){return s=Kn(7,s,d,o),s.lanes=l,s}function id(s,o,l,d){return s=Kn(22,s,d,o),s.elementType=Ie,s.lanes=l,s.stateNode={isHidden:!1},s}function Cp(s,o,l){return s=Kn(6,s,null,o),s.lanes=l,s}function Ap(s,o,l){return o=Kn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function t1(s,o,l,d,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Rp(s,o,l,d,g,v,S,M,V){return s=new t1(s,o,l,M,V),o===1?(o=1,v===!0&&(o|=8)):o=0,v=Kn(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(v),s}function n1(s,o,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:d==null?null:""+d,children:s,containerInfo:o,implementation:l}}function W_(s){if(!s)return Js;s=s._reactInternals;e:{if(tr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(mn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(mn(l))return vv(s,l,o)}return o}function H_(s,o,l,d,g,v,S,M,V){return s=Rp(l,d,!0,s,g,v,S,M,V),s.context=W_(null),l=s.current,d=cn(),g=ii(l),v=ps(d,g),v.callback=o??null,ti(l,v,g),s.current.lanes=g,Yi(s,g,d),vn(s,d),s}function od(s,o,l,d){var g=o.current,v=cn(),S=ii(g);return l=W_(l),o.context===null?o.context=l:o.pendingContext=l,o=ps(v,S),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=ti(g,o,S),s!==null&&(lr(s,g,S,v),ju(s,g,S)),S}function ad(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function q_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function kp(s,o){q_(s,o),(s=s.alternate)&&q_(s,o)}function r1(){return null}var G_=typeof reportError=="function"?reportError:function(s){console.error(s)};function Np(s){this._internalRoot=s}ld.prototype.render=Np.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));od(s,o,null,null)},ld.prototype.unmount=Np.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;co(function(){od(null,s,null,null)}),o[cs]=null}};function ld(s){this._internalRoot=s}ld.prototype.unstable_scheduleHydration=function(s){if(s){var o=Sl();s={blockedOn:null,target:s,priority:o};for(var l=0;l<In.length&&o!==0&&o<In[l].priority;l++);In.splice(l,0,s),l===0&&Yo(s)}};function Pp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function K_(){}function s1(s,o,l,d,g){if(g){if(typeof d=="function"){var v=d;d=function(){var Q=ad(S);v.call(Q)}}var S=H_(o,d,s,0,null,!1,!1,"",K_);return s._reactRootContainer=S,s[cs]=S.current,Ll(s.nodeType===8?s.parentNode:s),co(),S}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var M=d;d=function(){var Q=ad(V);M.call(Q)}}var V=Rp(s,0,!1,null,null,!1,!1,"",K_);return s._reactRootContainer=V,s[cs]=V.current,Ll(s.nodeType===8?s.parentNode:s),co(function(){od(o,V,l,d)}),V}function ud(s,o,l,d,g){var v=l._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var M=g;g=function(){var V=ad(S);M.call(V)}}od(o,S,s,g)}else S=s1(l,o,s,g,d);return ad(S)}El=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var l=et(o.pendingLanes);l!==0&&(xl(o,l|1),vn(o,at()),(Ye&6)===0&&(Ta=at()+500,Zs()))}break;case 13:co(function(){var d=fs(s,1);if(d!==null){var g=cn();lr(d,s,1,g)}}),kp(s,1)}},Ko=function(s){if(s.tag===13){var o=fs(s,134217728);if(o!==null){var l=cn();lr(o,s,134217728,l)}kp(s,134217728)}},Tl=function(s){if(s.tag===13){var o=ii(s),l=fs(s,o);if(l!==null){var d=cn();lr(l,s,o,d)}kp(s,o)}},Sl=function(){return Ke},Il=function(s,o){var l=Ke;try{return Ke=s,o()}finally{Ke=l}},Zr=function(s,o,l){switch(o){case"input":if(ke(s,l),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==s&&d.form===s.form){var g=Cu(d);if(!g)throw Error(t(90));fn(d),ke(d,g)}}}break;case"textarea":Jc(s,l);break;case"select":o=l.value,o!=null&&Zn(s,!!l.multiple,o,!1)}},tu=Tp,nu=co;var i1={usingClientEntryPoint:!1,Events:[Fl,ua,Cu,Fs,Us,Tp]},Zl={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o1={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=cu(s),s===null?null:s.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||r1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{qi=dd.inject(o1),Tn=dd}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1,_n.createPortal=function(s,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(o))throw Error(t(200));return n1(s,o,null,l)},_n.createRoot=function(s,o){if(!Pp(s))throw Error(t(299));var l=!1,d="",g=G_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Rp(s,1,!1,null,null,l,!1,d,g),s[cs]=o.current,Ll(s.nodeType===8?s.parentNode:s),new Np(o)},_n.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=cu(o),s=s===null?null:s.stateNode,s},_n.flushSync=function(s){return co(s)},_n.hydrate=function(s,o,l){if(!cd(o))throw Error(t(200));return ud(null,s,o,!0,l)},_n.hydrateRoot=function(s,o,l){if(!Pp(s))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,g=!1,v="",S=G_;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),o=H_(o,null,s,1,l??null,g,!1,v,S),s[cs]=o.current,Ll(s),d)for(s=0;s<d.length;s++)l=d[s],g=l._getVersion,g=g(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,g]:o.mutableSourceEagerHydrationData.push(l,g);return new ld(o)},_n.render=function(s,o,l){if(!cd(o))throw Error(t(200));return ud(null,s,o,!1,l)},_n.unmountComponentAtNode=function(s){if(!cd(s))throw Error(t(40));return s._reactRootContainer?(co(function(){ud(null,null,s,!1,function(){s._reactRootContainer=null,s[cs]=null})}),!0):!1},_n.unstable_batchedUpdates=Tp,_n.unstable_renderSubtreeIntoContainer=function(s,o,l,d){if(!cd(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return ud(s,o,l,!1,d)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var nw;function kx(){if(nw)return Mp.exports;nw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mp.exports=p1(),Mp.exports}var rw;function m1(){if(rw)return hd;rw=1;var n=kx();return hd.createRoot=n.createRoot,hd.hydrateRoot=n.hydrateRoot,hd}var g1=m1(),T=wh();const di=Rx(T),Nx=l1({__proto__:null,default:di},[T]),y1=()=>{};var sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},v1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],h=n[t++],f=((i&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Dx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,h=c?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,y=a>>2,w=(a&3)<<4|h>>4;let x=(h&15)<<2|m>>6,I=m&63;f||(I=64,c||(x=64)),r.push(t[y],t[w],t[x],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Px(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const w=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||h==null||m==null||w==null)throw new _1;const x=a<<2|h>>4;if(r.push(x),m!==64){const I=h<<4&240|m>>2;if(r.push(I),w!==64){const k=m<<6&192|w;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w1=function(n){const e=Px(n);return Dx.encodeByteArray(e,!0)},$d=function(n){return w1(n).replace(/\./g,"")},Ox=function(n){try{return Dx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=()=>x1().__FIREBASE_DEFAULTS__,T1=()=>{if(typeof process>"u"||typeof sw>"u")return;const n=sw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ox(n[1]);return e&&JSON.parse(e)},xh=()=>{try{return y1()||E1()||T1()||S1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Mx=n=>xh()?.emulatorHosts?.[n],Lx=n=>{const e=Mx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jx=()=>xh()?.config,Vx=n=>xh()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$d(JSON.stringify(t)),$d(JSON.stringify(c)),""].join(".")}const uc={};function b1(){const n={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?n.emulator.push(e):n.prod.push(e);return n}function C1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let iw=!1;function Jm(n,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||uc[n]===e||uc[n]||iw)return;uc[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=b1().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,I){x.setAttribute("width","24"),x.setAttribute("id",I),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{iw=!0,c()},x}function y(x,I){x.setAttribute("id",I),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=C1(r),I=t("text"),k=document.getElementById(I)||document.createElement("span"),C=t("learnmore"),A=document.getElementById(C)||document.createElement("a"),j=t("preprendIcon"),z=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const $=x.element;h($),y(A,C);const K=m();f(z,j),$.append(z,k,A,K),document.body.appendChild($)}a?(k.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function R1(){const n=xh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function N1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D1(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function O1(){return!R1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M1(){try{return typeof indexedDB=="object"}catch{return!1}}function L1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="FirebaseError";class Yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=j1,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?V1(a,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new Yr(i,h,r)}}function V1(n,e){return n.replace(F1,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const F1=/\{\$([^}]+)}/g;function U1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(ow(a)&&ow(c)){if(!wo(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ow(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function sc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function z1(n,e){const t=new B1(n,e);return t.subscribe.bind(t)}class B1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$1(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Vp),i.error===void 0&&(i.error=Vp),i.complete===void 0&&(i.complete=Vp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(n){return n&&n._delegate?n._delegate:n}class Ii{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new I1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q1(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H1(n){return n===mo?void 0:n}function q1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const K1={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Q1=He.INFO,Y1={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},X1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Y1[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zm{constructor(e){this.name=e,this._logLevel=Q1,this._logHandler=X1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const J1=(n,e)=>e.some(t=>n instanceof t);let aw,lw;function Z1(){return aw||(aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return lw||(lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ux=new WeakMap,hm=new WeakMap,zx=new WeakMap,Fp=new WeakMap,eg=new WeakMap;function tA(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(_i(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ux.set(t,n)}).catch(()=>{}),eg.set(e,n),e}function nA(n){if(hm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});hm.set(n,e)}let fm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return hm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rA(n){fm=n(fm)}function sA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Up(this),e,...t);return zx.set(r,e.sort?e.sort():[e]),_i(r)}:eA().includes(n)?function(...e){return n.apply(Up(this),e),_i(Ux.get(this))}:function(...e){return _i(n.apply(Up(this),e))}}function iA(n){return typeof n=="function"?sA(n):(n instanceof IDBTransaction&&nA(n),J1(n,Z1())?new Proxy(n,fm):n)}function _i(n){if(n instanceof IDBRequest)return tA(n);if(Fp.has(n))return Fp.get(n);const e=iA(n);return e!==n&&(Fp.set(n,e),eg.set(e,n)),e}const Up=n=>eg.get(n);function oA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),h=_i(c);return r&&c.addEventListener("upgradeneeded",f=>{r(_i(c.result),f.oldVersion,f.newVersion,_i(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const aA=["get","getKey","getAll","getAllKeys","count"],lA=["put","add","delete","clear"],zp=new Map;function cw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=lA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aA.includes(t)))return;const a=async function(c,...h){const f=this.transaction(c,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),i&&f.done]))[0]};return zp.set(e,a),a}rA(n=>({...n,get:(e,t,r)=>cw(e,t)||n.get(e,t,r),has:(e,t)=>!!cw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uA(n){return n.getComponent()?.type==="VERSION"}const pm="@firebase/app",uw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Zm("@firebase/app"),dA="@firebase/app-compat",hA="@firebase/analytics-compat",fA="@firebase/analytics",pA="@firebase/app-check-compat",mA="@firebase/app-check",gA="@firebase/auth",yA="@firebase/auth-compat",vA="@firebase/database",_A="@firebase/data-connect",wA="@firebase/database-compat",xA="@firebase/functions",EA="@firebase/functions-compat",TA="@firebase/installations",SA="@firebase/installations-compat",IA="@firebase/messaging",bA="@firebase/messaging-compat",CA="@firebase/performance",AA="@firebase/performance-compat",RA="@firebase/remote-config",kA="@firebase/remote-config-compat",NA="@firebase/storage",PA="@firebase/storage-compat",DA="@firebase/firestore",OA="@firebase/ai",MA="@firebase/firestore-compat",LA="firebase",jA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",VA={[pm]:"fire-core",[dA]:"fire-core-compat",[fA]:"fire-analytics",[hA]:"fire-analytics-compat",[mA]:"fire-app-check",[pA]:"fire-app-check-compat",[gA]:"fire-auth",[yA]:"fire-auth-compat",[vA]:"fire-rtdb",[_A]:"fire-data-connect",[wA]:"fire-rtdb-compat",[xA]:"fire-fn",[EA]:"fire-fn-compat",[TA]:"fire-iid",[SA]:"fire-iid-compat",[IA]:"fire-fcm",[bA]:"fire-fcm-compat",[CA]:"fire-perf",[AA]:"fire-perf-compat",[RA]:"fire-rc",[kA]:"fire-rc-compat",[NA]:"fire-gcs",[PA]:"fire-gcs-compat",[DA]:"fire-fst",[MA]:"fire-fst-compat",[OA]:"fire-vertex","fire-js":"fire-js",[LA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new Map,FA=new Map,gm=new Map;function dw(n,e){try{n.container.addComponent(e)}catch(t){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xo(n){const e=n.name;if(gm.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,n);for(const t of Wd.values())dw(t,n);for(const t of FA.values())dw(t,n);return!0}function Eh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Dc("app","Firebase",UA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=jA;function Bx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:mm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw wi.create("bad-app-name",{appName:String(i)});if(t||(t=jx()),!t)throw wi.create("no-options");const a=Wd.get(i);if(a){if(wo(t,a.options)&&wo(r,a.config))return a;throw wi.create("duplicate-app",{appName:i})}const c=new G1(i);for(const f of gm.values())c.addComponent(f);const h=new zA(t,r,c);return Wd.set(i,h),h}function tg(n=mm){const e=Wd.get(n);if(!e&&n===mm&&jx())return Bx();if(!e)throw wi.create("no-app",{appName:n});return e}function Fr(n,e,t){let r=VA[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(c.join(" "));return}xo(new Ii(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firebase-heartbeat-database",$A=1,yc="firebase-heartbeat-store";let Bp=null;function $x(){return Bp||(Bp=oA(BA,$A,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw wi.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function WA(n){try{const t=(await $x()).transaction(yc),r=await t.objectStore(yc).get(Wx(n));return await t.done,r}catch(e){if(e instanceof Yr)Es.warn(e.message);else{const t=wi.create("idb-get",{originalErrorMessage:e?.message});Es.warn(t.message)}}}async function hw(n,e){try{const r=(await $x()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,Wx(n)),await r.done}catch(t){if(t instanceof Yr)Es.warn(t.message);else{const r=wi.create("idb-set",{originalErrorMessage:t?.message});Es.warn(r.message)}}}function Wx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1024,qA=30;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>qA){const i=YA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fw(),{heartbeatsToSend:t,unsentEntries:r}=KA(this._heartbeatsCache.heartbeats),i=$d(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Es.warn(e),""}}}function fw(){return new Date().toISOString().substring(0,10)}function KA(n,e=HA){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),pw(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),pw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class QA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M1()?L1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pw(n){return $d(JSON.stringify({version:2,heartbeats:n})).length}function YA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n){xo(new Ii("platform-logger",e=>new cA(e),"PRIVATE")),xo(new Ii("heartbeat",e=>new GA(e),"PRIVATE")),Fr(pm,uw,n),Fr(pm,uw,"esm2020"),Fr("fire-js","")}XA("");var JA="firebase",ZA="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(JA,ZA,"app");function Hx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=Hx,qx=new Dc("auth","Firebase",Hx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Zm("@firebase/auth");function tR(n,...e){Hd.logLevel<=He.WARN&&Hd.warn(`Auth (${Ro}): ${n}`,...e)}function Rd(n,...e){Hd.logLevel<=He.ERROR&&Hd.error(`Auth (${Ro}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n,...e){throw ng(n,...e)}function Ur(n,...e){return ng(n,...e)}function Gx(n,e,t){const r={...eR(),[e]:t};return new Dc("auth","Firebase",r).create(e,{appName:n.name})}function zr(n){return Gx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qx.create(n,...e)}function Pe(n,e,...t){if(!n)throw ng(e,...t)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Rd(e),new Error(e)}function Ts(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){return typeof self<"u"&&self.location?.href||""}function nR(){return mw()==="http:"||mw()==="https:"}function mw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nR()||N1()||"connection"in navigator)?navigator.onLine:!0}function sR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ts(t>e,"Short delay should be less than long delay!"),this.isMobile=A1()||P1()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n,e){Ts(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aR=new Mc(3e4,6e4);function Li(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ji(n,e,t,r,i={}){return Qx(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const h=Oc({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...a};return k1()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Mi(n.emulatorConfig.host)&&(m.credentials="include"),Kx.fetch()(await Yx(n,n.config.apiHost,t,h),m)})}async function Qx(n,e,t){n._canInitEmulator=!1;const r={...iR,...e};try{const i=new cR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw fd(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw fd(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw fd(n,"user-disabled",c);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Gx(n,y,m);hr(n,y)}}catch(i){if(i instanceof Yr)throw i;hr(n,"network-request-failed",{message:String(i)})}}async function Lc(n,e,t,r,i={}){const a=await ji(n,e,t,r,i);return"mfaPendingCredential"in a&&hr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Yx(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?rg(n.config,i):`${n.config.apiScheme}://${i}`;return oR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function lR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ur(this.auth,"network-request-failed")),aR.get())})}}function fd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ur(n,e,r);return i.customData._tokenResponse=t,i}function gw(n){return n!==void 0&&n.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dR(n,e){return ji(n,"GET","/v2/recaptchaConfig",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e){return ji(n,"POST","/v1/accounts:delete",e)}async function qd(n,e){return ji(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(n,e=!1){const t=gt(n),r=await t.getIdToken(e),i=sg(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:dc($p(i.auth_time)),issuedAtTime:dc($p(i.iat)),expirationTime:dc($p(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function $p(n){return Number(n)*1e3}function sg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ox(t);return i?JSON.parse(i):(Rd("Failed to decode base64 JWT payload"),null)}catch(i){return Rd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yw(n){const e=sg(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Yr&&pR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function pR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dc(this.lastLoginAt),this.creationTime=dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(n){const e=n.auth,t=await n.getIdToken(),r=await vc(n,qd(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?Xx(i.providerUserInfo):[],c=yR(n.providerData,a),h=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!c?.length,m=h?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function gR(n){const e=gt(n);await Gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Xx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e){const t=await Qx(n,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await Yx(n,i,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Mi(n.emulatorConfig.host)&&(f.credentials="include"),Kx.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _R(n,e){return ji(n,"POST","/v2/accounts:revokeToken",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=yw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await vR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new Oa;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Pe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class cr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new mR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await vc(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:I,providerData:k,stsTokenManager:C}=t;Pe(w&&C,e,"internal-error");const A=Oa.fromJSON(this.name,C);Pe(typeof w=="string",e,"internal-error"),ci(r,e.name),ci(i,e.name),Pe(typeof x=="boolean",e,"internal-error"),Pe(typeof I=="boolean",e,"internal-error"),ci(a,e.name),ci(c,e.name),ci(h,e.name),ci(f,e.name),ci(m,e.name),ci(y,e.name);const j=new cr({uid:w,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:I,photoURL:c,phoneNumber:a,tenantId:h,stsTokenManager:A,createdAt:m,lastLoginAt:y});return k&&Array.isArray(k)&&(j.providerData=k.map(z=>({...z}))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Oa;i.updateFromServerResponse(t);const a=new cr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Xx(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,h=new Oa;h.updateFromIdToken(r);const f=new cr({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=new Map;function ws(n){Ts(n instanceof Function,"Expected a class definition");let e=vw.get(n);return e?(Ts(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jx.type="NONE";const _w=Jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ma{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=kd(this.userKey,i.apiKey,a),this.fullPersistenceKey=kd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qd(this.auth,{idToken:e}).catch(()=>{});return t?cr._fromGetAccountInfoResponse(this.auth,t,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ma(ws(_w),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||ws(_w);const c=kd(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(c);if(y){let w;if(typeof y=="string"){const x=await qd(e,{idToken:y}).catch(()=>{});if(!x)break;w=await cr._fromGetAccountInfoResponse(e,x,y)}else w=cr._fromJSON(e,y);m!==a&&(h=w),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ma(a,e,r):(a=f[0],h&&await a._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Ma(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sE(e))return"Blackberry";if(iE(e))return"Webos";if(eE(e))return"Safari";if((e.includes("chrome/")||tE(e))&&!e.includes("edge/"))return"Chrome";if(rE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Zx(n=sn()){return/firefox\//i.test(n)}function eE(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tE(n=sn()){return/crios\//i.test(n)}function nE(n=sn()){return/iemobile/i.test(n)}function rE(n=sn()){return/android/i.test(n)}function sE(n=sn()){return/blackberry/i.test(n)}function iE(n=sn()){return/webos/i.test(n)}function ig(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wR(n=sn()){return ig(n)&&!!window.navigator?.standalone}function xR(){return D1()&&document.documentMode===10}function oE(n=sn()){return ig(n)||rE(n)||iE(n)||sE(n)||/windows phone/i.test(n)||nE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n,e=[]){let t;switch(n){case"Browser":t=ww(sn());break;case"Worker":t=`${ww(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{const f=e(a);c(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e={}){return ji(n,"GET","/v2/passwordPolicy",Li(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=6;class IR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??SR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xw(this),this.idTokenSubscription=new xw(this),this.beforeStateQueue=new ER(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qd(this,{idToken:e}),r=await cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(zr(this));const t=e?gt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TR(this),t=new IR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await _R(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vi(n){return gt(n)}class xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=z1(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CR(n){Th=n}function lE(n){return Th.loadJS(n)}function AR(){return Th.recaptchaEnterpriseScript}function RR(){return Th.gapiScript}function kR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class NR{constructor(){this.enterprise=new PR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DR="recaptcha-enterprise",cE="NO_RECAPTCHA";class OR{constructor(e){this.type=DR,this.auth=Vi(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{dR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new uR(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(f=>{h(f)})})}function i(a,c,h){const f=window.grecaptcha;gw(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(cE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(h=>{if(!t&&gw(window.grecaptcha))i(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=AR();f.length!==0&&(f+=h),lE(f).then(()=>{i(h,a,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function Ew(n,e,t,r=!1,i=!1){const a=new OR(n);let c;if(i)c=cE;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function _m(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ew(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Ew(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n,e){const t=Eh(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(wo(a,e??{}))return i;hr(i,"already-initialized")}return t.initialize({options:e})}function LR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ws);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function jR(n,e,t){const r=Vi(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=uE(e),{host:c,port:h}=VR(e),f=h===null?"":`:${h}`,m={url:`${a}//${c}${f}/`},y=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(wo(m,r.config.emulator)&&wo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Mi(c)?(Xm(`${a}//${c}${f}`),Jm("Auth",!0)):FR()}function uE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VR(n){const e=uE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Tw(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Tw(c)}}}function Tw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function FR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,t){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}async function UR(n,e){return ji(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(n,e){return Lc(n,"POST","/v1/accounts:signInWithPassword",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(n,e){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",Li(n,e))}async function $R(n,e){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends og{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _c(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _c(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,t,"signInWithPassword",zR);case"emailLink":return BR(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,r,"signUpPassword",UR);case"emailLink":return $R(e,{idToken:t,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(n,e){return Lc(n,"POST","/v1/accounts:signInWithIdp",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="http://localhost";class Eo extends og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new Eo(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return La(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,La(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,La(e,t)}buildRequest(){const e={requestUri:WR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qR(n){const e=rc(sc(n)).link,t=e?rc(sc(e)).deep_link_id:null,r=rc(sc(n)).deep_link_id;return(r?rc(sc(r)).link:null)||r||t||e||n}class ag{constructor(e){const t=rc(sc(e)),r=t.apiKey??null,i=t.oobCode??null,a=HR(t.mode??null);Pe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=qR(e);try{return new ag(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,t){return _c._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ag.parseLink(t);return Pe(r,"argument-error"),_c._fromEmailAndCode(e,r.code,r.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends dE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends jc{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pi.credential(t,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends jc{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends jc{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return gi.credential(t,r)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hE(n,e){return Lc(n,"POST","/v1/accounts:signUp",Li(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await cr._fromIdTokenResponse(e,r,i),c=Sw(r);return new Ss({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Sw(r);return new Ss({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Sw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n){if(xn(n.app))return Promise.reject(zr(n));const e=Vi(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ss({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await hE(e,{returnSecureToken:!0}),r=await Ss._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Yr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Kd(e,t,r,i)}}function fE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Kd._fromErrorAndOperation(n,a,e,r):a})}async function KR(n,e,t=!1){const r=await vc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ss._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(n,e,t=!1){const{auth:r}=n;if(xn(r.app))return Promise.reject(zr(r));const i="reauthenticate";try{const a=await vc(n,fE(r,i,e,n),t);Pe(a.idToken,r,"internal-error");const c=sg(a.idToken);Pe(c,r,"internal-error");const{sub:h}=c;return Pe(n.uid===h,r,"user-mismatch"),Ss._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&hr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(n,e,t=!1){if(xn(n.app))return Promise.reject(zr(n));const r="signIn",i=await fE(n,r,e),a=await Ss._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function YR(n,e){return pE(Vi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(n){const e=Vi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XR(n,e,t){if(xn(n.app))return Promise.reject(zr(n));const r=Vi(n),c=await _m(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hE).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&mE(n),f}),h=await Ss._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function JR(n,e,t){return xn(n.app)?Promise.reject(zr(n)):YR(gt(n),Xa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mE(n),r})}function ZR(n,e,t,r){return gt(n).onIdTokenChanged(e,t,r)}function ek(n,e,t){return gt(n).beforeAuthStateChanged(e,t)}function tk(n,e,t,r){return gt(n).onAuthStateChanged(e,t,r)}function nk(n){return gt(n).signOut()}const Qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qd,"1"),this.storage.removeItem(Qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1e3,sk=10;class yE extends gE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);xR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sk):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yE.type="LOCAL";const ik=yE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends gE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vE.type="SESSION";const _E=vE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async m=>m(t.origin,a)),f=await ok(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((h,f)=>{const m=lg("",20);i.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(w){const x=w;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(x.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function lk(n){Br().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function ck(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uk(){return navigator?.serviceWorker?.controller||null}function dk(){return wE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="firebaseLocalStorageDb",hk=1,Yd="firebaseLocalStorage",EE="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(n,e){return n.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function fk(){const n=indexedDB.deleteDatabase(xE);return new Vc(n).toPromise()}function wm(){const n=indexedDB.open(xE,hk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Yd,{keyPath:EE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Yd)?e(r):(r.close(),await fk(),e(await wm()))})})}async function Iw(n,e,t){const r=Ih(n,!0).put({[EE]:e,value:t});return new Vc(r).toPromise()}async function pk(n,e){const t=Ih(n,!1).get(e),r=await new Vc(t).toPromise();return r===void 0?null:r.value}function bw(n,e){const t=Ih(n,!0).delete(e);return new Vc(t).toPromise()}const mk=800,gk=3;class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(dk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ck(),!this.activeServiceWorker)return;this.sender=new ak(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await Iw(e,Qd,"1"),await bw(e,Qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Ih(i,!1).getAll();return new Vc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TE.type="LOCAL";const yk=TE;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(n,e){return e?ws(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,t){return La(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _k(n){return pE(n.auth,new cg(n),n.bypassAuthState)}function wk(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),QR(t,new cg(n),n.bypassAuthState)}async function xk(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),KR(t,new cg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _k;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:hr(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Mc(2e3,1e4);class Da extends SE{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ek.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="pendingRedirect",Nd=new Map;class Sk extends SE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const r=await Ik(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ik(n,e){const t=Ak(e),r=Ck(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function bk(n,e){Nd.set(n._key(),e)}function Ck(n){return ws(n._redirectPersistence)}function Ak(n){return kd(Tk,n.config.apiKey,n.name)}async function Rk(n,e,t=!1){if(xn(n.app))return Promise.reject(zr(n));const r=Vi(n),i=vk(r,e),c=await new Sk(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=600*1e3;class Nk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!IE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ur(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cw(e))}saveEventToCache(e){this.cachedEventUids.add(Cw(e)),this.lastProcessedEventTime=Date.now()}}function Cw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Pk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e={}){return ji(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mk=/^https?/;async function Lk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Dk(n);for(const t of e)try{if(jk(t))return}catch{}hr(n,"unauthorized-domain")}function jk(n){const e=ym(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Mk.test(t))return!1;if(Ok.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Mc(3e4,6e4);function Aw(){const n=Br().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Fk(n){return new Promise((e,t)=>{function r(){Aw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Aw(),t(Ur(n,"network-request-failed"))},timeout:Vk.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)r();else{const i=kR("iframefcb");return Br()[i]=()=>{gapi.load?r():t(Ur(n,"network-request-failed"))},lE(`${RR()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Pd=null,e})}let Pd=null;function Uk(n){return Pd=Pd||Fk(n),Pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new Mc(5e3,15e3),Bk="__/auth/iframe",$k="emulator/auth/iframe",Wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qk(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rg(e,$k):`https://${n.config.authDomain}/${Bk}`,r={apiKey:e.apiKey,appName:n.name,v:Ro},i=Hk.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Oc(r).slice(1)}`}async function Gk(n){const e=await Uk(n),t=Br().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:qk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wk,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ur(n,"network-request-failed"),h=Br().setTimeout(()=>{a(c)},zk.get());function f(){Br().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qk=500,Yk=600,Xk="_blank",Jk="http://localhost";class Rw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zk(n,e,t,r=Qk,i=Yk){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...Kk,width:r.toString(),height:i.toString(),top:a,left:c},m=sn().toLowerCase();t&&(h=tE(m)?Xk:t),Zx(m)&&(e=e||Jk,f.scrollbars="yes");const y=Object.entries(f).reduce((x,[I,k])=>`${x}${I}=${k},`,"");if(wR(m)&&h!=="_self")return eN(e||"",h),new Rw(null);const w=window.open(e||"",h,y);Pe(w,n,"popup-blocked");try{w.focus()}catch{}return new Rw(w)}function eN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="__/auth/handler",nN="emulator/auth/handler",rN=encodeURIComponent("fac");async function kw(n,e,t,r,i,a){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ro,eventId:i};if(e instanceof dE){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",U1(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))c[y]=w}if(e instanceof jc){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),m=f?`#${rN}=${encodeURIComponent(f)}`:"";return`${sN(n)}?${Oc(h).slice(1)}${m}`}function sN({config:n}){return n.emulator?rg(n,nN):`https://${n.authDomain}/${tN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class iN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=Rk,this._overrideRedirectResult=bk}async _openPopup(e,t,r,i){Ts(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await kw(e,t,r,ym(),i);return Zk(e,a,lg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await kw(e,t,r,ym(),i);return lk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ts(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Gk(e),r=new Nk(e);return t.register("authEvent",i=>(Pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wp,{type:Wp},i=>{const a=i?.[0]?.[Wp];a!==void 0&&t(!!a),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oE()||eE()||ig()}}const oN=iN;var Nw="@firebase/auth",Pw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cN(n){xo(new Ii("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Pe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aE(n)},m=new bR(r,i,a,f);return LR(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xo(new Ii("auth-internal",e=>{const t=Vi(e.getProvider("auth").getImmediate());return(r=>new aN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(Nw,Pw,lN(n)),Fr(Nw,Pw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=300,dN=Vx("authIdTokenMaxAge")||uN;let Dw=null;const hN=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dN)return;const i=t?.token;Dw!==i&&(Dw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function fN(n=tg()){const e=Eh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MR(n,{popupRedirectResolver:oN,persistence:[yk,ik,_E]}),r=Vx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=hN(a.toString());ek(t,c,()=>c(t.currentUser)),ZR(t,h=>c(h))}}const i=Mx("auth");return i&&jR(t,`http://${i}`),t}function pN(){return document.getElementsByTagName("head")?.[0]??document}CR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Ur("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",pN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cN("Browser");var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,bE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,b){function N(){}N.prototype=b.prototype,P.F=b.prototype,P.prototype=new N,P.prototype.constructor=P,P.D=function(O,L,F){for(var D=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)D[Te-2]=arguments[Te];return b.prototype[L].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,b,N){N||(N=0);const O=Array(16);if(typeof b=="string")for(var L=0;L<16;++L)O[L]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(L=0;L<16;++L)O[L]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=P.g[0],N=P.g[1],L=P.g[2];let F=P.g[3],D;D=b+(F^N&(L^F))+O[0]+3614090360&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(L^b&(N^L))+O[1]+3905402710&4294967295,F=b+(D<<12&4294967295|D>>>20),D=L+(N^F&(b^N))+O[2]+606105819&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(b^L&(F^b))+O[3]+3250441966&4294967295,N=L+(D<<22&4294967295|D>>>10),D=b+(F^N&(L^F))+O[4]+4118548399&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(L^b&(N^L))+O[5]+1200080426&4294967295,F=b+(D<<12&4294967295|D>>>20),D=L+(N^F&(b^N))+O[6]+2821735955&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(b^L&(F^b))+O[7]+4249261313&4294967295,N=L+(D<<22&4294967295|D>>>10),D=b+(F^N&(L^F))+O[8]+1770035416&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(L^b&(N^L))+O[9]+2336552879&4294967295,F=b+(D<<12&4294967295|D>>>20),D=L+(N^F&(b^N))+O[10]+4294925233&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(b^L&(F^b))+O[11]+2304563134&4294967295,N=L+(D<<22&4294967295|D>>>10),D=b+(F^N&(L^F))+O[12]+1804603682&4294967295,b=N+(D<<7&4294967295|D>>>25),D=F+(L^b&(N^L))+O[13]+4254626195&4294967295,F=b+(D<<12&4294967295|D>>>20),D=L+(N^F&(b^N))+O[14]+2792965006&4294967295,L=F+(D<<17&4294967295|D>>>15),D=N+(b^L&(F^b))+O[15]+1236535329&4294967295,N=L+(D<<22&4294967295|D>>>10),D=b+(L^F&(N^L))+O[1]+4129170786&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(b^N))+O[6]+3225465664&4294967295,F=b+(D<<9&4294967295|D>>>23),D=L+(b^N&(F^b))+O[11]+643717713&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(L^F))+O[0]+3921069994&4294967295,N=L+(D<<20&4294967295|D>>>12),D=b+(L^F&(N^L))+O[5]+3593408605&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(b^N))+O[10]+38016083&4294967295,F=b+(D<<9&4294967295|D>>>23),D=L+(b^N&(F^b))+O[15]+3634488961&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(L^F))+O[4]+3889429448&4294967295,N=L+(D<<20&4294967295|D>>>12),D=b+(L^F&(N^L))+O[9]+568446438&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(b^N))+O[14]+3275163606&4294967295,F=b+(D<<9&4294967295|D>>>23),D=L+(b^N&(F^b))+O[3]+4107603335&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(L^F))+O[8]+1163531501&4294967295,N=L+(D<<20&4294967295|D>>>12),D=b+(L^F&(N^L))+O[13]+2850285829&4294967295,b=N+(D<<5&4294967295|D>>>27),D=F+(N^L&(b^N))+O[2]+4243563512&4294967295,F=b+(D<<9&4294967295|D>>>23),D=L+(b^N&(F^b))+O[7]+1735328473&4294967295,L=F+(D<<14&4294967295|D>>>18),D=N+(F^b&(L^F))+O[12]+2368359562&4294967295,N=L+(D<<20&4294967295|D>>>12),D=b+(N^L^F)+O[5]+4294588738&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^L)+O[8]+2272392833&4294967295,F=b+(D<<11&4294967295|D>>>21),D=L+(F^b^N)+O[11]+1839030562&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^b)+O[14]+4259657740&4294967295,N=L+(D<<23&4294967295|D>>>9),D=b+(N^L^F)+O[1]+2763975236&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^L)+O[4]+1272893353&4294967295,F=b+(D<<11&4294967295|D>>>21),D=L+(F^b^N)+O[7]+4139469664&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^b)+O[10]+3200236656&4294967295,N=L+(D<<23&4294967295|D>>>9),D=b+(N^L^F)+O[13]+681279174&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^L)+O[0]+3936430074&4294967295,F=b+(D<<11&4294967295|D>>>21),D=L+(F^b^N)+O[3]+3572445317&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^b)+O[6]+76029189&4294967295,N=L+(D<<23&4294967295|D>>>9),D=b+(N^L^F)+O[9]+3654602809&4294967295,b=N+(D<<4&4294967295|D>>>28),D=F+(b^N^L)+O[12]+3873151461&4294967295,F=b+(D<<11&4294967295|D>>>21),D=L+(F^b^N)+O[15]+530742520&4294967295,L=F+(D<<16&4294967295|D>>>16),D=N+(L^F^b)+O[2]+3299628645&4294967295,N=L+(D<<23&4294967295|D>>>9),D=b+(L^(N|~F))+O[0]+4096336452&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~L))+O[7]+1126891415&4294967295,F=b+(D<<10&4294967295|D>>>22),D=L+(b^(F|~N))+O[14]+2878612391&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~b))+O[5]+4237533241&4294967295,N=L+(D<<21&4294967295|D>>>11),D=b+(L^(N|~F))+O[12]+1700485571&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~L))+O[3]+2399980690&4294967295,F=b+(D<<10&4294967295|D>>>22),D=L+(b^(F|~N))+O[10]+4293915773&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~b))+O[1]+2240044497&4294967295,N=L+(D<<21&4294967295|D>>>11),D=b+(L^(N|~F))+O[8]+1873313359&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~L))+O[15]+4264355552&4294967295,F=b+(D<<10&4294967295|D>>>22),D=L+(b^(F|~N))+O[6]+2734768916&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~b))+O[13]+1309151649&4294967295,N=L+(D<<21&4294967295|D>>>11),D=b+(L^(N|~F))+O[4]+4149444226&4294967295,b=N+(D<<6&4294967295|D>>>26),D=F+(N^(b|~L))+O[11]+3174756917&4294967295,F=b+(D<<10&4294967295|D>>>22),D=L+(b^(F|~N))+O[2]+718787259&4294967295,L=F+(D<<15&4294967295|D>>>17),D=N+(F^(L|~b))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+b&4294967295,P.g[1]=P.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+F&4294967295}r.prototype.v=function(P,b){b===void 0&&(b=P.length);const N=b-this.blockSize,O=this.C;let L=this.h,F=0;for(;F<b;){if(L==0)for(;F<=N;)i(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<b;)if(O[L++]=P.charCodeAt(F++),L==this.blockSize){i(this,O),L=0;break}}else for(;F<b;)if(O[L++]=P[F++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=b},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var b=1;b<P.length-8;++b)P[b]=0;b=this.o*8;for(var N=P.length-8;N<P.length;++N)P[N]=b&255,b/=256;for(this.v(P),P=Array(16),b=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)P[b++]=this.g[N]>>>O&255;return P};function a(P,b){var N=h;return Object.prototype.hasOwnProperty.call(N,P)?N[P]:N[P]=b(P)}function c(P,b){this.h=b;const N=[];let O=!0;for(let L=P.length-1;L>=0;L--){const F=P[L]|0;O&&F==b||(N[L]=F,O=!1)}this.g=N}var h={};function f(P){return-128<=P&&P<128?a(P,function(b){return new c([b|0],b<0?-1:0)}):new c([P|0],P<0?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return w;if(P<0)return A(m(-P));const b=[];let N=1;for(let O=0;P>=N;O++)b[O]=P/N|0,N*=4294967296;return new c(b,0)}function y(P,b){if(P.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P.charAt(0)=="-")return A(y(P.substring(1),b));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(b,8));let O=w;for(let F=0;F<P.length;F+=8){var L=Math.min(8,P.length-F);const D=parseInt(P.substring(F,F+L),b);L<8?(L=m(Math.pow(b,L)),O=O.j(L).add(m(D))):(O=O.j(N),O=O.add(m(D)))}return O}var w=f(0),x=f(1),I=f(16777216);n=c.prototype,n.m=function(){if(C(this))return-A(this).m();let P=0,b=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);P+=(O>=0?O:4294967296+O)*b,b*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k(this))return"0";if(C(this))return"-"+A(this).toString(P);const b=m(Math.pow(P,6));var N=this;let O="";for(;;){const L=K(N,b).g;N=j(N,L.j(b));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(P);if(N=L,k(N))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function k(P){if(P.h!=0)return!1;for(let b=0;b<P.g.length;b++)if(P.g[b]!=0)return!1;return!0}function C(P){return P.h==-1}n.l=function(P){return P=j(this,P),C(P)?-1:k(P)?0:1};function A(P){const b=P.g.length,N=[];for(let O=0;O<b;O++)N[O]=~P.g[O];return new c(N,~P.h).add(x)}n.abs=function(){return C(this)?A(this):this},n.add=function(P){const b=Math.max(this.g.length,P.g.length),N=[];let O=0;for(let L=0;L<=b;L++){let F=O+(this.i(L)&65535)+(P.i(L)&65535),D=(F>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);O=D>>>16,F&=65535,D&=65535,N[L]=D<<16|F}return new c(N,N[N.length-1]&-2147483648?-1:0)};function j(P,b){return P.add(A(b))}n.j=function(P){if(k(this)||k(P))return w;if(C(this))return C(P)?A(this).j(A(P)):A(A(this).j(P));if(C(P))return A(this.j(A(P)));if(this.l(I)<0&&P.l(I)<0)return m(this.m()*P.m());const b=this.g.length+P.g.length,N=[];for(var O=0;O<2*b;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<P.g.length;L++){const F=this.i(O)>>>16,D=this.i(O)&65535,Te=P.i(L)>>>16,Me=P.i(L)&65535;N[2*O+2*L]+=D*Me,z(N,2*O+2*L),N[2*O+2*L+1]+=F*Me,z(N,2*O+2*L+1),N[2*O+2*L+1]+=D*Te,z(N,2*O+2*L+1),N[2*O+2*L+2]+=F*Te,z(N,2*O+2*L+2)}for(P=0;P<b;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=b;P<2*b;P++)N[P]=0;return new c(N,0)};function z(P,b){for(;(P[b]&65535)!=P[b];)P[b+1]+=P[b]>>>16,P[b]&=65535,b++}function $(P,b){this.g=P,this.h=b}function K(P,b){if(k(b))throw Error("division by zero");if(k(P))return new $(w,w);if(C(P))return b=K(A(P),b),new $(A(b.g),A(b.h));if(C(b))return b=K(P,A(b)),new $(A(b.g),b.h);if(P.g.length>30){if(C(P)||C(b))throw Error("slowDivide_ only works with positive integers.");for(var N=x,O=b;O.l(P)<=0;)N=X(N),O=X(O);var L=ne(N,1),F=ne(O,1);for(O=ne(O,2),N=ne(N,2);!k(O);){var D=F.add(O);D.l(P)<=0&&(L=L.add(N),F=D),O=ne(O,1),N=ne(N,1)}return b=j(P,L.j(b)),new $(L,b)}for(L=w;P.l(b)>=0;){for(N=Math.max(1,Math.floor(P.m()/b.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=m(N),D=F.j(b);C(D)||D.l(P)>0;)N-=O,F=m(N),D=F.j(b);k(F)&&(F=x),L=L.add(F),P=j(P,D)}return new $(L,P)}n.B=function(P){return K(this,P).h},n.and=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)&P.i(O);return new c(N,this.h&P.h)},n.or=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)|P.i(O);return new c(N,this.h|P.h)},n.xor=function(P){const b=Math.max(this.g.length,P.g.length),N=[];for(let O=0;O<b;O++)N[O]=this.i(O)^P.i(O);return new c(N,this.h^P.h)};function X(P){const b=P.g.length+1,N=[];for(let O=0;O<b;O++)N[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(N,P.h)}function ne(P,b){const N=b>>5;b%=32;const O=P.g.length-N,L=[];for(let F=0;F<O;F++)L[F]=b>0?P.i(F+N)>>>b|P.i(F+N+1)<<32-b:P.i(F+N);return new c(L,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,xi=c}).apply(typeof Ow<"u"?Ow:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CE,ic,AE,Dd,xm,RE,kE,NE;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var _=0;_<u.length;++_){var E=u[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(u,_){if(_)e:{var E=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var q=u[R];if(!(q in E))break e;E=E[q]}u=u[u.length-1],R=E[u],_=_(R),_!=R&&_!=null&&e(E,u,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function f(u,_,E){return u.call.apply(u.bind,arguments)}function m(u,_,E){return m=f,m.apply(null,arguments)}function y(u,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function w(u,_){function E(){}E.prototype=_.prototype,u.Z=_.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(R,q,Y){for(var le=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)le[Fe-2]=arguments[Fe];return _.prototype[q].apply(R,le)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function I(u){const _=u.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=u[R];return E}return[]}function k(u,_){for(let R=1;R<arguments.length;R++){const q=arguments[R];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=u.length||0;const Y=q.length||0;u.length=E+Y;for(let le=0;le<Y;le++)u[E+le]=q[le]}else u.push(q)}}class C{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function A(u){c.setTimeout(()=>{throw u},0)}function j(){var u=P;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,E){const R=$.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var $=new C(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ne=!1,P=new z,b=()=>{const u=Promise.resolve(void 0);X=()=>{u.then(N)}};function N(){for(var u;u=j();){try{u.h.call(u.g)}catch(E){A(E)}var _=$;_.j(u),_.h<100&&(_.h++,u.next=_.g,_.g=u)}ne=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return u})();function D(u){return/^[\s\xa0]*$/.test(u)}function Te(u,_){L.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,_)}w(Te,L),Te.prototype.init=function(u,_){const E=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget,_||(E=="mouseover"?_=u.fromElement:E=="mouseout"&&(_=u.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Ie(u,_,E,R,q){this.listener=u,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=q,this.key=++Se,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function J(u,_,E){for(const R in u)_.call(E,u[R],R,u)}function oe(u,_){for(const E in u)_.call(void 0,u[E],E,u)}function B(u){const _={};for(const E in u)_[E]=u[E];return _}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(u,_){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)u[E]=R[E];for(let Y=0;Y<Z.length;Y++)E=Z[Y],Object.prototype.hasOwnProperty.call(R,E)&&(u[E]=R[E])}}function ge(u){this.src=u,this.g={},this.h=0}ge.prototype.add=function(u,_,E,R,q){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const le=Ne(u,_,R,q);return le>-1?(_=u[le],E||(_.fa=!1)):(_=new Ie(_,this.src,Y,!!R,q),_.fa=E,u.push(_)),_};function Re(u,_){const E=_.type;if(E in u.g){var R=u.g[E],q=Array.prototype.indexOf.call(R,_,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(R,q,1),Y&&(W(_),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Ne(u,_,E,R){for(let q=0;q<u.length;++q){const Y=u[q];if(!Y.da&&Y.listener==_&&Y.capture==!!E&&Y.ha==R)return q}return-1}var de="closure_lm_"+(Math.random()*1e6|0),Ve={};function We(u,_,E,R,q){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)We(u,_[Y],E,R,q);return null}return E=Ut(E),u&&u[Me]?u.J(_,E,h(R)?!!R.capture:!1,q):ht(u,_,E,!1,R,q)}function ht(u,_,E,R,q,Y){if(!_)throw Error("Invalid event type");const le=h(q)?!!q.capture:!!q;let Fe=xe(u);if(Fe||(u[de]=Fe=new ge(u)),E=Fe.add(_,E,R,le,Y),E.proxy)return E;if(R=hn(),E.proxy=R,R.src=u,R.listener=E,u.addEventListener)F||(q=le),q===void 0&&(q=!1),u.addEventListener(_.toString(),R,q);else if(u.attachEvent)u.attachEvent(Ds(_.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function hn(){function u(E){return _.call(u.src,u.listener,E)}const _=Fo;return u}function fn(u,_,E,R,q){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)fn(u,_[Y],E,R,q);else R=h(R)?!!R.capture:!!R,E=Ut(E),u&&u[Me]?(u=u.i,Y=String(_).toString(),Y in u.g&&(_=u.g[Y],E=Ne(_,E,R,q),E>-1&&(W(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete u.g[Y],u.h--)))):u&&(u=xe(u))&&(_=u.g[_.toString()],u=-1,_&&(u=Ne(_,E,R,q)),(E=u>-1?_[u]:null)&&an(E))}function an(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[Me])Re(_.i,u);else{var E=u.type,R=u.proxy;_.removeEventListener?_.removeEventListener(E,R,u.capture):_.detachEvent?_.detachEvent(Ds(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=xe(_))?(Re(E,u),E.h==0&&(E.src=null,_[de]=null)):W(u)}}}function Ds(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function Fo(u,_){if(u.da)u=!0;else{_=new Te(_,this);const E=u.listener,R=u.ha||u.src;u.fa&&an(u),u=E.call(R,_)}return u}function xe(u){return u=u[de],u instanceof ge?u:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ut(u){return typeof u=="function"?u:(u[ke]||(u[ke]=function(_){return u.handleEvent(_)}),u[ke])}function $e(){O.call(this),this.i=new ge(this),this.M=this,this.G=null}w($e,O),$e.prototype[Me]=!0,$e.prototype.removeEventListener=function(u,_,E,R){fn(this,u,_,E,R)};function rt(u,_){var E,R=u.G;if(R)for(E=[];R;R=R.G)E.push(R);if(u=u.M,R=_.type||_,typeof _=="string")_=new L(_,u);else if(_ instanceof L)_.target=_.target||u;else{var q=_;_=new L(R,u),pe(_,q)}q=!0;let Y,le;if(E)for(le=E.length-1;le>=0;le--)Y=_.g=E[le],q=Zn(Y,R,!0,_)&&q;if(Y=_.g=u,q=Zn(Y,R,!0,_)&&q,q=Zn(Y,R,!1,_)&&q,E)for(le=0;le<E.length;le++)Y=_.g=E[le],q=Zn(Y,R,!1,_)&&q}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var u=this.i;for(const _ in u.g){const E=u.g[_];for(let R=0;R<E.length;R++)W(E[R]);delete u.g[_],u.h--}}this.G=null},$e.prototype.J=function(u,_,E,R){return this.i.add(String(u),_,!1,E,R)},$e.prototype.K=function(u,_,E,R){return this.i.add(String(u),_,!0,E,R)};function Zn(u,_,E,R){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let Y=0;Y<_.length;++Y){const le=_[Y];if(le&&!le.da&&le.capture==E){const Fe=le.listener,Tt=le.ha||le.src;le.fa&&Re(u.i,le),q=Fe.call(Tt,R)!==!1&&q}}return q&&!R.defaultPrevented}function ll(u,_){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(u,_||0)}function cl(u){u.g=ll(()=>{u.g=null,u.i&&(u.i=!1,cl(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class Jc extends O{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(u){O.call(this),this.h=u,this.g={}}w(Os,O);var ul=[];function Uo(u){J(u.g,function(_,E){this.g.hasOwnProperty(E)&&an(_)},u),u.g={}}Os.prototype.N=function(){Os.Z.N.call(this),Uo(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ms=c.JSON.stringify,Zc=c.JSON.parse,zi=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Ls(){}function eu(){}var js={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zo(){L.call(this,"d")}w(zo,L);function dl(){L.call(this,"c")}w(dl,L);var er={},Bo=null;function Vs(){return Bo=Bo||new $e}er.Ia="serverreachability";function $o(u){L.call(this,er.Ia,u)}w($o,L);function Zr(u){const _=Vs();rt(_,new $o(_))}er.STAT_EVENT="statevent";function es(u,_){L.call(this,er.STAT_EVENT,u),this.stat=_}w(es,L);function vt(u){const _=Vs();rt(_,new es(_,u))}er.Ja="timingevent";function hl(u,_){L.call(this,er.Ja,u),this.size=_}w(hl,L);function Fs(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},_)}function Us(){this.g=!0}Us.prototype.ua=function(){this.g=!1};function tu(u,_,E,R,q,Y){u.info(function(){if(u.g)if(Y){var le="",Fe=Y.split("&");for(let nt=0;nt<Fe.length;nt++){var Tt=Fe[nt].split("=");if(Tt.length>1){const Ct=Tt[0];Tt=Tt[1];const An=Ct.split("_");le=An.length>=2&&An[1]=="type"?le+(Ct+"="+Tt+"&"):le+(Ct+"=redacted&")}}}else le=null;else le=Y;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+_+`
`+E+`
`+le})}function nu(u,_,E,R,q,Y,le){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+_+`
`+E+`
`+Y+" "+le})}function yr(u,_,E,R){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+Bi(u,E)+(R?" "+R:"")})}function ru(u,_){u.info(function(){return"TIMEOUT: "+_})}Us.prototype.info=function(){};function Bi(u,_){if(!u.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var E=Y[u];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let le=1;le<R.length;le++)R[le]=""}}}}return Ms(Y)}catch{return _}}var zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},su;function ts(){}w(ts,Ls),ts.prototype.g=function(){return new XMLHttpRequest},su=new ts;function vr(u){return encodeURIComponent(String(u))}function Wo(u){var _=1;u=u.split(":");const E=[];for(;_>0&&u.length;)E.push(u.shift()),_--;return u.length&&E.push(u.join(":")),E}function zn(u,_,E,R){this.j=u,this.i=_,this.l=E,this.S=R||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new iu}function iu(){this.i=null,this.g="",this.h=!1}var ou={},fl={};function tr(u,_,E){u.M=1,u.A=rs(Bn(_)),u.u=E,u.R=!0,pl(u,null)}function pl(u,_){u.F=Date.now(),$i(u),u.B=Bn(u.A);var E=u.B,R=u.S;Array.isArray(R)||(R=[String(R)]),Sl(E.i,"t",R),u.C=0,E=u.j.L,u.h=new iu,u.g=gu(u.j,E?_:null,!u.u),u.P>0&&(u.O=new Jc(m(u.Y,u,u.g),u.P)),_=u.V,E=u.g,R=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(ul[0]=q.toString()),q=ul);for(let Y=0;Y<q.length;Y++){const le=We(E,q[Y],R||_.handleEvent,!1,_.h||_);if(!le)break;_.g[le.key]=le}_=u.J?B(u.J):{},u.u?(u.v||(u.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,_)):(u.v="GET",u.g.ea(u.B,u.v,null,_)),Zr(),tu(u.i,u.v,u.B,u.l,u.S,u.u)}zn.prototype.ba=function(u){u=u.target;const _=this.O;_&&Ir(u)==3?_.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)e:{const Fe=Ir(this.g),Tt=this.g.ya(),nt=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||pu(this.g)))){this.K||Fe!=4||Tt==7||(Tt==8||nt<=0?Zr(3):Zr(2)),Ho(this);var _=this.g.ca();this.X=_;var E=au(this);if(this.o=_==200,nu(this.i,this.v,this.B,this.l,this.S,Fe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Y=R;break t}}Y=null}if(u=Y)yr(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,at(this,u);else{this.o=!1,this.m=3,vt(12),ns(this),Wi(this);break e}}if(this.R){u=!0;let Ct;for(;!this.K&&this.C<E.length;)if(Ct=cu(this,E),Ct==fl){Fe==4&&(this.m=4,vt(14),u=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==ou){this.m=4,vt(15),yr(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else yr(this.i,this.l,Ct,null),at(this,Ct);if(lu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||E.length!=0||this.h.h||(this.m=1,vt(16),u=!1),this.o=this.o&&u,!u)yr(this.i,this.l,E,"[Invalid Chunked Response]"),ns(this),Wi(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Zi(le),le.P=!0,vt(11))}}else yr(this.i,this.l,E,null),at(this,E);Fe==4&&ns(this),this.o&&!this.K&&(Fe==4?ta(this.j,this):(this.o=!1,$i(this)))}else bl(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,vt(12)):(this.m=0,vt(13)),ns(this),Wi(this)}}}catch{}finally{}};function au(u){if(!lu(u))return u.g.la();const _=pu(u.g);if(_==="")return"";let E="";const R=_.length,q=Ir(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ns(u),Wi(u),"";u.h.i=new c.TextDecoder}for(let Y=0;Y<R;Y++)u.h.h=!0,E+=u.h.i.decode(_[Y],{stream:!(q&&Y==R-1)});return _.length=0,u.h.g+=E,u.C=0,u.h.g}function lu(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function cu(u,_){var E=u.C,R=_.indexOf(`
`,E);return R==-1?fl:(E=Number(_.substring(E,R)),isNaN(E)?ou:(R+=1,R+E>_.length?fl:(_=_.slice(R,R+E),u.C=R+E,_)))}zn.prototype.cancel=function(){this.K=!0,ns(this)};function $i(u){u.T=Date.now()+u.H,ml(u,u.H)}function ml(u,_){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Fs(m(u.aa,u),_)}function Ho(u){u.D&&(c.clearTimeout(u.D),u.D=null)}zn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ru(this.i,this.B),this.M!=2&&(Zr(),vt(17)),ns(this),this.m=2,Wi(this)):ml(this,this.T-u)};function Wi(u){u.j.I==0||u.K||ta(u.j,u)}function ns(u){Ho(u);var _=u.O;_&&typeof _.dispose=="function"&&_.dispose(),u.O=null,Uo(u.V),u.g&&(_=u.g,u.g=null,_.abort(),_.dispose())}function at(u,_){try{var E=u.j;if(E.I!=0&&(E.g==u||yl(E.h,u))){if(!u.L&&yl(E.h,u)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)ea(E),bn(E);else break e;Ar(E),vt(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Fs(m(E.Va,E),6e3));Hi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Cn(E,11)}else if((u.L||E.g==u)&&ea(E),!D(_))for(q=E.Ba.g.parse(_),_=0;_<q.length;_++){let nt=q[_];const Ct=nt[0];if(!(Ct<=E.K))if(E.K=Ct,nt=nt[1],E.I==2)if(nt[0]=="c"){E.M=nt[1],E.ba=nt[2];const An=nt[3];An!=null&&(E.ka=An,E.j.info("VER="+E.ka));const ls=nt[4];ls!=null&&(E.za=ls,E.j.info("SVER="+E.za));const Rr=nt[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(R=1.5*Rr,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const kr=u.g;if(kr){const sa=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var Y=R.h;Y.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Go(Y,Y.h),Y.h=null))}if(R.G){const Rl=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(R.wa=Rl,et(R.J,R.G,Rl))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var le=u;if(R.na=Al(R,R.L?R.ba:null,R.W),le.L){qi(R.h,le);var Fe=le,Tt=R.O;Tt&&(Fe.H=Tt),Fe.D&&(Ho(Fe),$i(Fe)),R.g=le}else Yt(R);E.i.length>0&&as(E)}else nt[0]!="stop"&&nt[0]!="close"||Cn(E,7);else E.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Cn(E,7):Jo(E):nt[0]!="noop"&&E.l&&E.l.qa(nt),E.A=0)}}Zr(4)}catch{}}var uf=class{constructor(u,_){this.g=u,this.map=_}};function qo(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hi(u){return u.h?1:u.g?u.g.size:0}function yl(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function Go(u,_){u.g?u.g.add(_):u.h=_}function qi(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}qo.prototype.cancel=function(){if(this.i=Tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Tn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const E of u.g.values())_=_.concat(E.G);return _}return I(u.i)}var uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sn(u,_){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const R=u[E].indexOf("=");let q,Y=null;R>=0?(q=u[E].substring(0,R),Y=u[E].substring(R+1)):q=u[E],_(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function _r(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;u instanceof _r?(this.l=u.l,Gi(this,u.j),this.o=u.o,this.g=u.g,wr(this,u.u),this.h=u.h,$s(this,Il(u.i)),this.m=u.m):u&&(_=String(u).match(uu))?(this.l=!1,Gi(this,_[1]||"",!0),this.o=Ki(_[2]||""),this.g=Ki(_[3]||"",!0),wr(this,_[4]),this.h=Ki(_[5]||"",!0),$s(this,_[6]||"",!0),this.m=Ki(_[7]||"")):(this.l=!1,this.i=new Ke(null,this.l))}_r.prototype.toString=function(){const u=[];var _=this.j;_&&u.push(Qi(_,_l,!0),":");var E=this.g;return(E||_=="file")&&(u.push("//"),(_=this.o)&&u.push(Qi(_,_l,!0),"@"),u.push(vr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Qi(E,E.charAt(0)=="/"?Yi:wl,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Qi(E,xl)),u.join("")},_r.prototype.resolve=function(u){const _=Bn(this);let E=!!u.j;E?Gi(_,u.j):E=!!u.o,E?_.o=u.o:E=!!u.g,E?_.g=u.g:E=u.u!=null;var R=u.h;if(E)wr(_,u.u);else if(E=!!u.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=_.h.lastIndexOf("/");q!=-1&&(R=_.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let le=0;le<q.length;){const Fe=q[le++];Fe=="."?R&&le==q.length&&Y.push(""):Fe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),R&&le==q.length&&Y.push("")):(Y.push(Fe),R=!0)}R=Y.join("/")}else R=q}return E?_.h=R:E=u.i.toString()!=="",E?$s(_,Il(u.i)):E=!!u.m,E&&(_.m=u.m),_};function Bn(u){return new _r(u)}function Gi(u,_,E){u.j=E?Ki(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function wr(u,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);u.u=_}else u.u=null}function $s(u,_,E){_ instanceof Ke?(u.i=_,Qo(u.i,u.l)):(E||(_=Qi(_,df)),u.i=new Ke(_,u.l))}function et(u,_,E){u.i.set(_,E)}function rs(u){return et(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ki(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,_,E){return typeof u=="string"?(u=encodeURI(u).replace(_,vl),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _l=/[#\/\?@]/g,wl=/[#\?:]/g,Yi=/[#\?]/g,df=/[#\?@]/g,xl=/#/g;function Ke(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function xr(u){u.g||(u.g=new Map,u.h=0,u.i&&Sn(u.i,function(_,E){u.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Ke.prototype,n.add=function(u,_){xr(this),this.i=null,u=Er(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(_),this.h+=1,this};function El(u,_){xr(u),_=Er(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function Ko(u,_){return xr(u),_=Er(u,_),u.g.has(_)}n.forEach=function(u,_){xr(this),this.g.forEach(function(E,R){E.forEach(function(q){u.call(_,q,R,this)},this)},this)};function Tl(u,_){xr(u);let E=[];if(typeof _=="string")Ko(u,_)&&(E=E.concat(u.g.get(Er(u,_))));else for(u=Array.from(u.g.values()),_=0;_<u.length;_++)E=E.concat(u[_]);return E}n.set=function(u,_){return xr(this),this.i=null,u=Er(this,u),Ko(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},n.get=function(u,_){return u?(u=Tl(this,u),u.length>0?String(u[0]):_):_};function Sl(u,_,E){El(u,_),E.length>0&&(u.i=null,u.g.set(Er(u,_),I(E)),u.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const q=vr(E);E=Tl(this,E);for(let Y=0;Y<E.length;Y++){let le=q;E[Y]!==""&&(le+="="+vr(E[Y])),u.push(le)}}return this.i=u.join("&")};function Il(u){const _=new Ke;return _.i=u.i,u.g&&(_.g=new Map(u.g),_.h=u.h),_}function Er(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function Qo(u,_){_&&!u.j&&(xr(u),u.i=null,u.g.forEach(function(E,R){const q=R.toLowerCase();R!=q&&(El(this,R),Sl(this,q,E))},u)),u.j=_}function Tr(u,_){const E=new Us;if(c.Image){const R=new Image;R.onload=y(zt,E,"TestLoadImage: loaded",!0,_,R),R.onerror=y(zt,E,"TestLoadImage: error",!1,_,R),R.onabort=y(zt,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=y(zt,E,"TestLoadImage: timeout",!1,_,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else _(!1)}function Sr(u,_){const E=new Us,R=new AbortController,q=setTimeout(()=>{R.abort(),zt(E,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:R.signal}).then(Y=>{clearTimeout(q),Y.ok?zt(E,"TestPingServer: ok",!0,_):zt(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),zt(E,"TestPingServer: error",!1,_)})}function zt(u,_,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function Xi(){this.g=new zi}function ss(u){this.i=u.Sb||null,this.h=u.ab||!1}w(ss,Ls),ss.prototype.g=function(){return new In(this.i,this.h)};function In(u,_){$e.call(this),this.H=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(In,$e),n=In.prototype,n.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=_,this.readyState=1,nr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(_.body=u),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;du(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function du(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?Ws(this):nr(this),this.readyState==3&&du(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Ws(this))},n.Na=function(u){this.g&&(this.response=u,Ws(this))},n.ga=function(){this.g&&Ws(this)};function Ws(u){u.readyState=4,u.l=null,u.j=null,u.B=null,nr(u)}n.setRequestHeader=function(u,_){this.A.append(u,_)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=_.next();return u.join(`\r
`)};function nr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(In.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hu(u){let _="";return J(u,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function Yo(u,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=hu(E),typeof u=="string"?E!=null&&vr(E):et(u,_,E))}function st(u){$e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(st,$e);var fu=/^https?$/i,hf=["POST","PUT"];n=st.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():su.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch(Y){Hs(this,Y);return}if(u=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())E.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(hf,_,void 0)>=0)||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of E)this.g.setRequestHeader(Y,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){Hs(this,Y)}};function Hs(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.o=5,qs(u),os(u)}function qs(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,rt(this,"complete"),rt(this,"abort"),os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?is(this):this.Xa())},n.Xa=function(){is(this)};function is(u){if(u.h&&typeof a<"u"){if(u.v&&Ir(u)==4)setTimeout(u.Ca.bind(u),0);else if(rt(u,"readystatechange"),Ir(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=Y===0){let le=String(u.D).match(uu)[1]||null;!le&&c.self&&c.self.location&&(le=c.self.location.protocol.slice(0,-1)),R=!fu.test(le?le.toLowerCase():"")}E=R}if(E)rt(u,"complete"),rt(u,"success");else{u.o=6;try{var q=Ir(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",qs(u)}}finally{os(u)}}}}function os(u,_){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,_||rt(u,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ir(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Ir(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),Zc(_)}};function pu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bl(u){const _={};u=(u.g&&Ir(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(D(u[R]))continue;var E=Wo(u[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=_[q]||[];_[q]=Y,Y.push(E)}oe(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(u,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||_}function Xo(u){this.za=0,this.i=[],this.j=new Us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=br("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=br("baseRetryDelayMs",5e3,u),this.Za=br("retryDelaySeedMs",1e4,u),this.Ta=br("forwardChannelMaxRetries",2,u),this.va=br("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new qo(u&&u.concurrentRequestLimit),this.Ba=new Xi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xo.prototype,n.ka=8,n.I=1,n.connect=function(u,_,E,R){vt(0),this.W=u,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=Al(this,null,this.W),as(this)};function Jo(u){if(Zo(u),u.I==3){var _=u.V++,E=Bn(u.J);if(et(E,"SID",u.M),et(E,"RID",_),et(E,"TYPE","terminate"),Cr(u,E),_=new zn(u,u.j,_),_.M=2,_.A=rs(Bn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.A,E=!0),E||(_.g=gu(_.j,null),_.g.ea(_.A)),_.F=Date.now(),$i(_)}eo(u)}function bn(u){u.g&&(Zi(u),u.g.cancel(),u.g=null)}function Zo(u){bn(u),u.v&&(c.clearTimeout(u.v),u.v=null),ea(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function as(u){if(!gl(u.h)&&!u.m){u.m=!0;var _=u.Ea;X||b(),ne||(X(),ne=!0),P.add(_,u),u.D=0}}function mu(u,_){return Hi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=_.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Fs(m(u.Ea,u,_),na(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new zn(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=B(Y),pe(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Cl(this,q,_),E=Bn(this.J),et(E,"RID",u),et(E,"CVER",22),this.G&&et(E,"X-HTTP-Session-Id",this.G),Cr(this,E),Y&&(this.R?_="headers="+vr(hu(Y))+"&"+_:this.u&&Yo(E,this.u,Y)),Go(this.h,q),this.Ra&&et(E,"TYPE","init"),this.S?(et(E,"$req",_),et(E,"SID","null"),q.U=!0,tr(q,E,null)):tr(q,E,_),this.I=2}}else this.I==3&&(u?Ji(this,u):this.i.length==0||gl(this.h)||Ji(this))};function Ji(u,_){var E;_?E=_.l:E=u.V++;const R=Bn(u.J);et(R,"SID",u.M),et(R,"RID",E),et(R,"AID",u.K),Cr(u,R),u.u&&u.o&&Yo(R,u.u,u.o),E=new zn(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),_&&(u.i=_.G.concat(u.i)),_=Cl(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Go(u.h,E),tr(E,R,_)}function Cr(u,_){u.H&&J(u.H,function(E,R){et(_,R,E)}),u.l&&J({},function(E,R){et(_,R,E)})}function Cl(u,_,E){E=Math.min(u.i.length,E);const R=u.l?m(u.l.Ka,u.l,u):null;e:{var q=u.i;let Fe=-1;for(;;){const Tt=["count="+E];Fe==-1?E>0?(Fe=q[0].g,Tt.push("ofs="+Fe)):Fe=0:Tt.push("ofs="+Fe);let nt=!0;for(let Ct=0;Ct<E;Ct++){var Y=q[Ct].g;const An=q[Ct].map;if(Y-=Fe,Y<0)Fe=Math.max(0,q[Ct].g-100),nt=!1;else try{Y="req"+Y+"_"||"";try{var le=An instanceof Map?An:Object.entries(An);for(const[ls,Rr]of le){let kr=Rr;h(Rr)&&(kr=Ms(Rr)),Tt.push(Y+ls+"="+encodeURIComponent(kr))}}catch(ls){throw Tt.push(Y+"type="+encodeURIComponent("_badmap")),ls}}catch{R&&R(An)}}if(nt){le=Tt.join("&");break e}}le=void 0}return u=u.i.splice(0,E),_.G=u,le}function Yt(u){if(!u.g&&!u.v){u.Y=1;var _=u.Da;X||b(),ne||(X(),ne=!0),P.add(_,u),u.A=0}}function Ar(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Fs(m(u.Da,u),na(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Gs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Fs(m(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,vt(10),bn(this),Gs(this))};function Zi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function Gs(u){u.g=new zn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var _=Bn(u.na);et(_,"RID","rpc"),et(_,"SID",u.M),et(_,"AID",u.K),et(_,"CI",u.F?"0":"1"),!u.F&&u.ia&&et(_,"TO",u.ia),et(_,"TYPE","xmlhttp"),Cr(u,_),u.u&&u.o&&Yo(_,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=rs(Bn(_)),E.u=null,E.R=!0,pl(E,u)}n.Va=function(){this.C!=null&&(this.C=null,bn(this),Ar(this),vt(19))};function ea(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function ta(u,_){var E=null;if(u.g==_){ea(u),Zi(u),u.g=null;var R=2}else if(yl(u.h,_))E=_.G,qi(u.h,_),R=1;else return;if(u.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var q=u.D;R=Vs(),rt(R,new hl(R,E)),as(u)}else Yt(u);else if(q=_.m,q==3||q==0&&_.X>0||!(R==1&&mu(u,_)||R==2&&Ar(u)))switch(E&&E.length>0&&(_=u.h,_.i=_.i.concat(E)),q){case 1:Cn(u,5);break;case 4:Cn(u,10);break;case 3:Cn(u,6);break;default:Cn(u,2)}}}function na(u,_){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*_}function Cn(u,_){if(u.j.info("Error code "+_),_==2){var E=m(u.bb,u),R=u.Ua;const q=!R;R=new _r(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gi(R,"https"),rs(R),q?Tr(R.toString(),E):Sr(R.toString(),E)}else vt(2);u.I=0,u.l&&u.l.pa(_),eo(u),Zo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function eo(u){if(u.I=0,u.ja=[],u.l){const _=Tn(u.h);(_.length!=0||u.i.length!=0)&&(k(u.ja,_),k(u.ja,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.oa()}}function Al(u,_,E){var R=E instanceof _r?Bn(E):new _r(E);if(R.g!="")_&&(R.g=_+"."+R.g),wr(R,R.u);else{var q=c.location;R=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const Y=new _r(null);R&&Gi(Y,R),_&&(Y.g=_),q&&wr(Y,q),E&&(Y.h=E),R=Y}return E=u.G,_=u.wa,E&&_&&et(R,E,_),et(R,"VER",u.ka),Cr(u,R),R}function gu(u,_,E){if(_&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Aa&&!u.ma?new st(new ss({ab:E})):new st(u.ma),_.Fa(u.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}n=yu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ra(){}ra.prototype.g=function(u,_){return new Bt(u,_)};function Bt(u,_){$e.call(this),this.g=new Xo(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(u?u["X-WebChannel-Client-Profile"]=_.sa:u={"X-WebChannel-Client-Profile":_.sa}),this.g.U=u,(u=_&&_.Qb)&&!D(u)&&(this.g.u=u),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new Ks(this)}w(Bt,$e),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Jo(this.g)},Bt.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=Ms(u),u=E);_.i.push(new uf(_.Ya++,u)),_.I==3&&as(_)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Bt.Z.N.call(this)};function vu(u){zo.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const E in _){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}w(vu,zo);function _u(){dl.call(this),this.status=1}w(_u,dl);function Ks(u){this.g=u}w(Ks,yu),Ks.prototype.ra=function(){rt(this.g,"a")},Ks.prototype.qa=function(u){rt(this.g,new vu(u))},Ks.prototype.pa=function(u){rt(this.g,new _u)},Ks.prototype.oa=function(){rt(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,NE=function(){return new ra},kE=function(){return Vs()},RE=er,xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Dd=zs,Bs.COMPLETE="complete",AE=Bs,eu.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ic=eu,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,CE=st}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const Mw="@firebase/firestore",Lw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new Zm("@firebase/firestore");function Ra(){return To.logLevel}function fe(n,...e){if(To.logLevel<=He.DEBUG){const t=e.map(ug);To.debug(`Firestore (${Ja}): ${n}`,...t)}}function Is(n,...e){if(To.logLevel<=He.ERROR){const t=e.map(ug);To.error(`Firestore (${Ja}): ${n}`,...t)}}function za(n,...e){if(To.logLevel<=He.WARN){const t=e.map(ug);To.warn(`Firestore (${Ja}): ${n}`,...t)}}function ug(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,PE(n,r,t)}function PE(n,e,t){let r=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Is(r),new Error(r)}function tt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||PE(e,i,r)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class gN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new xs,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new DE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class vN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _N{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new vN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xN(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function qe(n,e){return n<e?-1:n>e?1:0}function Em(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Hp(i)===Hp(a)?qe(i,a):Hp(i)?1:-1}return qe(n.length,e.length)}const EN=55296,TN=57343;function Hp(n){const e=n.charCodeAt(0);return e>=EN&&e<=TN}function Ba(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__name__";class Mr{constructor(e,t,r){t===void 0?t=0:t>e.length&&De(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&De(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Mr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const r=Mr.isNumericId(e),i=Mr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class ot extends Mr{construct(e,t,r){return new ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const SN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Mr{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return SN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vw}static keyField(){return new Gt([Vw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ot.fromString(e))}static fromName(e){return new be(ot.fromString(e).popFirst(5))}static empty(){return new be(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n,e,t){if(!t)throw new ue(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IN(n,e,t,r){if(e===!0&&r===!0)throw new ue(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Fw(n){if(!be.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Uw(n){if(be.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ME(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":De(12329,{type:typeof n})}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bh(n);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Fc(n,e){if(!ME(n))throw new ue(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ue(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=-62135596800,Bw=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Bw);return new ut(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zw)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bw}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fc(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Nt("string",ut._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new ut(0,0))}static max(){return new je(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=-1;function bN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new bi(i,be.empty(),e)}function CN(n){return new bi(n.readTime,n.key,wc)}class bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bi(je.min(),be.empty(),wc)}static max(){return new bi(je.max(),be.empty(),wc)}}function AN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==RN)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let i=0,a=0,c=!1;e.forEach((h=>{++i,h.next((()=>{++a,c&&a===i&&t()}),(f=>r(f)))})),c=!0,a===i&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((i=>i?te.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((y=>{c[m]=y,++h,h===a&&r(c)}),(y=>i(y)))}}))}static doWhile(e,t){return new te(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function NN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function el(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function Ah(n){return n==null}function Xd(n){return n===0&&1/n==-1/0}function PN(n){return typeof n=="number"&&Number.isInteger(n)&&!Xd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="";function DN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$w(e)),e=ON(n.get(t),e);return $w(e)}function ON(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case LE:t+="";break;default:t+=a}}return t}function $w(n){return n+LE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ht.RED,this.left=i??Ht.EMPTY,this.right=a??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ht(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hw(this.data.getIterator())}getIteratorFrom(e){return new Hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class Hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Mt(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new VE("Invalid base64 string: "+a):a}})(e);return new Qt(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new Qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const MN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=MN.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ai(n){return typeof n=="string"?Qt.fromBase64String(n):Qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="server_timestamp",UE="__type__",zE="__previous_value__",BE="__local_write_time__";function fg(n){return(n?.mapValue?.fields||{})[UE]?.stringValue===FE}function Rh(n){const e=n.mapValue.fields[zE];return fg(e)?Rh(e):e}function xc(n){const e=Ci(n.mapValue.fields[BE].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t,r,i,a,c,h,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=y}}const Jd="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||Jd}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===Jd}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="__type__",jN="__max__",gd={mapValue:{}},WE="__vector__",Zd="value";function Ri(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fg(n)?4:FN(n)?9007199254740991:VN(n)?10:11:De(28295,{value:n})}function Kr(n,e){if(n===e)return!0;const t=Ri(n);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xc(n).isEqual(xc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Ci(i.timestampValue),h=Ci(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Ai(i.bytesValue).isEqual(Ai(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return It(i.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return It(i.integerValue)===It(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=It(i.doubleValue),h=It(a.doubleValue);return c===h?Xd(c)===Xd(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Ba(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Ww(c)!==Ww(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Kr(c[f],h[f])))return!1;return!0})(n,e);default:return De(52216,{left:n})}}function Tc(n,e){return(n.values||[]).find((t=>Kr(t,e)))!==void 0}function $a(n,e){if(n===e)return 0;const t=Ri(n),r=Ri(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const h=It(a.integerValue||a.doubleValue),f=It(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return qw(n.timestampValue,e.timestampValue);case 4:return qw(xc(n),xc(e));case 5:return Em(n.stringValue,e.stringValue);case 6:return(function(a,c){const h=Ai(a),f=Ai(c);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const h=a.split("/"),f=c.split("/");for(let m=0;m<h.length&&m<f.length;m++){const y=qe(h[m],f[m]);if(y!==0)return y}return qe(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const h=qe(It(a.latitude),It(c.latitude));return h!==0?h:qe(It(a.longitude),It(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Gw(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const h=a.fields||{},f=c.fields||{},m=h[Zd]?.arrayValue,y=f[Zd]?.arrayValue,w=qe(m?.values?.length||0,y?.values?.length||0);return w!==0?w:Gw(m,y)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===gd.mapValue&&c===gd.mapValue)return 0;if(a===gd.mapValue)return 1;if(c===gd.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const x=Em(f[w],y[w]);if(x!==0)return x;const I=$a(h[f[w]],m[y[w]]);if(I!==0)return I}return qe(f.length,y.length)})(n.mapValue,e.mapValue);default:throw De(23264,{he:t})}}function qw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Ci(n),r=Ci(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function Gw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=$a(t[i],r[i]);if(a)return a}return qe(t.length,r.length)}function Wa(n){return Tm(n)}function Tm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ci(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ai(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Tm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Tm(t.fields[c])}`;return i+"}"})(n.mapValue):De(61005,{value:n})}function Od(n){switch(Ri(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(n);return e?16+Od(e):16;case 5:return 2*n.stringValue.length;case 6:return Ai(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Od(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Fi(r.fields,((a,c)=>{i+=a.length+Od(c)})),i})(n.mapValue);default:throw De(13486,{value:n})}}function Kw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sm(n){return!!n&&"integerValue"in n}function pg(n){return!!n&&"arrayValue"in n}function Qw(n){return!!n&&"nullValue"in n}function Yw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Md(n){return!!n&&"mapValue"in n}function VN(n){return(n?.mapValue?.fields||{})[$E]?.stringValue===WE}function hc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=hc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hc(n.arrayValue.values[t]);return e}return{...n}}function FN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Md(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hc(t)}setAll(e){let t=Gt.emptyPath(),r={},i=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=hc(c):i.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Md(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fi(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new En(hc(this.value))}}function HE(n){const e=[];return Fi(n.fields,((t,r)=>{const i=new Gt([t]);if(Md(r)){const a=HE(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new rn(e,0,je.min(),je.min(),je.min(),En.empty(),0)}static newFoundDocument(e,t,r,i){return new rn(e,1,t,je.min(),r,i,0)}static newNoDocument(e,t){return new rn(e,2,t,je.min(),je.min(),En.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,je.min(),je.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.position=e,this.inclusive=t}}function Xw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=be.comparator(be.fromName(c.referenceValue),t.key):r=$a(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function UN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class kt extends qE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new BN(e,t,r):t==="array-contains"?new HN(e,r):t==="in"?new qN(e,r):t==="not-in"?new GN(e,r):t==="array-contains-any"?new KN(e,r):new kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $N(e,r):new WN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($a(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends qE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fr(e,t)}matches(e){return GE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GE(n){return n.op==="and"}function KE(n){return zN(n)&&GE(n)}function zN(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function Im(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(KE(n))return n.filters.map((e=>Im(e))).join(",");{const e=n.filters.map((t=>Im(t))).join(",");return`${n.op}(${e})`}}function QE(n,e){return n instanceof kt?(function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&Kr(r.value,i.value)})(n,e):n instanceof fr?(function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,h)=>a&&QE(c,i.filters[h])),!0):!1})(n,e):void De(19439)}function YE(n){return n instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(YE).join(" ,")+"}"})(n):"Filter"}class BN extends kt{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class $N extends kt{constructor(e,t){super(e,"in",t),this.keys=XE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class WN extends kt{constructor(e,t){super(e,"not-in",t),this.keys=XE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function XE(n,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class HN extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pg(t)&&Tc(t.arrayValue,this.value)}}class qN extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class GN extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class KN extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Tc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this.Te=null}}function Zw(n,e=null,t=[],r=[],i=null,a=null,c=null){return new QN(n,e,t,r,i,a,c)}function mg(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Im(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Ah(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Wa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Wa(r))).join(",")),e.Te=t}return e.Te}function gg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jw(n.startAt,e.startAt)&&Jw(n.endAt,e.endAt)}function bm(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function YN(n,e,t,r,i,a,c,h){return new tl(n,e,t,r,i,a,c,h)}function kh(n){return new tl(n)}function e0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JE(n){return n.collectionGroup!==null}function fc(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Mt(Gt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Sc(a,r))})),t.has(Gt.keyField().canonicalString())||e.Ie.push(new Sc(Gt.keyField(),r))}return e.Ie}function $r(n){const e=Ue(n);return e.Ee||(e.Ee=XN(e,fc(n))),e.Ee}function XN(n,e){if(n.limitType==="F")return Zw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Sc(i.field,a)}));const t=n.endAt?new eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new eh(n.startAt.position,n.startAt.inclusive):null;return Zw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cm(n,e){const t=n.filters.concat([e]);return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function th(n,e,t){return new tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nh(n,e){return gg($r(n),$r(e))&&n.limitType===e.limitType}function ZE(n){return`${mg($r(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>YE(i))).join(", ")}]`),Ah(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Wa(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Wa(i))).join(",")),`Target(${r})`})($r(n))}; limitType=${n.limitType})`}function Ph(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):be.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of fc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,h,f){const m=Xw(c,h,f);return c.inclusive?m<=0:m<0})(r.startAt,fc(r),i)||r.endAt&&!(function(c,h,f){const m=Xw(c,h,f);return c.inclusive?m>=0:m>0})(r.endAt,fc(r),i))})(n,e)}function JN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eT(n){return(e,t)=>{let r=!1;for(const i of fc(n)){const a=ZN(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ZN(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):(function(a,c,h){const f=c.data.field(a),m=h.data.field(a);return f!==null&&m!==null?$a(f,m):De(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new yt(be.comparator);function bs(){return eP}const tT=new yt(be.comparator);function oc(...n){let e=tT;for(const t of n)e=e.insert(t.key,t);return e}function nT(n){let e=tT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function go(){return pc()}function rT(){return pc()}function pc(){return new ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const tP=new yt(be.comparator),nP=new Mt(be.comparator);function Ge(...n){let e=nP;for(const t of n)e=e.add(t);return e}const rP=new Mt(qe);function sP(){return rP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xd(e)?"-0":e}}function sT(n){return{integerValue:""+n}}function iP(n,e){return PN(e)?sT(e):yg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function oP(n,e,t){return n instanceof Ic?(function(i,a){const c={fields:{[UE]:{stringValue:FE},[BE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&fg(a)&&(a=Rh(a)),a&&(c.fields[zE]=a),{mapValue:c}})(t,e):n instanceof bc?oT(n,e):n instanceof Cc?aT(n,e):(function(i,a){const c=iT(i,a),h=t0(c)+t0(i.Ae);return Sm(c)&&Sm(i.Ae)?sT(h):yg(i.serializer,h)})(n,e)}function aP(n,e,t){return n instanceof bc?oT(n,e):n instanceof Cc?aT(n,e):t}function iT(n,e){return n instanceof nh?(function(r){return Sm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ic extends Dh{}class bc extends Dh{constructor(e){super(),this.elements=e}}function oT(n,e){const t=lT(e);for(const r of n.elements)t.some((i=>Kr(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Cc extends Dh{constructor(e){super(),this.elements=e}}function aT(n,e){let t=lT(e);for(const r of n.elements)t=t.filter((i=>!Kr(i,r)));return{arrayValue:{values:t}}}class nh extends Dh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function t0(n){return It(n.integerValue||n.doubleValue)}function lT(n){return pg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t){this.field=e,this.transform=t}}function cP(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bc&&i instanceof bc||r instanceof Cc&&i instanceof Cc?Ba(r.elements,i.elements,Kr):r instanceof nh&&i instanceof nh?Kr(r.Ae,i.Ae):r instanceof Ic&&i instanceof Ic})(n.transform,e.transform)}class uP{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Oh{}function cT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dT(n.key,dr.none()):new Uc(n.key,n.data,dr.none());{const t=n.data,r=En.empty();let i=new Mt(Gt.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Ui(n.key,r,new Dn(i.toArray()),dr.none())}}function dP(n,e,t){n instanceof Uc?(function(i,a,c){const h=i.value.clone(),f=r0(i.fieldTransforms,a,c.transformResults);h.setAll(f),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ui?(function(i,a,c){if(!Ld(i.precondition,a))return void a.convertToUnknownDocument(c.version);const h=r0(i.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(uT(i)),f.setAll(h),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function mc(n,e,t,r){return n instanceof Uc?(function(a,c,h,f){if(!Ld(a.precondition,c))return h;const m=a.value.clone(),y=s0(a.fieldTransforms,f,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ui?(function(a,c,h,f){if(!Ld(a.precondition,c))return h;const m=s0(a.fieldTransforms,f,c),y=c.data;return y.setAll(uT(a)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,c,h){return Ld(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function hP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=iT(r.transform,i||null);a!=null&&(t===null&&(t=En.empty()),t.set(r.field,a))}return t||null}function n0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ba(r,i,((a,c)=>cP(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Uc extends Oh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends Oh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function r0(n,e,t){const r=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,aP(c,h,t[i]))}return r}function s0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,oP(a,c,e))}return r}class dT extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fP extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&dP(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=mc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=rT();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const f=cT(c,h);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(je.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,((t,r)=>n0(t,r)))&&Ba(this.baseMutations,e.baseMutations,((t,r)=>n0(t,r)))}}class vg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return tP})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new vg(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mP=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,Qe;function yP(n){switch(n){case ee.OK:return De(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return De(15467,{code:n})}}function hT(n){if(n===void 0)return Is("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Rt.OK:return ee.OK;case Rt.CANCELLED:return ee.CANCELLED;case Rt.UNKNOWN:return ee.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return ee.INTERNAL;case Rt.UNAVAILABLE:return ee.UNAVAILABLE;case Rt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Rt.NOT_FOUND:return ee.NOT_FOUND;case Rt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Rt.ABORTED:return ee.ABORTED;case Rt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Rt.DATA_LOSS:return ee.DATA_LOSS;default:return De(39323,{code:n})}}(Qe=Rt||(Rt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new xi([4294967295,4294967295],0);function i0(n){const e=vP().encode(n),t=new bE;return t.update(e),new Uint8Array(t.digest())}function o0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new xi([t,r],0),new xi([i,a],0)]}class _g{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ac(`Invalid padding: ${t}`);if(r<0)throw new ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ac(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xi.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(xi.fromNumber(r)));return i.compare(_P)===1&&(i=new xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=i0(e),[r,i]=o0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new _g(a,i,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=i0(e),[r,i]=o0(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Mh(je.min(),i,new yt(qe),bs(),Ge())}}class zc{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zc(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class fT{constructor(e,t){this.targetId=e,this.Ce=t}}class pT{constructor(e,t,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class a0{constructor(){this.ve=0,this.Fe=l0(),this.Me=Qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),r=Ge();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De(38017,{changeType:a})}})),new zc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=l0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wP{constructor(e){this.Ge=e,this.ze=new Map,this.je=bs(),this.Je=yd(),this.He=yd(),this.Ye=new yt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(bm(a))if(r===0){const c=new be(a.path);this.et(t,c,rn.newNoDocument(c,je.min()))}else tt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),f=h?this.ct(h,e,c):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,h;try{c=Ai(r).toUint8Array()}catch(f){if(f instanceof VE)return za("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new _g(c,i,a)}catch(f){return za(f instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const h=this.ot(c);if(h){if(a.current&&bm(h.target)){const f=new be(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,rn.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Ge();this.He.forEach(((a,c)=>{let h=!0;c.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new Mh(e,t,this.Ye,this.je,r);return this.je=bs(),this.Je=yd(),this.He=yd(),this.Ye=new yt(qe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new a0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Mt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Mt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yd(){return new yt(be.comparator)}function l0(){return new yt(be.comparator)}const xP={asc:"ASCENDING",desc:"DESCENDING"},EP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TP={and:"AND",or:"OR"};class SP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Am(n,e){return n.useProto3Json||Ah(e)?e:{value:e}}function rh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IP(n,e){return rh(n,e.toTimestamp())}function Wr(n){return tt(!!n,49232),je.fromTimestamp((function(t){const r=Ci(t);return new ut(r.seconds,r.nanos)})(n))}function wg(n,e){return Rm(n,e).canonicalString()}function Rm(n,e){const t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gT(n){const e=ot.fromString(n);return tt(xT(e),10190,{key:e.toString()}),e}function km(n,e){return wg(n.databaseId,e.path)}function qp(n,e){const t=gT(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(vT(t))}function yT(n,e){return wg(n.databaseId,e)}function bP(n){const e=gT(n);return e.length===4?ot.emptyPath():vT(e)}function Nm(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vT(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c0(n,e,t){return{name:km(n,e),fields:t.value.mapValue.fields}}function CP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:De(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,y){return m.useProto3Json?(tt(y===void 0||typeof y=="string",58123),Qt.fromBase64String(y||"")):(tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Qt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const y=m.code===void 0?ee.UNKNOWN:hT(m.code);return new ue(y,m.message||"")})(c);t=new pT(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qp(n,r.document.name),a=Wr(r.document.updateTime),c=r.document.createTime?Wr(r.document.createTime):je.min(),h=new En({mapValue:{fields:r.document.fields}}),f=rn.newFoundDocument(i,a,c,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new jd(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qp(n,r.document),a=r.readTime?Wr(r.readTime):je.min(),c=rn.newNoDocument(i,a),h=r.removedTargetIds||[];t=new jd([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qp(n,r.document),a=r.removedTargetIds||[];t=new jd([],a,i,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new gP(i,a),h=r.targetId;t=new fT(h,c)}}return t}function AP(n,e){let t;if(e instanceof Uc)t={update:c0(n,e.key,e.value)};else if(e instanceof dT)t={delete:km(n,e.key)};else if(e instanceof Ui)t={update:c0(n,e.key,e.data),updateMask:jP(e.fieldMask)};else{if(!(e instanceof fP))return De(16599,{Vt:e.type});t={verify:km(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const h=c.transform;if(h instanceof Ic)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof bc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Cc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof nh)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw De(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:IP(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:De(27497)})(n,e.precondition)),t}function RP(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Wr(i.updateTime):Wr(a);return c.isEqual(je.min())&&(c=Wr(a)),new uP(c,i.transformResults||[])})(t,e)))):[]}function kP(n,e){return{documents:[yT(n,e.path)]}}function NP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yT(n,i);const a=(function(m){if(m.length!==0)return wT(fr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((y=>(function(x){return{field:Na(x.field),direction:OP(x.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Am(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function PP(n){let e=bP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tt(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(w){const x=_T(w);return x instanceof fr&&KE(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((x=>(function(k){return new Sc(Pa(k.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let x;return x=typeof w=="object"?w.value:w,Ah(x)?null:x})(t.limit));let f=null;t.startAt&&(f=(function(w){const x=!!w.before,I=w.values||[];return new eh(I,x)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const x=!w.before,I=w.values||[];return new eh(I,x)})(t.endAt)),YN(e,i,c,a,h,"F",f,m)}function DP(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _T(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pa(t.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pa(t.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pa(t.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Pa(t.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(n):n.fieldFilter!==void 0?(function(t){return kt.create(Pa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((r=>_T(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(t.compositeFilter.op))})(n):De(30097,{filter:n})}function OP(n){return xP[n]}function MP(n){return EP[n]}function LP(n){return TP[n]}function Na(n){return{fieldPath:n.canonicalString()}}function Pa(n){return Gt.fromServerFormat(n.fieldPath)}function wT(n){return n instanceof kt?(function(t){if(t.op==="=="){if(Yw(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NAN"}};if(Qw(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Yw(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NAN"}};if(Qw(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(t.field),op:MP(t.op),value:t.value}}})(n):n instanceof fr?(function(t){const r=t.getFilters().map((i=>wT(i)));return r.length===1?r[0]:{compositeFilter:{op:LP(t.op),filters:r}}})(n):De(54877,{filter:n})}function jP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,r,i,a=je.min(),c=je.min(),h=Qt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.yt=e}}function FP(n){const e=PP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.Cn=new zP}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(bi.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class zP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mt(ot.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ET=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(ET,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ha(0)}static cr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="LruGarbageCollector",BP=1048576;function h0([n,e],[t,r]){const i=qe(n,t);return i===0?qe(e,r):i}class $P{constructor(e){this.Ir=e,this.buffer=new Mt(h0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();h0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(d0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){el(t)?fe(d0,"Ignoring IndexedDB error during garbage collection: ",t):await Za(t)}await this.Vr(3e5)}))}}class HP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Ch.ce);const r=new $P(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(u0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,h,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,c=Date.now(),this.nthSequenceNumber(e,i)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),Ra()<=He.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w}))))}}function qP(n,e){return new HP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.changes=new ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&mc(r.mutation,i,Dn.empty(),ut.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const i=go();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=oc();return a.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,i){let a=bs();const c=pc(),h=(function(){return pc()})();return t.forEach(((f,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof Ui)?a=a.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),mc(y.mutation,m,y.mutation.getFieldMask(),ut.now())):c.set(m.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,y)=>c.set(m,y))),t.forEach(((m,y)=>h.set(m,new KP(y,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=pc();let i=new yt(((c,h)=>c-h)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let y=r.get(f)||Dn.empty();y=h.applyToLocalView(m,y),r.set(f,y);const w=(i.get(h.batchId)||Ge()).add(f);i=i.insert(h.batchId,w)}))})).next((()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,y=f.value,w=rT();y.forEach((x=>{if(!a.has(x)){const I=cT(t.get(x),r.get(x));I!==null&&w.set(x,I),a=a.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,w))}return te.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):te.resolve(go());let h=wc,f=a;return c.next((m=>te.forEach(m,((y,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((x=>{f=f.insert(y,x)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ge()))).next((y=>({batchId:h,changes:nT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((r=>{let i=oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=oc();return this.indexManager.getCollectionParents(e,a).next((h=>te.forEach(h,(f=>{const m=(function(w,x){return new tl(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((y=>{y.forEach(((w,x)=>{c=c.insert(w,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((f,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,rn.newInvalidDocument(y)))}));let h=oc();return c.forEach(((f,m)=>{const y=a.get(f);y!==void 0&&mc(y.mutation,m,Dn.empty(),ut.now()),Ph(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:FP(i.bundledQuery),readTime:Wr(i.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.overlays=new yt(be.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return te.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=go(),a=t.length+1,c=new be(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new yt(((m,y)=>m-y));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=a.get(m.largestBatchId);y===null&&(y=go(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=go(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,y)=>h.set(m,y))),!(h.size()>=i)););return te.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mP(t,r));let a=this.qr.get(t);a===void 0&&(a=Ge(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.Qr=new Mt(Ft.$r),this.Ur=new Mt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new be(new ot([])),r=new Ft(t,e),i=new Ft(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ot([])),r=new Ft(t,e),i=new Ft(t,e+1);let a=Ge();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ft(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Mt(Ft.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pP(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Zr=this.Zr.add(new Ft(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const h=this.Xr(c.Yr);a.push(h)})),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(qe);return t.forEach((i=>{const a=new Ft(i,0),c=new Ft(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(h=>{r=r.add(h.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;be.isDocumentKey(a)||(a=a.child(""));const c=new Ft(new be(a),0);let h=new Mt(qe);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Yr)),!0)}),c),te.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(t.mutations,(i=>{const a=new Ft(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ft(t,0),i=this.Zr.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.ri=e,this.docs=(function(){return new yt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let r=bs();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():rn.newInvalidDocument(i))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bs();const c=t.path,h=new be(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||AN(CN(y),r)<=0||(i.has(y.key)||Ph(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,t,r,i){De(9500)}ii(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new t2(this)}getSize(e){return te.resolve(this.size)}}class t2 extends GP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.persistence=e,this.si=new ko((t=>mg(t)),gg),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new xg,this.targetCount=0,this.ai=Ha.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ha(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),te.waitFor(a).next((()=>i))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new JP,this.referenceDelegate=e(this),this.Pi=new n2(this),this.indexManager=new UP,this.remoteDocumentCache=(function(i){return new e2(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new VP(t),this.Ii=new YP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ZP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const i=new r2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class r2 extends kN{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Ri=new xg,this.Vi=null}static mi(e){return new Eg(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const i=be.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.pi=new ko((r=>DN(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=qP(this,t)}static mi(e,t){return new sh(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?te.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,a.removeEntry(c,je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Od(e.data.value)),t}br(e,t,r){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ge(),i=Ge();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Tg(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return O1()?8:NN(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new s2;return this.Ss(e,t,c).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ra()<=He.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Ra()<=He.DEBUG&&fe("QueryEngine","Query:",ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ra()<=He.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):te.resolve())}ys(e,t){if(e0(t))return te.resolve(null);let r=$r(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=th(t,null,"F"),r=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Ge(...a);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.Ds(t,h);return this.Cs(t,m,c,f.readTime)?this.ys(e,th(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,r,i){return e0(t)||i.isEqual(je.min())?te.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?te.resolve(null):(Ra()<=He.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(t)),this.vs(e,c,t,bN(i,wc)).next((h=>h)))}))}Ds(e,t){let r=new Mt(eT(e));return t.forEach(((i,a)=>{Ph(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Ra()<=He.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ka(t)),this.ps.getDocumentsMatchingQuery(e,t,bi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="LocalStore",o2=3e8;class a2{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new yt(qe),this.xs=new ko((a=>mg(a)),gg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function l2(n,e,t,r){return new a2(n,e,t,r)}async function ST(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],h=[];let f=Ge();for(const m of i){c.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){h.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function c2(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,y){const w=m.batch,x=w.keys();let I=te.resolve();return x.forEach((k=>{I=I.next((()=>y.getEntry(f,k))).next((C=>{const A=m.docVersions.get(k);tt(A!==null,48541),C.version.compareTo(A)<0&&(w.applyToRemoteDocument(C,m),C.isValidDocument()&&(C.setReadTime(m.commitVersion),y.addEntry(C)))}))})),I.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ge();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function IT(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function u2(n,e){const t=Ue(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach(((y,w)=>{const x=i.get(w);if(!x)return;h.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,w))));let I=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?I=I.withResumeToken(Qt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),i=i.insert(w,I),(function(C,A,j){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=o2?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(x,I,y)&&h.push(t.Pi.updateTargetData(a,I))}));let f=bs(),m=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),h.push(d2(a,c,e.documentUpdates).next((y=>{f=y.ks,m=y.qs}))),!r.isEqual(je.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(y)}return te.waitFor(h).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function d2(n,e,t){let r=Ge(),i=Ge();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=bs();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(je.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):fe(Sg,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:c,qs:i}}))}function h2(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function f2(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,te.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new vi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Pm(n,e,t){const r=Ue(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!el(c))throw c;fe(Sg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function f0(n,e,t){const r=Ue(n);let i=je.min(),a=Ge();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,y){const w=Ue(f),x=w.xs.get(y);return x!==void 0?te.resolve(w.Ms.get(x)):w.Pi.getTargetData(m,y)})(r,c,$r(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:je.min(),t?a:Ge()))).next((h=>(p2(r,JN(e),h),{documents:h,Qs:a})))))}function p2(n,e,t){let r=n.Os.get(e)||je.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class p0{constructor(){this.activeTargetIds=sP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m2{constructor(){this.Mo=new p0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new p0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="ConnectivityMonitor";class g0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(m0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(m0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function Dm(){return vd===null?vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="RestConnection",y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class v2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Jd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=Dm(),h=this.zo(e,t.toUriEncodedString());fe(Gp,`Sending RPC '${e}' ${c}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:m}=new URL(h),y=Mi(m);return this.Jo(e,h,f,r,y).then((w=>(fe(Gp,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw za(Gp,`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",r),w}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ja})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=y2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class w2 extends v2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=Dm();return new Promise(((h,f)=>{const m=new CE;m.setWithCredentials(!0),m.listenOnce(AE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Dd.NO_ERROR:const w=m.getResponseJson();fe(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case Dd.TIMEOUT:fe(tn,`RPC '${e}' ${c} timed out`),f(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const x=m.getStatus();if(fe(tn,`RPC '${e}' ${c} failed with status:`,x,"response text:",m.getResponseText()),x>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I?.error;if(k&&k.status&&k.message){const C=(function(j){const z=j.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(z)>=0?z:ee.UNKNOWN})(k.status);f(new ue(C,k.message))}else f(new ue(ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{fe(tn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(i);fe(tn,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=Dm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=NE(),h=kE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");fe(tn,`Creating RPC '${e}' stream ${i}: ${y}`,f);const w=c.createWebChannel(y,f);this.I_(w);let x=!1,I=!1;const k=new _2({Yo:A=>{I?fe(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(x||(fe(tn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),x=!0),fe(tn,`RPC '${e}' stream ${i} sending:`,A),w.send(A))},Zo:()=>w.close()}),C=(A,j,z)=>{A.listen(j,($=>{try{z($)}catch(K){setTimeout((()=>{throw K}),0)}}))};return C(w,ic.EventType.OPEN,(()=>{I||(fe(tn,`RPC '${e}' stream ${i} transport opened.`),k.o_())})),C(w,ic.EventType.CLOSE,(()=>{I||(I=!0,fe(tn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(w))})),C(w,ic.EventType.ERROR,(A=>{I||(I=!0,za(tn,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),k.a_(new ue(ee.UNAVAILABLE,"The operation could not be completed")))})),C(w,ic.EventType.MESSAGE,(A=>{if(!I){const j=A.data[0];tt(!!j,16349);const z=j,$=z?.error||z[0]?.error;if($){fe(tn,`RPC '${e}' stream ${i} received error:`,$);const K=$.status;let X=(function(b){const N=Rt[b];if(N!==void 0)return hT(N)})(K),ne=$.message;X===void 0&&(X=ee.INTERNAL,ne="Unknown error status: "+K+" with message "+$.message),I=!0,k.a_(new ue(X,ne)),w.close()}else fe(tn,`RPC '${e}' stream ${i} received:`,j),k.u_(j)}})),C(h,RE.STAT_EVENT,(A=>{A.stat===xm.PROXY?fe(tn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===xm.NOPROXY&&fe(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n){return new SP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="PersistentStream";class CT{constructor(e,t,r,i,a,c,h,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Is(t.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ue(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class x2 extends CT{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CP(this.serializer,e),r=(function(a){if(!("targetChange"in a))return je.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?je.min():c.readTime?Wr(c.readTime):je.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Nm(this.serializer),t.addTarget=(function(a,c){let h;const f=c.target;if(h=bm(f)?{documents:kP(a,f)}:{query:NP(a,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=mT(a,c.resumeToken);const m=Am(a,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(je.min())>0){h.readTime=rh(a,c.snapshotVersion.toTimestamp());const m=Am(a,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=DP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Nm(this.serializer),t.removeTarget=e,this.q_(t)}}class E2 extends CT{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=RP(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Nm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>AP(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{}class S2 extends T2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Rm(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(ee.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Rm(t,r),i,c,h,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class I2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class b2{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{No(this)&&(fe(So,"Restarting streams for network reachability change."),await(async function(f){const m=Ue(f);m.Ea.add(4),await Bc(m),m.Ra.set("Unknown"),m.Ea.delete(4),await jh(m)})(this))}))})),this.Ra=new I2(r,i)}}async function jh(n){if(No(n))for(const e of n.da)await e(!0)}async function Bc(n){for(const e of n.da)await e(!1)}function AT(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ag(t)?Cg(t):nl(t).O_()&&bg(t,e))}function Ig(n,e){const t=Ue(n),r=nl(t);t.Ia.delete(e),r.O_()&&RT(t,e),t.Ia.size===0&&(r.O_()?r.L_():No(t)&&t.Ra.set("Unknown"))}function bg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).Y_(e)}function RT(n,e){n.Va.Ue(e),nl(n).Z_(e)}function Cg(n){n.Va=new wP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Ra.ua()}function Ag(n){return No(n)&&!nl(n).x_()&&n.Ia.size>0}function No(n){return Ue(n).Ea.size===0}function kT(n){n.Va=void 0}async function C2(n){n.Ra.set("Online")}async function A2(n){n.Ia.forEach(((e,t)=>{bg(n,e)}))}async function R2(n,e){kT(n),Ag(n)?(n.Ra.ha(e),Cg(n)):n.Ra.set("Unknown")}async function k2(n,e,t){if(n.Ra.set("Online"),e instanceof pT&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ia.delete(h),i.Va.removeTarget(h))})(n,e)}catch(r){fe(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ih(n,r)}else if(e instanceof jd?n.Va.Ze(e):e instanceof fT?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const r=await IT(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const h=a.Va.Tt(c);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ia.get(m);y&&a.Ia.set(m,y.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,m)=>{const y=a.Ia.get(f);if(!y)return;a.Ia.set(f,y.withResumeToken(Qt.EMPTY_BYTE_STRING,y.snapshotVersion)),RT(a,f);const w=new vi(y.target,f,m,y.sequenceNumber);bg(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){fe(So,"Failed to raise snapshot:",r),await ih(n,r)}}async function ih(n,e,t){if(!el(e))throw e;n.Ea.add(1),await Bc(n),n.Ra.set("Offline"),t||(t=()=>IT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(So,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await jh(n)}))}function NT(n,e){return e().catch((t=>ih(n,t,e)))}async function Vh(n){const e=Ue(n),t=ki(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;N2(e);)try{const i=await h2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,P2(e,i)}catch(i){await ih(e,i)}PT(e)&&DT(e)}function N2(n){return No(n)&&n.Ta.length<10}function P2(n,e){n.Ta.push(e);const t=ki(n);t.O_()&&t.X_&&t.ea(e.mutations)}function PT(n){return No(n)&&!ki(n).x_()&&n.Ta.length>0}function DT(n){ki(n).start()}async function D2(n){ki(n).ra()}async function O2(n){const e=ki(n);for(const t of n.Ta)e.ea(t.mutations)}async function M2(n,e,t){const r=n.Ta.shift(),i=vg.from(r,e,t);await NT(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Vh(n)}async function L2(n,e){e&&ki(n).X_&&await(async function(r,i){if((function(c){return yP(c)&&c!==ee.ABORTED})(i.code)){const a=r.Ta.shift();ki(r).B_(),await NT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Vh(r)}})(n,e),PT(n)&&DT(n)}async function v0(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),fe(So,"RemoteStore received new credentials");const r=No(t);t.Ea.add(3),await Bc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jh(t)}async function j2(n,e){const t=Ue(n);e?(t.Ea.delete(2),await jh(t)):e||(t.Ea.add(2),await Bc(t),t.Ra.set("Unknown"))}function nl(n){return n.ma||(n.ma=(function(t,r,i){const a=Ue(t);return a.sa(),new x2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:C2.bind(null,n),t_:A2.bind(null,n),r_:R2.bind(null,n),H_:k2.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ag(n)?Cg(n):n.Ra.set("Unknown")):(await n.ma.stop(),kT(n))}))),n.ma}function ki(n){return n.fa||(n.fa=(function(t,r,i){const a=Ue(t);return a.sa(),new E2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:D2.bind(null,n),r_:L2.bind(null,n),ta:O2.bind(null,n),na:M2.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Vh(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(So,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new Rg(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(n,e){if(Is("AsyncQueue",`${e}: ${n}`),el(n))return new ue(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static emptySet(e){return new ja(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=oc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ja)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.ga=new yt(be.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class qa{constructor(e,t,r,i,a,c,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new qa(e,t,ja.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class F2{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ue(t),a=i.queries;i.queries=w0(),a.forEach(((c,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function w0(){return new ko((n=>ZE(n)),Nh)}async function Ng(n,e){const t=Ue(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new V2,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const h=kg(c,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Dg(t)}async function Pg(n,e){const t=Ue(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function U2(n,e){const t=Ue(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const h of c.Sa)h.Fa(i)&&(r=!0);c.wa=i}}r&&Dg(t)}function z2(n,e,t){const r=Ue(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Dg(n){n.Ca.forEach((e=>{e.next()}))}var Om,x0;(x0=Om||(Om={})).Ma="default",x0.Cache="cache";class Og{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class MT{constructor(e){this.key=e}}class B2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=eT(e),this.tu=new ja(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new _0,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,w)=>{const x=i.get(y),I=Ph(this.query,w)?w:null,k=!!x&&this.mutatedKeys.has(x.key),C=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let A=!1;x&&I?x.data.isEqual(I.data)?k!==C&&(r.track({type:3,doc:I}),A=!0):this.su(x,I)||(r.track({type:2,doc:I}),A=!0,(f&&this.eu(I,f)>0||m&&this.eu(I,m)<0)&&(h=!0)):!x&&I?(r.track({type:0,doc:I}),A=!0):x&&!I&&(r.track({type:1,doc:x}),A=!0,(f||m)&&(h=!0)),A&&(I?(c=c.add(I),a=C?a.add(y):a.delete(y)):(c=c.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,w)=>(function(I,k){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:A})}};return C(I)-C(k)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,c.length!==0||m?{snapshot:new qa(this.query,e.tu,a,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new MT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new OT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mg="SyncEngine";class $2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class W2{constructor(e){this.key=e,this.hu=!1}}class H2{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ko((h=>ZE(h)),Nh),this.Iu=new Map,this.Eu=new Set,this.du=new yt(be.comparator),this.Au=new Map,this.Ru=new xg,this.Vu={},this.mu=new Map,this.fu=Ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function q2(n,e,t=!0){const r=zT(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await LT(r,e,t,!0),i}async function G2(n,e){const t=zT(n);await LT(t,e,!0,!1)}async function LT(n,e,t,r){const i=await f2(n.localStore,$r(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await K2(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&AT(n.remoteStore,i),h}async function K2(n,e,t,r,i){n.pu=(w,x,I)=>(async function(C,A,j,z){let $=A.view.ru(j);$.Cs&&($=await f0(C.localStore,A.query,!1).then((({documents:P})=>A.view.ru(P,$))));const K=z&&z.targetChanges.get(A.targetId),X=z&&z.targetMismatches.get(A.targetId)!=null,ne=A.view.applyChanges($,C.isPrimaryClient,K,X);return T0(C,A.targetId,ne.au),ne.snapshot})(n,w,x,I);const a=await f0(n.localStore,e,!0),c=new B2(e,a.Qs),h=c.ru(a.documents),f=zc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(h,n.isPrimaryClient,f);T0(n,t,m.au);const y=new $2(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function Q2(n,e,t){const r=Ue(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Nh(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ig(r.remoteStore,i.targetId),Mm(r,i.targetId)})).catch(Za)):(Mm(r,i.targetId),await Pm(r.localStore,i.targetId,!0))}async function Y2(n,e){const t=Ue(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ig(t.remoteStore,r.targetId))}async function X2(n,e,t){const r=sD(n);try{const i=await(function(c,h){const f=Ue(c),m=ut.now(),y=h.reduce(((I,k)=>I.add(k.key)),Ge());let w,x;return f.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=bs(),C=Ge();return f.Ns.getEntries(I,y).next((A=>{k=A,k.forEach(((j,z)=>{z.isValidDocument()||(C=C.add(j))}))})).next((()=>f.localDocuments.getOverlayedDocuments(I,k))).next((A=>{w=A;const j=[];for(const z of h){const $=hP(z,w.get(z.key).overlayedDocument);$!=null&&j.push(new Ui(z.key,$,HE($.value.mapValue),dr.exists(!0)))}return f.mutationQueue.addMutationBatch(I,m,j,h)})).next((A=>{x=A;const j=A.applyToLocalDocumentSet(w,C);return f.documentOverlayCache.saveOverlays(I,A.batchId,j)}))})).then((()=>({batchId:x.batchId,changes:nT(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,h,f){let m=c.Vu[c.currentUser.toKey()];m||(m=new yt(qe)),m=m.insert(h,f),c.Vu[c.currentUser.toKey()]=m})(r,i.batchId,t),await $c(r,i.changes),await Vh(r.remoteStore)}catch(i){const a=kg(i,"Failed to persist write");t.reject(a)}}async function jT(n,e){const t=Ue(n);try{const r=await u2(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?tt(c.hu,14607):i.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await $c(t,r,e)}catch(r){await Za(r)}}function E0(n,e,t){const r=Ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(c,h){const f=Ue(c);f.onlineState=h;let m=!1;f.queries.forEach(((y,w)=>{for(const x of w.Sa)x.va(h)&&(m=!0)})),m&&Dg(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J2(n,e,t){const r=Ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new yt(be.comparator);c=c.insert(a,rn.newNoDocument(a,je.min()));const h=Ge().add(a),f=new Mh(je.min(),new Map,new yt(qe),c,h);await jT(r,f),r.du=r.du.remove(a),r.Au.delete(e),Lg(r)}else await Pm(r.localStore,e,!1).then((()=>Mm(r,e,t))).catch(Za)}async function Z2(n,e){const t=Ue(n),r=e.batch.batchId;try{const i=await c2(t.localStore,e);FT(t,r,null),VT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await $c(t,i)}catch(i){await Za(i)}}async function eD(n,e,t){const r=Ue(n);try{const i=await(function(c,h){const f=Ue(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let y;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(tt(w!==null,37113),y=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y))).next((()=>f.localDocuments.getDocuments(m,y)))}))})(r.localStore,e);FT(r,e,t),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await $c(r,i)}catch(i){await Za(i)}}function VT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function FT(n,e,t){const r=Ue(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Mm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||UT(n,r)}))}function UT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ig(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lg(n))}function T0(n,e,t){for(const r of t)r instanceof OT?(n.Ru.addReference(r.key,e),tD(n,r)):r instanceof MT?(fe(Mg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||UT(n,r.key)):De(19791,{wu:r})}function tD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(fe(Mg,"New document in limbo: "+t),n.Eu.add(r),Lg(n))}function Lg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(ot.fromString(e)),r=n.fu.next();n.Au.set(r,new W2(t)),n.du=n.du.insert(t,r),AT(n.remoteStore,new vi($r(kh(t.path)),r,"TargetPurposeLimboResolution",Ch.ce))}}async function $c(n,e,t){const r=Ue(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{c.push(r.pu(f,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const y=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(m){i.push(m);const y=Tg.As(f.targetId,m);a.push(y)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(f,m){const y=Ue(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>te.forEach(m,(x=>te.forEach(x.Es,(I=>y.persistence.referenceDelegate.addReference(w,x.targetId,I))).next((()=>te.forEach(x.ds,(I=>y.persistence.referenceDelegate.removeReference(w,x.targetId,I)))))))))}catch(w){if(!el(w))throw w;fe(Sg,"Failed to update sequence numbers: "+w)}for(const w of m){const x=w.targetId;if(!w.fromCache){const I=y.Ms.get(x),k=I.snapshotVersion,C=I.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(x,C)}}})(r.localStore,a))}async function nD(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){fe(Mg,"User change. New user:",e.toKey());const r=await ST(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new ue(ee.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $c(t,r.Ls)}}function rD(n,e){const t=Ue(n),r=t.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let i=Ge();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const h=t.Tu.get(c);i=i.unionWith(h.view.nu)}return i}}function zT(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J2.bind(null,e),e.Pu.H_=U2.bind(null,e.eventManager),e.Pu.yu=z2.bind(null,e.eventManager),e}function sD(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return l2(this.persistence,new i2,e.initialUser,this.serializer)}Cu(e){return new TT(Eg.mi,this.serializer)}Du(e){return new m2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class iD extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new TT((r=>sh.mi(r,t)),this.serializer)}}class Lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>E0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new F2})()}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),r=(function(a){return new w2(a)})(e.databaseInfo);return(function(a,c,h,f){return new S2(a,c,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,h){return new b2(r,i,a,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>E0(this.syncEngine,t,0)),(function(){return g0.v()?new g0:new g2})())}createSyncEngine(e,t){return(function(i,a,c,h,f,m,y){const w=new H2(i,a,c,h,f,m);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ue(t);fe(So,"RemoteStore shutting down."),r.Ea.add(5),await Bc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class oD{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{fe(Ni,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(fe(Ni,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=kg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qp(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ni,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await ST(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function S0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aD(n);fe(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>v0(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>v0(e.remoteStore,i))),n._onlineComponents=e}async function aD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ni,"Using user provided OfflineComponentProvider");try{await Qp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),await Qp(n,new oh)}}else fe(Ni,"Using default OfflineComponentProvider"),await Qp(n,new iD(void 0));return n._offlineComponents}async function BT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ni,"Using user provided OnlineComponentProvider"),await S0(n,n._uninitializedComponentsProvider._online)):(fe(Ni,"Using default OnlineComponentProvider"),await S0(n,new Lm))),n._onlineComponents}function lD(n){return BT(n).then((e=>e.syncEngine))}async function ah(n){const e=await BT(n),t=e.eventManager;return t.onListen=q2.bind(null,e.syncEngine),t.onUnlisten=Q2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y2.bind(null,e.syncEngine),t}function cD(n,e,t={}){const r=new xs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,f,m){const y=new jg({next:x=>{y.Nu(),c.enqueueAndForget((()=>Pg(a,w)));const I=x.docs.has(h);!I&&x.fromCache?m.reject(new ue(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&x.fromCache&&f&&f.source==="server"?m.reject(new ue(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new Og(kh(h.path),y,{includeMetadataChanges:!0,qa:!0});return Ng(a,w)})(await ah(n),n.asyncQueue,e,t,r))),r.promise}function uD(n,e,t={}){const r=new xs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,f,m){const y=new jg({next:x=>{y.Nu(),c.enqueueAndForget((()=>Pg(a,w))),x.fromCache&&f.source==="server"?m.reject(new ue(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),w=new Og(h,y,{includeMetadataChanges:!0,qa:!0});return Ng(a,w)})(await ah(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firestore.googleapis.com",b0=!0;class C0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=b0}else this.host=e.host,this.ssl=e.ssl??b0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ET;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BP)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new mN;switch(r.type){case"firstParty":return new _N(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=I0.get(t);r&&(fe("ComponentProvider","Removing Datastore"),I0.delete(t),r.terminate())})(this),Promise.resolve()}}function dD(n,e,t,r={}){n=Mn(n,Fh);const i=Mi(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(Xm(`https://${h}`),Jm("Firestore",!0)),a.host!==WT&&a.host!==h&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:i,emulatorOptions:r};if(!wo(f,c)&&(n._setSettings(f),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=nn.MOCK_USER;else{m=Fx(r.mockUserToken,n._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new nn(w)}n._authCredentials=new gN(new DE(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fc(t,wt._jsonSchema))return new wt(e,r||null,new be(ot.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Nt("string",wt._jsonSchemaVersion),referencePath:Nt("string")};class Ei extends Rs{constructor(e,t,r){super(e,t,kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new be(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function ks(n,e,...t){if(n=gt(n),OE("collection","path",e),n instanceof Fh){const r=ot.fromString(e,...t);return Uw(r),new Ei(n,null,r)}{if(!(n instanceof wt||n instanceof Ei))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ot.fromString(e,...t));return Uw(r),new Ei(n.firestore,null,r)}}function Ns(n,e,...t){if(n=gt(n),arguments.length===1&&(e=dg.newId()),OE("doc","path",e),n instanceof Fh){const r=ot.fromString(e,...t);return Fw(r),new wt(n,null,new be(r))}{if(!(n instanceof wt||n instanceof Ei))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ot.fromString(e,...t));return Fw(r),new wt(n.firestore,n instanceof Ei?n.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const r=Kp();r&&fe(A0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Kp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Kp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;fe(A0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",k0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Rg.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&De(47125,{Pc:k0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function k0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Pi extends Fh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new R0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function hD(n,e){const t=typeof n=="object"?n:tg(),r=typeof n=="string"?n:Jd,i=Eh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Lx("firestore");a&&dD(i,...a)}return i}function Uh(n){if(n._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fD(n),n._firestoreClient}function fD(n){const e=n._freezeSettings(),t=(function(i,a,c,h){return new LN(i,a,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$T(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new oD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Qt.fromBase64String(e))}catch(t){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fc(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Nt("string",Qn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Fc(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:Nt("string",Hr._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fc(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qr(e.vectorValues);throw new ue(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Nt("string",qr._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class HT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:n})}}class Vg{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qT(this.Ac)&&pD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lh(e)}Cc(e,t,r,i=!1){return new Vg({Ac:e,methodName:t,Dc:r,path:Gt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(n){const e=n._freezeSettings(),t=Lh(n._databaseId);return new gD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GT(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Ug("Data must be an object, but it was:",c,r);const h=KT(r,c);let f,m;if(a.merge)f=new Dn(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const x=jm(e,w,t);if(!c.contains(x))throw new ue(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);YT(y,x)||y.push(x)}f=new Dn(y),m=c.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=c.fieldTransforms;return new mD(new En(h),f,m)}class Wh extends Bh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wh}}class Fg extends Bh{_toFieldTransform(e){return new lP(e.path,new Ic)}isEqual(e){return e instanceof Fg}}function yD(n,e,t,r){const i=n.Cc(1,e,t);Ug("Data must be an object, but it was:",i,r);const a=[],c=En.empty();Fi(r,((f,m)=>{const y=zg(e,f,t);m=gt(m);const w=i.yc(y);if(m instanceof Wh)a.push(y);else{const x=Wc(m,w);x!=null&&(a.push(y),c.set(y,x))}}));const h=new Dn(a);return new HT(c,h,i.fieldTransforms)}function vD(n,e,t,r,i,a){const c=n.Cc(1,e,t),h=[jm(e,r,t)],f=[i];if(a.length%2!=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(jm(e,a[x])),f.push(a[x+1]);const m=[],y=En.empty();for(let x=h.length-1;x>=0;--x)if(!YT(m,h[x])){const I=h[x];let k=f[x];k=gt(k);const C=c.yc(I);if(k instanceof Wh)m.push(I);else{const A=Wc(k,C);A!=null&&(m.push(I),y.set(I,A))}}const w=new Dn(m);return new HT(y,w,c.fieldTransforms)}function _D(n,e,t,r=!1){return Wc(t,n.Cc(r?4:3,e))}function Wc(n,e){if(QT(n=gt(n)))return Ug("Unsupported field value:",e,n),KT(n,e);if(n instanceof Bh)return(function(r,i){if(!qT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const h of r){let f=Wc(h,i.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ut.fromDate(r);return{timestampValue:rh(i.serializer,a)}}if(r instanceof ut){const a=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rh(i.serializer,a)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:mT(i.serializer,r._byteString)};if(r instanceof wt){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qr)return(function(c,h){return{mapValue:{fields:{[$E]:{stringValue:WE},[Zd]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return yg(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${bh(r)}`)})(n,e)}function KT(n,e){const t={};return jE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(n,((r,i)=>{const a=Wc(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function QT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Hr||n instanceof Qn||n instanceof wt||n instanceof Bh||n instanceof qr)}function Ug(n,e,t){if(!QT(t)||!ME(t)){const r=bh(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function jm(n,e,t){if((e=gt(e))instanceof zh)return e._internalPath;if(typeof e=="string")return zg(n,e);throw lh("Field path arguments must be of type string or ",n,!1,void 0,t)}const wD=new RegExp("[~\\*/\\[\\]]");function zg(n,e,t){if(e.search(wD)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zh(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lh(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new ue(ee.INVALID_ARGUMENT,h+n+f)}function YT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xD extends XT{data(){return super.data()}}function Hh(n,e){return typeof e=="string"?zg(n,e):e instanceof zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class $g extends Bg{}function Hc(n,e,...t){let r=[];e instanceof Bg&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((f=>f instanceof Hg)).length,h=a.filter((f=>f instanceof qh)).length;if(c>1||c>0&&h>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class qh extends $g{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qh(e,t,r)}_apply(e){const t=this._parse(e);return ZT(e._query,t),new Rs(e.firestore,e.converter,Cm(e._query,t))}_parse(e){const t=$h(e.firestore);return(function(a,c,h,f,m,y,w){let x;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){D0(w,y);const k=[];for(const C of w)k.push(P0(f,a,C));x={arrayValue:{values:k}}}else x=P0(f,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||D0(w,y),x=_D(h,c,w,y==="in"||y==="not-in");return kt.create(m,y,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wg(n,e,t){const r=e,i=Hh("where",n);return qh._create(i,r,t)}class Hg extends Bg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let c=i;const h=a.getFlattenedFilters();for(const f of h)ZT(c,f),c=Cm(c,f)})(e._query,t),new Rs(e.firestore,e.converter,Cm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends $g{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qg(e,t)}_apply(e){const t=(function(i,a,c){if(i.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(a,c)})(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,(function(i,a){const c=i.explicitOrderBy.concat([a]);return new tl(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Gh(n,e="asc"){const t=e,r=Hh("orderBy",n);return qg._create(r,t)}class Gg extends $g{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Gg(e,t,r)}_apply(e){return new Rs(e.firestore,e.converter,th(e._query,this._limit,this._limitType))}}function ED(n){return Gg._create("limit",n,"F")}function P0(n,e,t){if(typeof(t=gt(t))=="string"){if(t==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&t.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ot.fromString(t));if(!be.isDocumentKey(r))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kw(n,new be(r))}if(t instanceof wt)return Kw(n,t._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(t)}.`)}function D0(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZT(n,e){const t=(function(i,a){for(const c of i)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TD{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fi(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Zd].arrayValue?.values?.map((r=>It(r.doubleValue)));return new qr(t)}convertGeoPoint(e){return new Hr(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ot.fromString(e);tt(xT(r),9688,{name:e});const i=new Ec(r.get(1),r.get(3)),a=new be(r.popFirst(5));return i.isEqual(t)||Is(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends XT{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:Nt("string",yo._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Vd extends yo{data(e={}){return super.data(e)}}class vo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vd(this._firestore,this._userDataWriter,r.key,r,new lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((h=>{const f=new Vd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new lc(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Vd(i._firestore,i._userDataWriter,h.doc.key,h.doc,new lc(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:SD(h.type),doc:f,oldIndex:m,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){n=Mn(n,wt);const e=Mn(n.firestore,Pi);return cD(Uh(e),n._key).then((t=>nS(e,n,t)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:Nt("string",vo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Kg extends TD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function tS(n){n=Mn(n,Rs);const e=Mn(n.firestore,Pi),t=Uh(e),r=new Kg(e);return JT(n._query),uD(t,n._query).then((i=>new vo(e,r,n,i)))}function Qg(n,e,t){n=Mn(n,wt);const r=Mn(n.firestore,Pi),i=eS(n.converter,e);return Jg(r,[GT($h(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,dr.none())])}function Kh(n,e,t,...r){n=Mn(n,wt);const i=Mn(n.firestore,Pi),a=$h(i);let c;return c=typeof(e=gt(e))=="string"||e instanceof zh?vD(a,"updateDoc",n._key,e,t,r):yD(a,"updateDoc",n._key,e),Jg(i,[c.toMutation(n._key,dr.exists(!0))])}function Yg(n,e){const t=Mn(n.firestore,Pi),r=Ns(n),i=eS(n.converter,e);return Jg(t,[GT($h(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dr.exists(!1))]).then((()=>r))}function Xg(n,...e){n=gt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||N0(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(N0(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,c,h;if(n instanceof wt)c=Mn(n.firestore,Pi),h=kh(n._key.path),a={next:f=>{e[r]&&e[r](nS(c,n,f))},error:e[r+1],complete:e[r+2]};else{const f=Mn(n,Rs);c=Mn(f.firestore,Pi),h=f._query;const m=new Kg(c);a={next:y=>{e[r]&&e[r](new vo(c,m,f,y))},error:e[r+1],complete:e[r+2]},JT(n._query)}return(function(m,y,w,x){const I=new jg(x),k=new Og(y,I,w);return m.asyncQueue.enqueueAndForget((async()=>Ng(await ah(m),k))),()=>{I.Nu(),m.asyncQueue.enqueueAndForget((async()=>Pg(await ah(m),k)))}})(Uh(c),h,i,a)}function Jg(n,e){return(function(r,i){const a=new xs;return r.asyncQueue.enqueueAndForget((async()=>X2(await lD(r),i,a))),a.promise})(Uh(n),e)}function nS(n,e,t){const r=t.docs.get(e._key),i=new Kg(n);return new yo(n,i,e._key,r,new lc(t.hasPendingWrites,t.fromCache),e.converter)}function Ti(){return new Fg("serverTimestamp")}(function(e,t=!0){(function(i){Ja=i})(Ro),xo(new Ii("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new Pi(new yN(r.getProvider("auth-internal")),new wN(c,r.getProvider("app-check-internal")),(function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(m.options.projectId,y)})(c,i),c);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Fr(Mw,Lw,e),Fr(Mw,Lw,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebasestorage.googleapis.com",sS="storageBucket",ID=120*1e3,bD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends Yr{constructor(e,t,r=0){super(Yp(e),`Firebase Storage: ${t} (${Yp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function Yp(n){return"storage/"+n}function Zg(){const n="An unknown error occurred, please check the error payload for server response.";return new Et(xt.UNKNOWN,n)}function CD(n){return new Et(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function AD(n){return new Et(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function RD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(xt.UNAUTHENTICATED,n)}function kD(){return new Et(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ND(n){return new Et(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function PD(){return new Et(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DD(){return new Et(xt.CANCELED,"User canceled the upload/download.")}function OD(n){return new Et(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function MD(n){return new Et(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function LD(){return new Et(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sS+"' property when initializing the app?")}function jD(){return new Et(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VD(){return new Et(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function FD(n){return new Et(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vm(n){return new Et(xt.INVALID_ARGUMENT,n)}function iS(){return new Et(xt.APP_DELETED,"The Firebase app was deleted.")}function UD(n){return new Et(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gc(n,e){return new Et(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function tc(n){throw new Et(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=On.makeFromUrl(e,t)}catch{return new On(e,"")}if(r.path==="")return r;throw MD(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function m(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",I=new RegExp(`^https?://${w}/${y}/b/${i}/o${x}`,"i"),k={bucket:1,path:3},C=t===rS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",j=new RegExp(`^https?://${C}/${i}/${A}`,"i"),$=[{regex:h,indices:f,postModify:a},{regex:I,indices:k,postModify:m},{regex:j,indices:{bucket:1,path:2},postModify:m}];for(let K=0;K<$.length;K++){const X=$[K],ne=X.regex.exec(e);if(ne){const P=ne[X.indices.bucket];let b=ne[X.indices.path];b||(b=""),r=new On(P,b),X.postModify(r);break}}if(r==null)throw OD(e);return r}}class zD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function f(){return h===2}let m=!1;function y(...A){m||(m=!0,e.apply(null,A))}function w(A){i=setTimeout(()=>{i=null,n(I,f())},A)}function x(){a&&clearTimeout(a)}function I(A,...j){if(m){x();return}if(A){x(),y.call(null,A,...j);return}if(f()||c){x(),y.call(null,A,...j);return}r<64&&(r*=2);let $;h===1?(h=2,$=0):$=(r+Math.random())*1e3,w($)}let k=!1;function C(A){k||(k=!0,x(),!m&&(i!==null?(A||(h=2),clearTimeout(i),w(0)):A||(h=1)))}return w(0),a=setTimeout(()=>{c=!0,C(!0)},t),C}function $D(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n){return n!==void 0}function HD(n){return typeof n=="object"&&!Array.isArray(n)}function ey(n){return typeof n=="string"||n instanceof String}function O0(n){return ty()&&n instanceof Blob}function ty(){return typeof Blob<"u"}function M0(n,e,t,r){if(r<e)throw Vm(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vm(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function oS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var _o;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(_o||(_o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t,r,i,a,c,h,f,m,y,w,x=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=w,this.retry=x,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,C)=>{this.resolve_=k,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new _d(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{const f=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===_o.NO_ERROR,f=a.getStatus();if(!h||qD(f,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===_o.ABORT;r(!1,new _d(!1,null,y));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new _d(m,a))})},t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());WD(f)?a(f):a()}catch(f){c(f)}else if(h!==null){const f=Zg();f.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,f)):c(f)}else if(i.canceled){const f=this.appDelete_?iS():DD();c(f)}else{const f=PD();c(f)}};this.canceled_?t(!1,new _d(!1,null,!0)):this.backoffId_=BD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$D(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _d{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function KD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function QD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function XD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function JD(n,e,t,r,i,a,c=!0,h=!1){const f=oS(n.urlParams),m=n.url+f,y=Object.assign({},n.headers);return YD(y,e),KD(y,t),QD(y,a),XD(y,r),new GD(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eO(...n){const e=ZD();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ty())return new Blob(n);throw new Et(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(n){if(typeof atob>"u")throw FD("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xp{constructor(e,t){this.data=e,this.contentType=t||null}}function rO(n,e){switch(n){case jr.RAW:return new Xp(aS(e));case jr.BASE64:case jr.BASE64URL:return new Xp(lS(n,e));case jr.DATA_URL:return new Xp(iO(e),oO(e))}throw Zg()}function aS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=n.charCodeAt(++t);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sO(n){let e;try{e=decodeURIComponent(n)}catch{throw gc(jr.DATA_URL,"Malformed data URL.")}return aS(e)}function lS(n,e){switch(n){case jr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw gc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw gc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nO(e)}catch(i){throw i.message.includes("polyfill")?i:gc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class cS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw gc(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=aO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iO(n){const e=new cS(n);return e.base64?lS(jr.BASE64,e.rest):sO(e.rest)}function oO(n){return new cS(n).contentType}function aO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t){let r=0,i="";O0(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(O0(this.data_)){const r=this.data_,i=tO(r,e,t);return i===null?null:new yi(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new yi(r,!0)}}static getBlob(...e){if(ty()){const t=e.map(r=>r instanceof yi?r.data_:r);return new yi(eO.apply(null,t))}else{const t=e.map(c=>ey(c)?rO(jr.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new yi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(n){let e;try{e=JSON.parse(n)}catch{return null}return HD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function dS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n,e){return e}class un{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||uO}}let wd=null;function dO(n){return!ey(n)||n.length<2?n:dS(n)}function hS(){if(wd)return wd;const n=[];n.push(new un("bucket")),n.push(new un("generation")),n.push(new un("metageneration")),n.push(new un("name","fullPath",!0));function e(a,c){return dO(c)}const t=new un("name");t.xform=e,n.push(t);function r(a,c){return c!==void 0?Number(c):c}const i=new un("size");return i.xform=r,n.push(i),n.push(new un("timeCreated")),n.push(new un("updated")),n.push(new un("md5Hash",null,!0)),n.push(new un("cacheControl",null,!0)),n.push(new un("contentDisposition",null,!0)),n.push(new un("contentEncoding",null,!0)),n.push(new un("contentLanguage",null,!0)),n.push(new un("contentType",null,!0)),n.push(new un("metadata","customMetadata",!0)),wd=n,wd}function hO(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new On(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function fO(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return hO(r,n),r}function fS(n,e,t){const r=uS(e);return r===null?null:fO(n,r,t)}function pO(n,e,t,r){const i=uS(e);if(i===null||!ey(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(m=>{const y=n.bucket,w=n.fullPath,x="/b/"+c(y)+"/o/"+c(w),I=ny(x,t,r),k=oS({alt:"media",token:m});return I+k})[0]}function mO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class pS{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n){if(!n)throw Zg()}function gO(n,e){function t(r,i){const a=fS(n,i,e);return mS(a!==null),a}return t}function yO(n,e){function t(r,i){const a=fS(n,i,e);return mS(a!==null),pO(a,i,n.host,n._protocol)}return t}function gS(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=kD():i=RD():t.getStatus()===402?i=AD(n.bucket):t.getStatus()===403?i=ND(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function vO(n){const e=gS(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=CD(n.path)),a.serverResponse=i.serverResponse,a}return t}function _O(n,e,t){const r=e.fullServerUrl(),i=ny(r,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,h=new pS(i,a,yO(n,t),c);return h.errorHandler=vO(e),h}function wO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function xO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=wO(null,e)),r}function EO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let $="";for(let K=0;K<2;K++)$=$+Math.random().toString().slice(2);return $}const f=h();c["Content-Type"]="multipart/related; boundary="+f;const m=xO(e,r,i),y=mO(m,t),w="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,x=`\r
--`+f+"--",I=yi.getBlob(w,r,x);if(I===null)throw jD();const k={name:m.fullPath},C=ny(a,n.host,n._protocol),A="POST",j=n.maxUploadRetryTime,z=new pS(C,A,gO(n,t),j);return z.urlParams=k,z.headers=c,z.body=I.uploadData(),z.errorHandler=gS(e),z}class TO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,a){if(this.sent_)throw tc("cannot .send() more than once");if(Mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class SO extends TO{initXhr(){this.xhr_.responseType="text"}}function yS(){return new SO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this._service=e,t instanceof On?this._location=t:this._location=On.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Io(e,t)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dS(this._location.path)}get storage(){return this._service}get parent(){const e=lO(this._location.path);if(e===null)return null;const t=new On(this._location.bucket,e);return new Io(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw UD(e)}}function IO(n,e,t){n._throwIfRoot("uploadBytes");const r=EO(n.storage,n._location,hS(),new yi(e,!0),t);return n.storage.makeRequestWithTokens(r,yS).then(i=>({metadata:i,ref:n}))}function bO(n){n._throwIfRoot("getDownloadURL");const e=_O(n.storage,n._location,hS());return n.storage.makeRequestWithTokens(e,yS).then(t=>{if(t===null)throw VD();return t})}function CO(n,e){const t=cO(n._location.path,e),r=new On(n._location.bucket,t);return new Io(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(n){return/^[A-Za-z]+:\/\//.test(n)}function RO(n,e){return new Io(n,e)}function vS(n,e){if(n instanceof ry){const t=n;if(t._bucket==null)throw LD();const r=new Io(t,t._bucket);return e!=null?vS(r,e):r}else return e!==void 0?CO(n,e):n}function kO(n,e){if(e&&AO(e)){if(n instanceof ry)return RO(n,e);throw Vm("To use ref(service, url), the first argument must be a Storage instance.")}else return vS(n,e)}function L0(n,e){const t=e?.[sS];return t==null?null:On.makeFromBucketSpec(t,n)}function NO(n,e,t,r={}){n.host=`${e}:${t}`;const i=Mi(e);i&&(Xm(`https://${n.host}/b`),Jm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:Fx(a,n.app.options.projectId))}class ry{constructor(e,t,r,i,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=rS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ID,this._maxUploadRetryTime=bD,this._requests=new Set,i!=null?this._bucket=On.makeFromBucketSpec(i,this._host):this._bucket=L0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=L0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){M0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){M0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Io(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new zD(iS());{const c=JD(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const j0="@firebase/storage",V0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="storage";function PO(n,e,t){return n=gt(n),IO(n,e,t)}function DO(n){return n=gt(n),bO(n)}function OO(n,e){return n=gt(n),kO(n,e)}function MO(n=tg(),e){n=gt(n);const r=Eh(n,_S).getImmediate({identifier:e}),i=Lx("storage");return i&&LO(r,...i),r}function LO(n,e,t,r={}){NO(n,e,t,r)}function jO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ry(t,r,i,e,Ro)}function VO(){xo(new Ii(_S,jO,"PUBLIC").setMultipleInstances(!0)),Fr(j0,V0,""),Fr(j0,V0,"esm2020")}VO();const FO={apiKey:"AIzaSyD3LkYqJE5Y_TR6A6UnajL304eyL4zO2lM",authDomain:"darklight-chat.firebaseapp.com",projectId:"darklight-chat",storageBucket:"darklight-chat.firebasestorage.app",messagingSenderId:"425772939802",appId:"1:425772939802:web:5ba327426570f1b0d82fa3"},sy=Bx(FO),Gc=fN(sy),on=hD(sy),UO=MO(sy),wS=async(n,e)=>{if(!n)return;const t=Ns(on,"users",n.uid);try{if(!(await qc(t)).exists()){const{displayName:i,username:a}=e,c=new Date;await Qg(t,{displayName:i,username:a.toLowerCase(),email:n.email,createdAt:c,avatar:"https://firebasestorage.googleapis.com/v0/b/darklight-chat.appspot.com/o/profile-pictures%2Fdefault_avatar.png?alt=media&token=0default-avatar-token",bio:`مرحباً! أنا ${i} في Dark*Chat`,postsCount:0,followersCount:0,followingCount:0,isGuest:e.isGuest||!1,...e})}return t}catch(r){throw console.error("Error in createUserDocument:",r),r}},zO=async(n,e,t)=>{const r=`${n.toLowerCase()}@darkchat.app`,{user:i}=await XR(Gc,r,t);return await wS(i,{username:n,displayName:e}),i},BO=async(n,e)=>{const t=`${n.toLowerCase()}@darkchat.app`,{user:r}=await JR(Gc,t,e);return r},$O=async()=>{const{user:n}=await GR(Gc),t=`Anonymous${Math.floor(Math.random()*9e5)+1e5}`;return await wS(n,{username:t.toLowerCase(),displayName:t,isGuest:!0}),n},F0=()=>nk(Gc),WO=n=>tk(Gc,n),Fd=async n=>{if(!n)return null;const e=Ns(on,"users",n),t=await qc(e);return t.exists()?{uid:n,...t.data()}:null},HO=async n=>{try{const e=await qc(Ns(on,"users",n));return e.exists()?{id:e.id,...e.data()}:null}catch{throw new Error("فشل في تحميل الملف الشخصي")}},qO=async(n,e)=>{try{const t=Ns(on,"users",n);await Kh(t,e)}catch(t){throw console.error("Error updating user profile: ",t),new Error("فشل في تحديث الملف الشخصي")}},GO=async n=>{try{return(await Yg(ks(on,"posts"),{...n,timestamp:Ti(),createdAt:new Date().toISOString()})).id}catch{throw new Error("فشل في إنشاء المنشور")}},U0=async(n,e)=>{try{await Kh(Ns(on,"posts",n),e)}catch{throw new Error("فشل في تحديث المنشور")}},KO=async(n,e)=>{try{const t=Ns(ks(on,"stories"),n),r=await qc(t),i={...e,id:Date.now().toString(),timestamp:Ti(),viewedBy:[]};if(r.exists()){const a=r.data().stories||[];await Kh(t,{stories:[...a,i],updatedAt:Ti()})}else await Qg(t,{userId:n,stories:[i],updatedAt:Ti()});return i.id}catch(t){throw console.error("Error creating story: ",t),new Error("فشل في إنشاء الستوري")}},Fm=async()=>{try{const n=new Date(Date.now()-864e5),e=Hc(ks(on,"stories"),Wg("updatedAt",">=",n),Gh("updatedAt","desc"));return(await tS(e)).docs.map(i=>{const a=i.data(),c=a.stories.filter(h=>h.timestamp.toDate()>n);return{userId:i.id,...a,stories:c}}).filter(i=>i.stories.length>0)}catch(n){throw console.error("Error getting stories: ",n),new Error("فشل في تحميل الستوريز")}},QO=async(n,e)=>{const t=[n,e].sort(),r=t.join("_"),i=Ns(on,"chats",r);return(await qc(i)).exists()||await Qg(i,{participants:t,createdAt:Ti(),lastMessage:null}),r},z0=async(n,e)=>{try{const t=ks(on,"chats",n,"messages"),r=await Yg(t,{...e,timestamp:Ti()});return await Kh(Ns(on,"chats",n),{lastMessage:{text:e.content,senderId:e.senderId,timestamp:Ti()}}),r.id}catch(t){throw console.error("Error sending message: ",t),new Error("فشل في إرسال الرسالة")}},YO=(n,e)=>{const t=Hc(ks(on,"chats"),Wg("participants","array-contains",n));return Xg(t,async r=>{const i=r.docs.map(async c=>{const h=c.data(),f=h.participants.find(m=>m!==n);if(f){const m=await HO(f);return{id:c.id,...h,otherUser:m}}return null}),a=(await Promise.all(i)).filter(c=>c!==null).sort((c,h)=>{const f=c.lastMessage?.timestamp?.toDate()||c.createdAt?.toDate()||0;return(h.lastMessage?.timestamp?.toDate()||h.createdAt?.toDate()||0)-f});e(a)})},XO=async n=>{try{return(await Yg(ks(on,"comments"),{...n,timestamp:Ti(),createdAt:new Date().toISOString()})).id}catch{throw new Error("فشل في إضافة التعليق")}},B0=async n=>{try{const e=Hc(ks(on,"comments"),Wg("postId","==",n),Gh("timestamp","asc"));return(await tS(e)).docs.map(r=>({id:r.id,...r.data()}))}catch{throw new Error("فشل في تحميل التعليقات")}},JO=(n,e)=>{const t=ks(on,"chats",n,"messages"),r=Hc(t,Gh("timestamp","asc"));return Xg(r,i=>{const a=i.docs.map(c=>{const h=c.data();return{id:c.id,...h,timestamp:h.timestamp?.toDate?h.timestamp.toDate().getTime():Date.now()}});e(a)})},ZO=n=>{const e=Hc(ks(on,"posts"),Gh("timestamp","desc"),ED(50));return Xg(e,t=>{const r=t.docs.map(i=>({id:i.id,...i.data()}));n(r)})},eM=async(n,e)=>{try{const t=OO(UO,`profile-pictures/${n}/${e.name}`),r=await PO(t,e);return await DO(r.ref)}catch(t){throw console.error("Error uploading avatar: ",t),new Error("فشل في رفع الصورة الرمزية")}};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),$0=n=>{const e=nM(n);return e.charAt(0).toUpperCase()+e.slice(1)},xS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=T.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...h},f)=>T.createElement("svg",{ref:f,...rM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:xS("lucide",i),...h},[...c.map(([m,y])=>T.createElement(m,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(n,e)=>{const t=T.forwardRef(({className:r,...i},a)=>T.createElement(sM,{ref:a,iconNode:e,className:xS(`lucide-${tM($0(n))}`,`lucide-${n}`,r),...i}));return t.displayName=$0(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],W0=Ze("arrow-left",iM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Um=Ze("arrow-right",oM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ES=Ze("camera",aM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cM=Ze("check",lM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dM=Ze("chevron-left",uM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fM=Ze("chevron-right",hM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],mM=Ze("clock",pM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],yM=Ze("ellipsis-vertical",gM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],iy=Ze("ellipsis",vM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wM=Ze("file-text",_M);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],EM=Ze("ghost",xM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ga=Ze("heart",TM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],TS=Ze("image",SM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],bM=Ze("log-in",IM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Ac=Ze("message-circle",CM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],RM=Ze("phone",AM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ch=Ze("plus",kM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]],PM=Ze("reply",NM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],uh=Ze("search",DM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],bo=Ze("send",OM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LM=Ze("settings",MM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],oy=Ze("share",jM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],H0=Ze("shield",VM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],SS=Ze("smile",FM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],IS=Ze("square-pen",UM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],q0=Ze("trending-up",zM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],$M=Ze("type",BM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ay=Ze("user-plus",WM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qM=Ze("user",HM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],bS=Ze("users",GM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],QM=Ze("video",KM);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Po=Ze("x",YM);function G0(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Qh(...n){return e=>{let t=!1;const r=n.map(i=>{const a=G0(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():G0(n[i],null)}}}}function dt(...n){return T.useCallback(Qh(...n),n)}function Ka(n){const e=XM(n),t=T.forwardRef((r,i)=>{const{children:a,...c}=r,h=T.Children.toArray(a),f=h.find(ZM);if(f){const m=f.props.children,y=h.map(w=>w===f?T.Children.count(m)>1?T.Children.only(null):T.isValidElement(m)?m.props.children:null:w);return p.jsx(e,{...c,ref:i,children:T.isValidElement(m)?T.cloneElement(m,void 0,y):null})}return p.jsx(e,{...c,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}var CS=Ka("Slot");function XM(n){const e=T.forwardRef((t,r)=>{const{children:i,...a}=t;if(T.isValidElement(i)){const c=t4(i),h=e4(a,i.props);return i.type!==T.Fragment&&(h.ref=r?Qh(r,c):c),T.cloneElement(i,h)}return T.Children.count(i)>1?T.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var JM=Symbol("radix.slottable");function ZM(n){return T.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===JM}function e4(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...h)=>{const f=a(...h);return i(...h),f}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function t4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function AS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=AS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function RS(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=AS(n))&&(r&&(r+=" "),r+=e);return r}const K0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Q0=RS,kS=(n,e)=>t=>{var r;if(e?.variants==null)return Q0(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,c=Object.keys(i).map(m=>{const y=t?.[m],w=a?.[m];if(y===null)return null;const x=K0(y)||K0(w);return i[m][x]}),h=t&&Object.entries(t).reduce((m,y)=>{let[w,x]=y;return x===void 0||(m[w]=x),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,y)=>{let{class:w,className:x,...I}=y;return Object.entries(I).every(k=>{let[C,A]=k;return Array.isArray(A)?A.includes({...a,...h}[C]):{...a,...h}[C]===A})?[...m,w,x]:m},[]);return Q0(n,c,f,t?.class,t?.className)},ly="-",n4=n=>{const e=s4(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(ly);return h[0]===""&&h.length!==1&&h.shift(),NS(h,e)||r4(c)},getConflictingClassGroupIds:(c,h)=>{const f=t[c]||[];return h&&r[c]?[...f,...r[c]]:f}}},NS=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?NS(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(ly);return e.validators.find(({validator:c})=>c(a))?.classGroupId},Y0=/^\[(.+)\]$/,r4=n=>{if(Y0.test(n)){const e=Y0.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},s4=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)zm(t[i],r,i,e);return r},zm=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:X0(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(i4(i)){zm(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,c])=>{zm(c,X0(e,a),t,r)})})},X0=(n,e)=>{let t=n;return e.split(ly).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},i4=n=>n.isThemeGetter,o4=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return i(a,c),c},set(a,c){t.has(a)?t.set(a,c):i(a,c)}}},Bm="!",$m=":",a4=$m.length,l4=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const a=[];let c=0,h=0,f=0,m;for(let k=0;k<i.length;k++){let C=i[k];if(c===0&&h===0){if(C===$m){a.push(i.slice(f,k)),f=k+a4;continue}if(C==="/"){m=k;continue}}C==="["?c++:C==="]"?c--:C==="("?h++:C===")"&&h--}const y=a.length===0?i:i.substring(f),w=c4(y),x=w!==y,I=m&&m>f?m-f:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:I}};if(e){const i=e+$m,a=r;r=c=>c.startsWith(i)?a(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=a=>t({className:a,parseClassName:i})}return r},c4=n=>n.endsWith(Bm)?n.substring(0,n.length-1):n.startsWith(Bm)?n.substring(1):n,u4=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let a=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...a.sort(),c),a=[]):a.push(c)}),i.push(...a.sort()),i}},d4=n=>({cache:o4(n.cacheSize),parseClassName:l4(n),sortModifiers:u4(n),...n4(n)}),h4=/\s+/,f4=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,c=[],h=n.trim().split(h4);let f="";for(let m=h.length-1;m>=0;m-=1){const y=h[m],{isExternal:w,modifiers:x,hasImportantModifier:I,baseClassName:k,maybePostfixModifierPosition:C}=t(y);if(w){f=y+(f.length>0?" "+f:f);continue}let A=!!C,j=r(A?k.substring(0,C):k);if(!j){if(!A){f=y+(f.length>0?" "+f:f);continue}if(j=r(k),!j){f=y+(f.length>0?" "+f:f);continue}A=!1}const z=a(x).join(":"),$=I?z+Bm:z,K=$+j;if(c.includes(K))continue;c.push(K);const X=i(j,A);for(let ne=0;ne<X.length;++ne){const P=X[ne];c.push($+P)}f=y+(f.length>0?" "+f:f)}return f};function p4(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=PS(e))&&(r&&(r+=" "),r+=t);return r}const PS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=PS(n[r]))&&(t&&(t+=" "),t+=e);return t};function m4(n,...e){let t,r,i,a=c;function c(f){const m=e.reduce((y,w)=>w(y),n());return t=d4(m),r=t.cache.get,i=t.cache.set,a=h,h(f)}function h(f){const m=r(f);if(m)return m;const y=f4(f,t);return i(f,y),y}return function(){return a(p4.apply(null,arguments))}}const Ot=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},DS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,OS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,g4=/^\d+\/\d+$/,y4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,v4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,w4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,x4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ia=n=>g4.test(n),ze=n=>!!n&&!Number.isNaN(Number(n)),ui=n=>!!n&&Number.isInteger(Number(n)),Jp=n=>n.endsWith("%")&&ze(n.slice(0,-1)),ys=n=>y4.test(n),E4=()=>!0,T4=n=>v4.test(n)&&!_4.test(n),MS=()=>!1,S4=n=>w4.test(n),I4=n=>x4.test(n),b4=n=>!ve(n)&&!_e(n),C4=n=>rl(n,VS,MS),ve=n=>DS.test(n),po=n=>rl(n,FS,T4),Zp=n=>rl(n,P4,ze),J0=n=>rl(n,LS,MS),A4=n=>rl(n,jS,I4),xd=n=>rl(n,US,S4),_e=n=>OS.test(n),nc=n=>sl(n,FS),R4=n=>sl(n,D4),Z0=n=>sl(n,LS),k4=n=>sl(n,VS),N4=n=>sl(n,jS),Ed=n=>sl(n,US,!0),rl=(n,e,t)=>{const r=DS.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},sl=(n,e,t=!1)=>{const r=OS.exec(n);return r?r[1]?e(r[1]):t:!1},LS=n=>n==="position"||n==="percentage",jS=n=>n==="image"||n==="url",VS=n=>n==="length"||n==="size"||n==="bg-size",FS=n=>n==="length",P4=n=>n==="number",D4=n=>n==="family-name",US=n=>n==="shadow",O4=()=>{const n=Ot("color"),e=Ot("font"),t=Ot("text"),r=Ot("font-weight"),i=Ot("tracking"),a=Ot("leading"),c=Ot("breakpoint"),h=Ot("container"),f=Ot("spacing"),m=Ot("radius"),y=Ot("shadow"),w=Ot("inset-shadow"),x=Ot("text-shadow"),I=Ot("drop-shadow"),k=Ot("blur"),C=Ot("perspective"),A=Ot("aspect"),j=Ot("ease"),z=Ot("animate"),$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],X=()=>[...K(),_e,ve],ne=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],b=()=>[_e,ve,f],N=()=>[Ia,"full","auto",...b()],O=()=>[ui,"none","subgrid",_e,ve],L=()=>["auto",{span:["full",ui,_e,ve]},ui,_e,ve],F=()=>[ui,"auto",_e,ve],D=()=>["auto","min","max","fr",_e,ve],Te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Me=()=>["start","end","center","stretch","center-safe","end-safe"],Se=()=>["auto",...b()],Ie=()=>[Ia,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],W=()=>[n,_e,ve],J=()=>[...K(),Z0,J0,{position:[_e,ve]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",k4,C4,{size:[_e,ve]}],Z=()=>[Jp,nc,po],pe=()=>["","none","full",m,_e,ve],ge=()=>["",ze,nc,po],Re=()=>["solid","dashed","dotted","double"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[ze,Jp,Z0,J0],Ve=()=>["","none",k,_e,ve],We=()=>["none",ze,_e,ve],ht=()=>["none",ze,_e,ve],hn=()=>[ze,_e,ve],fn=()=>[Ia,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ys],breakpoint:[ys],color:[E4],container:[ys],"drop-shadow":[ys],ease:["in","out","in-out"],font:[b4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ys],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ys],shadow:[ys],spacing:["px",ze],text:[ys],"text-shadow":[ys],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ia,ve,_e,A]}],container:["container"],columns:[{columns:[ze,ve,_e,h]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:X()}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[ui,"auto",_e,ve]}],basis:[{basis:[Ia,"full","auto",h,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ze,Ia,"auto","initial","none",ve]}],grow:[{grow:["",ze,_e,ve]}],shrink:[{shrink:["",ze,_e,ve]}],order:[{order:[ui,"first","last","none",_e,ve]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:[...Te(),"normal"]}],"justify-items":[{"justify-items":[...Me(),"normal"]}],"justify-self":[{"justify-self":["auto",...Me()]}],"align-content":[{content:["normal",...Te()]}],"align-items":[{items:[...Me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Me(),{baseline:["","last"]}]}],"place-content":[{"place-content":Te()}],"place-items":[{"place-items":[...Me(),"baseline"]}],"place-self":[{"place-self":["auto",...Me()]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:Se()}],mx:[{mx:Se()}],my:[{my:Se()}],ms:[{ms:Se()}],me:[{me:Se()}],mt:[{mt:Se()}],mr:[{mr:Se()}],mb:[{mb:Se()}],ml:[{ml:Se()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ie()}],w:[{w:[h,"screen",...Ie()]}],"min-w":[{"min-w":[h,"screen","none",...Ie()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...Ie()]}],h:[{h:["screen","lh",...Ie()]}],"min-h":[{"min-h":["screen","lh","none",...Ie()]}],"max-h":[{"max-h":["screen","lh",...Ie()]}],"font-size":[{text:["base",t,nc,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,_e,Zp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jp,ve]}],"font-family":[{font:[R4,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,_e,ve]}],"line-clamp":[{"line-clamp":[ze,"none",_e,Zp]}],leading:[{leading:[a,...b()]}],"list-image":[{"list-image":["none",_e,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:[ze,"from-font","auto",_e,po]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[ze,"auto",_e,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ui,_e,ve],radial:["",_e,ve],conic:[ui,_e,ve]},N4,A4]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Re(),"hidden","none"]}],"divide-style":[{divide:[...Re(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...Re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ze,_e,ve]}],"outline-w":[{outline:["",ze,nc,po]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",y,Ed,xd]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",w,Ed,xd]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[ze,po]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",x,Ed,xd]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[ze,_e,ve]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ze]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[_e,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":K()}],"mask-image-conic-pos":[{"mask-conic":[ze]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ve]}],filter:[{filter:["","none",_e,ve]}],blur:[{blur:Ve()}],brightness:[{brightness:[ze,_e,ve]}],contrast:[{contrast:[ze,_e,ve]}],"drop-shadow":[{"drop-shadow":["","none",I,Ed,xd]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",ze,_e,ve]}],"hue-rotate":[{"hue-rotate":[ze,_e,ve]}],invert:[{invert:["",ze,_e,ve]}],saturate:[{saturate:[ze,_e,ve]}],sepia:[{sepia:["",ze,_e,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ve]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[ze,_e,ve]}],"backdrop-contrast":[{"backdrop-contrast":[ze,_e,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ze,_e,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ze,_e,ve]}],"backdrop-invert":[{"backdrop-invert":["",ze,_e,ve]}],"backdrop-opacity":[{"backdrop-opacity":[ze,_e,ve]}],"backdrop-saturate":[{"backdrop-saturate":[ze,_e,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",ze,_e,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ze,"initial",_e,ve]}],ease:[{ease:["linear","initial",j,_e,ve]}],delay:[{delay:[ze,_e,ve]}],animate:[{animate:["none",z,_e,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,_e,ve]}],"perspective-origin":[{"perspective-origin":X()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:ht()}],"scale-x":[{"scale-x":ht()}],"scale-y":[{"scale-y":ht()}],"scale-z":[{"scale-z":ht()}],"scale-3d":["scale-3d"],skew:[{skew:hn()}],"skew-x":[{"skew-x":hn()}],"skew-y":[{"skew-y":hn()}],transform:[{transform:[_e,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:X()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fn()}],"translate-x":[{"translate-x":fn()}],"translate-y":[{"translate-y":fn()}],"translate-z":[{"translate-z":fn()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ve]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[ze,nc,po,Zp]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},M4=m4(O4);function bt(...n){return M4(RS(n))}const L4=kS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ce({className:n,variant:e,size:t,asChild:r=!1,...i}){const a=r?CS:"button";return p.jsx(a,{"data-slot":"button",className:bt(L4({variant:e,size:t,className:n})),...i})}const j4=kS("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function cy({className:n,variant:e,asChild:t=!1,...r}){const i=t?CS:"span";return p.jsx(i,{"data-slot":"badge",className:bt(j4({variant:e}),n),...r})}function V4({currentView:n,onViewChange:e,unreadCount:t=0}){return p.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-b border-gray-800",dir:"rtl",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h1",{className:"text-white font-bold text-lg",children:"Dark*Chat"}),p.jsx("span",{className:"text-green-400 text-sm",children:"•"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e("feed"),className:`p-2 ${n==="feed"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[p.jsx(bS,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline mr-2",children:"الرئيسية"})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e("messages"),className:`p-2 relative ${n==="messages"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[p.jsx(Ac,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline mr-2",children:"الرسائل"}),t>0&&p.jsx(cy,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 text-xs p-0 flex items-center justify-center rounded-full bg-red-500 text-white",children:t>99?"99+":t})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e("likes"),className:`p-2 ${n==="likes"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[p.jsx(Ga,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline mr-2",children:"الإعجابات"})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e("profile"),className:`p-2 ${n==="profile"?"text-green-400":"text-gray-400 hover:text-white"}`,children:[p.jsx(qM,{className:"w-5 h-5"}),p.jsx("span",{className:"hidden sm:inline mr-2",children:"الملف الشخصي"})]})]})]})})}function F4(n,e){const t=T.createContext(e),r=a=>{const{children:c,...h}=a,f=T.useMemo(()=>h,Object.values(h));return p.jsx(t.Provider,{value:f,children:c})};r.displayName=n+"Provider";function i(a){const c=T.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,i]}function Ps(n,e=[]){let t=[];function r(a,c){const h=T.createContext(c),f=t.length;t=[...t,c];const m=w=>{const{scope:x,children:I,...k}=w,C=x?.[n]?.[f]||h,A=T.useMemo(()=>k,Object.values(k));return p.jsx(C.Provider,{value:A,children:I})};m.displayName=a+"Provider";function y(w,x){const I=x?.[n]?.[f]||h,k=T.useContext(I);if(k)return k;if(c!==void 0)return c;throw new Error(`\`${w}\` must be used within \`${a}\``)}return[m,y]}const i=()=>{const a=t.map(c=>T.createContext(c));return function(h){const f=h?.[n]||a;return T.useMemo(()=>({[`__scope${n}`]:{...h,[n]:f}}),[h,f])}};return i.scopeName=n,[r,U4(i,...e)]}function U4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((h,{useScope:f,scopeName:m})=>{const w=f(a)[`__scope${m}`];return{...h,...w}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function Kt(n){const e=T.useRef(n);return T.useEffect(()=>{e.current=n}),T.useMemo(()=>(...t)=>e.current?.(...t),[])}var Xn=globalThis?.document?T.useLayoutEffect:()=>{},uy=kx();const z4=Rx(uy);var B4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xe=B4.reduce((n,e)=>{const t=Ka(`Primitive.${e}`),r=T.forwardRef((i,a)=>{const{asChild:c,...h}=i,f=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(f,{...h,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function zS(n,e){n&&uy.flushSync(()=>n.dispatchEvent(e))}var em={exports:{}},tm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function $4(){if(ex)return tm;ex=1;var n=wh();function e(w,x){return w===x&&(w!==0||1/w===1/x)||w!==w&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function h(w,x){var I=x(),k=r({inst:{value:I,getSnapshot:x}}),C=k[0].inst,A=k[1];return a(function(){C.value=I,C.getSnapshot=x,f(C)&&A({inst:C})},[w,I,x]),i(function(){return f(C)&&A({inst:C}),w(function(){f(C)&&A({inst:C})})},[w]),c(I),I}function f(w){var x=w.getSnapshot;w=w.value;try{var I=x();return!t(w,I)}catch{return!0}}function m(w,x){return x()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return tm.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,tm}var tx;function W4(){return tx||(tx=1,em.exports=$4()),em.exports}var H4=W4();function q4(){return H4.useSyncExternalStore(G4,()=>!0,()=>!1)}function G4(){return()=>{}}var dy="Avatar",[K4]=Ps(dy),[Q4,BS]=K4(dy),$S=T.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=T.useState("idle");return p.jsx(Q4,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:p.jsx(Xe.span,{...r,ref:e})})});$S.displayName=dy;var WS="AvatarImage",HS=T.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,c=BS(WS,t),h=Y4(r,a),f=Kt(m=>{i(m),c.onImageLoadingStatusChange(m)});return Xn(()=>{h!=="idle"&&f(h)},[h,f]),h==="loaded"?p.jsx(Xe.img,{...a,ref:e,src:r}):null});HS.displayName=WS;var qS="AvatarFallback",GS=T.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=BS(qS,t),[c,h]=T.useState(r===void 0);return T.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>h(!0),r);return()=>window.clearTimeout(f)}},[r]),c&&a.imageLoadingStatus!=="loaded"?p.jsx(Xe.span,{...i,ref:e}):null});GS.displayName=qS;function nx(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Y4(n,{referrerPolicy:e,crossOrigin:t}){const r=q4(),i=T.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[c,h]=T.useState(()=>nx(a,n));return Xn(()=>{h(nx(a,n))},[a,n]),Xn(()=>{const f=w=>()=>{h(w)};if(!a)return;const m=f("loaded"),y=f("error");return a.addEventListener("load",m),a.addEventListener("error",y),e&&(a.referrerPolicy=e),typeof t=="string"&&(a.crossOrigin=t),()=>{a.removeEventListener("load",m),a.removeEventListener("error",y)}},[a,t,e]),c}var X4=$S,J4=HS,Z4=GS;function jn({className:n,...e}){return p.jsx(X4,{"data-slot":"avatar",className:bt("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function Vn({className:n,...e}){return p.jsx(J4,{"data-slot":"avatar-image",className:bt("aspect-square size-full",n),...e})}function Fn({className:n,...e}){return p.jsx(Z4,{"data-slot":"avatar-fallback",className:bt("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function eL({currentUser:n,onStoryClick:e,onAddStory:t}){const[r,i]=T.useState([]);T.useEffect(()=>{(async()=>{try{const h=await Fm(),f=await Promise.all(h.map(async m=>{const y=await Fd(m.userId);return{...m,username:y?.username||"Unknown",displayName:y?.displayName||"Unknown User",avatar:y?.avatar||"/api/placeholder/64/64"}}));i(f)}catch(h){console.error("Failed to fetch stories:",h)}})()},[]);const a=c=>c.isViewed||c.isViewed?"ring-gray-500":"ring-gradient-to-r from-green-500 to-black";return p.jsxs("div",{className:"flex gap-4 p-4 overflow-x-auto scrollbar-hide bg-gray-900/50",children:[p.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[70px]",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-16 h-16 ring-2 ring-green-500",children:[p.jsx(Vn,{src:n?.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:n?.displayName?.charAt(0)||"Y"})]}),p.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-gray-900 cursor-pointer hover:bg-green-600 transition-colors",onClick:t,children:p.jsx(ch,{className:"w-3 h-3 text-white"})})]}),p.jsx("span",{className:"text-xs text-gray-300 text-center",children:"Your Story"})]}),r.map(c=>p.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[70px] cursor-pointer",onClick:()=>e(c),children:[p.jsx("div",{className:"relative",children:p.jsxs(jn,{className:`w-16 h-16 ring-2 ${a(c)}`,children:[p.jsx(Vn,{src:c.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:c.displayName.charAt(0)})]})}),p.jsx("span",{className:"text-xs text-gray-300 text-center truncate w-full",children:c.displayName})]},c.userId))]})}function ur({className:n,...e}){return p.jsx("div",{"data-slot":"card",className:bt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function tL({posts:n,stories:e,currentUser:t,onLike:r,onReply:i,onShare:a,onStoryClick:c,onUserClick:h,onAddStory:f,onCreatePost:m,currentUserId:y}){const w=x=>{if(!x)return"الآن";if(typeof x=="object"&&x.seconds){const I=new Date(x.seconds*1e3),C=Math.floor((new Date().getTime()-I.getTime())/(1e3*60));return C<1?"الآن":C<60?`${C}د`:C<1440?`${Math.floor(C/60)}س`:`${Math.floor(C/1440)}ي`}return x};return p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black",dir:"rtl",children:[p.jsx("div",{className:"bg-gray-900/80 backdrop-blur-sm sticky top-16 z-40",children:p.jsx(eL,{currentUser:t,onStoryClick:c,onAddStory:f})}),p.jsx("div",{className:"fixed bottom-6 left-6 z-50",children:p.jsx(ce,{onClick:m,className:"w-14 h-14 rounded-full bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",children:p.jsx(ch,{className:"w-6 h-6"})})}),p.jsx("div",{className:"max-w-2xl mx-auto px-4 pb-20 pt-4",children:n.length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Ac,{className:"w-8 h-8 text-gray-400"})}),p.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"لا توجد منشورات بعد"}),p.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"كن أول من يشارك شيئاً!"}),p.jsxs(ce,{onClick:m,className:"bg-green-600 hover:bg-green-700 text-white",children:[p.jsx(ch,{className:"w-4 h-4 ml-2"}),"إنشاء منشور"]})]}):n.map(x=>p.jsx(ur,{className:"mb-4 bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-10 h-10 cursor-pointer",onClick:()=>h(x.userId),children:[p.jsx(Vn,{src:x.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:x.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-1 -left-1 w-3 h-3 rounded-full border-2 border-gray-800 ${x.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-white font-medium cursor-pointer hover:text-green-400 transition-colors",onClick:()=>h(x.userId),children:x.displayName}),p.jsxs("p",{className:"text-gray-400 text-sm cursor-pointer hover:text-green-400 transition-colors",onClick:()=>h(x.userId),children:["@",x.username]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-500 text-sm",children:w(x.timestamp)}),p.jsx(ce,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:p.jsx(iy,{className:"w-4 h-4"})})]})]}),p.jsx("p",{className:"text-gray-100 mb-4 leading-relaxed",children:x.content}),p.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>r(x.id),className:`flex items-center gap-2 ${x.likedBy&&y&&x.likedBy[y]||x.isLiked?"text-red-500 hover:text-red-400":"text-gray-400 hover:text-red-500"}`,children:[p.jsx(Ga,{className:`w-4 h-4 ${x.likedBy&&y&&x.likedBy[y]||x.isLiked?"fill-current":""}`}),p.jsx("span",{children:x.likes||0})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>i(x.id),className:"flex items-center gap-2 text-gray-400 hover:text-blue-400",children:[p.jsx(Ac,{className:"w-4 h-4"}),p.jsx("span",{children:x.replies||0})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>a(x.id),className:"flex items-center gap-2 text-gray-400 hover:text-green-400",children:[p.jsx(oy,{className:"w-4 h-4"}),p.jsx("span",{children:"مشاركة"})]})]})]})},x.id))})]})}function qt({className:n,type:e,...t}){return p.jsx("input",{type:e,"data-slot":"input",className:bt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function nL({conversations:n,onStartChat:e,onDeleteChat:t,onConversationClick:r,onSearchUsers:i}){const[a,c]=T.useState(""),h=n.filter(f=>f.displayName.toLowerCase().includes(a.toLowerCase())||f.username.toLowerCase().includes(a.toLowerCase())||f.lastMessage.toLowerCase().includes(a.toLowerCase()));return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:p.jsxs("div",{className:"max-w-md mx-auto",children:[p.jsxs("div",{className:"px-4 py-4 border-b border-gray-800",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-xl text-white font-bold",children:"Messages"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>i&&i(),className:"text-gray-400 hover:text-green-400",children:p.jsx(uh,{className:"w-5 h-5"})}),p.jsx(ce,{variant:"ghost",size:"sm",className:"text-green-400 hover:text-green-300",children:p.jsx(IS,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx(uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),p.jsx(qt,{value:a,onChange:f=>c(f.target.value),placeholder:"Search messages...",className:"pl-10 bg-gray-800 border-gray-700 text-white placeholder-gray-400"})]})]}),p.jsx("div",{className:"px-4 py-2",children:h.length===0&&a?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-gray-400",children:"لا توجد نتائج"}),p.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['No results found for "',a,'"']})]}):h.map(f=>p.jsx(ur,{className:"mb-2 bg-gray-800/30 border-gray-700 hover:bg-gray-800/50 transition-colors cursor-pointer",onClick:()=>r(f),children:p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-12 h-12",children:[p.jsx(Vn,{src:f.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:f.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-gray-800 ${f.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("p",{className:"text-white font-medium truncate",children:f.displayName}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-400 text-sm",children:f.timestamp}),f.unreadCount>0&&p.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:p.jsx("span",{className:"text-xs text-white font-medium",children:f.unreadCount})})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-gray-400 text-sm truncate flex-1",children:f.lastMessage}),p.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:m=>{m.stopPropagation(),e&&e(f.id)},className:"text-gray-400 hover:text-green-400 p-1",children:p.jsx(ES,{className:"w-4 h-4"})}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:m=>{m.stopPropagation(),t&&t(f.id)},className:"text-gray-400 hover:text-red-400 p-1",children:p.jsx(yM,{className:"w-4 h-4"})})]})]}),!f.isOnline&&f.lastSeen&&p.jsx("p",{className:"text-gray-500 text-xs mt-1",children:f.lastSeen})]})]})})},f.id))})]})})}function rL({profile:n,isOwnProfile:e=!0,onEditProfile:t,onShareProfile:r,onFollow:i}){return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:p.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-20 h-20 ring-2 ring-green-500",children:[p.jsx(Vn,{src:n.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white text-xl",children:n.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-2 -right-2 w-5 h-5 rounded-full border-2 border-gray-800 ${n.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsx("div",{className:"flex gap-2",children:e?p.jsxs(p.Fragment,{children:[p.jsxs(ce,{variant:"outline",size:"sm",onClick:t,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[p.jsx(IS,{className:"w-4 h-4 mr-1"}),"Edit"]}),p.jsx(ce,{variant:"outline",size:"sm",onClick:r,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:p.jsx(oy,{className:"w-4 h-4"})})]}):p.jsxs(ce,{onClick:i,className:"bg-green-500 hover:bg-green-600 text-white",children:[p.jsx(ay,{className:"w-4 h-4 mr-1"}),"Follow"]})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl text-white font-bold",children:n.displayName}),p.jsxs("p",{className:"text-gray-400",children:["@",n.username]})]}),n.bio&&p.jsx("p",{className:"text-gray-300 leading-relaxed",children:n.bio}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(cy,{variant:"secondary",className:"bg-gray-700 text-gray-300",children:n.isOnline?"✅ Online":"⚫ Offline"}),p.jsxs("span",{className:"text-gray-500 text-sm",children:["Joined ",n.joinDate]})]})]})]})}),p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.postsCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Posts"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.followersCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Followers"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.followingCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Following"})]})]})})}),e&&p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[p.jsx(LM,{className:"w-4 h-4 mr-3"}),"Account Settings"]}),p.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[p.jsx(bS,{className:"w-4 h-4 mr-3"}),"Manage Followers"]}),p.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-gray-300 hover:bg-gray-700",children:[p.jsx(wM,{className:"w-4 h-4 mr-3"}),"Privacy Policy"]})]})})]})})}function sL({likedPosts:n,onUnlike:e,onReply:t,onShare:r}){return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:p.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-2xl text-white font-bold mb-2",children:"Liked Posts"}),p.jsx("p",{className:"text-gray-400",children:"Posts you've liked recently"})]}),n.length===0?p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-8 text-center",children:[p.jsx(Ga,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg text-gray-300 mb-2",children:"No liked posts yet"}),p.jsx("p",{className:"text-gray-500",children:"Start exploring and like posts that interest you!"})]})}):p.jsx("div",{className:"space-y-4",children:n.map(i=>p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-10 h-10",children:[p.jsx(Vn,{src:i.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:i.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-gray-800 ${i.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-white font-medium",children:i.displayName}),p.jsxs("p",{className:"text-gray-400 text-sm",children:["@",i.username]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-gray-500 text-sm",children:i.timestamp}),p.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[p.jsx(mM,{className:"w-3 h-3"}),p.jsxs("span",{children:["Liked ",i.likedAt]})]})]})]}),p.jsx("p",{className:"text-gray-100 mb-4 leading-relaxed",children:i.content}),p.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>e(i.id),className:"flex items-center gap-2 text-red-500 hover:text-red-400",children:[p.jsx(Ga,{className:"w-4 h-4 fill-current"}),p.jsx("span",{children:i.likes})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>t(i.id),className:"flex items-center gap-2 text-gray-400 hover:text-blue-400",children:[p.jsx(Ac,{className:"w-4 h-4"}),p.jsx("span",{children:i.replies})]}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>r(i.id),className:"flex items-center gap-2 text-gray-400 hover:text-green-400",children:[p.jsx(oy,{className:"w-4 h-4"}),p.jsx("span",{children:"Share"})]})]})]})},i.id))})]})})}function Oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}var iL=Nx[" useId ".trim().toString()]||(()=>{}),oL=0;function Va(n){const[e,t]=T.useState(iL());return Xn(()=>{t(r=>r??String(oL++))},[n]),n||(e?`radix-${e}`:"")}var aL=Nx[" useInsertionEffect ".trim().toString()]||Xn;function Yh({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,a,c]=lL({defaultProp:e,onChange:t}),h=n!==void 0,f=h?n:i;{const y=T.useRef(n!==void 0);T.useEffect(()=>{const w=y.current;w!==h&&console.warn(`${r} is changing from ${w?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=h},[h,r])}const m=T.useCallback(y=>{if(h){const w=cL(y)?y(n):y;w!==n&&c.current?.(w)}else a(y)},[h,n,a,c]);return[f,m]}function lL({defaultProp:n,onChange:e}){const[t,r]=T.useState(n),i=T.useRef(t),a=T.useRef(e);return aL(()=>{a.current=e},[e]),T.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,r,a]}function cL(n){return typeof n=="function"}function uL(n,e=globalThis?.document){const t=Kt(n);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var dL="DismissableLayer",Wm="dismissableLayer.update",hL="dismissableLayer.pointerDownOutside",fL="dismissableLayer.focusOutside",rx,KS=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hy=T.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:h,...f}=n,m=T.useContext(KS),[y,w]=T.useState(null),x=y?.ownerDocument??globalThis?.document,[,I]=T.useState({}),k=dt(e,P=>w(P)),C=Array.from(m.layers),[A]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),j=C.indexOf(A),z=y?C.indexOf(y):-1,$=m.layersWithOutsidePointerEventsDisabled.size>0,K=z>=j,X=gL(P=>{const b=P.target,N=[...m.branches].some(O=>O.contains(b));!K||N||(i?.(P),c?.(P),P.defaultPrevented||h?.())},x),ne=yL(P=>{const b=P.target;[...m.branches].some(O=>O.contains(b))||(a?.(P),c?.(P),P.defaultPrevented||h?.())},x);return uL(P=>{z===m.layers.size-1&&(r?.(P),!P.defaultPrevented&&h&&(P.preventDefault(),h()))},x),T.useEffect(()=>{if(y)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(rx=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(y)),m.layers.add(y),sx(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=rx)}},[y,x,t,m]),T.useEffect(()=>()=>{y&&(m.layers.delete(y),m.layersWithOutsidePointerEventsDisabled.delete(y),sx())},[y,m]),T.useEffect(()=>{const P=()=>I({});return document.addEventListener(Wm,P),()=>document.removeEventListener(Wm,P)},[]),p.jsx(Xe.div,{...f,ref:k,style:{pointerEvents:$?K?"auto":"none":void 0,...n.style},onFocusCapture:Oe(n.onFocusCapture,ne.onFocusCapture),onBlurCapture:Oe(n.onBlurCapture,ne.onBlurCapture),onPointerDownCapture:Oe(n.onPointerDownCapture,X.onPointerDownCapture)})});hy.displayName=dL;var pL="DismissableLayerBranch",mL=T.forwardRef((n,e)=>{const t=T.useContext(KS),r=T.useRef(null),i=dt(e,r);return T.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),p.jsx(Xe.div,{...n,ref:i})});mL.displayName=pL;function gL(n,e=globalThis?.document){const t=Kt(n),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const a=h=>{if(h.target&&!r.current){let f=function(){QS(hL,t,m,{discrete:!0})};const m={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=f,e.addEventListener("click",i.current,{once:!0})):f()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function yL(n,e=globalThis?.document){const t=Kt(n),r=T.useRef(!1);return T.useEffect(()=>{const i=a=>{a.target&&!r.current&&QS(fL,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sx(){const n=new CustomEvent(Wm);document.dispatchEvent(n)}function QS(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?zS(i,a):i.dispatchEvent(a)}var nm="focusScope.autoFocusOnMount",rm="focusScope.autoFocusOnUnmount",ix={bubbles:!1,cancelable:!0},vL="FocusScope",fy=T.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...c}=n,[h,f]=T.useState(null),m=Kt(i),y=Kt(a),w=T.useRef(null),x=dt(e,C=>f(C)),I=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let C=function($){if(I.paused||!h)return;const K=$.target;h.contains(K)?w.current=K:hi(w.current,{select:!0})},A=function($){if(I.paused||!h)return;const K=$.relatedTarget;K!==null&&(h.contains(K)||hi(w.current,{select:!0}))},j=function($){if(document.activeElement===document.body)for(const X of $)X.removedNodes.length>0&&hi(h)};document.addEventListener("focusin",C),document.addEventListener("focusout",A);const z=new MutationObserver(j);return h&&z.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",A),z.disconnect()}}},[r,h,I.paused]),T.useEffect(()=>{if(h){ax.add(I);const C=document.activeElement;if(!h.contains(C)){const j=new CustomEvent(nm,ix);h.addEventListener(nm,m),h.dispatchEvent(j),j.defaultPrevented||(_L(SL(YS(h)),{select:!0}),document.activeElement===C&&hi(h))}return()=>{h.removeEventListener(nm,m),setTimeout(()=>{const j=new CustomEvent(rm,ix);h.addEventListener(rm,y),h.dispatchEvent(j),j.defaultPrevented||hi(C??document.body,{select:!0}),h.removeEventListener(rm,y),ax.remove(I)},0)}}},[h,m,y,I]);const k=T.useCallback(C=>{if(!t&&!r||I.paused)return;const A=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,j=document.activeElement;if(A&&j){const z=C.currentTarget,[$,K]=wL(z);$&&K?!C.shiftKey&&j===K?(C.preventDefault(),t&&hi($,{select:!0})):C.shiftKey&&j===$&&(C.preventDefault(),t&&hi(K,{select:!0})):j===z&&C.preventDefault()}},[t,r,I.paused]);return p.jsx(Xe.div,{tabIndex:-1,...c,ref:x,onKeyDown:k})});fy.displayName=vL;function _L(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(hi(r,{select:e}),document.activeElement!==t)return}function wL(n){const e=YS(n),t=ox(e,n),r=ox(e.reverse(),n);return[t,r]}function YS(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function ox(n,e){for(const t of n)if(!xL(t,{upTo:e}))return t}function xL(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function EL(n){return n instanceof HTMLInputElement&&"select"in n}function hi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&EL(n)&&e&&n.select()}}var ax=TL();function TL(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=lx(n,e),n.unshift(e)},remove(e){n=lx(n,e),n[0]?.resume()}}}function lx(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function SL(n){return n.filter(e=>e.tagName!=="A")}var IL="Portal",py=T.forwardRef((n,e)=>{const{container:t,...r}=n,[i,a]=T.useState(!1);Xn(()=>a(!0),[]);const c=t||i&&globalThis?.document?.body;return c?z4.createPortal(p.jsx(Xe.div,{...r,ref:e}),c):null});py.displayName=IL;function bL(n,e){return T.useReducer((t,r)=>e[t][r]??t,n)}var Un=n=>{const{present:e,children:t}=n,r=CL(e),i=typeof t=="function"?t({present:r.isPresent}):T.Children.only(t),a=dt(r.ref,AL(i));return typeof t=="function"||r.isPresent?T.cloneElement(i,{ref:a}):null};Un.displayName="Presence";function CL(n){const[e,t]=T.useState(),r=T.useRef(null),i=T.useRef(n),a=T.useRef("none"),c=n?"mounted":"unmounted",[h,f]=bL(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const m=Td(r.current);a.current=h==="mounted"?m:"none"},[h]),Xn(()=>{const m=r.current,y=i.current;if(y!==n){const x=a.current,I=Td(m);n?f("MOUNT"):I==="none"||m?.display==="none"?f("UNMOUNT"):f(y&&x!==I?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,f]),Xn(()=>{if(e){let m;const y=e.ownerDocument.defaultView??window,w=I=>{const C=Td(r.current).includes(CSS.escape(I.animationName));if(I.target===e&&C&&(f("ANIMATION_END"),!i.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",m=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},x=I=>{I.target===e&&(a.current=Td(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",w),e.addEventListener("animationend",w),()=>{y.clearTimeout(m),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",w),e.removeEventListener("animationend",w)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:T.useCallback(m=>{r.current=m?getComputedStyle(m):null,t(m)},[])}}function Td(n){return n?.animationName||"none"}function AL(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var sm=0;function XS(){T.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??cx()),document.body.insertAdjacentElement("beforeend",n[1]??cx()),sm++,()=>{sm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),sm--}},[])}function cx(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Lr=function(){return Lr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Lr.apply(this,arguments)};function JS(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function RL(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}var Ud="right-scroll-bar-position",zd="width-before-scroll-bar",kL="with-scroll-bars-hidden",NL="--removed-body-scroll-bar-size";function im(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function PL(n,e){var t=T.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var DL=typeof window<"u"?T.useLayoutEffect:T.useEffect,ux=new WeakMap;function OL(n,e){var t=PL(null,function(r){return n.forEach(function(i){return im(i,r)})});return DL(function(){var r=ux.get(t);if(r){var i=new Set(r),a=new Set(n),c=t.current;i.forEach(function(h){a.has(h)||im(h,null)}),a.forEach(function(h){i.has(h)||im(h,c)})}ux.set(t,n)},[n]),t}function ML(n){return n}function LL(n,e){e===void 0&&(e=ML);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(h){return a(h)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(a),c=t}var f=function(){var y=c;c=[],y.forEach(a)},m=function(){return Promise.resolve().then(f)};m(),t={push:function(y){c.push(y),m()},filter:function(y){return c=c.filter(y),t}}}};return i}function jL(n){n===void 0&&(n={});var e=LL(null);return e.options=Lr({async:!0,ssr:!1},n),e}var ZS=function(n){var e=n.sideCar,t=JS(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Lr({},t))};ZS.isSideCarExport=!0;function VL(n,e){return n.useMedium(e),ZS}var eI=jL(),om=function(){},Xh=T.forwardRef(function(n,e){var t=T.useRef(null),r=T.useState({onScrollCapture:om,onWheelCapture:om,onTouchMoveCapture:om}),i=r[0],a=r[1],c=n.forwardProps,h=n.children,f=n.className,m=n.removeScrollBar,y=n.enabled,w=n.shards,x=n.sideCar,I=n.noRelative,k=n.noIsolation,C=n.inert,A=n.allowPinchZoom,j=n.as,z=j===void 0?"div":j,$=n.gapMode,K=JS(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),X=x,ne=OL([t,e]),P=Lr(Lr({},K),i);return T.createElement(T.Fragment,null,y&&T.createElement(X,{sideCar:eI,removeScrollBar:m,shards:w,noRelative:I,noIsolation:k,inert:C,setCallbacks:a,allowPinchZoom:!!A,lockRef:t,gapMode:$}),c?T.cloneElement(T.Children.only(h),Lr(Lr({},P),{ref:ne})):T.createElement(z,Lr({},P,{className:f,ref:ne}),h))});Xh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xh.classNames={fullWidth:zd,zeroRight:Ud};var FL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UL(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=FL();return e&&n.setAttribute("nonce",e),n}function zL(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function BL(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var $L=function(){var n=0,e=null;return{add:function(t){n==0&&(e=UL())&&(zL(e,t),BL(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WL=function(){var n=$L();return function(e,t){T.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},tI=function(){var n=WL(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},HL={left:0,top:0,right:0,gap:0},am=function(n){return parseInt(n||"",10)||0},qL=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[am(t),am(r),am(i)]},GL=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return HL;var e=qL(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},KL=tI(),Fa="data-scroll-locked",QL=function(n,e,t,r){var i=n.left,a=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(kL,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(Fa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ud,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(zd,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Ud," .").concat(Ud,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zd," .").concat(zd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fa,`] {
    `).concat(NL,": ").concat(h,`px;
  }
`)},dx=function(){var n=parseInt(document.body.getAttribute(Fa)||"0",10);return isFinite(n)?n:0},YL=function(){T.useEffect(function(){return document.body.setAttribute(Fa,(dx()+1).toString()),function(){var n=dx()-1;n<=0?document.body.removeAttribute(Fa):document.body.setAttribute(Fa,n.toString())}},[])},XL=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;YL();var a=T.useMemo(function(){return GL(i)},[i]);return T.createElement(KL,{styles:QL(a,!e,i,t?"":"!important")})},Hm=!1;if(typeof window<"u")try{var Sd=Object.defineProperty({},"passive",{get:function(){return Hm=!0,!0}});window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{Hm=!1}var ba=Hm?{passive:!1}:!1,JL=function(n){return n.tagName==="TEXTAREA"},nI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!JL(n)&&t[e]==="visible")},ZL=function(n){return nI(n,"overflowY")},ej=function(n){return nI(n,"overflowX")},hx=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=rI(n,r);if(i){var a=sI(n,r),c=a[1],h=a[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},tj=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},nj=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},rI=function(n,e){return n==="v"?ZL(e):ej(e)},sI=function(n,e){return n==="v"?tj(e):nj(e)},rj=function(n,e){return n==="h"&&e==="rtl"?-1:1},sj=function(n,e,t,r,i){var a=rj(n,window.getComputedStyle(e).direction),c=a*r,h=t.target,f=e.contains(h),m=!1,y=c>0,w=0,x=0;do{if(!h)break;var I=sI(n,h),k=I[0],C=I[1],A=I[2],j=C-A-a*k;(k||j)&&rI(n,h)&&(w+=j,x+=k);var z=h.parentNode;h=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!f&&h!==document.body||f&&(e.contains(h)||e===h));return(y&&Math.abs(w)<1||!y&&Math.abs(x)<1)&&(m=!0),m},Id=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},fx=function(n){return[n.deltaX,n.deltaY]},px=function(n){return n&&"current"in n?n.current:n},ij=function(n,e){return n[0]===e[0]&&n[1]===e[1]},oj=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},aj=0,Ca=[];function lj(n){var e=T.useRef([]),t=T.useRef([0,0]),r=T.useRef(),i=T.useState(aj++)[0],a=T.useState(tI)[0],c=T.useRef(n);T.useEffect(function(){c.current=n},[n]),T.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var C=RL([n.lockRef.current],(n.shards||[]).map(px),!0).filter(Boolean);return C.forEach(function(A){return A.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),C.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=T.useCallback(function(C,A){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var j=Id(C),z=t.current,$="deltaX"in C?C.deltaX:z[0]-j[0],K="deltaY"in C?C.deltaY:z[1]-j[1],X,ne=C.target,P=Math.abs($)>Math.abs(K)?"h":"v";if("touches"in C&&P==="h"&&ne.type==="range")return!1;var b=hx(P,ne);if(!b)return!0;if(b?X=P:(X=P==="v"?"h":"v",b=hx(P,ne)),!b)return!1;if(!r.current&&"changedTouches"in C&&($||K)&&(r.current=X),!X)return!0;var N=r.current||X;return sj(N,A,C,N==="h"?$:K)},[]),f=T.useCallback(function(C){var A=C;if(!(!Ca.length||Ca[Ca.length-1]!==a)){var j="deltaY"in A?fx(A):Id(A),z=e.current.filter(function(X){return X.name===A.type&&(X.target===A.target||A.target===X.shadowParent)&&ij(X.delta,j)})[0];if(z&&z.should){A.cancelable&&A.preventDefault();return}if(!z){var $=(c.current.shards||[]).map(px).filter(Boolean).filter(function(X){return X.contains(A.target)}),K=$.length>0?h(A,$[0]):!c.current.noIsolation;K&&A.cancelable&&A.preventDefault()}}},[]),m=T.useCallback(function(C,A,j,z){var $={name:C,delta:A,target:j,should:z,shadowParent:cj(j)};e.current.push($),setTimeout(function(){e.current=e.current.filter(function(K){return K!==$})},1)},[]),y=T.useCallback(function(C){t.current=Id(C),r.current=void 0},[]),w=T.useCallback(function(C){m(C.type,fx(C),C.target,h(C,n.lockRef.current))},[]),x=T.useCallback(function(C){m(C.type,Id(C),C.target,h(C,n.lockRef.current))},[]);T.useEffect(function(){return Ca.push(a),n.setCallbacks({onScrollCapture:w,onWheelCapture:w,onTouchMoveCapture:x}),document.addEventListener("wheel",f,ba),document.addEventListener("touchmove",f,ba),document.addEventListener("touchstart",y,ba),function(){Ca=Ca.filter(function(C){return C!==a}),document.removeEventListener("wheel",f,ba),document.removeEventListener("touchmove",f,ba),document.removeEventListener("touchstart",y,ba)}},[]);var I=n.removeScrollBar,k=n.inert;return T.createElement(T.Fragment,null,k?T.createElement(a,{styles:oj(i)}):null,I?T.createElement(XL,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function cj(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const uj=VL(eI,lj);var my=T.forwardRef(function(n,e){return T.createElement(Xh,Lr({},n,{ref:e,sideCar:uj}))});my.classNames=Xh.classNames;var dj=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Aa=new WeakMap,bd=new WeakMap,Cd={},lm=0,iI=function(n){return n&&(n.host||iI(n.parentNode))},hj=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=iI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},fj=function(n,e,t,r){var i=hj(e,Array.isArray(n)?n:[n]);Cd[t]||(Cd[t]=new WeakMap);var a=Cd[t],c=[],h=new Set,f=new Set(i),m=function(w){!w||h.has(w)||(h.add(w),m(w.parentNode))};i.forEach(m);var y=function(w){!w||f.has(w)||Array.prototype.forEach.call(w.children,function(x){if(h.has(x))y(x);else try{var I=x.getAttribute(r),k=I!==null&&I!=="false",C=(Aa.get(x)||0)+1,A=(a.get(x)||0)+1;Aa.set(x,C),a.set(x,A),c.push(x),C===1&&k&&bd.set(x,!0),A===1&&x.setAttribute(t,"true"),k||x.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",x,j)}})};return y(e),h.clear(),lm++,function(){c.forEach(function(w){var x=Aa.get(w)-1,I=a.get(w)-1;Aa.set(w,x),a.set(w,I),x||(bd.has(w)||w.removeAttribute(r),bd.delete(w)),I||w.removeAttribute(t)}),lm--,lm||(Aa=new WeakMap,Aa=new WeakMap,bd=new WeakMap,Cd={})}},oI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=dj(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),fj(r,i,t,"aria-hidden")):function(){return null}},Jh="Dialog",[aI]=Ps(Jh),[pj,gr]=aI(Jh),lI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:a,modal:c=!0}=n,h=T.useRef(null),f=T.useRef(null),[m,y]=Yh({prop:r,defaultProp:i??!1,onChange:a,caller:Jh});return p.jsx(pj,{scope:e,triggerRef:h,contentRef:f,contentId:Va(),titleId:Va(),descriptionId:Va(),open:m,onOpenChange:y,onOpenToggle:T.useCallback(()=>y(w=>!w),[y]),modal:c,children:t})};lI.displayName=Jh;var cI="DialogTrigger",mj=T.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=gr(cI,t),a=dt(e,i.triggerRef);return p.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":vy(i.open),...r,ref:a,onClick:Oe(n.onClick,i.onOpenToggle)})});mj.displayName=cI;var gy="DialogPortal",[gj,uI]=aI(gy,{forceMount:void 0}),dI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,a=gr(gy,e);return p.jsx(gj,{scope:e,forceMount:t,children:T.Children.map(r,c=>p.jsx(Un,{present:t||a.open,children:p.jsx(py,{asChild:!0,container:i,children:c})}))})};dI.displayName=gy;var dh="DialogOverlay",hI=T.forwardRef((n,e)=>{const t=uI(dh,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=gr(dh,n.__scopeDialog);return a.modal?p.jsx(Un,{present:r||a.open,children:p.jsx(vj,{...i,ref:e})}):null});hI.displayName=dh;var yj=Ka("DialogOverlay.RemoveScroll"),vj=T.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=gr(dh,t);return p.jsx(my,{as:yj,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Xe.div,{"data-state":vy(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Co="DialogContent",fI=T.forwardRef((n,e)=>{const t=uI(Co,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,a=gr(Co,n.__scopeDialog);return p.jsx(Un,{present:r||a.open,children:a.modal?p.jsx(_j,{...i,ref:e}):p.jsx(wj,{...i,ref:e})})});fI.displayName=Co;var _j=T.forwardRef((n,e)=>{const t=gr(Co,n.__scopeDialog),r=T.useRef(null),i=dt(e,t.contentRef,r);return T.useEffect(()=>{const a=r.current;if(a)return oI(a)},[]),p.jsx(pI,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oe(n.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Oe(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0;(c.button===2||h)&&a.preventDefault()}),onFocusOutside:Oe(n.onFocusOutside,a=>a.preventDefault())})}),wj=T.forwardRef((n,e)=>{const t=gr(Co,n.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return p.jsx(pI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||t.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{n.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=a.target;t.triggerRef.current?.contains(c)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),pI=T.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...c}=n,h=gr(Co,t),f=T.useRef(null),m=dt(e,f);return XS(),p.jsxs(p.Fragment,{children:[p.jsx(fy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:p.jsx(hy,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":vy(h.open),...c,ref:m,onDismiss:()=>h.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(xj,{titleId:h.titleId}),p.jsx(Tj,{contentRef:f,descriptionId:h.descriptionId})]})]})}),yy="DialogTitle",mI=T.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=gr(yy,t);return p.jsx(Xe.h2,{id:i.titleId,...r,ref:e})});mI.displayName=yy;var gI="DialogDescription",yI=T.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=gr(gI,t);return p.jsx(Xe.p,{id:i.descriptionId,...r,ref:e})});yI.displayName=gI;var vI="DialogClose",_I=T.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=gr(vI,t);return p.jsx(Xe.button,{type:"button",...r,ref:e,onClick:Oe(n.onClick,()=>i.onOpenChange(!1))})});_I.displayName=vI;function vy(n){return n?"open":"closed"}var wI="DialogTitleWarning",[R6,xI]=F4(wI,{contentName:Co,titleName:yy,docsSlug:"dialog"}),xj=({titleId:n})=>{const e=xI(wI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},Ej="DialogDescriptionWarning",Tj=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xI(Ej).contentName}}.`;return T.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},Sj=lI,Ij=dI,EI=hI,bj=fI,Cj=mI,Aj=yI,Rj=_I;function Do({...n}){return p.jsx(Sj,{"data-slot":"dialog",...n})}function kj({...n}){return p.jsx(Ij,{"data-slot":"dialog-portal",...n})}const TI=T.forwardRef(({className:n,...e},t)=>p.jsx(EI,{ref:t,"data-slot":"dialog-overlay",className:bt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e}));TI.displayName=EI.displayName;function Oo({className:n,children:e,...t}){return p.jsxs(kj,{"data-slot":"dialog-portal",children:[p.jsx(TI,{}),p.jsxs(bj,{"data-slot":"dialog-content",className:bt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,p.jsxs(Rj,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(Po,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Mo({className:n,...e}){return p.jsx("div",{"data-slot":"dialog-header",className:bt("flex flex-col gap-2 text-center sm:text-left",n),...e})}function Nj({className:n,...e}){return p.jsx("div",{"data-slot":"dialog-footer",className:bt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function Lo({className:n,...e}){return p.jsx(Cj,{"data-slot":"dialog-title",className:bt("text-lg leading-none font-semibold",n),...e})}function il({className:n,...e}){return p.jsx(Aj,{"data-slot":"dialog-description",className:bt("text-muted-foreground text-sm",n),...e})}var Pj=T.createContext(void 0);function _y(n){const e=T.useContext(Pj);return n||e||"ltr"}function Dj(n,[e,t]){return Math.min(t,Math.max(e,n))}function Oj(n,e){return T.useReducer((t,r)=>e[t][r]??t,n)}var wy="ScrollArea",[SI]=Ps(wy),[Mj,Jn]=SI(wy),II=T.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:a=600,...c}=n,[h,f]=T.useState(null),[m,y]=T.useState(null),[w,x]=T.useState(null),[I,k]=T.useState(null),[C,A]=T.useState(null),[j,z]=T.useState(0),[$,K]=T.useState(0),[X,ne]=T.useState(!1),[P,b]=T.useState(!1),N=dt(e,L=>f(L)),O=_y(i);return p.jsx(Mj,{scope:t,type:r,dir:O,scrollHideDelay:a,scrollArea:h,viewport:m,onViewportChange:y,content:w,onContentChange:x,scrollbarX:I,onScrollbarXChange:k,scrollbarXEnabled:X,onScrollbarXEnabledChange:ne,scrollbarY:C,onScrollbarYChange:A,scrollbarYEnabled:P,onScrollbarYEnabledChange:b,onCornerWidthChange:z,onCornerHeightChange:K,children:p.jsx(Xe.div,{dir:O,...c,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":$+"px",...n.style}})})});II.displayName=wy;var bI="ScrollAreaViewport",CI=T.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:i,...a}=n,c=Jn(bI,t),h=T.useRef(null),f=dt(e,h,c.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Xe.div,{"data-radix-scroll-area-viewport":"",...a,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...n.style},children:p.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});CI.displayName=bI;var Xr="ScrollAreaScrollbar",AI=T.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Jn(Xr,n.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:c}=i,h=n.orientation==="horizontal";return T.useEffect(()=>(h?a(!0):c(!0),()=>{h?a(!1):c(!1)}),[h,a,c]),i.type==="hover"?p.jsx(Lj,{...r,ref:e,forceMount:t}):i.type==="scroll"?p.jsx(jj,{...r,ref:e,forceMount:t}):i.type==="auto"?p.jsx(RI,{...r,ref:e,forceMount:t}):i.type==="always"?p.jsx(xy,{...r,ref:e}):null});AI.displayName=Xr;var Lj=T.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Jn(Xr,n.__scopeScrollArea),[a,c]=T.useState(!1);return T.useEffect(()=>{const h=i.scrollArea;let f=0;if(h){const m=()=>{window.clearTimeout(f),c(!0)},y=()=>{f=window.setTimeout(()=>c(!1),i.scrollHideDelay)};return h.addEventListener("pointerenter",m),h.addEventListener("pointerleave",y),()=>{window.clearTimeout(f),h.removeEventListener("pointerenter",m),h.removeEventListener("pointerleave",y)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(Un,{present:t||a,children:p.jsx(RI,{"data-state":a?"visible":"hidden",...r,ref:e})})}),jj=T.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Jn(Xr,n.__scopeScrollArea),a=n.orientation==="horizontal",c=ef(()=>f("SCROLL_END"),100),[h,f]=Oj("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(h==="idle"){const m=window.setTimeout(()=>f("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(m)}},[h,i.scrollHideDelay,f]),T.useEffect(()=>{const m=i.viewport,y=a?"scrollLeft":"scrollTop";if(m){let w=m[y];const x=()=>{const I=m[y];w!==I&&(f("SCROLL"),c()),w=I};return m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[i.viewport,a,f,c]),p.jsx(Un,{present:t||h!=="hidden",children:p.jsx(xy,{"data-state":h==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Oe(n.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Oe(n.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),RI=T.forwardRef((n,e)=>{const t=Jn(Xr,n.__scopeScrollArea),{forceMount:r,...i}=n,[a,c]=T.useState(!1),h=n.orientation==="horizontal",f=ef(()=>{if(t.viewport){const m=t.viewport.offsetWidth<t.viewport.scrollWidth,y=t.viewport.offsetHeight<t.viewport.scrollHeight;c(h?m:y)}},10);return Qa(t.viewport,f),Qa(t.content,f),p.jsx(Un,{present:r||a,children:p.jsx(xy,{"data-state":a?"visible":"hidden",...i,ref:e})})}),xy=T.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,i=Jn(Xr,n.__scopeScrollArea),a=T.useRef(null),c=T.useRef(0),[h,f]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=OI(h.viewport,h.content),y={...r,sizes:h,onSizesChange:f,hasThumb:m>0&&m<1,onThumbChange:x=>a.current=x,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:x=>c.current=x};function w(x,I){return $j(x,c.current,h,I)}return t==="horizontal"?p.jsx(Vj,{...y,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const x=i.viewport.scrollLeft,I=mx(x,h,i.dir);a.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:x=>{i.viewport&&(i.viewport.scrollLeft=x)},onDragScroll:x=>{i.viewport&&(i.viewport.scrollLeft=w(x,i.dir))}}):t==="vertical"?p.jsx(Fj,{...y,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const x=i.viewport.scrollTop,I=mx(x,h);a.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:x=>{i.viewport&&(i.viewport.scrollTop=x)},onDragScroll:x=>{i.viewport&&(i.viewport.scrollTop=w(x))}}):null}),Vj=T.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,a=Jn(Xr,n.__scopeScrollArea),[c,h]=T.useState(),f=T.useRef(null),m=dt(e,f,a.onScrollbarXChange);return T.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),p.jsx(NI,{"data-orientation":"horizontal",...i,ref:m,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zh(t)+"px",...n.style},onThumbPointerDown:y=>n.onThumbPointerDown(y.x),onDragScroll:y=>n.onDragScroll(y.x),onWheelScroll:(y,w)=>{if(a.viewport){const x=a.viewport.scrollLeft+y.deltaX;n.onWheelScroll(x),LI(x,w)&&y.preventDefault()}},onResize:()=>{f.current&&a.viewport&&c&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:fh(c.paddingLeft),paddingEnd:fh(c.paddingRight)}})}})}),Fj=T.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,a=Jn(Xr,n.__scopeScrollArea),[c,h]=T.useState(),f=T.useRef(null),m=dt(e,f,a.onScrollbarYChange);return T.useEffect(()=>{f.current&&h(getComputedStyle(f.current))},[f]),p.jsx(NI,{"data-orientation":"vertical",...i,ref:m,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zh(t)+"px",...n.style},onThumbPointerDown:y=>n.onThumbPointerDown(y.y),onDragScroll:y=>n.onDragScroll(y.y),onWheelScroll:(y,w)=>{if(a.viewport){const x=a.viewport.scrollTop+y.deltaY;n.onWheelScroll(x),LI(x,w)&&y.preventDefault()}},onResize:()=>{f.current&&a.viewport&&c&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:fh(c.paddingTop),paddingEnd:fh(c.paddingBottom)}})}})}),[Uj,kI]=SI(Xr),NI=T.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:c,onThumbPointerDown:h,onThumbPositionChange:f,onDragScroll:m,onWheelScroll:y,onResize:w,...x}=n,I=Jn(Xr,t),[k,C]=T.useState(null),A=dt(e,N=>C(N)),j=T.useRef(null),z=T.useRef(""),$=I.viewport,K=r.content-r.viewport,X=Kt(y),ne=Kt(f),P=ef(w,10);function b(N){if(j.current){const O=N.clientX-j.current.left,L=N.clientY-j.current.top;m({x:O,y:L})}}return T.useEffect(()=>{const N=O=>{const L=O.target;k?.contains(L)&&X(O,K)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[$,k,K,X]),T.useEffect(ne,[r,ne]),Qa(k,P),Qa(I.content,P),p.jsx(Uj,{scope:t,scrollbar:k,hasThumb:i,onThumbChange:Kt(a),onThumbPointerUp:Kt(c),onThumbPositionChange:ne,onThumbPointerDown:Kt(h),children:p.jsx(Xe.div,{...x,ref:A,style:{position:"absolute",...x.style},onPointerDown:Oe(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),j.current=k.getBoundingClientRect(),z.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),b(N))}),onPointerMove:Oe(n.onPointerMove,b),onPointerUp:Oe(n.onPointerUp,N=>{const O=N.target;O.hasPointerCapture(N.pointerId)&&O.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=z.current,I.viewport&&(I.viewport.style.scrollBehavior=""),j.current=null})})})}),hh="ScrollAreaThumb",PI=T.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=kI(hh,n.__scopeScrollArea);return p.jsx(Un,{present:t||i.hasThumb,children:p.jsx(zj,{ref:e,...r})})}),zj=T.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...i}=n,a=Jn(hh,t),c=kI(hh,t),{onThumbPositionChange:h}=c,f=dt(e,w=>c.onThumbChange(w)),m=T.useRef(void 0),y=ef(()=>{m.current&&(m.current(),m.current=void 0)},100);return T.useEffect(()=>{const w=a.viewport;if(w){const x=()=>{if(y(),!m.current){const I=Wj(w,h);m.current=I,h()}};return h(),w.addEventListener("scroll",x),()=>w.removeEventListener("scroll",x)}},[a.viewport,y,h]),p.jsx(Xe.div,{"data-state":c.hasThumb?"visible":"hidden",...i,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Oe(n.onPointerDownCapture,w=>{const I=w.target.getBoundingClientRect(),k=w.clientX-I.left,C=w.clientY-I.top;c.onThumbPointerDown({x:k,y:C})}),onPointerUp:Oe(n.onPointerUp,c.onThumbPointerUp)})});PI.displayName=hh;var Ey="ScrollAreaCorner",DI=T.forwardRef((n,e)=>{const t=Jn(Ey,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?p.jsx(Bj,{...n,ref:e}):null});DI.displayName=Ey;var Bj=T.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,i=Jn(Ey,t),[a,c]=T.useState(0),[h,f]=T.useState(0),m=!!(a&&h);return Qa(i.scrollbarX,()=>{const y=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(y),f(y)}),Qa(i.scrollbarY,()=>{const y=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(y),c(y)}),m?p.jsx(Xe.div,{...r,ref:e,style:{width:a,height:h,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function fh(n){return n?parseInt(n,10):0}function OI(n,e){const t=n/e;return isNaN(t)?0:t}function Zh(n){const e=OI(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function $j(n,e,t,r="ltr"){const i=Zh(t),a=i/2,c=e||a,h=i-c,f=t.scrollbar.paddingStart+c,m=t.scrollbar.size-t.scrollbar.paddingEnd-h,y=t.content-t.viewport,w=r==="ltr"?[0,y]:[y*-1,0];return MI([f,m],w)(n)}function mx(n,e,t="ltr"){const r=Zh(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,c=e.content-e.viewport,h=a-r,f=t==="ltr"?[0,c]:[c*-1,0],m=Dj(n,f);return MI([0,c],[0,h])(m)}function MI(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function LI(n,e){return n>0&&n<e}var Wj=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function i(){const a={left:n.scrollLeft,top:n.scrollTop},c=t.left!==a.left,h=t.top!==a.top;(c||h)&&e(),t=a,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function ef(n,e){const t=Kt(n),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Qa(n,e){const t=Kt(e);Xn(()=>{let r=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(r),i.unobserve(n)}}},[n,t])}var Hj=II,qj=CI,Gj=DI;function Ty({className:n,children:e,...t}){return p.jsxs(Hj,{"data-slot":"scroll-area",className:bt("relative",n),...t,children:[p.jsx(qj,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),p.jsx(Kj,{}),p.jsx(Gj,{})]})}function Kj({className:n,orientation:e="vertical",...t}){return p.jsx(AI,{"data-slot":"scroll-area-scrollbar",orientation:e,className:bt("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",n),...t,children:p.jsx(PI,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const jI="efxIXZk8hBcXsDtZomqJGDi2MQJHyOWW",VI="https://api.giphy.com/v1",Qj=async(n,e=20,t=0)=>{try{const r=await fetch(`${VI}/gifs/search?api_key=${jI}&q=${encodeURIComponent(n)}&limit=${e}&offset=${t}`);if(!r.ok)throw new Error("Failed to fetch GIFs");return await r.json()}catch(r){throw console.error("Error searching GIFs:",r),r}},Yj=async(n=20,e=0)=>{try{const t=await fetch(`${VI}/gifs/trending?api_key=${jI}&limit=${n}&offset=${e}`);if(!t.ok)throw new Error("Failed to fetch trending GIFs");return await t.json()}catch(t){throw console.error("Error fetching trending GIFs:",t),t}},Xj=["happy","love","funny","cute","excited","sad","angry","surprised","dance","party","food","cat","dog","reaction","hello","goodbye","yes","no","think","confused"],Jj=["سعيد","حب","مضحك","لطيف","متحمس","حزين","غاضب","مندهش","رقص","حفلة","طعام","قطة","كلب","ردة فعل","مرحبا","وداعا","نعم","لا","تفكير","محتار"];function Zj({isOpen:n,onClose:e,onSelectGif:t}){const[r,i]=T.useState([]),[a,c]=T.useState(""),[h,f]=T.useState(!1),[m,y]=T.useState("");T.useEffect(()=>{n&&r.length===0&&w()},[n]);const w=async()=>{f(!0),y("");try{const C=await Yj(20);i(C.data)}catch(C){y("فشل في تحميل الصور المتحركة"),console.error("Error loading trending GIFs:",C)}finally{f(!1)}},x=async C=>{if(!C.trim()){w();return}f(!0),y("");try{const A=await Qj(C,20);i(A.data)}catch(A){y("فشل في البحث عن الصور المتحركة"),console.error("Error searching GIFs:",A)}finally{f(!1)}},I=C=>{C.preventDefault(),x(a)},k=C=>{c(C),x(C)};return p.jsx(Do,{open:n,onOpenChange:e,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh]",dir:"rtl",children:[p.jsx(Mo,{children:p.jsxs(Lo,{className:"flex items-center justify-between",children:[p.jsx("span",{children:"اختر صورة متحركة"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:e,children:p.jsx(Po,{className:"w-4 h-4"})})]})}),p.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[p.jsx(qt,{value:a,onChange:C=>c(C.target.value),placeholder:"ابحث عن صورة متحركة...",className:"bg-gray-800 border-gray-600 text-white",dir:"rtl"}),p.jsx(ce,{type:"submit",size:"sm",className:"bg-green-600 hover:bg-green-700",children:p.jsx(uh,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsxs(ce,{variant:"outline",size:"sm",onClick:w,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[p.jsx(q0,{className:"w-3 h-3 ml-1"}),"الرائج"]}),Jj.slice(0,4).map((C,A)=>p.jsx(ce,{variant:"outline",size:"sm",onClick:()=>k(Xj[A]),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:C},C))]}),m&&p.jsx("div",{className:"text-red-400 text-sm text-center py-2",children:m}),p.jsx(Ty,{className:"h-[400px]",children:h?p.jsx("div",{className:"flex items-center justify-center h-40",children:p.jsx("div",{className:"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})}):r.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:[p.jsx(q0,{className:"w-12 h-12 mb-2"}),p.jsx("p",{children:"لم يتم العثور على صور متحركة"})]}):p.jsx("div",{className:"grid grid-cols-2 gap-2 p-2",children:r.map(C=>p.jsxs("div",{className:"relative cursor-pointer rounded-lg overflow-hidden hover:scale-105 transition-transform",onClick:()=>t(C),children:[p.jsx("img",{src:C.images.fixed_height.url,alt:C.title,className:"w-full h-auto object-cover",loading:"lazy"}),p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200"})]},C.id))})}),p.jsx("div",{className:"text-center text-xs text-gray-500",children:"مدعوم بواسطة GIPHY"})]})})}const eV=n=>(typeof n=="number"?new Date(n):new Date(n)).toLocaleTimeString("ar",{hour:"2-digit",minute:"2-digit"});function tV({user:n,onBack:e,currentUserId:t}){const[r,i]=T.useState(""),[a,c]=T.useState([]),[h,f]=T.useState(null),[m,y]=T.useState(!1),w=T.useRef(null),x=()=>{w.current?.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{(async()=>{if(t&&n.id){const $=await QO(t,n.id);f($)}})()},[t,n.id]),T.useEffect(()=>{if(!h)return;const z=JO(h,$=>{c($)});return()=>z()},[h]),T.useEffect(()=>{x()},[a]);const I=async()=>{if(r.trim()&&h){const z={content:r.trim(),senderId:t,isRead:!1};await z0(h,z),i("")}},k=z=>{z.key==="Enter"&&I()},C=async z=>{if(h){const $={content:`[GIF] ${z.images.fixed_height.url}`,senderId:t,isRead:!1};await z0(h,$),y(!1)}},A=()=>{console.log("Open photo/video picker")},j=z=>{if(z.content.startsWith("[GIF] ")){const $=z.content.replace("[GIF] ","");return p.jsx("div",{className:"rounded-lg overflow-hidden max-w-[200px]",children:p.jsx("img",{src:$,alt:"GIF",className:"w-full h-auto"})})}return p.jsx("p",{className:"leading-relaxed",children:z.content})};return p.jsxs("div",{className:"fixed inset-0 z-[60] min-h-screen bg-gradient-to-b from-gray-900 to-black flex flex-col",dir:"rtl",children:[p.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-sm border-b border-gray-800 p-4 flex items-center gap-3",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:p.jsx(Um,{className:"w-5 h-5"})}),p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-10 h-10",children:[p.jsx(Vn,{src:n.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:n.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-1 -left-1 w-3 h-3 rounded-full border-2 border-gray-900 ${n.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-white font-medium",children:n.displayName}),p.jsx("p",{className:"text-gray-400 text-sm",children:n.isOnline?"متصل":n.lastSeen||"آخر ظهور مؤخراً"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ce,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:p.jsx(RM,{className:"w-5 h-5"})}),p.jsx(ce,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:p.jsx(QM,{className:"w-5 h-5"})}),p.jsx(ce,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:p.jsx(iy,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-20",children:[p.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:p.jsx(bo,{className:"w-8 h-8 text-gray-400"})}),p.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"بداية المحادثة"}),p.jsxs("p",{className:"text-gray-500 text-sm",children:["أرسل رسالة لبدء المحادثة مع ",n.displayName]})]}):a.map(z=>{const $=z.senderId===t;return p.jsx("div",{className:`flex ${$?"justify-start":"justify-end"}`,children:p.jsxs("div",{className:`max-w-[70%] rounded-2xl px-4 py-2 ${$?"bg-green-600 text-white":"bg-gray-700 text-white"}`,children:[j(z),p.jsxs("div",{className:`flex items-center gap-1 mt-1 ${$?"justify-start":"justify-end"}`,children:[p.jsx("span",{className:"text-xs opacity-70",children:eV(z.timestamp)}),$&&p.jsx("div",{className:`w-2 h-2 rounded-full ${z.isRead?"bg-blue-400":"bg-gray-400"}`})]})]})},z.id)}),p.jsx("div",{ref:w})]}),p.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border-t border-gray-700 p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:A,className:"text-gray-400 hover:text-white",children:p.jsx(ch,{className:"w-5 h-5"})}),p.jsxs("div",{className:"flex-1 bg-gray-700 rounded-full flex items-center px-4 py-2",children:[p.jsx(qt,{value:r,onChange:z=>i(z.target.value),onKeyPress:k,placeholder:"اكتب رسالة...",className:"flex-1 bg-transparent border-none text-white placeholder-gray-400 focus:ring-0",dir:"rtl"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>y(!0),className:"text-gray-400 hover:text-white ml-2",children:p.jsx(SS,{className:"w-5 h-5"})})]}),p.jsx(ce,{onClick:I,disabled:!r.trim(),className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2",children:p.jsx(bo,{className:"w-4 h-4"})})]})}),p.jsx(Zj,{isOpen:m,onClose:()=>y(!1),onSelectGif:C})]})}function nV({stories:n,currentStoryIndex:e,currentContentIndex:t,onClose:r,onNext:i,onPrevious:a,onReply:c}){const[h,f]=T.useState(0),[m,y]=T.useState(""),[w,x]=T.useState(!1),I=n[e],k=I?.stories[t];T.useEffect(()=>{f(0);const A=setInterval(()=>{f(j=>j>=100?(i(),0):j+2)},100);return()=>clearInterval(A)},[e,t,i]);const C=()=>{m.trim()&&(c(I.id,m),y(""),x(!1))};return!I||!k?null:p.jsxs("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[p.jsx("div",{className:"absolute top-4 left-4 right-4 flex gap-1 z-10",children:I.stories.map((A,j)=>p.jsx("div",{className:"flex-1 h-1 bg-gray-600 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:j<t?"100%":j===t?`${h}%`:"0%"}})},j))}),p.jsxs("div",{className:"absolute top-8 left-4 right-4 flex items-center justify-between z-10 mt-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(jn,{className:"w-10 h-10 ring-2 ring-white",children:[p.jsx(Vn,{src:I.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:I.displayName.charAt(0)})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-white font-medium",children:I.displayName}),p.jsx("p",{className:"text-gray-300 text-sm",children:k.timestamp})]})]}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:r,className:"text-white hover:bg-white/20",children:p.jsx(Po,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[k.type==="image"?p.jsx("img",{src:k.content,alt:"Story",className:"max-w-full max-h-full object-contain"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{backgroundColor:k.backgroundColor||"#1f2937"},children:p.jsx("p",{className:"text-white text-center text-xl leading-relaxed max-w-md",children:k.content})}),p.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full cursor-pointer z-20",onClick:a}),p.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full cursor-pointer z-20",onClick:i})]}),p.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:w?p.jsxs("div",{className:"flex items-center gap-2 bg-black/50 rounded-full p-2",children:[p.jsx(qt,{value:m,onChange:A=>y(A.target.value),placeholder:`Reply to ${I.displayName}...`,className:"flex-1 bg-transparent border-none text-white placeholder-gray-300 focus:ring-0",onKeyPress:A=>A.key==="Enter"&&C()}),p.jsx(ce,{onClick:C,disabled:!m.trim(),className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2",children:p.jsx(bo,{className:"w-4 h-4"})})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(ce,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:p.jsx(Ga,{className:"w-5 h-5"})}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>x(!0),className:"text-white hover:bg-white/20",children:p.jsx(bo,{className:"w-5 h-5"})})]})}),e>0&&p.jsx(ce,{variant:"ghost",size:"sm",onClick:a,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-30",children:p.jsx(dM,{className:"w-6 h-6"})}),e<n.length-1&&p.jsx(ce,{variant:"ghost",size:"sm",onClick:i,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-30",children:p.jsx(fM,{className:"w-6 h-6"})})]})}function rV({isOpen:n,onClose:e,postId:t,comments:r,onAddComment:i,onLikeComment:a,onReplyToComment:c}){const[h,f]=T.useState(""),[m,y]=T.useState(null),[w,x]=T.useState(""),I=()=>{h.trim()&&(i(t,h),f(""))},k=A=>{w.trim()&&c&&(c(A,w),x(""),y(null))},C=({comment:A,isReply:j=!1})=>p.jsxs("div",{className:`flex gap-3 ${j?"ml-8 mt-2":"mb-4"}`,children:[p.jsxs(jn,{className:"w-8 h-8",children:[p.jsx(Vn,{src:A.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white text-sm",children:A.displayName.charAt(0)})]}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"bg-gray-800/50 rounded-2xl px-3 py-2",children:[p.jsx("p",{className:"text-white font-medium text-sm",children:A.displayName}),p.jsx("p",{className:"text-gray-100 text-sm leading-relaxed mt-1",children:A.content})]}),p.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[p.jsx("span",{children:A.timestamp}),p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>a&&a(A.id),className:`p-0 h-auto text-xs ${A.isLiked?"text-red-400":"text-gray-400 hover:text-red-400"}`,children:[p.jsx(Ga,{className:`w-3 h-3 mr-1 ${A.isLiked?"fill-current":""}`}),A.likes>0&&A.likes]}),!j&&p.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>y(A.id),className:"p-0 h-auto text-xs text-gray-400 hover:text-white",children:[p.jsx(PM,{className:"w-3 h-3 mr-1"}),"Reply"]})]}),m===A.id&&p.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[p.jsx(qt,{value:w,onChange:z=>x(z.target.value),placeholder:`Reply to ${A.displayName}...`,className:"flex-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 text-sm",onKeyPress:z=>z.key==="Enter"&&k(A.id)}),p.jsx(ce,{onClick:()=>k(A.id),disabled:!w.trim(),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 text-sm",children:p.jsx(bo,{className:"w-3 h-3"})})]}),A.replies&&A.replies.map(z=>p.jsx(C,{comment:z,isReply:!0},z.id))]})]});return p.jsx(Do,{open:n,onOpenChange:e,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh] p-0",children:[p.jsxs(Mo,{className:"p-4 border-b border-gray-700",children:[p.jsx(Lo,{className:"text-center",children:"Comments"}),p.jsx(il,{className:"text-center text-gray-400",children:"Join the conversation and share your thoughts"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:e,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:p.jsx(Po,{className:"w-5 h-5"})})]}),p.jsx(Ty,{className:"flex-1 p-4 max-h-[400px]",children:r.length===0?p.jsxs("div",{className:"text-center py-8",children:[p.jsx("p",{className:"text-gray-400",children:"No comments yet"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Be the first to comment!"})]}):r.map(A=>p.jsx(C,{comment:A},A.id))}),p.jsx("div",{className:"p-4 border-t border-gray-700",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(jn,{className:"w-8 h-8",children:[p.jsx(Vn,{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop&crop=face"}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:"You"})]}),p.jsx(qt,{value:h,onChange:A=>f(A.target.value),placeholder:"Add a comment...",className:"flex-1 bg-gray-800 border-gray-600 text-white placeholder-gray-400",onKeyPress:A=>A.key==="Enter"&&I()}),p.jsx(ce,{onClick:I,disabled:!h.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:p.jsx(bo,{className:"w-4 h-4"})})]})})]})})}function sV(n){const e=T.useRef({value:n,previous:n});return T.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function FI(n){const[e,t]=T.useState(void 0);return Xn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let c,h;if("borderBoxSize"in a){const f=a.borderBoxSize,m=Array.isArray(f)?f[0]:f;c=m.inlineSize,h=m.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tf="Checkbox",[iV]=Ps(tf),[oV,Sy]=iV(tf);function aV(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:a,form:c,name:h,onCheckedChange:f,required:m,value:y="on",internal_do_not_use_render:w}=n,[x,I]=Yh({prop:t,defaultProp:i??!1,onChange:f,caller:tf}),[k,C]=T.useState(null),[A,j]=T.useState(null),z=T.useRef(!1),$=k?!!c||!!k.closest("form"):!0,K={checked:x,disabled:a,setChecked:I,control:k,setControl:C,name:h,form:c,value:y,hasConsumerStoppedPropagationRef:z,required:m,defaultChecked:Si(i)?!1:i,isFormControl:$,bubbleInput:A,setBubbleInput:j};return p.jsx(oV,{scope:e,...K,children:lV(w)?w(K):r})}var UI="CheckboxTrigger",zI=T.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:a,value:c,disabled:h,checked:f,required:m,setControl:y,setChecked:w,hasConsumerStoppedPropagationRef:x,isFormControl:I,bubbleInput:k}=Sy(UI,n),C=dt(i,y),A=T.useRef(f);return T.useEffect(()=>{const j=a?.form;if(j){const z=()=>w(A.current);return j.addEventListener("reset",z),()=>j.removeEventListener("reset",z)}},[a,w]),p.jsx(Xe.button,{type:"button",role:"checkbox","aria-checked":Si(f)?"mixed":f,"aria-required":m,"data-state":GI(f),"data-disabled":h?"":void 0,disabled:h,value:c,...r,ref:C,onKeyDown:Oe(e,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Oe(t,j=>{w(z=>Si(z)?!0:!z),k&&I&&(x.current=j.isPropagationStopped(),x.current||j.stopPropagation())})})});zI.displayName=UI;var BI=T.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:a,required:c,disabled:h,value:f,onCheckedChange:m,form:y,...w}=n;return p.jsx(aV,{__scopeCheckbox:t,checked:i,defaultChecked:a,disabled:h,required:c,onCheckedChange:m,name:r,form:y,value:f,internal_do_not_use_render:({isFormControl:x})=>p.jsxs(p.Fragment,{children:[p.jsx(zI,{...w,ref:e,__scopeCheckbox:t}),x&&p.jsx(qI,{__scopeCheckbox:t})]})})});BI.displayName=tf;var $I="CheckboxIndicator",WI=T.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,a=Sy($I,t);return p.jsx(Un,{present:r||Si(a.checked)||a.checked===!0,children:p.jsx(Xe.span,{"data-state":GI(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});WI.displayName=$I;var HI="CheckboxBubbleInput",qI=T.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:c,required:h,disabled:f,name:m,value:y,form:w,bubbleInput:x,setBubbleInput:I}=Sy(HI,n),k=dt(t,I),C=sV(a),A=FI(r);T.useEffect(()=>{const z=x;if(!z)return;const $=window.HTMLInputElement.prototype,X=Object.getOwnPropertyDescriptor($,"checked").set,ne=!i.current;if(C!==a&&X){const P=new Event("click",{bubbles:ne});z.indeterminate=Si(a),X.call(z,Si(a)?!1:a),z.dispatchEvent(P)}},[x,C,a,i]);const j=T.useRef(Si(a)?!1:a);return p.jsx(Xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??j.current,required:h,disabled:f,name:m,value:y,form:w,...e,tabIndex:-1,ref:k,style:{...e.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qI.displayName=HI;function lV(n){return typeof n=="function"}function Si(n){return n==="indeterminate"}function GI(n){return Si(n)?"indeterminate":n?"checked":"unchecked"}function cV({className:n,...e}){return p.jsx(BI,{"data-slot":"checkbox",className:bt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:p.jsx(WI,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(cM,{className:"size-3.5"})})})}function uV({isOpen:n,onClose:e,postId:t,users:r,onShare:i}){const[a,c]=T.useState([]),[h,f]=T.useState(""),[m,y]=T.useState(""),w=r.filter(C=>C.displayName.toLowerCase().includes(h.toLowerCase())||C.username.toLowerCase().includes(h.toLowerCase())),x=C=>{c(A=>A.includes(C)?A.filter(j=>j!==C):[...A,C])},I=()=>{a.length>0&&(i(t,a,m||void 0),c([]),y(""),f(""),e())},k=()=>{c([]),y(""),f(""),e()};return p.jsx(Do,{open:n,onOpenChange:k,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md max-h-[80vh] p-0",children:[p.jsxs(Mo,{className:"p-4 border-b border-gray-700",children:[p.jsx(Lo,{className:"text-center",children:"Share Post"}),p.jsx(il,{className:"text-center text-gray-400",children:"Share this post with your friends and connections"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:k,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:p.jsx(Po,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"p-4 border-b border-gray-700",children:p.jsxs("div",{className:"relative",children:[p.jsx(uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),p.jsx(qt,{value:h,onChange:C=>f(C.target.value),placeholder:"Search users...",className:"pl-10 bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]})}),p.jsx(Ty,{className:"flex-1 max-h-[300px]",children:p.jsxs("div",{className:"p-4 space-y-3",children:[w.map(C=>p.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-800/50",children:[p.jsx(cV,{checked:a.includes(C.id),onCheckedChange:()=>x(C.id),className:"border-gray-600"}),p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-10 h-10",children:[p.jsx(Vn,{src:C.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white",children:C.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-gray-900 ${C.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-white font-medium",children:C.displayName}),p.jsxs("p",{className:"text-gray-400 text-sm",children:["@",C.username]})]})]},C.id)),w.length===0&&p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-gray-400",children:"No users found"})})]})}),a.length>0&&p.jsx("div",{className:"px-4 py-2 bg-gray-800/50",children:p.jsxs("p",{className:"text-sm text-gray-300",children:[a.length," user",a.length!==1?"s":""," selected"]})}),p.jsxs("div",{className:"p-4 border-t border-gray-700",children:[p.jsx(qt,{value:m,onChange:C=>y(C.target.value),placeholder:"Add a message (optional)...",className:"mb-3 bg-gray-800 border-gray-600 text-white placeholder-gray-400"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ce,{variant:"outline",onClick:k,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),p.jsxs(ce,{onClick:I,disabled:a.length===0,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[p.jsx(bo,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})]})})}function KI(n){const e=n+"CollectionProvider",[t,r]=Ps(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:A,children:j}=C,z=di.useRef(null),$=di.useRef(new Map).current;return p.jsx(i,{scope:A,itemMap:$,collectionRef:z,children:j})};c.displayName=e;const h=n+"CollectionSlot",f=Ka(h),m=di.forwardRef((C,A)=>{const{scope:j,children:z}=C,$=a(h,j),K=dt(A,$.collectionRef);return p.jsx(f,{ref:K,children:z})});m.displayName=h;const y=n+"CollectionItemSlot",w="data-radix-collection-item",x=Ka(y),I=di.forwardRef((C,A)=>{const{scope:j,children:z,...$}=C,K=di.useRef(null),X=dt(A,K),ne=a(y,j);return di.useEffect(()=>(ne.itemMap.set(K,{ref:K,...$}),()=>void ne.itemMap.delete(K))),p.jsx(x,{[w]:"",ref:X,children:z})});I.displayName=y;function k(C){const A=a(n+"CollectionConsumer",C);return di.useCallback(()=>{const z=A.collectionRef.current;if(!z)return[];const $=Array.from(z.querySelectorAll(`[${w}]`));return Array.from(A.itemMap.values()).sort((ne,P)=>$.indexOf(ne.ref.current)-$.indexOf(P.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:c,Slot:m,ItemSlot:I},k,r]}const dV=["top","right","bottom","left"],Di=Math.min,Pn=Math.max,ph=Math.round,Ad=Math.floor,Gr=n=>({x:n,y:n}),hV={left:"right",right:"left",bottom:"top",top:"bottom"},fV={start:"end",end:"start"};function qm(n,e,t){return Pn(n,Di(e,t))}function Cs(n,e){return typeof n=="function"?n(e):n}function As(n){return n.split("-")[0]}function ol(n){return n.split("-")[1]}function Iy(n){return n==="x"?"y":"x"}function by(n){return n==="y"?"height":"width"}const pV=new Set(["top","bottom"]);function Vr(n){return pV.has(As(n))?"y":"x"}function Cy(n){return Iy(Vr(n))}function mV(n,e,t){t===void 0&&(t=!1);const r=ol(n),i=Cy(n),a=by(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=mh(c)),[c,mh(c)]}function gV(n){const e=mh(n);return[Gm(n),e,Gm(e)]}function Gm(n){return n.replace(/start|end/g,e=>fV[e])}const gx=["left","right"],yx=["right","left"],yV=["top","bottom"],vV=["bottom","top"];function _V(n,e,t){switch(n){case"top":case"bottom":return t?e?yx:gx:e?gx:yx;case"left":case"right":return e?yV:vV;default:return[]}}function wV(n,e,t,r){const i=ol(n);let a=_V(As(n),t==="start",r);return i&&(a=a.map(c=>c+"-"+i),e&&(a=a.concat(a.map(Gm)))),a}function mh(n){return n.replace(/left|right|bottom|top/g,e=>hV[e])}function xV(n){return{top:0,right:0,bottom:0,left:0,...n}}function QI(n){return typeof n!="number"?xV(n):{top:n,right:n,bottom:n,left:n}}function gh(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function vx(n,e,t){let{reference:r,floating:i}=n;const a=Vr(e),c=Cy(e),h=by(c),f=As(e),m=a==="y",y=r.x+r.width/2-i.width/2,w=r.y+r.height/2-i.height/2,x=r[h]/2-i[h]/2;let I;switch(f){case"top":I={x:y,y:r.y-i.height};break;case"bottom":I={x:y,y:r.y+r.height};break;case"right":I={x:r.x+r.width,y:w};break;case"left":I={x:r.x-i.width,y:w};break;default:I={x:r.x,y:r.y}}switch(ol(e)){case"start":I[c]-=x*(t&&m?-1:1);break;case"end":I[c]+=x*(t&&m?-1:1);break}return I}const EV=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:c}=t,h=a.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:y,y:w}=vx(m,r,f),x=r,I={},k=0;for(let C=0;C<h.length;C++){const{name:A,fn:j}=h[C],{x:z,y:$,data:K,reset:X}=await j({x:y,y:w,initialPlacement:r,placement:x,strategy:i,middlewareData:I,rects:m,platform:c,elements:{reference:n,floating:e}});y=z??y,w=$??w,I={...I,[A]:{...I[A],...K}},X&&k<=50&&(k++,typeof X=="object"&&(X.placement&&(x=X.placement),X.rects&&(m=X.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):X.rects),{x:y,y:w}=vx(m,x,f)),C=-1)}return{x:y,y:w,placement:x,strategy:i,middlewareData:I}};async function Rc(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:c,elements:h,strategy:f}=n,{boundary:m="clippingAncestors",rootBoundary:y="viewport",elementContext:w="floating",altBoundary:x=!1,padding:I=0}=Cs(e,n),k=QI(I),A=h[x?w==="floating"?"reference":"floating":w],j=gh(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(A)))==null||t?A:A.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(h.floating)),boundary:m,rootBoundary:y,strategy:f})),z=w==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,$=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h.floating)),K=await(a.isElement==null?void 0:a.isElement($))?await(a.getScale==null?void 0:a.getScale($))||{x:1,y:1}:{x:1,y:1},X=gh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:z,offsetParent:$,strategy:f}):z);return{top:(j.top-X.top+k.top)/K.y,bottom:(X.bottom-j.bottom+k.bottom)/K.y,left:(j.left-X.left+k.left)/K.x,right:(X.right-j.right+k.right)/K.x}}const TV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:c,elements:h,middlewareData:f}=e,{element:m,padding:y=0}=Cs(n,e)||{};if(m==null)return{};const w=QI(y),x={x:t,y:r},I=Cy(i),k=by(I),C=await c.getDimensions(m),A=I==="y",j=A?"top":"left",z=A?"bottom":"right",$=A?"clientHeight":"clientWidth",K=a.reference[k]+a.reference[I]-x[I]-a.floating[k],X=x[I]-a.reference[I],ne=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let P=ne?ne[$]:0;(!P||!await(c.isElement==null?void 0:c.isElement(ne)))&&(P=h.floating[$]||a.floating[k]);const b=K/2-X/2,N=P/2-C[k]/2-1,O=Di(w[j],N),L=Di(w[z],N),F=O,D=P-C[k]-L,Te=P/2-C[k]/2+b,Me=qm(F,Te,D),Se=!f.arrow&&ol(i)!=null&&Te!==Me&&a.reference[k]/2-(Te<F?O:L)-C[k]/2<0,Ie=Se?Te<F?Te-F:Te-D:0;return{[I]:x[I]+Ie,data:{[I]:Me,centerOffset:Te-Me-Ie,...Se&&{alignmentOffset:Ie}},reset:Se}}}),SV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:c,initialPlacement:h,platform:f,elements:m}=e,{mainAxis:y=!0,crossAxis:w=!0,fallbackPlacements:x,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:C=!0,...A}=Cs(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const j=As(i),z=Vr(h),$=As(h)===h,K=await(f.isRTL==null?void 0:f.isRTL(m.floating)),X=x||($||!C?[mh(h)]:gV(h)),ne=k!=="none";!x&&ne&&X.push(...wV(h,C,k,K));const P=[h,...X],b=await Rc(e,A),N=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(y&&N.push(b[j]),w){const Te=mV(i,c,K);N.push(b[Te[0]],b[Te[1]])}if(O=[...O,{placement:i,overflows:N}],!N.every(Te=>Te<=0)){var L,F;const Te=(((L=a.flip)==null?void 0:L.index)||0)+1,Me=P[Te];if(Me&&(!(w==="alignment"?z!==Vr(Me):!1)||O.every(W=>Vr(W.placement)===z?W.overflows[0]>0:!0)))return{data:{index:Te,overflows:O},reset:{placement:Me}};let Se=(F=O.filter(Ie=>Ie.overflows[0]<=0).sort((Ie,W)=>Ie.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!Se)switch(I){case"bestFit":{var D;const Ie=(D=O.filter(W=>{if(ne){const J=Vr(W.placement);return J===z||J==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(J=>J>0).reduce((J,oe)=>J+oe,0)]).sort((W,J)=>W[1]-J[1])[0])==null?void 0:D[0];Ie&&(Se=Ie);break}case"initialPlacement":Se=h;break}if(i!==Se)return{reset:{placement:Se}}}return{}}}};function _x(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function wx(n){return dV.some(e=>n[e]>=0)}const IV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Cs(n,e);switch(r){case"referenceHidden":{const a=await Rc(e,{...i,elementContext:"reference"}),c=_x(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:wx(c)}}}case"escaped":{const a=await Rc(e,{...i,altBoundary:!0}),c=_x(a,t.floating);return{data:{escapedOffsets:c,escaped:wx(c)}}}default:return{}}}}},YI=new Set(["left","top"]);async function bV(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=As(t),h=ol(t),f=Vr(t)==="y",m=YI.has(c)?-1:1,y=a&&f?-1:1,w=Cs(e,n);let{mainAxis:x,crossAxis:I,alignmentAxis:k}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return h&&typeof k=="number"&&(I=h==="end"?k*-1:k),f?{x:I*y,y:x*m}:{x:x*m,y:I*y}}const CV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:c,middlewareData:h}=e,f=await bV(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:a+f.y,data:{...f,placement:c}}}}},AV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:h={fn:A=>{let{x:j,y:z}=A;return{x:j,y:z}}},...f}=Cs(n,e),m={x:t,y:r},y=await Rc(e,f),w=Vr(As(i)),x=Iy(w);let I=m[x],k=m[w];if(a){const A=x==="y"?"top":"left",j=x==="y"?"bottom":"right",z=I+y[A],$=I-y[j];I=qm(z,I,$)}if(c){const A=w==="y"?"top":"left",j=w==="y"?"bottom":"right",z=k+y[A],$=k-y[j];k=qm(z,k,$)}const C=h.fn({...e,[x]:I,[w]:k});return{...C,data:{x:C.x-t,y:C.y-r,enabled:{[x]:a,[w]:c}}}}}},RV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:c}=e,{offset:h=0,mainAxis:f=!0,crossAxis:m=!0}=Cs(n,e),y={x:t,y:r},w=Vr(i),x=Iy(w);let I=y[x],k=y[w];const C=Cs(h,e),A=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const $=x==="y"?"height":"width",K=a.reference[x]-a.floating[$]+A.mainAxis,X=a.reference[x]+a.reference[$]-A.mainAxis;I<K?I=K:I>X&&(I=X)}if(m){var j,z;const $=x==="y"?"width":"height",K=YI.has(As(i)),X=a.reference[w]-a.floating[$]+(K&&((j=c.offset)==null?void 0:j[w])||0)+(K?0:A.crossAxis),ne=a.reference[w]+a.reference[$]+(K?0:((z=c.offset)==null?void 0:z[w])||0)-(K?A.crossAxis:0);k<X?k=X:k>ne&&(k=ne)}return{[x]:I,[w]:k}}}},kV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:c,elements:h}=e,{apply:f=()=>{},...m}=Cs(n,e),y=await Rc(e,m),w=As(i),x=ol(i),I=Vr(i)==="y",{width:k,height:C}=a.floating;let A,j;w==="top"||w==="bottom"?(A=w,j=x===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(j=w,A=x==="end"?"top":"bottom");const z=C-y.top-y.bottom,$=k-y.left-y.right,K=Di(C-y[A],z),X=Di(k-y[j],$),ne=!e.middlewareData.shift;let P=K,b=X;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(b=$),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=z),ne&&!x){const O=Pn(y.left,0),L=Pn(y.right,0),F=Pn(y.top,0),D=Pn(y.bottom,0);I?b=k-2*(O!==0||L!==0?O+L:Pn(y.left,y.right)):P=C-2*(F!==0||D!==0?F+D:Pn(y.top,y.bottom))}await f({...e,availableWidth:b,availableHeight:P});const N=await c.getDimensions(h.floating);return k!==N.width||C!==N.height?{reset:{rects:!0}}:{}}}};function nf(){return typeof window<"u"}function al(n){return XI(n)?(n.nodeName||"").toLowerCase():"#document"}function Ln(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(n){var e;return(e=(XI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function XI(n){return nf()?n instanceof Node||n instanceof Ln(n).Node:!1}function pr(n){return nf()?n instanceof Element||n instanceof Ln(n).Element:!1}function Qr(n){return nf()?n instanceof HTMLElement||n instanceof Ln(n).HTMLElement:!1}function xx(n){return!nf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ln(n).ShadowRoot}const NV=new Set(["inline","contents"]);function Kc(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=mr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!NV.has(i)}const PV=new Set(["table","td","th"]);function DV(n){return PV.has(al(n))}const OV=[":popover-open",":modal"];function rf(n){return OV.some(e=>{try{return n.matches(e)}catch{return!1}})}const MV=["transform","translate","scale","rotate","perspective"],LV=["transform","translate","scale","rotate","perspective","filter"],jV=["paint","layout","strict","content"];function Ay(n){const e=Ry(),t=pr(n)?mr(n):n;return MV.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||LV.some(r=>(t.willChange||"").includes(r))||jV.some(r=>(t.contain||"").includes(r))}function VV(n){let e=Oi(n);for(;Qr(e)&&!Ya(e);){if(Ay(e))return e;if(rf(e))return null;e=Oi(e)}return null}function Ry(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FV=new Set(["html","body","#document"]);function Ya(n){return FV.has(al(n))}function mr(n){return Ln(n).getComputedStyle(n)}function sf(n){return pr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Oi(n){if(al(n)==="html")return n;const e=n.assignedSlot||n.parentNode||xx(n)&&n.host||Jr(n);return xx(e)?e.host:e}function JI(n){const e=Oi(n);return Ya(e)?n.ownerDocument?n.ownerDocument.body:n.body:Qr(e)&&Kc(e)?e:JI(e)}function kc(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=JI(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),c=Ln(i);if(a){const h=Km(c);return e.concat(c,c.visualViewport||[],Kc(i)?i:[],h&&t?kc(h):[])}return e.concat(i,kc(i,[],t))}function Km(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function ZI(n){const e=mr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Qr(n),a=i?n.offsetWidth:t,c=i?n.offsetHeight:r,h=ph(t)!==a||ph(r)!==c;return h&&(t=a,r=c),{width:t,height:r,$:h}}function ky(n){return pr(n)?n:n.contextElement}function Ua(n){const e=ky(n);if(!Qr(e))return Gr(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=ZI(e);let c=(a?ph(t.width):t.width)/r,h=(a?ph(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const UV=Gr(0);function eb(n){const e=Ln(n);return!Ry()||!e.visualViewport?UV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ln(n)?!1:e}function Ao(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=ky(n);let c=Gr(1);e&&(r?pr(r)&&(c=Ua(r)):c=Ua(n));const h=zV(a,t,r)?eb(a):Gr(0);let f=(i.left+h.x)/c.x,m=(i.top+h.y)/c.y,y=i.width/c.x,w=i.height/c.y;if(a){const x=Ln(a),I=r&&pr(r)?Ln(r):r;let k=x,C=Km(k);for(;C&&r&&I!==k;){const A=Ua(C),j=C.getBoundingClientRect(),z=mr(C),$=j.left+(C.clientLeft+parseFloat(z.paddingLeft))*A.x,K=j.top+(C.clientTop+parseFloat(z.paddingTop))*A.y;f*=A.x,m*=A.y,y*=A.x,w*=A.y,f+=$,m+=K,k=Ln(C),C=Km(k)}}return gh({width:y,height:w,x:f,y:m})}function of(n,e){const t=sf(n).scrollLeft;return e?e.left+t:Ao(Jr(n)).left+t}function tb(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-of(n,t),i=t.top+e.scrollTop;return{x:r,y:i}}function BV(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",c=Jr(r),h=e?rf(e.floating):!1;if(r===c||h&&a)return t;let f={scrollLeft:0,scrollTop:0},m=Gr(1);const y=Gr(0),w=Qr(r);if((w||!w&&!a)&&((al(r)!=="body"||Kc(c))&&(f=sf(r)),Qr(r))){const I=Ao(r);m=Ua(r),y.x=I.x+r.clientLeft,y.y=I.y+r.clientTop}const x=c&&!w&&!a?tb(c,f):Gr(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-f.scrollLeft*m.x+y.x+x.x,y:t.y*m.y-f.scrollTop*m.y+y.y+x.y}}function $V(n){return Array.from(n.getClientRects())}function WV(n){const e=Jr(n),t=sf(n),r=n.ownerDocument.body,i=Pn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Pn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+of(n);const h=-t.scrollTop;return mr(r).direction==="rtl"&&(c+=Pn(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:h}}const Ex=25;function HV(n,e){const t=Ln(n),r=Jr(n),i=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,h=0,f=0;if(i){a=i.width,c=i.height;const y=Ry();(!y||y&&e==="fixed")&&(h=i.offsetLeft,f=i.offsetTop)}const m=of(r);if(m<=0){const y=r.ownerDocument,w=y.body,x=getComputedStyle(w),I=y.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,k=Math.abs(r.clientWidth-w.clientWidth-I);k<=Ex&&(a-=k)}else m<=Ex&&(a+=m);return{width:a,height:c,x:h,y:f}}const qV=new Set(["absolute","fixed"]);function GV(n,e){const t=Ao(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=Qr(n)?Ua(n):Gr(1),c=n.clientWidth*a.x,h=n.clientHeight*a.y,f=i*a.x,m=r*a.y;return{width:c,height:h,x:f,y:m}}function Tx(n,e,t){let r;if(e==="viewport")r=HV(n,t);else if(e==="document")r=WV(Jr(n));else if(pr(e))r=GV(e,t);else{const i=eb(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return gh(r)}function nb(n,e){const t=Oi(n);return t===e||!pr(t)||Ya(t)?!1:mr(t).position==="fixed"||nb(t,e)}function KV(n,e){const t=e.get(n);if(t)return t;let r=kc(n,[],!1).filter(h=>pr(h)&&al(h)!=="body"),i=null;const a=mr(n).position==="fixed";let c=a?Oi(n):n;for(;pr(c)&&!Ya(c);){const h=mr(c),f=Ay(c);!f&&h.position==="fixed"&&(i=null),(a?!f&&!i:!f&&h.position==="static"&&!!i&&qV.has(i.position)||Kc(c)&&!f&&nb(n,c))?r=r.filter(y=>y!==c):i=h,c=Oi(c)}return e.set(n,r),r}function QV(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?rf(e)?[]:KV(e,this._c):[].concat(t),r],h=c[0],f=c.reduce((m,y)=>{const w=Tx(e,y,i);return m.top=Pn(w.top,m.top),m.right=Di(w.right,m.right),m.bottom=Di(w.bottom,m.bottom),m.left=Pn(w.left,m.left),m},Tx(e,h,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function YV(n){const{width:e,height:t}=ZI(n);return{width:e,height:t}}function XV(n,e,t){const r=Qr(e),i=Jr(e),a=t==="fixed",c=Ao(n,!0,a,e);let h={scrollLeft:0,scrollTop:0};const f=Gr(0);function m(){f.x=of(i)}if(r||!r&&!a)if((al(e)!=="body"||Kc(i))&&(h=sf(e)),r){const I=Ao(e,!0,a,e);f.x=I.x+e.clientLeft,f.y=I.y+e.clientTop}else i&&m();a&&!r&&i&&m();const y=i&&!r&&!a?tb(i,h):Gr(0),w=c.left+h.scrollLeft-f.x-y.x,x=c.top+h.scrollTop-f.y-y.y;return{x:w,y:x,width:c.width,height:c.height}}function cm(n){return mr(n).position==="static"}function Sx(n,e){if(!Qr(n)||mr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Jr(n)===t&&(t=t.ownerDocument.body),t}function rb(n,e){const t=Ln(n);if(rf(n))return t;if(!Qr(n)){let i=Oi(n);for(;i&&!Ya(i);){if(pr(i)&&!cm(i))return i;i=Oi(i)}return t}let r=Sx(n,e);for(;r&&DV(r)&&cm(r);)r=Sx(r,e);return r&&Ya(r)&&cm(r)&&!Ay(r)?t:r||VV(n)||t}const JV=async function(n){const e=this.getOffsetParent||rb,t=this.getDimensions,r=await t(n.floating);return{reference:XV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ZV(n){return mr(n).direction==="rtl"}const eF={convertOffsetParentRelativeRectToViewportRelativeRect:BV,getDocumentElement:Jr,getClippingRect:QV,getOffsetParent:rb,getElementRects:JV,getClientRects:$V,getDimensions:YV,getScale:Ua,isElement:pr,isRTL:ZV};function sb(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function tF(n,e){let t=null,r;const i=Jr(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:y,top:w,width:x,height:I}=m;if(h||e(),!x||!I)return;const k=Ad(w),C=Ad(i.clientWidth-(y+x)),A=Ad(i.clientHeight-(w+I)),j=Ad(y),$={rootMargin:-k+"px "+-C+"px "+-A+"px "+-j+"px",threshold:Pn(0,Di(1,f))||1};let K=!0;function X(ne){const P=ne[0].intersectionRatio;if(P!==f){if(!K)return c();P?c(!1,P):r=setTimeout(()=>{c(!1,1e-7)},1e3)}P===1&&!sb(m,n.getBoundingClientRect())&&c(),K=!1}try{t=new IntersectionObserver(X,{...$,root:i.ownerDocument})}catch{t=new IntersectionObserver(X,$)}t.observe(n)}return c(!0),a}function nF(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=ky(n),y=i||a?[...m?kc(m):[],...kc(e)]:[];y.forEach(j=>{i&&j.addEventListener("scroll",t,{passive:!0}),a&&j.addEventListener("resize",t)});const w=m&&h?tF(m,t):null;let x=-1,I=null;c&&(I=new ResizeObserver(j=>{let[z]=j;z&&z.target===m&&I&&(I.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var $;($=I)==null||$.observe(e)})),t()}),m&&!f&&I.observe(m),I.observe(e));let k,C=f?Ao(n):null;f&&A();function A(){const j=Ao(n);C&&!sb(C,j)&&t(),C=j,k=requestAnimationFrame(A)}return t(),()=>{var j;y.forEach(z=>{i&&z.removeEventListener("scroll",t),a&&z.removeEventListener("resize",t)}),w?.(),(j=I)==null||j.disconnect(),I=null,f&&cancelAnimationFrame(k)}}const rF=CV,sF=AV,iF=SV,oF=kV,aF=IV,Ix=TV,lF=RV,cF=(n,e,t)=>{const r=new Map,i={platform:eF,...t},a={...i.platform,_c:r};return EV(n,e,{...i,platform:a})};var uF=typeof document<"u",dF=function(){},Bd=uF?T.useLayoutEffect:dF;function yh(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!yh(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!yh(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function ib(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function bx(n,e){const t=ib(n);return Math.round(e*t)/t}function um(n){const e=T.useRef(n);return Bd(()=>{e.current=n}),e}function hF(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:c}={},transform:h=!0,whileElementsMounted:f,open:m}=n,[y,w]=T.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[x,I]=T.useState(r);yh(x,r)||I(r);const[k,C]=T.useState(null),[A,j]=T.useState(null),z=T.useCallback(W=>{W!==ne.current&&(ne.current=W,C(W))},[]),$=T.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),K=a||k,X=c||A,ne=T.useRef(null),P=T.useRef(null),b=T.useRef(y),N=f!=null,O=um(f),L=um(i),F=um(m),D=T.useCallback(()=>{if(!ne.current||!P.current)return;const W={placement:e,strategy:t,middleware:x};L.current&&(W.platform=L.current),cF(ne.current,P.current,W).then(J=>{const oe={...J,isPositioned:F.current!==!1};Te.current&&!yh(b.current,oe)&&(b.current=oe,uy.flushSync(()=>{w(oe)}))})},[x,e,t,L,F]);Bd(()=>{m===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,w(W=>({...W,isPositioned:!1})))},[m]);const Te=T.useRef(!1);Bd(()=>(Te.current=!0,()=>{Te.current=!1}),[]),Bd(()=>{if(K&&(ne.current=K),X&&(P.current=X),K&&X){if(O.current)return O.current(K,X,D);D()}},[K,X,D,O,N]);const Me=T.useMemo(()=>({reference:ne,floating:P,setReference:z,setFloating:$}),[z,$]),Se=T.useMemo(()=>({reference:K,floating:X}),[K,X]),Ie=T.useMemo(()=>{const W={position:t,left:0,top:0};if(!Se.floating)return W;const J=bx(Se.floating,y.x),oe=bx(Se.floating,y.y);return h?{...W,transform:"translate("+J+"px, "+oe+"px)",...ib(Se.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:oe}},[t,h,Se.floating,y.x,y.y]);return T.useMemo(()=>({...y,update:D,refs:Me,elements:Se,floatingStyles:Ie}),[y,D,Me,Se,Ie])}const fF=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Ix({element:r.current,padding:i}).fn(t):{}:r?Ix({element:r,padding:i}).fn(t):{}}}},pF=(n,e)=>({...rF(n),options:[n,e]}),mF=(n,e)=>({...sF(n),options:[n,e]}),gF=(n,e)=>({...lF(n),options:[n,e]}),yF=(n,e)=>({...iF(n),options:[n,e]}),vF=(n,e)=>({...oF(n),options:[n,e]}),_F=(n,e)=>({...aF(n),options:[n,e]}),wF=(n,e)=>({...fF(n),options:[n,e]});var xF="Arrow",ob=T.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return p.jsx(Xe.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});ob.displayName=xF;var EF=ob,Ny="Popper",[ab,lb]=Ps(Ny),[TF,cb]=ab(Ny),ub=n=>{const{__scopePopper:e,children:t}=n,[r,i]=T.useState(null);return p.jsx(TF,{scope:e,anchor:r,onAnchorChange:i,children:t})};ub.displayName=Ny;var db="PopperAnchor",hb=T.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=cb(db,t),c=T.useRef(null),h=dt(e,c),f=T.useRef(null);return T.useEffect(()=>{const m=f.current;f.current=r?.current||c.current,m!==f.current&&a.onAnchorChange(f.current)}),r?null:p.jsx(Xe.div,{...i,ref:h})});hb.displayName=db;var Py="PopperContent",[SF,IF]=ab(Py),fb=T.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:y=0,sticky:w="partial",hideWhenDetached:x=!1,updatePositionStrategy:I="optimized",onPlaced:k,...C}=n,A=cb(Py,t),[j,z]=T.useState(null),$=dt(e,de=>z(de)),[K,X]=T.useState(null),ne=FI(K),P=ne?.width??0,b=ne?.height??0,N=r+(a!=="center"?"-"+a:""),O=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},L=Array.isArray(m)?m:[m],F=L.length>0,D={padding:O,boundary:L.filter(CF),altBoundary:F},{refs:Te,floatingStyles:Me,placement:Se,isPositioned:Ie,middlewareData:W}=hF({strategy:"fixed",placement:N,whileElementsMounted:(...de)=>nF(...de,{animationFrame:I==="always"}),elements:{reference:A.anchor},middleware:[pF({mainAxis:i+b,alignmentAxis:c}),f&&mF({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?gF():void 0,...D}),f&&yF({...D}),vF({...D,apply:({elements:de,rects:Ve,availableWidth:We,availableHeight:ht})=>{const{width:hn,height:fn}=Ve.reference,an=de.floating.style;an.setProperty("--radix-popper-available-width",`${We}px`),an.setProperty("--radix-popper-available-height",`${ht}px`),an.setProperty("--radix-popper-anchor-width",`${hn}px`),an.setProperty("--radix-popper-anchor-height",`${fn}px`)}}),K&&wF({element:K,padding:h}),AF({arrowWidth:P,arrowHeight:b}),x&&_F({strategy:"referenceHidden",...D})]}),[J,oe]=gb(Se),B=Kt(k);Xn(()=>{Ie&&B?.()},[Ie,B]);const Z=W.arrow?.x,pe=W.arrow?.y,ge=W.arrow?.centerOffset!==0,[Re,Ne]=T.useState();return Xn(()=>{j&&Ne(window.getComputedStyle(j).zIndex)},[j]),p.jsx("div",{ref:Te.setFloating,"data-radix-popper-content-wrapper":"",style:{...Me,transform:Ie?Me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:p.jsx(SF,{scope:t,placedSide:J,onArrowChange:X,arrowX:Z,arrowY:pe,shouldHideArrow:ge,children:p.jsx(Xe.div,{"data-side":J,"data-align":oe,...C,ref:$,style:{...C.style,animation:Ie?void 0:"none"}})})})});fb.displayName=Py;var pb="PopperArrow",bF={top:"bottom",right:"left",bottom:"top",left:"right"},mb=T.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=IF(pb,r),c=bF[a.placedSide];return p.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:p.jsx(EF,{...i,ref:t,style:{...i.style,display:"block"}})})});mb.displayName=pb;function CF(n){return n!==null}var AF=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:i}=e,c=i.arrow?.centerOffset!==0,h=c?0:n.arrowWidth,f=c?0:n.arrowHeight,[m,y]=gb(t),w={start:"0%",center:"50%",end:"100%"}[y],x=(i.arrow?.x??0)+h/2,I=(i.arrow?.y??0)+f/2;let k="",C="";return m==="bottom"?(k=c?w:`${x}px`,C=`${-f}px`):m==="top"?(k=c?w:`${x}px`,C=`${r.floating.height+f}px`):m==="right"?(k=`${-f}px`,C=c?w:`${I}px`):m==="left"&&(k=`${r.floating.width+f}px`,C=c?w:`${I}px`),{data:{x:k,y:C}}}});function gb(n){const[e,t="center"]=n.split("-");return[e,t]}var RF=ub,kF=hb,NF=fb,PF=mb,dm="rovingFocusGroup.onEntryFocus",DF={bubbles:!1,cancelable:!0},Qc="RovingFocusGroup",[Qm,yb,OF]=KI(Qc),[MF,vb]=Ps(Qc,[OF]),[LF,jF]=MF(Qc),_b=T.forwardRef((n,e)=>p.jsx(Qm.Provider,{scope:n.__scopeRovingFocusGroup,children:p.jsx(Qm.Slot,{scope:n.__scopeRovingFocusGroup,children:p.jsx(VF,{...n,ref:e})})}));_b.displayName=Qc;var VF=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:y=!1,...w}=n,x=T.useRef(null),I=dt(e,x),k=_y(a),[C,A]=Yh({prop:c,defaultProp:h??null,onChange:f,caller:Qc}),[j,z]=T.useState(!1),$=Kt(m),K=yb(t),X=T.useRef(!1),[ne,P]=T.useState(0);return T.useEffect(()=>{const b=x.current;if(b)return b.addEventListener(dm,$),()=>b.removeEventListener(dm,$)},[$]),p.jsx(LF,{scope:t,orientation:r,dir:k,loop:i,currentTabStopId:C,onItemFocus:T.useCallback(b=>A(b),[A]),onItemShiftTab:T.useCallback(()=>z(!0),[]),onFocusableItemAdd:T.useCallback(()=>P(b=>b+1),[]),onFocusableItemRemove:T.useCallback(()=>P(b=>b-1),[]),children:p.jsx(Xe.div,{tabIndex:j||ne===0?-1:0,"data-orientation":r,...w,ref:I,style:{outline:"none",...n.style},onMouseDown:Oe(n.onMouseDown,()=>{X.current=!0}),onFocus:Oe(n.onFocus,b=>{const N=!X.current;if(b.target===b.currentTarget&&N&&!j){const O=new CustomEvent(dm,DF);if(b.currentTarget.dispatchEvent(O),!O.defaultPrevented){const L=K().filter(Se=>Se.focusable),F=L.find(Se=>Se.active),D=L.find(Se=>Se.id===C),Me=[F,D,...L].filter(Boolean).map(Se=>Se.ref.current);Eb(Me,y)}}X.current=!1}),onBlur:Oe(n.onBlur,()=>z(!1))})})}),wb="RovingFocusGroupItem",xb=T.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,children:c,...h}=n,f=Va(),m=a||f,y=jF(wb,t),w=y.currentTabStopId===m,x=yb(t),{onFocusableItemAdd:I,onFocusableItemRemove:k,currentTabStopId:C}=y;return T.useEffect(()=>{if(r)return I(),()=>k()},[r,I,k]),p.jsx(Qm.ItemSlot,{scope:t,id:m,focusable:r,active:i,children:p.jsx(Xe.span,{tabIndex:w?0:-1,"data-orientation":y.orientation,...h,ref:e,onMouseDown:Oe(n.onMouseDown,A=>{r?y.onItemFocus(m):A.preventDefault()}),onFocus:Oe(n.onFocus,()=>y.onItemFocus(m)),onKeyDown:Oe(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){y.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const j=zF(A,y.orientation,y.dir);if(j!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let $=x().filter(K=>K.focusable).map(K=>K.ref.current);if(j==="last")$.reverse();else if(j==="prev"||j==="next"){j==="prev"&&$.reverse();const K=$.indexOf(A.currentTarget);$=y.loop?BF($,K+1):$.slice(K+1)}setTimeout(()=>Eb($))}}),children:typeof c=="function"?c({isCurrentTabStop:w,hasTabStop:C!=null}):c})})});xb.displayName=wb;var FF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UF(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function zF(n,e,t){const r=UF(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return FF[r]}function Eb(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function BF(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var $F=_b,WF=xb,Ym=["Enter"," "],HF=["ArrowDown","PageUp","Home"],Tb=["ArrowUp","PageDown","End"],qF=[...HF,...Tb],GF={ltr:[...Ym,"ArrowRight"],rtl:[...Ym,"ArrowLeft"]},KF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Yc="Menu",[Nc,QF,YF]=KI(Yc),[jo,Sb]=Ps(Yc,[YF,lb,vb]),af=lb(),Ib=vb(),[XF,Vo]=jo(Yc),[JF,Xc]=jo(Yc),bb=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:a,modal:c=!0}=n,h=af(e),[f,m]=T.useState(null),y=T.useRef(!1),w=Kt(a),x=_y(i);return T.useEffect(()=>{const I=()=>{y.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>y.current=!1;return document.addEventListener("keydown",I,{capture:!0}),()=>{document.removeEventListener("keydown",I,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),p.jsx(RF,{...h,children:p.jsx(XF,{scope:e,open:t,onOpenChange:w,content:f,onContentChange:m,children:p.jsx(JF,{scope:e,onClose:T.useCallback(()=>w(!1),[w]),isUsingKeyboardRef:y,dir:x,modal:c,children:r})})})};bb.displayName=Yc;var ZF="MenuAnchor",Dy=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=af(t);return p.jsx(kF,{...i,...r,ref:e})});Dy.displayName=ZF;var Oy="MenuPortal",[e3,Cb]=jo(Oy,{forceMount:void 0}),Ab=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,a=Vo(Oy,e);return p.jsx(e3,{scope:e,forceMount:t,children:p.jsx(Un,{present:t||a.open,children:p.jsx(py,{asChild:!0,container:i,children:r})})})};Ab.displayName=Oy;var Yn="MenuContent",[t3,My]=jo(Yn),Rb=T.forwardRef((n,e)=>{const t=Cb(Yn,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=Vo(Yn,n.__scopeMenu),c=Xc(Yn,n.__scopeMenu);return p.jsx(Nc.Provider,{scope:n.__scopeMenu,children:p.jsx(Un,{present:r||a.open,children:p.jsx(Nc.Slot,{scope:n.__scopeMenu,children:c.modal?p.jsx(n3,{...i,ref:e}):p.jsx(r3,{...i,ref:e})})})})}),n3=T.forwardRef((n,e)=>{const t=Vo(Yn,n.__scopeMenu),r=T.useRef(null),i=dt(e,r);return T.useEffect(()=>{const a=r.current;if(a)return oI(a)},[]),p.jsx(Ly,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Oe(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),r3=T.forwardRef((n,e)=>{const t=Vo(Yn,n.__scopeMenu);return p.jsx(Ly,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),s3=Ka("MenuContent.ScrollLock"),Ly=T.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:h,onEntryFocus:f,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:w,onInteractOutside:x,onDismiss:I,disableOutsideScroll:k,...C}=n,A=Vo(Yn,t),j=Xc(Yn,t),z=af(t),$=Ib(t),K=QF(t),[X,ne]=T.useState(null),P=T.useRef(null),b=dt(e,P,A.onContentChange),N=T.useRef(0),O=T.useRef(""),L=T.useRef(0),F=T.useRef(null),D=T.useRef("right"),Te=T.useRef(0),Me=k?my:T.Fragment,Se=k?{as:s3,allowPinchZoom:!0}:void 0,Ie=J=>{const oe=O.current+J,B=K().filter(de=>!de.disabled),Z=document.activeElement,pe=B.find(de=>de.ref.current===Z)?.textValue,ge=B.map(de=>de.textValue),Re=g3(ge,oe,pe),Ne=B.find(de=>de.textValue===Re)?.ref.current;(function de(Ve){O.current=Ve,window.clearTimeout(N.current),Ve!==""&&(N.current=window.setTimeout(()=>de(""),1e3))})(oe),Ne&&setTimeout(()=>Ne.focus())};T.useEffect(()=>()=>window.clearTimeout(N.current),[]),XS();const W=T.useCallback(J=>D.current===F.current?.side&&v3(J,F.current?.area),[]);return p.jsx(t3,{scope:t,searchRef:O,onItemEnter:T.useCallback(J=>{W(J)&&J.preventDefault()},[W]),onItemLeave:T.useCallback(J=>{W(J)||(P.current?.focus(),ne(null))},[W]),onTriggerLeave:T.useCallback(J=>{W(J)&&J.preventDefault()},[W]),pointerGraceTimerRef:L,onPointerGraceIntentChange:T.useCallback(J=>{F.current=J},[]),children:p.jsx(Me,{...Se,children:p.jsx(fy,{asChild:!0,trapped:i,onMountAutoFocus:Oe(a,J=>{J.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:p.jsx(hy,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:m,onPointerDownOutside:y,onFocusOutside:w,onInteractOutside:x,onDismiss:I,children:p.jsx($F,{asChild:!0,...$,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:X,onCurrentTabStopIdChange:ne,onEntryFocus:Oe(f,J=>{j.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(NF,{role:"menu","aria-orientation":"vertical","data-state":Hb(A.open),"data-radix-menu-content":"",dir:j.dir,...z,...C,ref:b,style:{outline:"none",...C.style},onKeyDown:Oe(C.onKeyDown,J=>{const B=J.target.closest("[data-radix-menu-content]")===J.currentTarget,Z=J.ctrlKey||J.altKey||J.metaKey,pe=J.key.length===1;B&&(J.key==="Tab"&&J.preventDefault(),!Z&&pe&&Ie(J.key));const ge=P.current;if(J.target!==ge||!qF.includes(J.key))return;J.preventDefault();const Ne=K().filter(de=>!de.disabled).map(de=>de.ref.current);Tb.includes(J.key)&&Ne.reverse(),p3(Ne)}),onBlur:Oe(n.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(N.current),O.current="")}),onPointerMove:Oe(n.onPointerMove,Pc(J=>{const oe=J.target,B=Te.current!==J.clientX;if(J.currentTarget.contains(oe)&&B){const Z=J.clientX>Te.current?"right":"left";D.current=Z,Te.current=J.clientX}}))})})})})})})});Rb.displayName=Yn;var i3="MenuGroup",jy=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Xe.div,{role:"group",...r,ref:e})});jy.displayName=i3;var o3="MenuLabel",kb=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Xe.div,{...r,ref:e})});kb.displayName=o3;var vh="MenuItem",Cx="menu.itemSelect",lf=T.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,a=T.useRef(null),c=Xc(vh,n.__scopeMenu),h=My(vh,n.__scopeMenu),f=dt(e,a),m=T.useRef(!1),y=()=>{const w=a.current;if(!t&&w){const x=new CustomEvent(Cx,{bubbles:!0,cancelable:!0});w.addEventListener(Cx,I=>r?.(I),{once:!0}),zS(w,x),x.defaultPrevented?m.current=!1:c.onClose()}};return p.jsx(Nb,{...i,ref:f,disabled:t,onClick:Oe(n.onClick,y),onPointerDown:w=>{n.onPointerDown?.(w),m.current=!0},onPointerUp:Oe(n.onPointerUp,w=>{m.current||w.currentTarget?.click()}),onKeyDown:Oe(n.onKeyDown,w=>{const x=h.searchRef.current!=="";t||x&&w.key===" "||Ym.includes(w.key)&&(w.currentTarget.click(),w.preventDefault())})})});lf.displayName=vh;var Nb=T.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...a}=n,c=My(vh,t),h=Ib(t),f=T.useRef(null),m=dt(e,f),[y,w]=T.useState(!1),[x,I]=T.useState("");return T.useEffect(()=>{const k=f.current;k&&I((k.textContent??"").trim())},[a.children]),p.jsx(Nc.ItemSlot,{scope:t,disabled:r,textValue:i??x,children:p.jsx(WF,{asChild:!0,...h,focusable:!r,children:p.jsx(Xe.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:m,onPointerMove:Oe(n.onPointerMove,Pc(k=>{r?c.onItemLeave(k):(c.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Oe(n.onPointerLeave,Pc(k=>c.onItemLeave(k))),onFocus:Oe(n.onFocus,()=>w(!0)),onBlur:Oe(n.onBlur,()=>w(!1))})})})}),a3="MenuCheckboxItem",Pb=T.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return p.jsx(jb,{scope:n.__scopeMenu,checked:t,children:p.jsx(lf,{role:"menuitemcheckbox","aria-checked":_h(t)?"mixed":t,...i,ref:e,"data-state":Fy(t),onSelect:Oe(i.onSelect,()=>r?.(_h(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Pb.displayName=a3;var Db="MenuRadioGroup",[l3,c3]=jo(Db,{value:void 0,onValueChange:()=>{}}),Ob=T.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,a=Kt(r);return p.jsx(l3,{scope:n.__scopeMenu,value:t,onValueChange:a,children:p.jsx(jy,{...i,ref:e})})});Ob.displayName=Db;var Mb="MenuRadioItem",Lb=T.forwardRef((n,e)=>{const{value:t,...r}=n,i=c3(Mb,n.__scopeMenu),a=t===i.value;return p.jsx(jb,{scope:n.__scopeMenu,checked:a,children:p.jsx(lf,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":Fy(a),onSelect:Oe(r.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Lb.displayName=Mb;var Vy="MenuItemIndicator",[jb,u3]=jo(Vy,{checked:!1}),Vb=T.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,a=u3(Vy,t);return p.jsx(Un,{present:r||_h(a.checked)||a.checked===!0,children:p.jsx(Xe.span,{...i,ref:e,"data-state":Fy(a.checked)})})});Vb.displayName=Vy;var d3="MenuSeparator",Fb=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return p.jsx(Xe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Fb.displayName=d3;var h3="MenuArrow",Ub=T.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=af(t);return p.jsx(PF,{...i,...r,ref:e})});Ub.displayName=h3;var f3="MenuSub",[k6,zb]=jo(f3),cc="MenuSubTrigger",Bb=T.forwardRef((n,e)=>{const t=Vo(cc,n.__scopeMenu),r=Xc(cc,n.__scopeMenu),i=zb(cc,n.__scopeMenu),a=My(cc,n.__scopeMenu),c=T.useRef(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:f}=a,m={__scopeMenu:n.__scopeMenu},y=T.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return T.useEffect(()=>y,[y]),T.useEffect(()=>{const w=h.current;return()=>{window.clearTimeout(w),f(null)}},[h,f]),p.jsx(Dy,{asChild:!0,...m,children:p.jsx(Nb,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":Hb(t.open),...n,ref:Qh(e,i.onTriggerChange),onClick:w=>{n.onClick?.(w),!(n.disabled||w.defaultPrevented)&&(w.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Oe(n.onPointerMove,Pc(w=>{a.onItemEnter(w),!w.defaultPrevented&&!n.disabled&&!t.open&&!c.current&&(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),y()},100))})),onPointerLeave:Oe(n.onPointerLeave,Pc(w=>{y();const x=t.content?.getBoundingClientRect();if(x){const I=t.content?.dataset.side,k=I==="right",C=k?-5:5,A=x[k?"left":"right"],j=x[k?"right":"left"];a.onPointerGraceIntentChange({area:[{x:w.clientX+C,y:w.clientY},{x:A,y:x.top},{x:j,y:x.top},{x:j,y:x.bottom},{x:A,y:x.bottom}],side:I}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(w),w.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Oe(n.onKeyDown,w=>{const x=a.searchRef.current!=="";n.disabled||x&&w.key===" "||GF[r.dir].includes(w.key)&&(t.onOpenChange(!0),t.content?.focus(),w.preventDefault())})})})});Bb.displayName=cc;var $b="MenuSubContent",Wb=T.forwardRef((n,e)=>{const t=Cb(Yn,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,a=Vo(Yn,n.__scopeMenu),c=Xc(Yn,n.__scopeMenu),h=zb($b,n.__scopeMenu),f=T.useRef(null),m=dt(e,f);return p.jsx(Nc.Provider,{scope:n.__scopeMenu,children:p.jsx(Un,{present:r||a.open,children:p.jsx(Nc.Slot,{scope:n.__scopeMenu,children:p.jsx(Ly,{id:h.contentId,"aria-labelledby":h.triggerId,...i,ref:m,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{c.isUsingKeyboardRef.current&&f.current?.focus(),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:Oe(n.onFocusOutside,y=>{y.target!==h.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Oe(n.onEscapeKeyDown,y=>{c.onClose(),y.preventDefault()}),onKeyDown:Oe(n.onKeyDown,y=>{const w=y.currentTarget.contains(y.target),x=KF[c.dir].includes(y.key);w&&x&&(a.onOpenChange(!1),h.trigger?.focus(),y.preventDefault())})})})})})});Wb.displayName=$b;function Hb(n){return n?"open":"closed"}function _h(n){return n==="indeterminate"}function Fy(n){return _h(n)?"indeterminate":n?"checked":"unchecked"}function p3(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function m3(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function g3(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=m3(n,Math.max(a,0));i.length===1&&(c=c.filter(m=>m!==t));const f=c.find(m=>m.toLowerCase().startsWith(i.toLowerCase()));return f!==t?f:void 0}function y3(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const h=e[a],f=e[c],m=h.x,y=h.y,w=f.x,x=f.y;y>r!=x>r&&t<(w-m)*(r-y)/(x-y)+m&&(i=!i)}return i}function v3(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return y3(t,e)}function Pc(n){return e=>e.pointerType==="mouse"?n(e):void 0}var _3=bb,w3=Dy,x3=Ab,E3=Rb,T3=jy,S3=kb,I3=lf,b3=Pb,C3=Ob,A3=Lb,R3=Vb,k3=Fb,N3=Ub,P3=Bb,D3=Wb,cf="DropdownMenu",[O3]=Ps(cf,[Sb]),dn=Sb(),[M3,qb]=O3(cf),Gb=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:a,onOpenChange:c,modal:h=!0}=n,f=dn(e),m=T.useRef(null),[y,w]=Yh({prop:i,defaultProp:a??!1,onChange:c,caller:cf});return p.jsx(M3,{scope:e,triggerId:Va(),triggerRef:m,contentId:Va(),open:y,onOpenChange:w,onOpenToggle:T.useCallback(()=>w(x=>!x),[w]),modal:h,children:p.jsx(_3,{...f,open:y,onOpenChange:w,dir:r,modal:h,children:t})})};Gb.displayName=cf;var Kb="DropdownMenuTrigger",Qb=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,a=qb(Kb,t),c=dn(t);return p.jsx(w3,{asChild:!0,...c,children:p.jsx(Xe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Qh(e,a.triggerRef),onPointerDown:Oe(n.onPointerDown,h=>{!r&&h.button===0&&h.ctrlKey===!1&&(a.onOpenToggle(),a.open||h.preventDefault())}),onKeyDown:Oe(n.onKeyDown,h=>{r||(["Enter"," "].includes(h.key)&&a.onOpenToggle(),h.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault())})})})});Qb.displayName=Kb;var L3="DropdownMenuPortal",Yb=n=>{const{__scopeDropdownMenu:e,...t}=n,r=dn(e);return p.jsx(x3,{...r,...t})};Yb.displayName=L3;var Xb="DropdownMenuContent",Jb=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qb(Xb,t),a=dn(t),c=T.useRef(!1);return p.jsx(E3,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Oe(n.onCloseAutoFocus,h=>{c.current||i.triggerRef.current?.focus(),c.current=!1,h.preventDefault()}),onInteractOutside:Oe(n.onInteractOutside,h=>{const f=h.detail.originalEvent,m=f.button===0&&f.ctrlKey===!0,y=f.button===2||m;(!i.modal||y)&&(c.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jb.displayName=Xb;var j3="DropdownMenuGroup",V3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(T3,{...i,...r,ref:e})});V3.displayName=j3;var F3="DropdownMenuLabel",U3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(S3,{...i,...r,ref:e})});U3.displayName=F3;var z3="DropdownMenuItem",Zb=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(I3,{...i,...r,ref:e})});Zb.displayName=z3;var B3="DropdownMenuCheckboxItem",$3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(b3,{...i,...r,ref:e})});$3.displayName=B3;var W3="DropdownMenuRadioGroup",H3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(C3,{...i,...r,ref:e})});H3.displayName=W3;var q3="DropdownMenuRadioItem",G3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(A3,{...i,...r,ref:e})});G3.displayName=q3;var K3="DropdownMenuItemIndicator",Q3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(R3,{...i,...r,ref:e})});Q3.displayName=K3;var Y3="DropdownMenuSeparator",X3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(k3,{...i,...r,ref:e})});X3.displayName=Y3;var J3="DropdownMenuArrow",Z3=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(N3,{...i,...r,ref:e})});Z3.displayName=J3;var e6="DropdownMenuSubTrigger",t6=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(P3,{...i,...r,ref:e})});t6.displayName=e6;var n6="DropdownMenuSubContent",r6=T.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=dn(t);return p.jsx(D3,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});r6.displayName=n6;var s6=Gb,i6=Qb,o6=Yb,a6=Jb,l6=Zb;function c6({...n}){return p.jsx(s6,{"data-slot":"dropdown-menu",...n})}function u6({...n}){return p.jsx(i6,{"data-slot":"dropdown-menu-trigger",...n})}function d6({className:n,sideOffset:e=4,...t}){return p.jsx(o6,{children:p.jsx(a6,{"data-slot":"dropdown-menu-content",sideOffset:e,className:bt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function h6({className:n,inset:e,variant:t="default",...r}){return p.jsx(l6,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:bt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function f6({profile:n,onBack:e,onFollow:t,onMessage:r,onBlock:i}){const[a,c]=T.useState(n.isFollowing||!1),[h,f]=T.useState(n.isBlocked||!1),m=()=>{c(!a),t&&t()},y=()=>{f(!0),i&&i()};return h?p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:p.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:p.jsx(W0,{className:"w-5 h-5"})}),p.jsx("h2",{className:"text-xl text-white font-bold",children:"User Profile"})]}),p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-8 text-center",children:[p.jsx(H0,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg text-gray-300 mb-2",children:"User Blocked"}),p.jsx("p",{className:"text-gray-500",children:"You have blocked this user. You won't see their posts or messages."})]})})]})}):p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black pt-16",children:p.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ce,{variant:"ghost",size:"sm",onClick:e,className:"text-white hover:bg-gray-700",children:p.jsx(W0,{className:"w-5 h-5"})}),p.jsxs("h2",{className:"text-xl text-white font-bold",children:["@",n.username]})]}),p.jsxs(c6,{children:[p.jsx(u6,{asChild:!0,children:p.jsx(ce,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:p.jsx(iy,{className:"w-5 h-5"})})}),p.jsx(d6,{align:"end",className:"bg-gray-800 border-gray-700",children:p.jsxs(h6,{onClick:y,className:"text-red-400 hover:text-red-300 hover:bg-gray-700",children:[p.jsx(H0,{className:"w-4 h-4 mr-2"}),"Block User"]})})]})]}),p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"relative",children:[p.jsxs(jn,{className:"w-20 h-20 ring-2 ring-green-500",children:[p.jsx(Vn,{src:n.avatar}),p.jsx(Fn,{className:"bg-gray-700 text-white text-xl",children:n.displayName.charAt(0)})]}),p.jsx("div",{className:`absolute -bottom-2 -right-2 w-5 h-5 rounded-full border-2 border-gray-800 ${n.isOnline?"bg-green-500":"bg-gray-500"}`})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(ce,{onClick:m,className:`${a?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:[p.jsx(ay,{className:"w-4 h-4 mr-1"}),a?"Following":"Follow"]}),p.jsxs(ce,{onClick:r,variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[p.jsx(Ac,{className:"w-4 h-4 mr-1"}),"Message"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl text-white font-bold",children:n.displayName}),p.jsxs("p",{className:"text-gray-400",children:["@",n.username]})]}),n.bio&&p.jsx("p",{className:"text-gray-300 leading-relaxed",children:n.bio}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(cy,{variant:"secondary",className:"bg-gray-700 text-gray-300",children:n.isOnline?"✅ Online":"⚫ Offline"}),p.jsxs("span",{className:"text-gray-500 text-sm",children:["Joined ",n.joinDate]})]})]})]})}),p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm mb-6",children:p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.postsCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Posts"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.followersCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Followers"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-xl text-white font-bold",children:n.followingCount}),p.jsx("p",{className:"text-gray-400 text-sm",children:"Following"})]})]})})}),p.jsx(ur,{className:"bg-gray-800/50 border-gray-700 backdrop-blur-sm",children:p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-white font-medium mb-4",children:"Recent Posts"}),p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-gray-400",children:"No recent posts to show"})})]})})]})})}function Uy({className:n,...e}){return p.jsx("textarea",{"data-slot":"textarea",className:bt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}function p6({isOpen:n,onClose:e,onSubmit:t}){const[r,i]=T.useState("image"),[a,c]=T.useState(""),[h,f]=T.useState("#1f2937"),[m,y]=T.useState(""),w=["#1f2937","#7c3aed","#dc2626","#059669","#ea580c","#0891b2","#be185d","#4338ca"],x=()=>{r==="text"&&a.trim()?t(a,"text"):r==="image"&&m.trim()&&t(m,"image"),c(""),y(""),i("image"),e()},I=()=>{c(""),y(""),i("image"),e()};return p.jsx(Do,{open:n,onOpenChange:I,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md",children:[p.jsxs(Mo,{children:[p.jsx(Lo,{className:"text-center",children:"Add New Story"}),p.jsx(il,{className:"text-center text-gray-400",children:"Share a moment with your story that lasts 24 hours"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:I,className:"absolute right-4 top-4 text-gray-400 hover:text-white",children:p.jsx(Po,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex gap-2 p-4",children:[p.jsxs(ce,{variant:r==="image"?"default":"outline",onClick:()=>i("image"),className:"flex-1 flex items-center gap-2",children:[p.jsx(TS,{className:"w-4 h-4"}),"صورة"]}),p.jsxs(ce,{variant:r==="text"?"default":"outline",onClick:()=>i("text"),className:"flex-1 flex items-center gap-2",children:[p.jsx($M,{className:"w-4 h-4"}),"نص"]})]}),p.jsx("div",{className:"p-4 space-y-4",children:r==="image"?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"رابط الصورة"}),p.jsx(qt,{value:m,onChange:k=>y(k.target.value),placeholder:"أدخل رابط الصورة...",className:"bg-gray-800 border-gray-600 text-white"})]}),p.jsxs(ce,{className:"w-full flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[p.jsx(ES,{className:"w-4 h-4"}),"أو اختر من الجهاز"]}),m&&p.jsx("div",{className:"relative w-full h-48 bg-gray-800 rounded-lg overflow-hidden",children:p.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover",onError:()=>y("")})})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"محتوى النص"}),p.jsx(Uy,{value:a,onChange:k=>c(k.target.value),placeholder:"اكتب نصك هنا...",className:"bg-gray-800 border-gray-600 text-white min-h-[100px]",maxLength:200}),p.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[a.length,"/200"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"لون الخلفية"}),p.jsx("div",{className:"flex gap-2 flex-wrap",children:w.map(k=>p.jsx("button",{onClick:()=>f(k),className:`w-8 h-8 rounded-full border-2 ${h===k?"border-white":"border-gray-600"}`,style:{backgroundColor:k}},k))})]}),a&&p.jsx("div",{className:"w-full h-48 rounded-lg flex items-center justify-center p-4",style:{backgroundColor:h},children:p.jsx("p",{className:"text-white text-center text-lg leading-relaxed",children:a})})]})}),p.jsxs("div",{className:"flex gap-2 p-4",children:[p.jsx(ce,{variant:"outline",onClick:I,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",children:"إلغاء"}),p.jsx(ce,{onClick:x,disabled:r==="text"&&!a.trim()||r==="image"&&!m.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"نشر الستوري"})]})]})})}var m6="Label",eC=T.forwardRef((n,e)=>p.jsx(Xe.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));eC.displayName=m6;var g6=eC;function vs({className:n,...e}){return p.jsx(g6,{"data-slot":"label",className:bt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}var y6="Separator",Ax="horizontal",v6=["horizontal","vertical"],tC=T.forwardRef((n,e)=>{const{decorative:t,orientation:r=Ax,...i}=n,a=_6(r)?r:Ax,h=t?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return p.jsx(Xe.div,{"data-orientation":a,...h,...i,ref:e})});tC.displayName=y6;function _6(n){return v6.includes(n)}var w6=tC;function x6({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return p.jsx(w6,{"data-slot":"separator-root",decorative:t,orientation:e,className:bt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function E6({isOpen:n,onClose:e}){const[t,r]=T.useState("options"),[i,a]=T.useState(!1),[c,h]=T.useState(""),[f,m]=T.useState(""),[y,w]=T.useState(""),[x,I]=T.useState(""),[k,C]=T.useState(""),[A,j]=T.useState(""),[z,$]=T.useState(""),K=()=>{m(""),w(""),I(""),C(""),j(""),$(""),h(""),r("options")},X=O=>{const L=/^[a-zA-Z][a-zA-Z0-9_]*$/;return O.length>=2&&L.test(O)},ne=O=>{const L=/[a-zA-Z]/.test(O),F=/[0-9]/.test(O);return O.length>=8&&L&&F},P=async O=>{if(O.preventDefault(),!f.trim()||!y.trim()){h("يرجى ملء جميع الحقول");return}a(!0),h("");try{await BO(f,y)}catch(L){console.error("Login Error:",L),h("اسم المستخدم او كلمة المرور غير صحيحة")}finally{a(!1)}},b=async O=>{if(O.preventDefault(),!x.trim()||!k.trim()||!A.trim()||!z.trim()){h("يرجى ملء جميع الحقول");return}if(!X(x)){h("اسم المستخدم يجب أن يبدأ بحرف ويحتوي على حروف وأرقام انجليزية و _ فقط (حد أدنى حرفين)");return}if(!ne(k)){h("كلمة المرور يجب أن تكون 8 خانات على الأقل وتحتوي على حرف ورقم انجليزي");return}if(k!==A){h("كلمة المرور وتأكيد كلمة المرور غير متطابقتين");return}a(!0),h("");try{await zO(x,z,k)}catch(L){console.error("Registration Error:",L),h("فشل في إنشاء الحساب. قد يكون اسم المستخدم مستخدماً بالفعل.")}finally{a(!1)}},N=async()=>{a(!0),h("");try{await $O()}catch(O){console.error("Guest Login Error:",O),h("فشل في تسجيل الدخول كضيف. يرجى المحاولة مرة أخرى.")}finally{a(!1)}};return p.jsx(Do,{open:n,onOpenChange:O=>{O||(K(),e())},children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md",dir:"rtl",children:[p.jsxs(Mo,{children:[p.jsx(Lo,{className:"text-center text-xl text-green-400",children:"مرحباً بك في Dark*Chat"}),p.jsxs(il,{className:"text-center text-gray-400",children:[t==="options"&&"اختر كيف تريد الانضمام للمحادثة",t==="login"&&"سجل دخولك إلى حسابك",t==="register"&&"أنشئ حسابك الجديد"]})]}),t==="options"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs(ce,{onClick:()=>r("login"),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[p.jsx(bM,{className:"ml-2 h-4 w-4"}),"تسجيل الدخول"]}),p.jsxs(ce,{onClick:()=>r("register"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[p.jsx(ay,{className:"ml-2 h-4 w-4"}),"إنشاء حساب جديد"]}),p.jsxs("div",{className:"relative",children:[p.jsx(x6,{className:"bg-gray-600"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("span",{className:"bg-gray-900 px-2 text-gray-400 text-sm",children:"أو"})})]}),p.jsxs(ce,{onClick:N,disabled:i,className:"w-full bg-gray-700 hover:bg-gray-600 text-white border-gray-600 border",children:[p.jsx(EM,{className:"ml-2 h-4 w-4"}),i?"جاري الدخول...":"الدخول كضيف"]})]}),t==="login"&&p.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c&&p.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 p-2 rounded",children:c}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"loginUsername",className:"text-gray-300",children:"اسم المستخدم"}),p.jsx(qt,{id:"loginUsername",value:f,onChange:O=>m(O.target.value),placeholder:"اسم المستخدم",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"ltr"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"loginPassword",className:"text-gray-300",children:"كلمة المرور"}),p.jsx(qt,{id:"loginPassword",type:"password",value:y,onChange:O=>w(O.target.value),placeholder:"كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"ltr"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(ce,{type:"button",onClick:()=>r("options"),variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:i,children:[p.jsx(Um,{className:"ml-2 h-4 w-4"}),"رجوع"]}),p.jsx(ce,{type:"submit",disabled:i||!f.trim()||!y.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:i?"جاري تسجيل الدخول...":"دخول"})]})]}),t==="register"&&p.jsxs("form",{onSubmit:b,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"displayName",className:"text-gray-300",children:"الاسم الكامل"}),p.jsx(qt,{id:"displayName",value:z,onChange:O=>$(O.target.value),placeholder:"اسمك الكامل",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"rtl"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"registerUsername",className:"text-gray-300",children:"اسم المستخدم"}),p.jsx(qt,{id:"registerUsername",value:x,onChange:O=>I(O.target.value.toLowerCase()),placeholder:"username",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"ltr"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"يجب أن يبدأ بحرف، حروف وأرقام انجليزية و _ فقط"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"registerPassword",className:"text-gray-300",children:"كلمة المرور"}),p.jsx(qt,{id:"registerPassword",type:"password",value:k,onChange:O=>C(O.target.value),placeholder:"كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"ltr"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"8 خانات على الأقل، حرف ورقم انجليزي"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"confirmPassword",className:"text-gray-300",children:"تأكيد كلمة المرور"}),p.jsx(qt,{id:"confirmPassword",type:"password",value:A,onChange:O=>j(O.target.value),placeholder:"تأكيد كلمة المرور",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400",disabled:i,dir:"ltr"})]}),c&&p.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 p-2 rounded",children:c}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(ce,{type:"button",onClick:()=>r("options"),variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:i,children:[p.jsx(Um,{className:"ml-2 h-4 w-4"}),"رجوع"]}),p.jsx(ce,{type:"submit",disabled:i||!x.trim()||!k.trim()||!A.trim()||!z.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:i?"جاري الإنشاء...":"إنشاء الحساب"})]})]})]})})}function T6({isOpen:n,onClose:e,onSubmit:t}){const[r,i]=T.useState(""),[a,c]=T.useState(!1),h=async m=>{if(m.preventDefault(),!!r.trim()){c(!0);try{await t(r.trim()),i(""),e()}catch(y){console.error("Error creating post:",y)}finally{c(!1)}}},f=()=>{i(""),e()};return p.jsx(Do,{open:n,onOpenChange:f,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white max-w-md",dir:"rtl",children:[p.jsxs(Mo,{children:[p.jsx(Lo,{className:"text-center text-green-400",children:"إنشاء منشور جديد"}),p.jsx(il,{className:"text-center text-gray-400",children:"شارك ما يجري في بالك مع المجتمع"}),p.jsx(ce,{variant:"ghost",size:"sm",onClick:f,className:"absolute left-4 top-4 text-gray-400 hover:text-white",children:p.jsx(Po,{className:"w-5 h-5"})})]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Uy,{value:r,onChange:m=>i(m.target.value),placeholder:"ماذا يحدث؟",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400 min-h-[120px] resize-none",disabled:a,maxLength:500,dir:"rtl"}),p.jsxs("div",{className:"flex justify-between items-center mt-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ce,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",disabled:a,children:p.jsx(TS,{className:"w-4 h-4"})}),p.jsx(ce,{type:"button",variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",disabled:a,children:p.jsx(SS,{className:"w-4 h-4"})})]}),p.jsxs("span",{className:"text-xs text-gray-500",children:[r.length,"/500"]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ce,{type:"button",variant:"outline",onClick:f,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700",disabled:a,children:"إلغاء"}),p.jsx(ce,{type:"submit",disabled:a||!r.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:a?"جاري النشر...":"نشر"})]})]})]})})}function S6({isOpen:n,onClose:e,onSubmit:t,currentUser:r}){const[i,a]=T.useState(""),[c,h]=T.useState(""),[f,m]=T.useState(null),[y,w]=T.useState(null),[x,I]=T.useState(!1);T.useEffect(()=>{r&&(a(r.displayName||""),h(r.bio||""),w(r.avatar||null))},[r]);const k=A=>{if(A.target.files&&A.target.files[0]){const j=A.target.files[0];m(j),w(URL.createObjectURL(j))}},C=async A=>{A.preventDefault(),I(!0);const j={};i!==r.displayName&&(j.displayName=i),c!==r.bio&&(j.bio=c),f&&(j.avatar=f),await t(j),I(!1),e()};return p.jsx(Do,{open:n,onOpenChange:e,children:p.jsxs(Oo,{className:"bg-gray-900 border-gray-700 text-white",dir:"rtl",children:[p.jsxs(Mo,{children:[p.jsx(Lo,{className:"text-green-400",children:"تعديل الملف الشخصي"}),p.jsx(il,{children:"قم بتحديث معلومات ملفك الشخصي هنا."})]}),p.jsxs("form",{onSubmit:C,className:"space-y-4",children:[p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p.jsxs(jn,{className:"w-24 h-24 ring-2 ring-green-500",children:[p.jsx(Vn,{src:y||""}),p.jsx(Fn,{children:i.charAt(0)})]}),p.jsx(qt,{id:"avatar-upload",type:"file",accept:"image/*",onChange:k,className:"hidden"}),p.jsx(vs,{htmlFor:"avatar-upload",className:"cursor-pointer text-green-400 hover:underline",children:"تغيير الصورة"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"displayName",className:"text-gray-300",children:"الاسم الظاهر"}),p.jsx(qt,{id:"displayName",value:i,onChange:A=>a(A.target.value),className:"bg-gray-800 border-gray-600"})]}),p.jsxs("div",{children:[p.jsx(vs,{htmlFor:"bio",className:"text-gray-300",children:"النبذة التعريفية"}),p.jsx(Uy,{id:"bio",value:c,onChange:A=>h(A.target.value),className:"bg-gray-800 border-gray-600",rows:3})]}),p.jsxs(Nj,{children:[p.jsx(ce,{type:"button",variant:"outline",onClick:e,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"إلغاء"}),p.jsx(ce,{type:"submit",disabled:x,className:"bg-green-600 hover:bg-green-700",children:x?"جاري الحفظ...":"حفظ التغييرات"})]})]})]})})}function I6(){const[n,e]=T.useState("feed"),[t,r]=T.useState(null),[i,a]=T.useState(null),[c,h]=T.useState(!0),[f,m]=T.useState([]),[y,w]=T.useState([]),[x,I]=T.useState([]),[k,C]=T.useState([]),[A,j]=T.useState([]),[z,$]=T.useState(null),[K,X]=T.useState(null),[ne,P]=T.useState(!1),[b,N]=T.useState(0),[O,L]=T.useState(0),[F,D]=T.useState(!1),[Te,Me]=T.useState(!1),[Se,Ie]=T.useState(!1),[W,J]=T.useState(null),[oe,B]=T.useState(!1),[Z,pe]=T.useState(null),[ge,Re]=T.useState(!1);T.useEffect(()=>{const xe=WO(ke=>{r(ke),h(!1)});return()=>xe()},[]),T.useEffect(()=>{if(t){Fd(t.uid).then($e=>{$e?a($e):(console.warn("No user profile found for authenticated user. Signing out."),F0())}).catch($e=>{console.error("Error fetching user profile:",$e),F0(),a(null)});const xe=ZO(m),ke=YO(t.uid,I);return(async()=>{const $e=await Fm();w($e)})(),()=>{xe(),ke()}}else a(null),m([]),w([]),I([]),C([]),j([])},[t]);const Ne=async xe=>{if(!i)return;const ke={content:xe,userId:i.uid,username:i.username,displayName:i.displayName,avatar:i.avatar,likes:0,replies:0,likedBy:[]};await GO(ke),Me(!1)},de=async xe=>{if(!t)return;const ke=f.find(rt=>rt.id===xe);if(!ke)return;const $e=ke.likedBy.includes(t.uid)?ke.likedBy.filter(rt=>rt!==t.uid):[...ke.likedBy,t.uid];await U0(xe,{likedBy:$e,likes:$e.length})},Ve=async(xe,ke)=>{if(!i)return;const Ut={postId:xe,content:ke,userId:i.uid,username:i.username,displayName:i.displayName,avatar:i.avatar};await XO(Ut);const $e=f.find(rt=>rt.id===xe);$e&&await U0(xe,{replies:($e.replies||0)+1})},We=async(xe,ke)=>{if(!t)return;const Ut={type:ke,content:xe,backgroundColor:ke==="text"?"#1f2937":void 0};await KO(t.uid,Ut),D(!1);const $e=await Fm();w($e)},ht=async xe=>{if(!i)return;const ke={};if(xe.displayName&&(ke.displayName=xe.displayName),xe.bio&&(ke.bio=xe.bio),xe.avatar){const $e=await eM(i.uid,xe.avatar);ke.avatar=$e}Object.keys(ke).length>0&&await qO(i.uid,ke);const Ut=await Fd(i.uid);a(Ut),Re(!1)},hn=xe=>{const ke=y.findIndex(Ut=>Ut.userId===xe.userId);ke!==-1&&(N(ke),L(0),P(!0))},fn=()=>{const xe=y[b]?.stories;O<xe.length-1?L(ke=>ke+1):b<y.length-1?(N(ke=>ke+1),L(0)):P(!1)},an=()=>{if(O>0)L(xe=>xe-1);else if(b>0){const xe=b-1,ke=y[xe].stories;N(xe),L(ke.length-1)}},Ds=async xe=>{const ke=await Fd(xe);X(ke)},Fo=xe=>{xe.otherUser?$(xe.otherUser):console.error("Conversation is missing otherUser property",xe)};return c?p.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-12 h-12 border-2 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-white",children:"تحميل Dark*Chat..."})]})}):t?p.jsxs("div",{className:"min-h-screen bg-black",dir:"rtl",children:[p.jsx(V4,{currentView:n,onViewChange:e,unreadCount:x.reduce((xe,ke)=>xe+(ke.unreadCount||0),0)}),K&&p.jsx(f6,{profile:K,onBack:()=>X(null),onMessage:()=>{$(K),X(null)}}),z&&p.jsx(tV,{user:z,onBack:()=>$(null),currentUserId:t.uid}),ne&&y.length>0&&p.jsx(nV,{stories:y,currentStoryIndex:b,currentContentIndex:O,onClose:()=>P(!1),onNext:fn,onPrevious:an,onReply:(xe,ke)=>console.log("Reply to story:",xe,ke)}),p.jsx(p6,{isOpen:F,onClose:()=>D(!1),onSubmit:We}),p.jsx(T6,{isOpen:Te,onClose:()=>Me(!1),onSubmit:Ne}),p.jsx(rV,{isOpen:Se,onClose:()=>{Ie(!1),J(null),j([])},postId:W||"",comments:A,onAddComment:Ve}),p.jsx(uV,{isOpen:oe,onClose:()=>B(!1),postId:Z||"",users:[],onShare:(xe,ke,Ut)=>console.log("Share post:",xe,ke,Ut)}),i&&p.jsx(S6,{isOpen:ge,onClose:()=>Re(!1),onSubmit:ht,currentUser:i}),p.jsxs("div",{className:z||K?"hidden":"",children:[n==="feed"&&p.jsx(tL,{posts:f,stories:y,onLike:de,onReply:async xe=>{const ke=await B0(xe);j(ke),J(xe),Ie(!0)},onShare:xe=>{pe(xe),B(!0)},onStoryClick:hn,onUserClick:Ds,onAddStory:()=>D(!0),onCreatePost:()=>Me(!0),currentUserId:t?.uid,currentUser:i}),n==="messages"&&p.jsx(nL,{conversations:x,onConversationClick:Fo}),n==="likes"&&p.jsx(sL,{likedPosts:f.filter(xe=>xe.likedBy.includes(t.uid)),onUnlike:de,onReply:async xe=>{const ke=await B0(xe);j(ke),J(xe),Ie(!0)},onShare:xe=>{pe(xe),B(!0)}}),n==="profile"&&i&&p.jsx(rL,{profile:i,isOwnProfile:!0,onEditProfile:()=>Re(!0),onShareProfile:()=>console.log("Share profile clicked"),onFollow:()=>console.log("Follow clicked")})]})]}):p.jsx("div",{className:"min-h-screen bg-black",children:p.jsx(E6,{isOpen:!0,onClose:()=>{}})})}g1.createRoot(document.getElementById("root")).render(p.jsx(I6,{}));
